# DevOps Chat:整体 Kubernetes 和云原生应用安全性，使用 StackRox

> 原文：<https://devops.com/devops-chat-holistic-kubernetes-and-cloud-native-app-security-with-stackrox/>

应用程序安全性比以往任何时候都更加重要。除了安全编码实践之外，整体应用安全策略还涉及整个应用和基础设施体系。这包括容器、微服务、流程编排、基础设施软件和云。栓接下一个安全工具可能不是答案。

StackRox 首席执行官 Kamal Shah 参加了我们的 [DevOps 聊天](https://devops.com/category/devops-chat/)，深入探讨了在云原生应用甚至“Kubenative”应用的整个生命周期中对系统安全方法的需求。我们探索 Kubernetes 和云原生应用如何提供丰富的配置信息、使用可见性、运行时环境、固有的安全控制和合规性。这是一场精彩的对话，将为保护 Kubernetes 和云原生应用开辟新的途径。

像往常一样，下面是流媒体音频，然后是我们的谈话记录。

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/689692984&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/689692984&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

## 副本

米奇·阿什利:大家好，我是来自 DevOps.com 的米奇·阿什利，您正在收听的是另一个 DevOps 聊天播客。今天我邀请到了 StackRox 的首席执行官 Kamal Shah。我们今天的主题是云原生世界中的安全性。卡马尔，欢迎来到 DevOps 聊天。

Kamal Shah: 很高兴来到这里，Mitch。谢谢你邀请我。

阿什莉:嗯，我真的很感谢你从百忙之中抽出时间。我知道你很忙。很高兴你能来。你能从自我介绍开始吗？告诉我们一些关于你和你所做的事情。当然，作为首席执行官，我们可以想象，但也有一点关于 StackRox。

绝对的。再说一遍，我是卡迈勒·沙阿。我是 StackRox 的首席执行官，StackRox 是为您的云原生基础架构提供安全性和合规性解决方案的领先提供商。因此，当您踏上微服务、容器和 Kubernetes 之旅时，我们可以帮助您解决从构建到部署再到运行时的整个应用生命周期中的安全性和合规性要求。

Ashley: 这是关于安全软件的，尤其是在云原生的容器化世界中。那是肯定的。那么，告诉我们一点关于你是如何处理这个问题的？你知道，在一个当代应用程序开发的世界里，你是如何看待安全性的？Kub-native，我知道是我们喜欢谈论它的一种方式。从 StackRox 的角度来看，您如何处理这个问题？

绝对的。因此，我们在创办公司时看到的大趋势是，客户正在将其构建在传统基础架构上的整体应用程序转移到微服务和容器，因此安全性也必须发展，以满足和保护这种云原生基础架构。我们看到了为这种云原生基础架构构建一套新的解决方案的机会，因为当你真正思考传统应用程序和传统安全以及云原生应用程序和云原生安全之间的根本区别时，对吗？我的意思是你正在部署容器；然后，安全性必须确保它理解容器的短暂和不可变的本质，安全性必须向左转，为应用程序生命周期的构建和部署端提供控制和防护，而不仅仅是在运行时。

同样重要的是，安全性现在必须与 DevOps 流程、自动化和工作流无缝集成，因为如果不这样做，DevOps 机构就会拒绝——抱歉，DevOps 机构会拒绝安全机构。

**Ashley:** *【笑】*我很高兴你从两个方面谈论了它，因为 Kubernetes，containers，显然改变了软件的架构，以及我们如何在云中实现这一点。你知道，这不仅仅是锁定服务器。这实际上是应用程序安全级别，但同时我们以不同的方式创建软件。您能详细介绍一下您在云原生世界和 DevOps 中面临的一些独特挑战吗？

沙阿:对，绝对是。我指的是一个大趋势，人们谈论了很多关于微服务和容器的事情，但我想指出的另一件大事是，Kubernetes 已经成为事实上的管弦乐队标准，对吗？我们去年年底做了一项调查，六个月后又做了一次调查，我们发现使用 Kubernetes 作为 orchestrator 的组织从 57%增加到现在，使用 Kubernetes 的组织超过 86%，对吗？

阿什利:哇。

**Shah:** 因为在大型环境中扩展、管理和部署容器是非常非常困难的，而 Kubernetes 就是专门为帮助您做到这一点而构建的。它是由谷歌开发的开源系统，谷歌今天使用 Kubernetes 或 Kubernetes 的一个版本，内部版本，来管理 40 亿个容器上的 40 亿次部署。所以这里的第一件事是，你必须意识到 Kubernetes 的重要性，你必须确保安全不仅集中在容器上，而且集中在编排器上，特别是 Kubernetes，对吗？

阿什莉:当然可以。

Shah: 这本身就带来了一系列全新的挑战，因为 Kubernetes 是一个操作非常复杂的大型系统，对吗？他们刚刚进行了一次安全审计，评估团队发现 Kubernetes 的配置和部署非常重要，我可以详细说明这些挑战是什么，但首先要确保您不仅关注容器层的安全性，还关注 Kubernetes 层。

阿什莉:嗯，是不是这样。我们经常发现，即使在容器世界之外，也常常是配置问题，而不仅仅是软件本身。正如你提到的，Kubernetes 虽然很棒，但它的设置和操作非常复杂。这不是一个简单的任务。作为一名开发人员，可能需要运行一个环境，但不是在云中的多集群分布式环境中，等等，诸如此类。

Shah: 他们强调了三个重要的原因。第一个原因是某些操作控制缺失，对吗？因此，你显然必须确保了解这些是什么，并为这些控制装置设置护栏。第二，有许多组件能够将控制放在适当的位置，但默认设置令人困惑，对我来说，最重要的是我们需要区分默认可用的安全控制，这并不意味着它们在默认情况下配置安全，对吗？因此，配置错误是用户最关心的问题，在 stack rox State of Container Security 报告中，三分之二的观众表示，三分之二的受访者担心配置错误。

阿什利:我相信你的网站上甚至有那份报告或一些相关信息。我记得下载了一些。里面有一些很棒的信息。请告诉我们，从 StackRox 产品的角度来看，您是如何做到这一点的？StackRox 介入并真正帮助您解决了这些问题中的哪些部分？

沙阿:是的。所以，你知道，我们对容器和 Kubernetes 安全采取的是一种全面的方法，我们专注于确保我们的方法是容器本地的和 Kubernetes 本地的。这意味着什么呢？这意味着两件截然不同的事情。首先是确保我们捕获了 Kubernetes 中所有丰富的配置数据，并使用这些数据来处理和提高我们在产品中处理的所有用例的效率。所以让我们把漏洞管理作为一个非常简单的用例，对吗？您可以去扫描图像，并说这是所有漏洞分数为 7 或更高的图像的列表。

现在想象一下，你有数百张有漏洞的图片，你把它们交给开发者。他们会怎么做？我说，好吧，他们会把手举到空中说，“好吧，我无法接触到所有人，”这就是我们遇到 Equifax 问题的原因。但是，通过与 Kubernetes 深度集成并成为 Kubernetes 本地产品，StackRox 所做的是采取额外的步骤来说，“嘿，你知道，我们有这些带有漏洞的映像很好，这是很好的、重要的第一步，但让我们采取第二、第三和第四步来了解这些映像是否部署在你的生产环境中的任何地方？”

阿什莉:没错。

**沙阿:**对吧？如果它们在生产环境中使用，它访问的是什么数据，访问的是什么机密，网络配置是什么，是否可以公开访问，我们在运行时会看到什么行为？通过获取所有这些丰富的背景信息，我们可以为您提供环境中风险的优先列表，以便您可以首先关注最重要的风险，而不是获得一系列问题。这一点很重要——这就是 Kubernetes-native 解决方案如何帮助您确定风险优先级，这正是我们在 StackRox 所做的事情。

**Ashley:** 我只是想说，我认为这是你们产品的一个非常有价值的方面，因为很多安全团队——我甚至和主要的在线技术公司谈过，他们说，“我不需要更多的信息；我需要解决问题，对吗？告诉我要追求的最大、最重要的东西是什么，”我认为这是 StackRox 所做的很大一部分工作。

**沙阿:**正是。而且，你知道，警觉疲劳，我相信你已经听说过，是一个非常普遍的问题，在安全行业。

阿什莉:这是很好的表达方式。*【笑】*

沙阿:是的。通过利用上下文，Kubernetes 中可用的丰富上下文，您实际上可以使这些信息对您的开发团队和安全团队更具可操作性。这是一个例子。Kubernetes 本地的另一个例子是利用 Kubernetes 中的内置控件来执行策略，对吗？让我们将网络分段作为另一个使用案例，您希望在内部网络之间进行分段，以便不是每个容器都可以与每个容器通信，有两种方法。你知道，Kubernetes 有一种叫做网络策略的东西，你可以利用它们，它更具可扩展性和健壮性，可以无缝地部署在你的基础设施中，对吗？

另一种方法是部署专有防火墙，这充满了规模挑战，如果失败会产生问题，对吗？因此，一位客户再次表示，“嘿，听着，当我谈到成为 Kubernetes-native 时，我希望利用 Kubernetes 来实现它的设计目的，利用本机功能，因为它更具可扩展性和健壮性，我希望确保我的控件都在 Kubernetes 中，有一个中央位置来执行策略，而不是由多个专有工具来执行策略，”这不是方法，也不是 Kubernetes 建议的，这正是他们拥有这些内置控件的原因。这又是一个例子，你知道，作为 Kubernetes 本地人的优势，它允许本地执行你的政策。

Ashley: 嗯，我认为这是 DevOps 与组织的其他部门(DevSecOps 等)交叉的另一个地方。你知道，安全团队可能习惯于锁定服务器或大型应用程序级别，正如你提到的在 Kubernetes 环境之外锁定防火墙，这并不能真正处理所有集群、所有容器、微服务之间发生的事情。你确实强调了安全的一个重要方面，即一旦安全团队参与进来，并发现现在他们可以通过 StackRox 做到这一点。这肯定是一个巨大的优势。

**Shah:** 是的，这正是我们采取这种方法的原因，因为当我们与客户交谈时，我们发现有些安全团队关心我们在这里讨论的控制措施，还有一些平台和基础设施团队负责这些工具的操作，对吗？他们负责服务水平协议。sre 是必须操作这些容器和 Kubernetes 本地安全解决方案的人，你知道，他们只是更喜欢更适合基础架构的解决方案，而不是部署专有的第三方工具。因此，采用 Kub-native 方法也有助于协调安全和开发运维团队，我们现在看到的是 DevSecOps 的出现，它将两者结合在一起，真正负责您的应用和云原生基础架构的安全。

阿什莉:我很好奇。通常是谁主动联系你或者对 StackRox 感兴趣？是开发人员、DevOps 人员，还是 it 安全人员想出了如何与开发团队交流的方法？你认为市场会发生什么？

Shah: 是的，这是个很好的问题。我们通常会看到安全团队或安全架构师或应用程序架构师主动寻求帮助，因为他们知道他们必须解决这个问题，所以这就是最初对话的开始。我们发现，当他们涉及 DevOps 团队时，因为他们必须参与进行概念验证，甚至部署可操作的解决方案，DevOps 团队实际上更喜欢容器和 Kubernetes-native 方法，而不是专有的第三方安全工具，因为他们经常将专有工具称为根工具包，他们不想安装在他们的基础架构中，对吗？事实也是如此——你必须同时面对两种受众。

您必须确保涵盖安全团队关心的所有使用情形，还必须确保产品的日常运营与您的开发运维团队、他们的流程和工作流保持一致。

阿什利:我不得不相信这对安全团队来说是一大优势。这不是他们附加到网络上的另一个安全工具。它内置于 Kubernetes 中，并通过 Kubernetes 和 StackRox 进行管理。它也是应用程序基础架构的原生部分，而不是他们必须集成的部分或另一个需要关注的工具。虽然这是一个复杂的话题，但看起来简单多了，实施和管理起来也更简单。

绝对的。我是说你说得很对。这是内置的安全性与附加的安全性的对比，如果您考虑一下安全行业的发展方向，就会发现安全就是代码，对吗？您将它构建到您的应用程序中。人们将基础设施称为代码，这是我们在过去五年中一直在做的事情，现在我们正转向将安全性视为代码，这为我们提供了一个独特的机会，从一开始就解决安全性问题，并永远改变对我们有利的安全等式。

阿什莉:我很好奇。当我们谈论安全性左移时，我认为捆绑在其中的，实际上也是左移的，是审计和法规遵从性。关于 Kub-native 环境，是否也有一些东西可以帮助我们做到这一点，即安全性的审计和法规遵从性方面？

沙阿:是的。绝对的。当我们考虑合规性和左移时，您需要确保您的互联网安全基准中心涵盖您的容器和 Kubernetes 中的 orchestrator。如果您正在进行任何类型的 PCI、HIPAA 或 NIST 800-190 合规性控制，您希望确保不仅将它们扩展到您的容器，而且还扩展到 Kubernetes 中的 orchestrator。整个左移运动是，如果我能在早期发现问题，并阻止它在我的环境中部署，这比在我的环境中部署它，然后在出现问题时发现它要有效 100 倍，对吗？所以越早——它越具有预防性，而不是，嘿，我们要检测它——让任何东西在环境中运行；我们会发现所有发生的坏事。

你知道，我们都知道这是无效的。你必须有预防性的解决方案，你必须有适当的护栏来加固你的环境，这样你就减少了出错的机会。也就是说，您还需要运行时的能力，所以尽管您尽了最大努力，当事情确实出错时，您仍然可以发现它们并防止任何损害的发生。

**Ashley:** 嗯，这是整个可观察性跟踪到微服务等等，了解环境中正在发生什么。首先，您必须知道环境是什么，并将其与数据联系起来。

**沙阿:**正是。我认为我们将要看到的是日志、度量和跟踪，正如你指出的那样，形成可观察性；同样，您知道，安全性只是硬币的另一面，对吗？因此，可观察性和安全性是密切相关的。我们正在做的是利用节点级和集群级的所有丰富信息，并利用这些信息在整个生命周期中保护您的应用程序。

阿什利:优秀。嗯，我们的时间快结束了。最后一个想法。当客户开始使用 StackRox 并看到您的技术以及它能为他们做些什么时，您在与客户合作时有没有观察到某种最佳实践或其他东西？当他们走开的时候说，“哇，这真的帮助了我，我已经解决了下面的问题，或者知道下面的问题让我避免了很多问题”，这是什么意思？

沙阿:是的。所以，你知道，在我们 www.StackRox.com 的网站上有很多很好的资源，我们谈论了很多关于错误配置的问题，我们强调了一些最佳实践。例如，确保使用只读根文件系统，对吗？因为这是对试图在您的基础架构中获得立足点的非常有力的缓解，对手的工作变得更加困难。或者最小化图像内容，因为许多文件系统通常包含 bash 或包管理器，这进一步使攻击者能够做坏事，因此删除所有不必要的二进制文件或注意您的 Kubernetes RBAC 配置。

为什么？因为 Kubernetes API 是一个关键的攻击面。它控制您的群集中发生的事情，控制您的群集中有哪些安全配置，因此，如果您最大限度地减少谁可以访问它阻止的 Kubernetes API，它会再次强化您的环境，并升级到最新版本，因为 Kubernetes 社区不断添加越来越多的安全控制，他们不断解决发现的漏洞，因此，在最新版本的 Kubernetes 上运行也是保护您的 Kubernetes 环境的重要一步。所以，还有很多其他的最佳实践，我称之为唾手可得的成果，我们已经在一些博客上提出来了，这与您是否使用 StackRox 无关，对吗？这些只是在您踏上容器和 Kubernetes 之旅时的一些好的最佳实践。

阿什利:你的确有一个很棒的博客，我当然会向我们的听众推荐。嗯，和你谈话很愉快。卡迈勒，谢谢你上播客。

Shah: Mitch，非常感谢你邀请我。

阿什莉:这绝对是我的荣幸。所以我要感谢 StackRox 的首席执行官 Kamal Shah 今天加入我们。当然，你已经收听了另一个 DevOps 聊天播客，当然，我也想感谢我们的听众今天加入我们。我是米奇·阿什利和 DevOps.com。谢谢你加入我们。在外面要小心。

— [米切尔·阿什利](https://devops.com/author/mitchellashley/)