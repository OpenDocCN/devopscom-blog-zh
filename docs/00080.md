# 我的德文普斯之旅

> 原文:[https://devops.com/my-journey-into-devops/](https://devops.com/my-journey-into-devops/)

像许多开发人员一样，我在基于瀑布的开发环境中开始了我的职业生涯。我在一家非常大的电信公司工作，从事一个已经存在了几十年的产品。在编写任何代码之前，我们会在需求阶段花费数周或数月的时间。在开发期结束后，我们会把代码扔到墙上，QA 会把需要几周时间进行优先排序和分类的缺陷归档。大约花了一年时间才推出这款产品的新版本。所有的进展都很缓慢，我觉得与客户的联系如此之少，以至于我会忘记他们的存在——我所做的工作是让项目经理不再烦我，而不是取悦用户。

转移到实践敏捷开发的创业公司是一种解脱。不太成熟的产品，每个层次都有聪明人的贡献，快速的开发——还有快速的反馈循环。这种感觉是如此自然和正确，以至于我忘记了还有另外一种构建软件的方式。我们与真正的客户交谈，了解他们希望产品如何工作。我们的优先级是基于实际需求的，评估是基于现实的，并且关注于功能的迭代改进。我的团队设计并实现了一些特性，并且很快就被测试和接受了…软件开发再次令人激动。

然而，它并不完美。虽然我们可以快速构建功能，并获得正确的功能，但我们仍然面临着将这些功能快速提供给客户的问题。我们可以在几天内设计、实现和测试伟大的功能，但是伟大的东西会在货架上搁置几周甚至几个月，直到有人真正使用它。

问题是这样的:我们担心会破坏工作生产环境。每次我们推进工作系统时，我们会在周末召集运营团队和高级开发人员，在新代码启动时紧张地坐着，然后花几个小时修复不知何故悄悄进入的东西。有时，不同新功能之间的交互没有经过适当的审核。几个月的变化累积起来，所以变化是巨大的，部署是一场噩梦。因为这是一场噩梦，我们不想经常这样做…所以随着时间的推移，发行版本越来越大。这是一个恶性循环。

我相信你知道这是怎么回事，这个问题的答案是持续部署。随着时间的推移，我们将几个月的发布周期减少到每周，最后是每天。最痛苦的事情，我们做得更多——解决问题和自动化流程。通过更频繁和更小规模的发布，如果出现问题，我们能够清楚地知道发生了什么变化，通过隔离代码变化，我们开始更快地修复问题。经典的持续部署案例。

当然，这并不容易。例如，我们努力将必要的密钥自动分发到远程系统——否则每个部署(以及受该部署影响的单个机器)都需要亲自操作。我们还努力获得回滚的能力，为不可避免的“坏发布”做准备。我们尝试从存储库中标记的分支重新部署代码，但是它太慢了，导致了几分钟的停机时间。最终，我们复制了几乎整个基础设施，以便构建一个“”蓝绿色环境，让我们像重新定位负载平衡器一样轻松地切换回上一次已知的良好状态。

在进行这种转变的过程中——在带来部署痛苦的过程中——我们的开发团队需要完成许多传统上可操作的任务。我们设置了反映我们生产环境的服务器。我们了解到它们需要是可复制的，因此我们与运营专家合作，制造可以从脚本中启动并毫不费力地部署到任何环境中的服务器。我们感受到了手动安装和更新产品的痛苦，所以我们简化了它，强化了它，自动化了它——我们尽一切努力让我们生活的这一部分变得简单。我们亲身体会到了需要手动进行更改以指向正确的数据库并通过 cron 作业滚动日志的丑陋，所以我们将这些事情配置成可配置的。我们发现了使我们的产品在生产中难以维护和管理的工程假设和设计决策。我们有机地发展成为一个 DevOps 组织。我们学会了管理服务器和承担运营任务，并且我们改进了流程以简化这些任务。

回想起来，这很自然——就像从瀑布式过渡到敏捷一样。对我来说，这就是软件应该被创造的方式。敏捷允许我们快速发现和开发客户真正想要的产品。DevOps 扩展了这一概念，教会我们如何更快地将产品送到客户手中，以及如何最有效地维护和支持该产品。

我很高兴能在 DevOps 工作，无法想象还能回去。