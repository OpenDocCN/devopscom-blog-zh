# DevOps，干旱和气候| Meta❤️PTP

> 原文:[https://devo PS . com/devo PS-干旱-气候-meta-ptp-richixbw/](https://devops.com/devops-drought-climate-meta-ptp-richixbw/)

欢迎来到[![](../Images/c588e0bb815ee95925512abab019f464.png)](https://devops.com/tag/the-long-view/)*——在这里我们细读本周新闻，并将其剥离至要点。让我们弄清楚**什么是真正重要的**。*

*本周:数据中心导致气候变化，Meta 推出精确时间协议。*

 *## 1.做 DevOps 温暖地球

本周的第一条新闻是:数据中心让干旱情况变得更糟。弗吉尼亚理工大学教授 T1 如是说

### 分析:便宜的冷却器浪费水

我们都知道高耗能的基础设施是一个令人担忧的问题。但气候变化正在导致干旱，这正在成为水资源紧张地区的数据中心的一个问题。一个关键是使用不蒸发水的冷却器设计，但讽刺的是这些冷却器使用更多的能量。

[Diana Olick](https://www.cnbc.com/2022/11/15/microsoft-meta-others-face-rising-drought-risk-to-their-data-centers.html "read the full text") : **微软、Meta 和其他公司的数据中心面临着越来越大的干旱风险**

<big>**`In ‘severe’ drought`**</big>
美国的干旱状况正在恶化，这对产生大量热量的数据中心产生了巨大的影响。…水是最便宜也是最常用的冷却方法。据弗吉尼亚理工大学的研究人员称，仅在一天内，普通的数据中心就可以使用 30 万加仑的水来冷却自己——相当于 10 万个家庭的用水量。…意识到新墨西哥州的水风险后，Meta …在其 Los Lunas 数据中心运行了一个试点项目，将相对湿度从 20%降至 13%，从而降低了水消耗。此后，该公司在其所有[数据]中心实施了这一技术。全国一半以上的地区处于干旱状态，而美国 48 个州中超过 60%的地区处于干旱状态。…比一个月前增加了 9%。西部和中西部的大部分地区正处于“严重”干旱中。

[大卫·伦布](https://www.cnet.com/tech/features/internet-outages-could-spread-as-temperatures-rise-heres-what-big-tech-is-doing/ "read the full text") : **随着气温上升，网络中断可能会蔓延**

<big>**`Water is projected to get scarcer`**</big>
2022 年预计将成为有记录以来第六热的一年，平均气温将比 20 世纪的平均气温高出 1.57 摄氏度。我们正在逐步使每年的温度上升正常化。…而且情况可能会变得更糟。随着我们的世界变暖，停电和缺水已经肆虐了这个星球的许多地方。数据中心可能是最先感受到压力的。他们需要大量能源来维持服务器的供电，还需要空调和水来冷却服务器。…随着气候变化威胁到能源供应，Big Tech 采用了更可持续的策略。这些措施包括将更多的能源依赖转向太阳能和风能等可再生能源……回收更多的水，并尝试其他冷却方式。
…
由于美国五分之一的数据中心从供水压力中等到高度紧张的地区获得用水…美国城市已经开始紧张了。[而且]水资源预计会越来越少。但是，当你还需要尽可能靠近你所服务的客户时，干旱是难以避免的。

马嘴？弗吉尼亚理工大学助理教授[兰登·马斯顿](https://vtx.vt.edu/articles/2022/01/Datacenters.html "read the full text"):

生产所需的电力需要大量的水，这意味着数据中心通过其大量的电力需求间接使用大量的水。…在确定新数据中心的位置时…除了基础设施、监管、劳动力、客户接近度和税收考虑之外，讨论中还应包括环境考虑。

这些数据中心到底是如何用水的？[啊啊啊啊](https://hardware.slashdot.org/comments.pl?sid=22419021&cid=63065691 "read the full text")解释:

水的使用来自冷却塔中的蒸发，加上水蒸发时减少冷凝器水中悬浮固体所需的排污。有一些技术可以减少排放…但是它有能量损失。

您还可以设计系统，使您仅在室外温度超过 100 华氏度时使用蒸发冷却模式，其余时间使用干式冷却模式。这两项改变都是通过增加用电量来减少用水量。

听起来好像是为了钱。Ohhh， [u/E_Snap](https://www.reddit.com/r/technology/comments/ywmpaa/comment/iwme4dq/ "read the full text") :

和加州种植杏仁和鳄梨的农民做的一样。他们已经让政府相信，给他们尽可能多的免费水比在家冲厕所更重要。

但是[beeboopbeep](https://hardware.slashdot.org/comments.pl?sid=22419021&cid=63066463 "read the full text")的想法忽略了延迟:

我不知道他们为什么不在中西部——这个星球上最大的水源——建立数据输入，而只是在冬天免费冷却水时通过外部免费冷却来运行水。只要水源没有被污染，重新引入原来的水源，就可以了。

* * *

## 2.Meta 的精确时间协议—为什么？

精确时间协议(PTP)是电信的事情，对不对？为什么 Meta 关心将它推广到所有的基础设施？传统的 NTP 一定足够准确吗？

### 分析:最终的一致性需要精确的性能时间

事实证明，Meta 通过减少节点时钟之间的差异来获得更好的性能。等待数据库一致性需要填补预期时间误差的暂停。提高精度对性能有**的巨大影响。**

[塞巴斯蒂安·莫斯](https://www.datacenterdynamics.com/en/news/meta-to-deploy-new-network-timing-protocol-precision-time-protocol/ "read the full text") : **Meta 部署新的网络定时协议**

<big>**`Uses hardware timestamping and transparent clocks`**</big>
网络时间协议(NTP)允许精度在毫秒以内，而 PTP 允许精度在纳秒以内。…服务器需要保持准确和协调的时间。PTP 实际上是在 2002 年首次部署的。Stratum 网络计算机保存当前时间，并通过网络数据包向网络上询问时间的任何其他计算机发送时间参考。[但是]延迟影响了系统被告知时间的速度。
…
PTP 分别使用硬件时间戳和透明时钟来提高一致性和对称性。…随着网络过渡到 5G 连接，PTP 已经受到电信行业的推动，因为它增加的精确度和准确性对于更高的 5G 带宽是必要的。

奥列格·奥布列霍夫和阿默德·比亚戈维撕开了幕布:

[PTP]让我们能够同步系统，将我们的产品和服务降至纳秒精度。PTP 的前身网络时间协议(NTP)为我们提供了毫秒级的精度，但随着我们规模的扩大……我们需要确保我们的服务器尽可能精确地记录时间……为世界各地不同时区的每个人记录时间。
…
想象一个场景，一个客户端写入数据，然后立即尝试读取它。在大型分布式系统中，写入和读取很有可能会在不同的后端节点上进行。…通过在后端和副本上添加精确可靠的时间戳，我们可以一直等到副本跟上。……有人可能会说，我们真的不需要 PTP 来做这件事。NTP 会做得很好。…但是，我们对最新的 NTP 实施和早期版本的 PTP 进行了对比实验，结果显示性能相差约 100 倍。
…
还有几个额外的用例，包括事件跟踪、缓存失效、隐私侵犯检测改进、延迟补偿…以及 AI 中的同时执行，其中许多将大大降低硬件容量需求。这将让我们在未来几年都很忙。

其他消息，世界投票决定停止添加闰秒。这让《霍伊特》回想起:

2015 年，我在一家“金融科技”公司工作，闰秒宣布了。…当以前的闰秒被应用时，我们的一些 Linux 服务器由于某种原因出现了内核崩溃，所以不用说，每个人都非常担心在交易期间发生闰秒。
…
我在实验室里呆了一个月，通过为我们所有不同的应用程序快进时钟来模拟闰秒，测试不同的 NTP 实施。…我与我们的合作伙伴开了很多次会，试图弄清楚他们的计划是什么…并测试如果他们的时钟倒退会发生什么。我不得不学习如何将闰秒文件安装到一堆我从来不知道存在的软件中，编写各种恢复脚本，并且一度深入 ntpd 和 Solaris 内核代码。
……
在预定的前一天，整个交易世界同意在闰秒之前/之后暂停市场 15 分钟，所以我所有的工作都白费了。我不知道这有什么寓意。

* * *

## 这个故事的寓意:
**生活不是一个需要解决的问题，而是一个需要经历的现实**

*—索伦·克尔凯郭尔*

*你一直在读*里奇·詹宁斯[的《远景](https://www.richi.uk/)*》。你可以通过 [@RiCHi](https://twitter.com/richi) 或者 [【邮箱保护】](/cdn-cgi/l/email-protection#9febf3e9dfedf6fcf7f6b1fcf0b1eaf4a0eceafdf5fafceba2b2cbd3c9b2) 联系他。*

图片:[约万·瓦西尔耶维奇](https://unsplash.com/photos/jRfgoqGfj5U)(via[Unsplash](https://unsplash.com/license "Some rights reserved")；平整和裁剪)*