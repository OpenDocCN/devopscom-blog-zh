# 缩小重要的持续交付指标的差距

> 原文:[https://devo PS . com/closing-gap-continuous-delivery-metrics-matter/](https://devops.com/closing-gap-continuous-delivery-metrics-matter/)

管理大师彼得·德鲁克曾经说过，“如果你不能衡量它，你就不能改进它。”我会退一步说，如果你不能测量它，你就不能让它离开地面。我工作的许多公司都处于数字化转型计划中，如采用 DevOps 和连续交付。为了让这些计划在他们的组织中获得动力和接受度，他们必须能够快速实现价值，否则就有被边缘化的风险。然后，这些组织必须能够实现他们的转型并改进他们的流程——这两者都由正确的指标来实现。

事实上，DevOps 文化的核心支柱之一——可以追溯到 2010 年第一届 DevOpsDays 活动——是*测量*。它是 CAMS 中的 M(文化、自动化、测量、共享)的缩写，由[达蒙·爱德华兹和约翰·威利斯](http://itrevolution.com/devops-culture-part-1/)创造。

## 连续交付指标定义中的明显差距

尽管度量在 DevOps 世界中占有突出的位置，但是在普通文献中并没有太多关于度量的指导。例如，Jez Humble 和 David Farley 所著的《[连续交付](https://books.google.com/books?id=6ADDuzere-YC)》一书，500 页中大概有 12 页是关于它的。Gene Kim 等人最近的“ [DevOps 手册](https://books.google.com/books?id=XrQcrgEACAAJ&dq=devops+handbook+gene+kim&hl=en&sa=X&ved=0ahUKEwjgr5669OfQAhXLx1QKHc8YBigQ6AEINDAA)”也是这个主题。

围绕度量和指标的覆盖差距主要是由这样一个事实驱动的，即 DevOps 空间是新的，并且很少有标准可以用来构建易于记录的指标结构。这给从业者带来了一个挑战，那就是创造一些他们可以在自己的组织中实际使用的东西。任何为他们的组织构建度量系统的人必须对度量作为一门学科有合理的理解，并且对他们打算度量的过程有很好的理解。

## 回到测量基础

在最近的 CA World’16 的[会议上，我讨论了两种度量标准，它们在度量复杂的企业流程时非常重要。](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0ahUKEwiNv5KY-OfQAhWqrlQKHSTTAU8QFgghMAE&url=http%3A%2F%2Fwww.slideshare.net%2FCAinc%2Ftech-talk-the-continuous-delivery-metrics-that-will-make-your-pipeline-fast-and-your-apps-better&usg=AFQjCNGl8ic0_ego12JIlM2loU1RjVDI8Q&sig2=HwL6yyYFC0t-pRW1mtCnrg&bvm=bv.141320020,d.cGw)

*   **结果指标**与一系列活动的累积结果有关。例如，公司的收入或净收入将是常见的经典结果指标。
*   **绩效指标**衡量个人活动的表现。这些通常更难定义，因为它们可能因业务和团队而异，并被孤岛所掩盖。

性能和结果度量是紧密联系的:性能度量测量驱动结果度量的活动的有效性。例如，衡量每个销售人员在每个时期达成的平均交易数量是衡量销售组织效率的一种方法(一种绩效指标)，这反过来又是推动收入的一个因素(一种结果指标)。

虽然 DevOps 文献通常不提供关于指标的大量细节，但它确实提供了关于关键结果指标的建议。首要问题是交付时间。交付周期是源于精益制造的一种强有力的衡量方法。它最初处理的是一家公司收到订单后需要多长时间将产品交付给客户。在 DevOps 术语中，交付周期总结了从商业想法到在生产中运行软件，交付一个单一的变更或特性所花费的时间。

交付周期的计算方法是，将变更的工作时间(称为周期时间)加上变更正在进行中但尚未进行的时间(称为等待时间)。提前期=周期时间+等待时间的公式是理解结果度量水平的有力工具；然而，大多数企业面临的挑战是找出一个可行的支持性能指标的系统。

## 价值流图揭示绩效指标

您会发现，工作的结果度量部分——计算应用程序变更的交付时间——是相对简单的，即使公司结构可能会模糊工作发生的确切时间(周期时间)和事情等待的时间(等待时间)。精益制造世界提供了分析流程的技术。

一种常见的技术被称为价值流图(VSM)。VSM 为将复杂的流程分解为可识别的“步骤”提供指导，从而在整个流程中提供周期时间和等待时间的测量点。然后，度量点提供了里程碑，用于跟踪单个变更或特性从商业想法到产品使用的过程。

例如，在企业应用程序开发的情况下，典型的应用程序交付管道提供了几个逻辑点，可以用作 VSM 的步骤。使用这些点，很容易测量整个过程的线性时间。常见的逻辑测量点有:

*   **组装(又名开发)**:组装一个配置包(代码、数据库、基础设施和网络)所需的时间，团队将它声明为包含变更的应用程序的实例
*   **每个流水线阶段花费的时间:**在各种 QA 环境中花费的时间，比如集成、功能、性能、UAT 等。，最后将配置包放到生产环境中。
*   **升级决策花费的时间:**等待将配置包的给定版本升级到更高环境或在验证阶段结束时拒绝它的决策所花费的时间。

然而，决定如何有效利用周期时间和等待时间的性能指标却不太明显。软件开发本质上是迭代的。这意味着价值流中的单个步骤将会重复很多次，而周期和等待时间指标最终将会掩盖测量点所发生的质量，这是由于聚集和平均价值的自然趋势。

## 持续交付的绩效指标

为连续交付管道建立性能指标需要一些分析。性能指标必须适合于理解如何减少每次重复的周期时间以及在交付管道中的每个测量点的总重复次数。下面是一个实用的两部分模式，你可以遵循:

**第一部分**是将管道的迭代部分分解成逻辑“迷你”价值流。例如，每个 QA 环境都必须被供应、配置、部署变更，然后进行验证活动。这些步骤可以提供测量点，更有趣的是，可以在管道中的所有环境中对称地使用，从而可以提出诸如“一个步骤相对于其他步骤花费的时间不成比例吗？”

**第二部分**是看推动长时间重复或增加重复次数的定性项目。比如一个配置包要经过多少环境才会被拒绝？越多实际上可能越贵，越慢，并且可能指示需求问题，而越少可能指示代码质量问题。另一个例子可能是每个环境中的冒烟测试失败率。一个环境中的差异可能表明配置管理或部署自动化中存在问题，但需要重复部署或手动纠正。找到问题并解决它可以确保该步骤和阶段有更好的周期时间，并有助于缩短交付周期。

## 最终目标:展示商业价值

DevOps 运动要在度量系统上达成共识可能还需要很长时间。软件环境和行业需求的可变性意味着不可能有一种尺寸适合所有人。然而，通过务实的方法和从精益制造世界中获得的一些经验，为企业中的连续交付管道产生一个可行且有效的度量系统是可能的。

我的雇主 CA Technologies 等供应商正在通过构建更加集成的[管道管理工具](http://www.ca.com/us/why-ca/continuous-delivery.html)系统来提供帮助，以帮助从仅仅报告指标转变为使用现代分析驱动的技术来应用它们。这些方法和工具改进的好处是，更容易清楚地了解您的过程，并向业务部门证明 DevOps 计划实际上是值得努力和投资的。

丹·曾格拉夫