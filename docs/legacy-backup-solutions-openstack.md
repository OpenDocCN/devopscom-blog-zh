# 为什么传统备份解决方案不适合 OpenStack

> 原文：<https://devops.com/legacy-backup-solutions-openstack/>

我们的团队最近刚从奥斯汀的 [OpenStack 峰会回来。虽然有许多热门话题，但我们发现人们在谈到备份和恢复时分成两个阵营:理解为什么需要本机 OpenStack 解决方案的人，以及质疑为什么传统备份和恢复不符合要求的人。](http://www.triliodata.com/openstack-summit-austin-2016-key-takeaways/)

我与 Trilio Data 的联合创始人 Murali Balcha 坐在一起，详细讨论了为什么传统的备份和恢复解决方案在没有大量更新的情况下不适合保护 OpenStack 应用程序。即便如此，这些解决方案自然也不适合 OpenStack 运营模式，并且会显著增加您的总拥有成本(TCO)。

首先，我们来看看 OpenStack 的运营模式。它包括:

### 水平比例尺

OpenStack 没有提供它可以扩展到的最大容量。该架构本质上是可扩展的，没有任何理论界限；它可以部署在单个机箱中，也可以扩展到数千个节点。

相比之下，现有的备份解决方案总是有一些预定义的容量，无论是它可以备份的应用程序数量，还是它可以管理的备份存储容量。因此，本质上，您拥有一个永远可扩展的体系结构，与容量有限的备份解决方案相关联。

### 多租户

多租户是 OpenStack 云不可或缺的一部分。租用不同于在备份应用程序中支持多个 active directory 用户。活动目录用户通常是操作系统用户，而云租户通常代表较大组织中的单个组织单位。因此，现有备份解决方案的创建方式与 OpenStack 多租户的工作方式不匹配。

让现有解决方案与 OpenStack 一起工作的一种方法是为每个租户部署一个备份应用程序，并让该租户负责管理自己的备份应用程序实例。这意味着每个租户都必须管理应用程序和为保存备份映像而调配的任何存储。

### 自助服务门户

一些备份应用程序提供了自助服务门户的一个方面，供个人用户管理他们自己的备份策略。备份应用程序使用虚拟机或服务器上的主机代理来备份文件，并提供一个门户来通过其代理基础架构就地恢复备份副本。这种自助服务门户再次与 OpenStack 自助服务门户形成对比，它提供了调配虚拟资源的能力。

### 文件级备份

现有的备份解决方案只擅长进行文件级备份。是的，他们已经发展到为 VMware 执行虚拟机(VM)备份，但 vCenter 不是云平台，在 VMware 平台上执行虚拟机备份的机制与在 OpenStack 中执行虚拟机备份完全不同。任何试图改造 OpenStack 现有备份解决方案的人都只能依靠他们的文件级备份功能。

文件级备份仅备份应用程序的部分内容。文件级备份是备份纵向扩展系统的遗产，在纵向扩展系统中，大型数据库被限制在一台增强的单台主机上。但是云应用更加分散。云应用被部署为多个虚拟机，每个虚拟机执行独立的功能，而不是配置一个增强的服务器来托管大型数据库。这些应用程序中的数据也分布到多个虚拟机。文件级备份不能确保一致的备份。众所周知，它们不足以恢复整个应用程序环境，并且可能会严重影响您的恢复时间。

### 基础架构感知型备份解决方案

文件级备份不太适合满足云应用程序的需求。相反，能够感知云基础架构的备份应用程序为您的云应用程序提供了完美的解决方案。由于云应用程序是分布式的，因此您的备份不仅应该包括数据，还应该包括应用程序上下文，以便成功恢复应用程序。

应用程序上下文包括虚拟机、虚拟机类型、网络设置以及连接到这些虚拟机的所有卷。让我们不要忘记，所有上述将被调整，并将随着时间的推移演变，以适应那个时刻。因此，只有能够提供包含所有虚拟机、映射到每个虚拟机的存储卷、网络设置以及与每个虚拟机及其资源相关联的元数据的单一快照的备份解决方案，才适合 OpenStack 备份需求。由于此类备份解决方案捕获整个应用程序环境，因此无论应用程序的规模和复杂性如何，此备份解决方案的恢复都非常确定和可靠。

了解基础架构的解决方案还可以将应用程序备份到一个可用性分区/区域，并恢复到不同的分区/区域。除了恢复速度之外，它现在还通过资源管理功能增强了数据保护(或备份)能力。

### DevOps

DevOps 是 OpenStack 云部署和管理不可或缺的一部分。您选择的备份解决方案应该与您的云开发运维脚本相结合。例如，如果您基于可行的行动手册来管理您的云部署，备份应用程序应该在您的开发运维战略中发挥作用，这样您就可以降低备份应用程序的总体拥有成本。

### 其他使用案例

在传统 IT 中，备份和恢复、灾难恢复和应用程序迁移等数据管理功能需要不同的应用程序。然而，您的 OpenStack 备份解决方案应该不仅仅是文件的备份和恢复。针对 OpenStack 精心设计的备份解决方案是从某个时间点开始的重新编排，应该能够提供额外的使用情形，例如:

1.  文件恢复
2.  虚拟机/卷恢复
3.  云内/云间应用迁移
4.  灾难恢复
5.  应用程序有效性检查、网络扫描仪和其他取证的即时时间点恢复
6.  档案的
7.  云升级期间的环境恢复

OpenStack 提供了一种运营模式，保证了围绕备份解决方案的全新思维。改造现有解决方案不仅不足以保护您的应用程序，还会增加您的总体拥有成本。因此，请帮自己一个忙，寻找专为 OpenStack 构建的解决方案。这将提供尽可能最好的数据保护，降低您的总体拥有成本并简化恢复。