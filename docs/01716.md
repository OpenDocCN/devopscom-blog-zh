# “连续”幻觉

> 原文:[https://devops.com/the-continuous-illusion/](https://devops.com/the-continuous-illusion/)

连续交货是一种假象。这并不意味着它是虚幻的——幻想可以产生巨大的影响。就像第一部电影一样:火车头给第一批观众的感觉如此真实，以至于他们尖叫着从椅子上摔了下来。但是当然，火车头只是一个幻觉，仅仅是在屏幕上匆匆而过。

一个好的魔术师，就像一个好的发明家一样，会告诉你一个强大的幻觉的秘密是在一个好主意的基础上努力工作。事实上，优秀的魔术师和有灵感的技术专家有很多共同点。每个人都一直在寻找下一个大的洞察力，变革的角度，建立在现有的行业技术上，创造出更伟大的东西。但是每个人都知道真正让观众惊叹的秘密，无论是一场只有一晚的演出，还是一段持续的关系。真正完成工作的是庞大、复杂、来之不易的幕后机器。

如今，制作优秀应用程序的第一个魔术，一个遍及每个行业的指令，是持续交付。现在，持续交付提供了那种*哇*。它将应用程序更新从客户的绊脚石转变为无缝优势。从“也许一年后”到“明天够快了吗？”需要特性交付它允许开发团队挥舞他们的魔棒，把不可能变成毫不费力。

当然，持续交付是一种错觉。还记得电影《火车头》吗？它运动的每一瞬间都是它自己的一个小电影画面。真正神奇的是将每一帧结合在一起的过程，以完美的时机将它们呈现在屏幕上。

持续交付是完全相同的一种幻觉。源源不断的新功能、新功能和错误修复必须由一大群才华横溢的开发人员一个接一个地创造出来——这与成千上万名才华横溢的模版印刷工人不同，他们首先将色彩带入了电影。这一过程的真正核心是支持这支军队的自动化系统，它确保将产品协调地交付给最终用户。

连续交付的核心是自动化测试和部署的机制。持续交付背后的方法鼓励团队在短周期内生产软件，确保软件可以在任何时候可靠地发布。为了使这些版本可靠，持续测试被集成到软件交付管道中，以便对更新可能产生的任何错误进行即时反馈。然后，当一个提议的变更通过了自动化测试，它将被自动部署到生产中。这个软件开发生命周期(SDLC)允许公司实现真正响应性开发的商业目标。团队发现了机会，确认了解决方案，然后以极快的速度将解决方案交付给客户。

持续交付的每个阶段——开发、测试、部署——都有其自身的技术挑战，但是测试步骤尤其构成了一个独特的瓶颈。

在开发阶段，开发人员主要需要代码。代码相对轻量级，可以通过 Github 等行业标准工具进行管理。开发人员需要他们的笔记本电脑，但是一般来说，代码管理带来了有限的操作支持挑战。

部署阶段对运营部门来说更具挑战性。最新版本的代码必须部署到广泛的最终平台上，这些平台可能在硬件、软件、位置、权限等方面有所不同。然而，目标系统至少是那些通常使用的系统。运行新页面的服务器或安装应用程序更新的智能手机是预先存在的系统，它们由其用户管理。因此，运营团队不需要支持专门的硬件来部署。此外，在过去几年中，出现了许多创新技术，如 Ansible 和 Docker，以进一步简化这一过程。

另一方面，测试结合了这两个阶段的挑战。持续测试需要开发人员和 QA 的专用资源。但这些资源是全面的应用环境，不仅包括代码，还包括数据、操作系统甚至适当的硬件。因为最佳实践鼓励开发人员为所有新代码编写新测试，所以每次代码更改所需的回归测试数量只会增加。这意味着测试必须变得更加并行，否则会遭受越来越多的延迟——测试中的任何延迟都会破坏整体的持续交付。

为了保持连续的假象，开发团队需要按需访问可伸缩的测试环境，包括他们的数据。在测试环境的创建中，数据经常被忽略，但是它必须被交付给每个测试实例。这意味着测试数据管理(TDM)是任何成功的持续策略不可避免的一部分。

TDM 相对来说是不言自明的:它指的是创建、管理和交付生产(或类似生产)数据到非生产数据环境的过程。每个组织都做一些 TDM，尽管许多组织并不认为这是一个独立的实践。但是为了实现那种可以支持连续幻觉的无缝效率，团队必须采用现代的 TDM 实践。

传统的 TDM 依赖于多阶段的手动交付链。开发人员和测试人员提交票证，然后他们等待。存储管理员、数据库管理员、备份管理员、安全人员和其他员工每个人都必须花费大量时间来处理不断增长的票证流，将环境创建从一个职能部门移交给另一个职能部门。与此同时，开发人员和测试人员陷入困境，持续的交付停滞不前。

曾经，这一过程可能是不幸的，但却是必要的，是由技术限制强加的。但现代解决方案可以应对并克服这些挑战。太多时候，TDM 差的团队只是忽略了实现他们需要的解决方案。

最有效的 TDM 实践将使用与其他连续交付管道工具同等的数据管理解决方案。TDM 解决方案将能够在几分钟内建立起大规模并行的数据环境。它将依赖于生产数据和自动安全性，而不是合成数据生成或数据子集(这两者都需要大量的前期规划，并且不能满足所有的边缘情况)。它将很容易与现有的连续交付工作流工具集成，允许在测试作业运行时自动提供数据。

目前市场上有一些解决方案符合这些标准。采用一个可以代表你缩短测试周期和更快交付代码的机会——不管你的软件时间表现在有多快。

为了提供连续的幻觉，连续输送管道的每个组件都必须以最高效率运行。强大的 TDM 解决方案是让您的客户高枕无忧，享受产品魅力的关键要求。

## 关于作者/路易斯·埃文斯

Louis Evans 是 Delphix 的 DevOps 布道者。他对高级 TDM 增强整体软件质量的潜力感到兴奋。他是艾伦·图灵的超级粉丝，并且偏爱一个精心布置的分号。