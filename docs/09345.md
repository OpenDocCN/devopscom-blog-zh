# DevOps 集装箱存储:NVMe 的新选择

> 原文:[https://devo PS . com/container-storage-for-devo PS-new-options-with-nvme/](https://devops.com/container-storage-for-devops-new-options-with-nvme/)

DevOps 世界的存储模式变革时机已经成熟，无论是在企业内部的运营方式还是实施应用程序的方式。T3】

NVMe，尤其是 NVMe-over-fabrics (NVMeoF)，既是一种工具，也是一个主机目标，可以提供这样的变化——特别是在微服务和集装箱化的新世界中。与传统实现相比，NVMe 可以显著提高应用程序的性能，并且借助合适的工具，可以将编写这些实现的过程变得更快、更健壮、更灵活。

## I/O 密集型工作

快速回顾一下就能明白为什么会这样。DevOps 构建工具链，尤其是对于大型代码库，总是严重依赖 I/O，存储访问通常是构建映像的最大瓶颈。二十年前，将连接到 San 的小型廉价 Linux x86 服务器集群化的能力是将存储硬件与计算分离的第一步，但 I/O 延迟非常糟糕。构建/链接操作实际上可能比编译目标文件花费更长的时间。

虚拟化有助于提高硬件利用率，降低成本，但并没有真正提高吞吐量。OpenStack 和 CloudStack 等云基础架构使这些基础架构更简单、更易于管理，但 IOPs 瓶颈仍然存在。

DevOps 的容器化使应用程序级别的工作变得更加简单，只需部署应用程序并根据需要增加容器实例，无需更多专用基础架构。而且对于增量函数更便宜。

然而，在清除大规模存储和提高整体性能的 I/O 瓶颈方面，并没有做多少工作。

当 NVMe 的新非易失性存储器技术在 2014 年面向单服务器世界上市时，它提供了两种改变游戏规则的能力。

1.  磁盘访问 I/O 速度提高了 5 倍。可以说，这是自带有板载缓存的多核处理器(想想 Opteron)出现以来最大的一次性能提升。随着 Linux 在 2021 年增加了对标准、开源 NVMe 驱动程序的支持，选项增加到了 Windows 和 Mac 用户之外。然而，San 和它们的协议栈仍然是一个问题。基于 SATA 和 SCSI 的 SAN 性能受限于这些技术的 1.2GB 限制，并且 SAN 前端的大容量仍然决定了高成本的基础架构。
2.  与 SATA 或 iSCSI 不同，NVMe 具有 TCP/IP 或光纤通道寻址的本机功能。这使得 NVMeoF 成为普通网络中数据存储的自治点。用户现在可以控制他们的数据，但使用网络连接计算作为大约 6Gb 速度的 I/O 工具，大大减少了磁盘 I/O 的巨大损失。

## 应用容器

集装箱部署的大幅增长和集装箱附加存储(CAS)的首次亮相——包括由 Kubernetes 编排的基于微服务的存储控制器的软件——代表了另一个行业里程碑。这些存储控制器可以在 Kubernetes 可以运行的任何地方运行，这意味着任何云甚至裸机服务器或传统共享存储系统之上。重要的是，数据本身也是通过容器访问的，而不是存储在平台外的共享横向扩展存储系统中。T3】

由于容器连接的云原生存储支持使用小型、分散的架构，而不需要大规模 San 或存储控制器，因此与 DevOps 工作非常吻合。

基于容器的应用程序可以从基于 NVMe 的存储中受益匪浅。正如专家所指出的那样，由于 DevOps 应用程序都是关于可伸缩性的，嵌入在 NVMe 规范中的并行性非常适合支持它们。

虽然 San 适用于大规模的连续操作，但它们是昂贵的大块容量，并且部署不灵活。它们还受限于较慢的 I/O 存储协议，这可能会抵消通过向该阵列添加 NVMe 可能带来的性能提升(相对于离散式)。

采用 NVMe 的基于容器的存储为开发运维团队提供了以低成本添加存储的机会，并对有状态存储进行确定性管理——当然是在理论上。在实践中，向当前基础设施添加类似基础设施的诱惑是强大的，即使它有所有的限制。

为了使这一理论成为现实，一个具有快速数据平面的控制平面是必要的，而市场正开始满足这一需求。

例如，OpenEBS 最近推出了一款升级引擎 MayaStor(现在是 DataCore Software 的一部分)，它能够以令人印象深刻的速度使用 NVMeoF:采用英特尔 SPDK 架构的基准测试显示，读/写速度比 SATA 提高了 5 倍。

几年前，OpenEBS 作为基于 Kubernetes 的应用程序的容器化存储解决方案首次亮相。通过优化的存储引擎，Kubernetes 有机会像其他更专业的托管和开发解决方案一样发挥作用。

## 对 DevOps 的影响

这对 DevOps 团队意味着什么？首先，在容器化的 DevOps 应用程序中使用 NVMe 加快了大型构建所需的时间，从而加快了编写软件的迭代。它还消除了使用复杂而昂贵的 San 来托管构建环境的需要。这种双重好处意味着开发速度更快、成本更低，反过来，应用程序可以更快地部署，同时使用更灵活的工具。

其次，NVMe 极大地减轻了对应用程序代码如何设计以及环境如何实现的 I/O 担忧。不再受制于存储干线—NVMeoF 降低了 I/O 操作的性能损失，并在普通 TCP/IP 网络中分配流量。这是一个三重打击——在快速、灵活的虚拟化基础架构上构建更快、更便宜、更灵活的容器。

在容器附加存储创新的支持下，DevOps 团队可以实现对其使命至关重要的敏捷性和灵活性，并作为其他 IT 团队考虑提高效率和性能的替代途径的试验场。

* * *

*加入我们，参加 5 月 16 日至 20 日在西班牙巴伦西亚举办的*[*kube con+CloudNativeCon Europe 2022*](https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/)*——三年来首次亲临欧洲的盛会！*