# 存储过程的力量和潜力

> 原文:[https://devo PS . com/the-power-and-potential-of-stored-procedures/](https://devops.com/the-power-and-potential-of-stored-procedures/)

编写代码时节省时间的一种方法是使用存储过程；您可以保存准备好的 SQL 代码，以便代码可以反复重用。存储过程是一个强大的工具，可以加速你的代码并提高性能 。

存储过程有很多好处——它们易于修改，可重复使用，并且能够自动执行需要多条 SQL 语句的任务。存储过程的另一个优点是能够访问或修改数据库中的数据。

在合并存储过程之前，了解什么是存储过程、它如何与众不同、如何创建存储过程以及如何在 [嵌入式分析](https://www.revealbi.io/glossary/embedded-analytics) 中使用它们非常重要。

## 使用存储过程执行任务

存储过程被定义为一组 SQL 语句和其他 PL/SQL 结构，它们作为一组存储在关系数据库管理系统中，可以保存和重用。存储过程可以由多个 SQL 语句组成，如 SELECT、INSERT、UPDATE 或 DELETE。这些语句作为一个单元运行，用于解决特定问题或执行一组相关任务。

存储过程是最常用和最流行的数据库主题之一。使用存储过程有助于简化和加速 SQL 查询的执行。

例如，存储过程可以减少服务器和客户端之间的网络流量。这是命令作为单批代码而不是多批代码执行的结果。不是发送每一行代码单独执行，而是只将执行存储过程的调用发送到服务器。

使用存储过程的其他好处包括可维护性、性能和效率以及复杂的业务逻辑。在服务器上维护一个存储过程比在多台机器上维护副本更容易。过程脚本存储在一个位置，也可以在其他应用程序中自由使用。在定义更改的情况下，只有存储过程会受到影响，而不是调用它的应用程序。

## 存储过程的优势

一旦编译了存储过程，就可以多次使用它。这可以节省大量的编写时间，尤其是在进行即席查询时。这也使您在第一次执行存储过程时比第一次执行即席查询时有一点点性能优势。

存储过程最终是对数据库的函数调用。您可以包括 IF 语句、循环、安全检查等等，以确保将正确的数据发送回存储过程的调用。

存储过程的另一个优点是易于修改。只需使用 ALTER PROCEDURE 命令更改存储过程中的一个或多个语句，它就会快速更新发送回调用应用程序的结果。与包含业务逻辑的中间层组件不同，中间层组件可能需要代价高昂的重新部署，对存储过程的快速更改只需几秒钟。

使用存储过程的另一个好处是它为数据源提供了安全性。使用存储过程时，可以通过限制未授权访问来增强应用程序的[](https://www.revealbi.io/blog/security-and-analytics)安全性。您可以授权某人访问更新数据库表的过程，但不允许访问表本身。您还可以使用存储过程对存储过程的最终用户“隐藏”基础表名。由于存储过程的调用方具有存储过程的名称，而不是存储过程中使用的表的名称，因此他们不能直接访问包含您的数据的表。

## 创建存储过程的最佳实践

创建新的存储过程相当简单。以下是三个基本步骤:

1.在 SQL Server 对象资源管理器中，右键单击“可编程性”下的“存储过程”节点。

2.在新的存储过程模板中，修改 CREATE PROCEDURE 语句以包含表、参数和查询选项，从而从存储过程中返回所需的数据。

3.在工具栏中，单击“执行”按钮编译并保存存储过程。

有多种工具可以用来创建存储过程。使用 interactive SQL Server Management Studio 是最简单的，因为它为您提供了一种开始连接许多不同类型的数据库服务器的简单方法，包括 Azure 和 SQL Server Analysis Services。

## **嵌入式分析的幕后**

越来越多的组织使用数据来预测未来的结果并保持竞争力，随时随地为客户提供他们想要的东西。

[嵌入式分析](https://devops.com/?s=embedded+analytics)商业智能软件是释放数据力量的关键。存储过程可以整合到嵌入式预测模型和连续计算语言代码中，用于数据流场景。

要在支持存储过程的数据库上创建新的 [可视化](https://www.revealbi.io/glossary/data-visualization) ，首先查看可用存储过程的列表。您将像对待任何其他数据源一样对待您选择的存储过程。唯一的区别是参数化存储过程，您可以通过向存储过程传递变量来在筛选器中使用它。

例如，一些嵌入式分析平台 [、](https://www.revealbi.io/) 通过代码提供对存储过程和参数的完全编程控制。若要传递存储过程名称以及任何必需的参数，请使用 changevisionationdatasourceitemasync 函数。这是一个在 Reveal 平台中传递名为 CustOrderHist 的存储过程和传递 CustomerID 参数的示例。

![](../Images/5e17a5bd1aaa314ff70e4dd2d974557c.png)T2】

## 存储过程的威力

存储过程是查询数据库并将结果返回给调用应用程序的强大工具。它们是安全的，具有性能优势，并且易于维护和修改。与使用容易出错且冗长的即席查询相比，存储过程是简化您在应用程序代码中表示数据和处理参数的方式的好方法。在开发应用程序时，您可能想考虑在下一个项目或可视化数据库中加入有用的存储过程。