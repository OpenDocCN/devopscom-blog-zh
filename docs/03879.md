# DevOps 聊天:微服务和容器——掌握 IT 基础设施的平台化

> 原文:[https://devo PS . com/devo PS-chat-微服务-容器-主控-重新平台化-基础设施/](https://devops.com/devops-chat-microservices-containers-mastering-re-platforming-infrastructure/)

利用微服务和容器实现企业 IT 基础设施的平台化并非易事，通常是由一系列不断变化的关键业务驱动因素引发的。今天的情况正是如此。“数字化转型”一词已深入人心，并成为顶级企业高管和 IT 领导者的口头禅。主导企业 IT 近 30 年的底层传统或遗留基础架构根本无法处理工作负载，也无法为推动业务向前发展的应用程序提供动力。

# 微服务和容器

出于不同的原因，微服务和容器都注定要在这种企业平台化中扮演重要角色。容器对开发人员和开发工作以及组织本身都有很大的好处。了解这一系列好处有助于确保集装箱未来的 IT 预算。

在本次 DevOps 聊天中，MapR 企业战略和架构总监 Jim Scott 讨论了最有前途和最具吸引力的工具、技术和解决方案，这些工具、技术和解决方案注定会在企业的这一平台改造中发挥重要作用。Jim 强调了如何在 IT 部门承担这一代人中最关键的任务时保持领先一步。

你也可以在[这里](https://mapr.com/ebook/microservices-and-containers/?source=side-banner-internal-promo&cid=side-banner-microcontainers-ebook)下载 Jim 写的关于这个主题的很棒的电子书。

像往常一样，下面是我们聊天的音频流，下面是我们谈话的文字记录。

# 音频

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/361733240&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/361733240&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

# 副本

**Jim Scott**
Jim Scott is Enterprise Strategy & Architecture at MapR Technologies and is very active in the Hadoop community. Jim helped build the Hadoop community in Chicago as cofounder of the Chicago Hadoop Users Group. He has implemented Hadoop at three different companies, supporting a variety of enterprise use cases from managing Points of Interest for mapping applications, to Online Transactional Processing in advertising, as well as full data center monitoring and general data processing. Jim also was the SVP of Information Technology and Operations at SPINS, the leading provider of retail consumer insights, analytics reporting and consulting services for the Natural and Organic Products industry. Additionally, Jim served as Lead Engineer/Architect for Conversant (formerly Dotomi), one of the world’s largest and most diversified digital marketing companies, and also held software architect positions at several companies including Aircell, NAVTEQ, and Dow Chemical. Jim speaks at many industry events around the world on big data technologies and enterprise architecture. When he’s not solving business problems with technology, Jim enjoys cooking, watching-and-quoting movies and spending time with his wife and kids. Jim is on Twitter as [@kingmesal](https://twitter.com/kingsmesa).

艾伦·希梅尔:嗨，大家好，我是艾伦·希梅尔·DevOps.com，我们在这里进行另一次 DevOps 聊天。我们今天准备好了一次愉快的谈话。有幸加入 MapR 的吉姆·斯科特。吉姆，欢迎来到 DevOps 聊天。

吉姆·斯科特:谢谢你，艾伦。

Jim，谢谢你今天和我们在一起。吉姆，让我们从这个开始。我们的观众可能熟悉也可能不熟悉 [MapR](https://mapr.com/) ，但我们暂且假设他们不熟悉。你能给我们介绍一下 MapR 的背景吗？

斯科特:当然可以。所以 MapR 是一个融合的数据平台。可操作的词是“数据平台”所以 MapR 为所有数据提供了一个数据平台。所有类型的数据、所有位置、本地云，it 可以同时在所有这些位置运行。该平台的前提是在我们的数据平台之上提供一个标准的开放 API 架构，以便客户可以获得我们平台的好处，而不必担心被我们通过这些开放 API 提供的软件或您选择运行的基础架构的供应商 MapR 所束缚。

因此，如果您想在您自己的数据中心的硬件上运行，或者如果您想在云中或多个云中运行您的软件，您可以在任何基础架构上的 MapR 上运行您的软件，随时随地。

**Shimel:** 太好了。那么，Jim，仅供我们的观众参考，您在 MapR 中的角色是什么？

Scott: 哦，我负责 MapR 的企业架构，包括内部和外部。

**希梅尔:**优秀。

**Scott:** 这意味着在内部，我基本上是在展示我们如何使用 MapR 来解决我们自己的问题，在外部，这意味着我与我们的客户进行了大量的合作，帮助他们通过大数据平台取得成功。那么做某事的正确方法是什么。我个人曾在许多不同的行业工作过，所以我的经验经常被提及。

**Shimel:** 明白了，明白了，明白了。我们有一点震动，但我认为它消失了。Jim，在我们今天开始之前，我们正在谈论麦克风之外的话题，我告诉过你，当你们启动网络世界时，我已经报道过 MapR，我猜那是在 2008 年左右。正确吗？可能是 2009 年？

斯科特:是的，该公司于 2009 年秘密成立。

是的，我记得。因此，毫无疑问，在 2009 年，云本身相当流行。它仍然是相对较新的，人们仍然在搞清楚。整个大数据市场——坦率地说，没有大数据市场。Hadoop 和这些东西刚刚问世。

但是 Jim，可能是过去两三年，也许是四年基础设施中最大的创新或变化之一，是微服务容器化的大动作。我可以想象你在 MapR 也看到了这个。

斯科特:对，绝对是。所以如果我们回顾历史，就说大概八、十年前，消息驱动架构开始变得流行；面向服务的架构，诸如此类的东西。这种受欢迎程度非常高——嗯，甚至可能是在 15 年前。但问题是横向扩展消息传递平台本身很困难，成本很高，而且从管理的角度来看，能够横向扩展真的是一种痛苦。

因此，在过去的几年里，我们已经看到了这种转变，越来越倾向于微服务模式。很多人喜欢随意使用这个术语，称之为微服务，但事实并非如此，但本质上越不完整，就越难以处理大规模的服务。

这就是为什么 Kafka API 和 MapR 提供的 MapR 流有助于支持客户，因为他们有能力以线性扩展的成本模型推动海量数据，所以他们确切知道他们要去哪里。因此，在 MapR 这样只有五台服务器的平台上，每天处理大约 1.5 万亿个事件是相当容易的。

本质上越微小，你需要处理的量就越大。因此，过去的那些消息传递系统已经不复存在了。只是不能处理它。我的意思是，我记得当我们通过这个系统每秒收到 50，000 到 60，000 条信息时，我很兴奋。

有充分的理由，吉姆。你在和一个在 386 问世时很兴奋的人说话。所以是的，我听到了。但是 Jim，从根本上来说，我和我刚刚进行了讨论，因为我们实际上在 DevOps.com 有一个小的微服务期刊，微服务社区。实际上，就在昨天，我和 DXE 的首席技术官 JP 摩根索谈过这件事。

从根本上说，从根本上说，我们现在谈论的是真正的微服务，不是胡说八道，对吗？但从根本上说，它有希望改变我们发展的方式，改变我们基础设施的运行方式，对吗？尤其是当你把它和容器结合在一起的时候。

斯科特:是的。是的，我想你指的是，这是我在与人谈论微服务时遇到的最大问题之一，即微服务的基本原则是部署模式比其他任何东西都重要。

如果没有一个容器来放置和部署它，它会变得非常困难和笨拙，即使它很小。

**Shimel:** 明白了。Jim，你之前提到过，你正在研究内部和外部两个方面。在内部，如果可以的话——我们不要泄露任何公司机密——但是在内部，MapR 是否利用了你们基于容器的基础设施和微服务？

斯科特:嗯，当然。是的，事实上，我们经常谈论这个。所以对于我们自己的网站，我们已经实现了客户 360 功能。我们在容器中运行我们的软件，我们目前在一个云上运行它，但是我们有本地硬件，在不久的将来，我们将同时运行多云和本地硬件。为了做到这一点，您需要一种类似容器的技术来实现与基础设施的隔离。

是的。抽象的，如果你愿意；抽象——Jim，我和他进行了一次有趣的对话，我想是最近在 _____ 或另一个地点，另一个大型组织完全转向了容器化基础架构，他谈到了这是一次多么深刻的变革。

我问他关于修补容器和不可变基础设施，只是建立新的，替换旧的，而不是实际修补现有的。如果你不知道，你在这个问题上的立场是什么

**Scott:** 嗯，我喜欢能够回到我的基本默认映像并能够在我的整个 devops 流程(持续集成流程)中运行它的概念。因此，我可以修补 docker 文件中的一个实例，我可以测试核心，确保它正在做它应该做的事情，然后我可以让我的所有下游构建运行，选择新的容器，并通过集成测试运行它们。

**希梅尔:**优秀。所以，吉姆，我不知道我们观众中的每一个人是否理解吃你自己的狗粮的整个想法，以及这意味着什么。但是你能不能给我们举一两个例子，说明你在 MapR 内部学到的东西是如何转化为更好的服务、更好的产品、更好的结果给最终用户的？

那么你是如何把它拿出来的，你是如何把你自己使用的某些流程或技术浪潮转化为客户体验的。

斯科特:是的，我想到了两个，第一个实际上是容器。我们只是在今年年初引入了对容器的支持。

**Shimel:** 真的？

**Scott:** 但是我们一直在使用——是的，是这样——我想我们在正式发布支持时发布的新闻稿是在今年 2 月左右。但是从技术上讲，我们有很多客户已经使用 MapR 容器两三年了。

这里有一个小秘密:我们在内部使用它，已经用了两三年了。因此，从支持基础架构的角度来看，确保我们对它进行了全面审查并得到了很好的处理是非常关键的，但让客户了解这一点非常重要。

因为它解决了容器的一个主要问题，就是你看起来像安全这样简单的事情。如果我负责我公司的 web 服务器，而你负责你公司的财务系统，或者我的——或者我们公司的财务系统，那么容器中的软件就能够在同一服务器上运行。

但是，如果它们运行在同一台服务器上，并且我们正在利用该服务器上的本地存储——因为您无法将数据保存在容器中；它爆炸了。容器死了就没了。那么，如果您将数据保存在本地服务器上，会发生什么呢？突然，我的网络服务器面临着访问财务信息的安全风险——这可能不是一个好主意。

**Shimel:** 没有。

**Scott:** 因此，我们在 MapR 持久应用客户端容器中实现了从 docker 容器中与 MapR 对话的能力。因为 MapR 提供 NFS 支持，它几乎是隐形的，几乎没有任何事情可做。你从你的认证环境中给它一张票，你就可以开始了。

在那个容器中运行的任何东西都有一个用户 ID，当它与 MapR 对话时，数据被保存和保护。你不用担心，如果我要保存数据，我会保存到本地服务器。你就解决了所有的问题。它隔离了数据的去向，这些数据已经受到了保护并且高度可用，如果您的服务器物理上死了，就像如果您的容器死了，您也不会在意。您不必恢复服务器来尝试从中获取数据。

**Shimel:** 明白了，明白了。这是百分之百——如果你愿意的话，这就是整个抽象层的美妙之处。

斯科特:正是。

Jim，这是一个有趣的问题，我不知道你是否有这个信息，但我想我还是要问一下。我们已经做了一系列关于容器采用的调查，有趣的是，我们已经做了几个这样的调查，比如说，在过去的两年里，当我们第一次开始时，很多人都计划看看 docker 和容器。

其他人，相当多的人，在他们的环境中有容器——他们在测试开发环境中，而不是生产环境中。很少有人将它们投入生产。然后最近，就像我们最近的调查一样，比方说，整个夏天，这个数字直线上升。大约 40%到 50%的受访者在生产集装箱。

这可能是因为这是 DevOps.com，我们处于 devops 泡沫中，所以你会让人们使用这种新东西。但是我很好奇，在 MapR 的客户群中，如果你没有真实的数字，你认为现在生产中使用容器的百分比是多少？

斯科特:这是一个相当大的数字。我没有一个确切的数字，但是如果我去拜访我交谈过的客户，我觉得应该超过 50%。

**Shimel:** 真的？哇哦。

斯科特:是的。是的，我们在澳大利亚有一个非常高级的客户，他们的名字是 Quantium。他们一直在谈论他们如何使用 MapR，他们基本上已经彻底改造了他们的整个运营模式，并且他们已经在 MapR 的基础上完成了这项工作。我记录了他们定期谈论的一个企业架构；它被称为泽塔建筑。

他们基本上使用一个编排层，使用 MapR 实现持久性，然后使用容器为他们的客户在他们的硬件集群中任意启动和部署任何东西。他们将整个内部平台转变为面向内部和外部客户消费的“即服务”模式。

**Shimel:** 明白了，优秀，优秀。我们现在到处都在听到这样的故事，有趣的是，几乎在任何你看到容器的地方，你都会看到微服务。但是你也可以在不一定能看到容器的地方看到微服务。

这让我想起了我在学校的时候，我们曾经学过所有的通心粉都是通心粉，但并不是所有的通心粉都是通心粉，或者类似的东西。但是微服务在容器之外也有一席之地，尽管它们看起来很好地结合在一起。

**Scott:** 是的，当然，我认为当你开始考虑适合微服务的不同类型的用例时，你就会开始看到人们将如何选择部署和管理。如果你看到的是事件驱动、消息驱动，它接收一条消息，做一些工作，把一条消息发送出去，而不是 restful 服务端点，它是一个同步响应。

是的，人们选择用不同的方式做事情，但是几乎——我交谈过的每个人，他们都以某种方式使用容器。

是的，是的。对我来说也是如此，但就像我说的，我总是认为，我在泡沫中，所以我当然会看到。Jim，MapR 的下一步是什么？

斯科特:哦，这是个有趣的问题。最近，我们宣布了我们的 6.0 发布，我们已经围绕我们的数据库功能大大增强了许多功能。我似乎与人们进行了很多这样的对话，他们开始关注大数据技术，他们说，这很好，但我已经构建了这个软件，可以与 mySQL 或 Postgresql 或 Oracle 或任何 RDBMS 一起工作。

这很好，如果您想开始改变您的基础架构和如何编排您的软件，您可以将这些应用程序容器化，如果它对您足够重要，您可以将其迁移到 MapRDB 文档数据库等非 SQL 数据库，或者您可以让它在容器中运行，这样您就有了一个更灵活的基础架构。

我们一直在进行的数据库技术增强对于推动未来人们摆脱那些用于非关系目的的超昂贵的可扩展 RDBMSes 来说是非常关键的。

**希梅尔:**优秀。只是时间框架——我们什么时候能看到更多这方面的东西？

Scott: 嗯，它已经在过去几周发布了，所以我们将很快开始 6.0 的全面上市。我忘了确切的日期。然后，我们将继续努力，添加更多新的、精彩的功能来帮助客户群。

与我们平台的云集成是另一个真正的大问题，确保我们能够帮助客户从云中立的概念中受益。云提供商永远不会像一个联盟那样聚在一起说，嘿，我们为什么不为了客户的利益而标准化我们的 API 呢？

这是不可能的。这是不可能的。谷歌、微软和亚马逊永远不会打电话给对方说，嘿，你觉得这个怎么样？

希梅尔:我同意。同意。嗯，不是——你知道吗——嗯，我只是，这些年来我看到了很多变化，但这可能是一个非常安全的赌注，吉姆。

斯科特:是的。

**Shimel:** 可惜。不管怎样，Jim，信不信由你，正如我在我们开始时告诉你的，时间过得很快，我们已经没有时间进行这个版本的 DevOps 聊天了。但我们希望你将来能回来。我们很想跟上 MapR 的发展，特别是当它涉及到微服务和容器以及我们正在开发的一些新东西时。

吉姆·斯科特:是的，听起来很棒。

**Shimel:** 太好了。但与此同时，如果人们想获得更多关于 MapR 的信息，他们可以去哪里？

史考特:嗯，我会建议他们去 MapR.com。

希梅尔:好的。

当然，你也可以在[推特](https://twitter.com/mapr)和/或你加入并合作的任何其他社交网络上关注 MapR。但这个网站一直是我最喜欢的，因为那里有很多很棒的材料，包括 MapR 博客和所有的电子书，包括我写的“[微服务和容器](https://mapr.com/ebook/microservices-and-containers/)”电子书，都是免费的。

**Shimel:** 明白了。明白了，明白了，明白了。好吧，好吧，我们可能会找到一些链接，我们也会把它们放在这个节目的笔记里。

斯科特:好的，那太好了。

**希梅尔:**妙极了。嘿，吉姆，谢谢你成为我们 DevOps 聊天节目的嘉宾。期待您尽快回来，了解更多关于 MapR 的信息。继续成功，让我们知道你们在做什么。

斯科特:谢谢你，艾伦。感激不尽。

好的。嘿，大家好，我是艾伦·希梅尔，在 DevOps.com 的 DevOps 聊天室。感谢您的加入，我们将在下一次聊天中再见。各位保重。拜拜。

— [Alan Shimel](https://devops.com/author/ashimmy/)