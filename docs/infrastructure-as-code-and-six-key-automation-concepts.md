# 作为代码的基础设施和六个关键的自动化概念

> 原文：<https://devops.com/infrastructure-as-code-and-six-key-automation-concepts/>

今年夏天，我走进了一场基础设施即代码(IaC)的激烈争论，因为我幸运地没有意识到 IaC 被重新解释的范围有多广。回顾评论，很明显思维是从基夫莫里斯 2016 [基础设施作为代号](https://www.amazon.com/Infrastructure-Code-Managing-Servers-Cloud/dp/1491924357/) 古墓开始进化的。因此，在穿上我的石棉服后，我决定挖掘是什么产生了如此广泛的观点，看看我是否可以分享一些 2019 年的见解。

为什么 IaC 会激起这样的激情？原因很简单:作为一个行业，我们渴望能够实现我们对全自动、自我管理的基础设施的共同愿景。在本世纪初，我们称之为自主计算，然后是软件定义的数据中心(SDDC)，现在是 IaC。可悲的是，IaC 并不是——或者更确切地说，它并不孤单。

IaC 的实际定义比人们想象的要小得多。

我从 IaC 讨论中得到的启示是，这些讨论是围绕六个关键自动化主题展开的。让我们花几分钟来研究一下每个主题。那么我们就有了回答“如果那不是 IaC，那是什么？”

## **程序化配置(IaC)**

程序化配置抓住了我们可以用机器可读的格式定义我们的基础设施的想法。例如，您描述了一个计划在 YAML 构建的集群，该集群由 Terraform 之类的工具执行，该工具从您的动态基础设施请求资源，并跟踪您从该请求中获得的资源描述符。基本上就是你的 IaaS 输入格式而已。  

## **动态基础设施(或 IaaS)**

它描述了一个允许运营商通过 API 改变资源分配的系统。这是讨论的关键部分，因为必须有一种可靠的方法来务实地改变基础设施。有些人会考虑这种云；但是，我们不应该假设托管服务或虚拟机，因为动态基础架构要广泛得多。  

## **期望状态(或状态协调器)**

Desired state 主动将动态基础设施与程序清单进行比较，并进行自动调整以保持二者同步。通常，维护状态的想法与配置系统是分开的。Kubernetes 和其他自动伸缩集群管理器扮演了这个角色。  

## **从源代码控制部署(或不变性)**

这意味着系统的所有配置组件都可以存储为版本化的工件，并从源进行部署。构建容器的 Dockerfile 是不可变过程和生成的工件的一个很好的例子。与过去几代依赖于对生产系统进行手动或脚本化更改的操作相比，从源代码控制进行部署所提供的可重复性是革命性的。不变性不是 IaC:我们关注生成的部署工件，而不是管理基础设施。  

## **可组合(或模块化)自动化**

它允许我们通过抽象层来管理复杂的结构。从概念上讲，可组合性就像使用平台插件根据 API 编写脚本一样简单。  

## **CI/CD**管道

CI/CD 管道是一种粘合剂，它将所有这些部分结合在一起，通过根据运营商的 IaC 描述不断调整系统组件来创建弹性环境。流水线依赖于将动态基础设施管理到作为目标的期望状态；然而，它在系统中增加了随着时间的推移阶段性变化 的关键概念。由于我们需要创建能够随着时间适应和改进的系统，CI/CD 管道为随着时间受控的实现变更提供了机制 。

这六个概念共同反映了一种全新的思考基础设施的方式，超越了 IaC。它们允许我们以一种灵活和自动化的方式，随着时间的推移维护和控制我们的系统。更重要的是，它们通过创建更具确定性和可预测性的变革链，将复杂的基础设施问题重新纳入人们可以理解的范畴。这使我们能够将手从基础设施中抽出来，将注意力集中在我们所交付的东西上:一个持续集成的数据中心。

由于所有六个概念都是相互依赖的，持续集成数据中心(CI DC)完全抓住了我们对 IaC 的渴望。这个术语直观地从源代码构建成一个完全可操作的基础设施。更重要的是，DC CI 要求我们承认所需的持续维护。因此，我选择了 CI DC 来取代 IaC。

这个术语对你有用吗？你如何看待 IaC 或 CI DC 在 2020 年上市？我想听听你的想法。

——[罗布·希施菲尔德](https://devops.com/author/rob_hirschfeld/)