# 威胁防护设备:与您的烤面包机一样重要

> 原文：<https://devops.com/threat-protection-appliances-valuable-security-toaster/>

在 IT 安全社区中，没有什么比防病毒软件部署得更广泛，也更容易受到普遍的指责。但是，威胁检测设备，包括入侵防御设备、应用程序防火墙和高级威胁保护设备，几乎应该受到唾骂。这些器具几乎无用，因为它们有毒。他们在发现问题方面做得很糟糕，最终为安全组织创造的成本比他们通过错误警报使组织瘫痪所节省的成本更多。

## **保护不切实际**

就安全性而言，检测设备从来都不是很有效，因为网络从一开始就不适合作为任何类型的安全中心。很少有网络保护设备甚至能够防止攻击，更不用说对攻击做出反应，大多数设备只是用于检测，即使是那些具有基本预防能力的设备。理论上，入侵防御设备*可以*在坏东西通过之前断开连接，但实际上，这种情况很少发生。

在大多数企业中，安全检测设备被搁置在一边，只能查看网络流量的副本，而不是实际的网络流量本身。组织选择这种不太理想的设置，以避免不可避免的网络延迟问题，否则，例如，当设备等单点故障泛滥或出现错误时，就会出现这种问题。

这并不是说网络设备不能以任何方式响应正在进行的攻击。如果某个设备确定某个特定网络连接是恶意的，并且对该设备的判断完全有信心，那么组织可以让该设备发出信号，表明*是串联的*，例如路由器或防火墙。然后，该设备可以采取行动，切断连接或将违规的 IP 地址列入黑名单。

这种情况的问题是网络层通常没有足够的上下文。如果一个网络设备试图快速决策，它将产生非常高数量的误报，使其判断受到怀疑。每当对设备的判断有任何疑问时，都不应该信任它来决定是否采取行动。在这种情况下采取的行动可能会影响合法的连接，这可能会给整个企业带来灾难性的后果。

## **电器:到底发生了什么**

虽然老派设备(例如，传统的入侵防御设备)为了速度而牺牲了准确性，但今天更复杂的设备在处理可用数据方面做得更好，这提供了非常优越的结果，并且假阳性少得多。

典型的“下一代”安全检测设备(如“高级威胁检测”设备)试图通过模拟流量的最终目的地来预测是否会发生任何恶意行为，从而尽可能好地回答连接是否代表攻击。这是通过将流量副本运行到专用虚拟机中，然后监控模拟结果来实现的。如果在虚拟机中的目的地发现了恶意的东西，那么有相当高的可信度认为该连接代表一种攻击。这种方法的目标是将误报限制在组织可以对每个事件做出响应的程度。一些组织甚至愿意自动响应，例如，如果及时检测到可疑攻击，就切断连接。

虽然这类设备倾向于减少噪音，但它不能消除“假阴性”，这使得攻击可以在不被注意的情况下顺利通过。事实上，一些人认为它们使电器的假阴性问题变得更糟。

如果攻击针对的是实际终端用户，而不是虚拟环境中的用户，那么设备很容易忽略这种攻击。想象一下，一家公司购买了一台设备，并将其配置为通过将它发送到运行 Windows 10 的虚拟机来测试网络流量，但被测试的流量只有在运行 Windows 9 时才能正常运行。在这种情况下，如果网络流量的目的地是运行 Windows 9 的用户桌面，攻击很容易成功，因为设备不会发现问题(因为它运行 Windows 10)。

1998 年，Ptacek 和 Newsham 首次发现了这类问题，用于网络入侵防御。虽然“下一代”技术能够更准确地模拟他们试图保护的系统，但当从网络进行保护时，这个问题永远不会消失。即使当公司试图将所有系统都放在一个“黄金”映像上时，例外往往会很快出现。例如，开发和技术组织中的用户经常会发现他们需要不在黄金映像上的软件，或者他们可能需要运行较旧的软件来进行测试。此外，黄金映像方法往往只适用于桌面。

更糟糕的是，“黑帽”社区可以获得相同的设备，并对其使用的虚拟化技术和检测技术进行逆向工程。然后，他们想出如何检测他们是否在这样的设备上运行。一旦他们做到了这一点，他们现实生活中的攻击将在设备上被忽视，同时仍然达到预定的目标。

在“高级威胁检测”设备领域，这个问题很普遍。设备领域的一个不可告人的秘密是，来自这些设备的大部分检测是在已经被感染的机器上发现的，然后这些机器被发送到外部命令和控制基础设施。相反，如果这些设备检测到实际的入站威胁，攻击可能会被阻止。

## **警报疲劳:检测质量差**

淹没在警报中可能是 IT 安全组织面临的最大问题。即使在之后*来自网络各处的所有原始数据都经过了同类最佳的关联和分析引擎，仍然有大量的信息。这些被包围的引擎会生成如此多的警报，以至于组织无法经济高效地对他们想要调查的每个优先级警报进行适当的审查。事实证明，绝大多数警报很可能是误报。即使是最优秀的人才，在处理如此多的多余数据时，也可能经常容易错过真实事件。*

想象一下众所周知的干草堆中的针，但是增加干草堆的数量，这样整个堪萨斯州就会被干草覆盖。现在你可以开始想象这个问题的范围了。当然，你可能偶尔会发现一两根针——特别是有一些独创性的。但是，事实上，即使你想找，也不可能找到所有的。除此之外，你的警惕性可能会下降至少一两个草堆，这是一个毁灭性的针刺穿你的组织所需要的。

安全设备——尤其是更传统的设备——是迄今为止导致警报疲劳的最大因素。当您将调查局限于网络流量并试图尽快完成工作时，您没有足够的背景来做出好的决策。因此，如果你想谨慎行事，请记住，电器会给你足够的理由保持谨慎，同时发现一些实际问题。

如果我们真的想消除警报疲劳的问题，我们必须超越设备，开始在机器层面管理我们所有的检测。在一台机器上，我们可以看到文件系统中发生了什么，内存中发生了什么，操作系统中发生了什么，甚至应用程序中发生了什么(对于常见的应用程序)。这需要更多的遥测数据来隔离信号和忽略噪声(假设我们明智地使用所有这些数据)。

许多“下一代”方法处于一个可怜的中间地带；他们试图模拟机器，但通常无法创建准确或有效的模拟。如果一个组织试图保护一千台服务器，需要多少设备来彻底模拟每一英寸的网络和通过的每一点流量？答案是大约一千件电器，这太贵了。大多数组织更喜欢用一个设备来保护数百甚至数千台机器，这显然是不够的。

## **未来:会更糟**

随着标准社区准备推出 TLS 1.3，他们终于接受了“少即是多”的理念。这个新协议将确保没有直接的后门来破坏端到端加密。目前，大多数安全设备依赖这些后门作为检测手段(它们需要能够看到解密的流量)。新标准将要求 IT 组织在每一跳都有中间人，如果他们想让他们的安全设备工作的话。这将增加大量的延迟和费用，因此大多数人不会这样做，设备将因此变得更加不可靠。

此外，集装箱化和微服务的兴起将进一步加剧这种情况，因为将集装箱到集装箱的流量放在同一台机器上远远超出了任何设备的能力。

安全设备可能看起来比防病毒更好，因为它们偶尔会提供一些价值，并且不会增加太多的攻击面。另一方面，反病毒软件不会让组织淹没在虚假报告的海洋中。此外，至少杀毒软件现在有了可信的替代品，不像一个设备。安全设备一文不值，应该和杀毒软件一起被诅咒。

## 关于作者/约翰·维埃加

约翰·维埃加是胶囊公司的首席执行官。此前，他担任云安全提供商 Silversky 的 EVP，领导该公司基于云的安全套件的技术进步。BAE 系统公司成功收购 SilverSky 后，John 继续担任产品副总裁。在 SilverSky 之前，John 是 McAfee 的 SaaS 首席技术官。John 是一位获奖作家，他写了六本书，包括《构建安全软件》和《使用 OpenSSL 实现网络安全》他还参与设计了 GCM 加密算法，该算法在 HTTPS 和 IPSec 标准中几乎得到了普遍支持。在 [LinkedIn](https://www.linkedin.com/in/viega/) 和 [Twitter](https://twitter.com/viega) 上与他联系。