# 我们如何将 API 引入去中心化的 Web3？

> 原文：<https://devops.com/how-do-we-bring-apis-into-decentralized-web3/>

基于区块链的应用[越来越受欢迎](https://devops.com/making-blockchain-based-app-dev-more-accessible/)并强调去中心化 [Web3 运动](https://devops.com/can-web-3-0-solve-the-linkrot-crisis/)。同时，web APIs 有助于跨应用类型移植数据和可重用功能，并推动微服务开发实践。那么，我们如何将这两种范式结合起来呢？

在许多情况下，基于区块链的智能合约可能需要数据更新，而这只有 web API 请求才能实现。例如，智能合约可能需要访问给定股票报价机的最新价格。或者，也许链上活动取决于特定时间的天气。API 的无处不在意味着有数以千计的有用特性可用于手头的任务。然而，将它们集成到 Web3 应用程序中是很棘手的。

有趣的是，API3 联盟正在大步向前，引入一个行业标准的解决方案，将 API 引入 Web3 应用程序。API3 提供了一个厂商中立的标准网关，应用于现有的 API 之上，帮助它们吸引分散的应用程序。厂商中立的 API 联盟已经由许多跨不同垂直领域的 API 组成，并且似乎正在获得更多的关注。

我最近会见了 API3 的联合创始人 Heikki vnttinen，以了解更多关于将传统 web APIs 引入区块链开发的挑战。根据 nttinen 的说法，以前的解决方案依赖于第三方中间件或“oracle”，将 API 请求和响应系统纳入智能合同的最佳方式是通过 API 提供商自己运营的节点。这样一个系统可以帮助基于区块链的应用程序利用无数的软件即服务解决方案，从本质上统一两个世界。

## Web3 中 API 的状态

API 的数量呈指数级增长。随着公司通过数字化转型重塑自己，API 已经成为连接我们日常使用的应用程序的粘合剂。谈到 API，区块链有越来越多的潜在用例——这项技术不仅仅局限于加密货币；相反，它可以为许多需要智能账本的场景提供动力。

由于 API 驱动了现代软件开发中的大部分功能，因此它们在分散式应用程序开发中可能是有用的。举例来说，一个总部位于区块链的处理借贷的分散金融(DeFi)应用程序可能想要调用 API 来收集清算价格的原始数据，nttinen 说。或者，智能合同可能希望获得资产的成本作为购买的条件。连接到公共 API 来检查当地天气或航班到达信息可能会影响智能合同的响应。

将 API 集成到分布式分类帐系统中有许多用例。然而，“区块链应用程序不能本地调用 API，”nttinen 解释道。nttinen 说，这种不兼容是由区块链技术的性质造成的，因为它需要多方达成共识才能维持智能合同。出于这个原因，区块链应用程序需要一个中间件将区块链节点连接到 API，中继来自链外的数据响应。

## 将 API 融入区块链

正如 nttinen 所描述的，以前将 API 连接到 Web3 架构的尝试一直围绕着第三方中间件节点。然而，以这种方式将集成责任外部化会产生一个集中的故障点，这完全违背了分散环境的目的。

nttinen 不依赖这种依赖，而是提倡“第一方 oracle 方法”，在这种方法中，API 提供者在其 API 之前运行一个层。这为智能合约启用了请求-响应机制，允许区块链应用程序从链上发起 API 请求，并将响应合并到合约中。这种方法保留了不变性和不可靠性，这是分布式分类帐所固有的。

支持这种架构的一个解决方案是 Airnode，它是一个 Web3 中间件，可以将任何 web API 直接连接到任何区块链应用程序。采用 Airnode 的公司组成了 API3 联盟，这是“一个 API 提供商的集合，他们签署了协议，以支持 Web3 应用程序第一方使用他们的 API，”nttinen 说。"采用 Airnode 是 API 公司做出的保证，使他们的 API 与区块链兼容."

API3 联盟是一项重大举措，旨在扩展智能合约和区块链应用程序的功能。这可以使这样的环境调用 API 来发送文本消息或电子邮件，或者获取体育比分，收集地图数据等等。到目前为止，API3 联盟中的参与 API 来自农业、生物技术、通信、开放银行、保险、供应链管理和许多其他部门。该倡议还接受来自希望加入市场的 API 提供商的申请。

## 通用 Web3 集成层的优势

那么，采用行业标准中间件来实现 web-API 到区块链的连接有什么好处呢？根据 nttinen 的说法，这是实现复杂的链外计算的最佳方式。在链上执行复杂的计算是相当资源密集的，导致高交易费用。通过在外部扩展特别复杂的计算，区块链应用程序可以减少运营开销。“这个行业早就应该把现实世界和区块链联系起来了，”万蒂宁说。(在现实世界中，我以为他指的是区块链之前的其他建筑风格。)

拥有一个标准实现还可以减轻 API 提供者支持细微技术的开发负担。nttinen 说，其他解决方案需要内部人员来操作区块链节点，而 Airnode 更像是一个即插即用的 API 网关，可以作为 Lambda 功能部署在 AWS 上。这种可用性使得基于 API 的服务很容易吸引 Web3 应用程序，从而迅速打开一个新的潜在增长领域。

当然，nttinen 承认，与链外进程同步的概念仍处于非常早期的阶段。关于如何在市场上解决这个问题，存在相互竞争的理念，一些基本问题尚未解决。例如，大多数努力都集中在获取原始数据的读操作上。下一步将是让中间件“oracle”也包含离线写功能。此外，更多类似于 PubSub 的格式对于使事件监听器具有反应能力也很重要。

## 最后的想法

Web3 的趋势正在使更多的分散的、基于区块链的应用程序走向成熟。但是，这样的应用程序无法在封闭的世界中运行。为了体验数字可能性的全部广度，他们可能需要弄清楚如何整合链外计算并与替代的通信软件库相结合。自然，这将需要与 web APIs 集成，这已经成为基于云的通信的一种重要方法。

nttinen 说，API3 联盟“在这里为 Web3 的 API 连接问题提出一个解决方案”。“当数据提供商与区块链兼容时，您可以在这种分散的数据馈送中应用数据提供商的声誉…当您谈到通过智能合约连接链外服务和微服务时，这一点的重要性变得更加明显。”

Airnode 和周围的 API3 联盟是一个倡导 API 和智能合约连接的倡议。但是，这只是成熟领域中的一种方法。你如何看待弥合这两种范式？下面评论一下你的经历！