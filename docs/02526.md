# 将 DevSecOps 引入数据库开发的 4 个步骤

> 原文:[https://devo PS . com/4-steps-to-introduction-devsecops-to-database-development/](https://devops.com/4-steps-to-introduce-devsecops-to-database-development/)

尽管 DevOps 是在应用程序开发中实现的，但越来越多的人意识到，将数据库包含在 DevOps 流程中对于成功至关重要。我们生活在一个数据驱动的世界，许多前端应用程序在后端使用数据库来收集、处理和存储客户和用户数据。

DevOps 鼓励的更快的应用程序开发也导致了更频繁的数据库更新。通过将数据库开发排除在开发运维之外，数据库成为了发布速度的平衡物，否则发布速度将会提高。

正如 Redgate 的 [2019 Database DevOps 调查](https://www.red-gate.com/solutions/database-devops/report-2019)所示，这一点已经得到认可，该调查发现，77%的应用程序开发人员现在负责数据库开发，75%的开发人员负责构建数据库部署脚本。

所有这些都是好消息，只要数据库的 DevSecOps 也被考虑在内。

虽然 DevSecOps 相对较新(该术语是由 Gartner 分析师 Neil MacDonald 在 2012 年创造的)，但对它的需求是 DevOps 的一个广泛接受的方面，因为 DevOps 从根本上改变了公司在应用程序开发中处理安全性的方式。过去，在漫长的开发周期结束时，通过一个预定的窗口来审查和验证安全性，但是现在这个窗口已经消失了。因此，DevSecOps 应运而生，它将安全性融入到开发过程中，使用静态代码分析器和开源代码漏洞扫描器等工具在代码发生变化时立即测试代码。

同样，如果要实现无缝流程，数据库必须包含在 DevOps 中，公司还需要确保 DevSecOps 应用于数据库。事实上，鉴于保护个人数据在当今世界的重要性，确保隐私和安全对于合规性和公众信心都是必不可少的。

2017 年，MacDonald 继续致力于定义 DevSecOps，他列出了公司在开发期间保护应用程序需要遵循的 10 个步骤。所有这些都同样与数据库的 DevSecOps 相关，除了第二步:在开发过程中不要试图消除所有漏洞。许多数据库包含个人数据，其中大部分是敏感的，因此数据库开发过程中的每个漏洞都必须得到处理和解决。

仔细查看 Gartner 的列表，我认为有四个关键步骤特别适用于数据库的开发人员:

## 识别漏洞

数据库 DevSecOps 的中心是数据，必须保护数据免受内部威胁(如疏忽或意外暴露)和外部威胁(如黑客攻击)。然而，数据的最大问题是它的大小和蔓延。根据 IDC 的数据，数据正以每年 58%的速度增长，并且现在存储在许多不同的地方。

要确定漏洞是什么，首先需要找到数据并对其进行分类，并确定其风险。像这样的数据映射练习可以手工完成，也可以使用第三方工具完成，但是创建每个数据库的记录(包括开发或测试中使用的副本)非常重要，这样才能真正了解数据存储在哪里以及谁可以访问它。然后可以对数据进行分类，以识别哪些数据是敏感的和有风险的，例如信用卡详细信息，因此需要受到保护。

## 消除漏洞

正如我们所见，不要试图消除应用程序开发中的每个漏洞的建议不适用于数据库。当数据被确定为敏感和有风险时，必须限制访问，并且不能广泛共享。

然而，开发人员在他们的开发、测试或 QA 环境中经常需要一个生产数据库的副本，以确保更改一旦部署就能生效。但是，这些生产数据库总是包含需要保护的敏感数据。

一种解决方案是用匿名数据的有限数据集创建一个生产数据库版本。然而，这意味着它既不现实，也没有对性能的影响可以评估的规模。第二种解决方案是手动获取生产数据库的副本并屏蔽数据，但是随着正在进行的更改被部署到生产数据库，这种方法会很快过时。

因此，应该采用假名化、加密、匿名化和聚合等数据屏蔽措施，公司可以使用第三方工具来帮助屏蔽数据库副本，同时还可以为开发团队提供与真实数据外观和行为相同的测试数据。

## 介绍安全编码

虽然应用程序开发通常使用命令式编程语言，如 C#或 Java，但数据库开发依赖于声明式语言，如 SQL Server 的 T-SQL，它不太严格，并且编码标准差异很大。

这导致用 T-SQL 编码的开发人员有他们自己的风格和偏好。由于多个开发人员编写更新，这通常会导致代码混乱、难以理解，并出现可能导致部署失败的错误。

为了克服这一点，代码应该以相同的风格编写，采用遵循既定标准的安全方法，由数据库管理员实施。在编写代码的时候引入这种安全的编码思想可以防止以后出现问题。

## 尽可能自动化

Gartner 列表中的第九点是对所有代码和组件实施强大的版本控制，开发人员在开发过程中将他们的更改签入公共存储库，最好是在每个工作日结束时。因此，每个人都可以访问最新版本的应用程序，并且总是很清楚更改了什么、何时更改以及谁更改了它。

对于数据库代码来说也是如此，数据库代码也可以进行版本控制，最好是与应用程序使用的相同版本控制系统集成并插入其中。

重要的是，一旦版本控制到位，沿着开发管道的进一步过程可以自动化。例如，可以引入持续集成，以便在提交变更时自动测试它们，并确保它们不会破坏变更。

数据被描述为 21 世纪的石油，它的使用对每个组织的成功至关重要。鉴于其敏感性，保护它同样至关重要。这就是为什么所有企业和团队需要确保他们不仅在 DevOps 中包括数据库，而且在 DevSecOps 中也包括数据库。

— [马特·希尔伯特](https://devops.com/author/matt-hilbert/)