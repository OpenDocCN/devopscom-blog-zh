# DevOps 聊天:OPA 和 CNCF，与托林桑德尔

> 原文：<https://devops.com/devops-chat-opa-and-the-cncf-with-torin-sandall/>

云本地计算基金会[接受开放策略代理(OPA)进行孵化](https://www.cncf.io/blog/2019/04/02/toc…nto-cncf-incubator/)。在这次 DevOps 聊天中，我们与该项目的创始人之一 Torin Sandall 讨论了 OPA 以及为什么 CNCF 是 OPA 的理想之地。我们还讨论了他工作的公司，与 OPA 合作的 Styra。

像往常一样，下面是流媒体音频，然后是我们的谈话记录。尽情享受吧！

## 

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/603408711&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/603408711&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true)

成绩单

艾伦·希梅尔:大家好。我是 Alan Shimel，MediaOps，DevOps.com 背后的人，Container Journal，Security Boulevard 和 DevOps Chat，您正在收听的是另一个 DevOps Chat。

我真的很高兴能邀请到 DevOps 聊天的嘉宾 Torin Sandall，Torin 实际上是开放策略代理(OPA)开源项目的联合创始人之一，该项目最近接受了云原生计算的指导管理。

让我们欢迎托林。托林，你在吗？

嗨，艾伦。是的，很高兴和你聊天。

很高兴你能来到这里，也很高兴你能加入我们的播客。Torin，首先，也许有人不知道 OPA 是什么——什么是开放策略代理，对吗？有一些很棒的，如果你去——实际上，如果你去 CNCF.io，有一篇关于它的博客文章，我会把它放在我们的节目笔记中。但是对于那些正在跟随或在他们的车里听这个的人，请告诉我们——什么是开放政策代理？

Sandall: 是的，这是一个很好的问题，也是一个很好的开始方式。

所以，开放策略代理是一个与域无关的策略引擎，好吗？因此，它是通用的，这意味着您可以利用它来在广泛的技术范围内实施各种策略和治理机制。

例如，如果你想说，你知道，你的所有容器都必须来自内部映像注册表，你可以用 OPA 或开放策略代理来表达这种策略。如果你想做一些事情，比如说某些用户只能看到由微服务提供的某些数据，你也可以用开放策略代理来做。如果您想限制谁可以 SSH 到服务器或在服务器上运行伪命令，您也可以使用开放策略代理来完成。

因此，我们的想法是为人们提供这个引擎，让他们能够跨堆栈的各个部分统一策略控制。

**希梅尔:**优秀。你知道有趣的是什么吗？有一天我和一个人聊天，我们谈到，你知道，Kubernetes 如何融入整个云原生事物？因为云原生和 CNCF 不仅仅是库伯内特。他们给了我一个很好的类比。他们说，“把它想象成，你知道，一个战舰舰队，或者，你知道，一个美国海军舰队，也许库贝内特斯就是航空母舰。但是海军不仅仅是航空母舰。舰队不仅仅是航空母舰。有战列舰、巡洋舰、驱逐舰、潜艇、护卫舰和两栖登陆舰，”你知道，我不是海军专家。[笑声]但是所有这些不同的元素组成了这支舰队——这是一支庞大的舰队。

所以，你知道，当我看 OPA 时，你知道，开放策略代理——我们将讨论加入云计算原生计算基金会——它是舰队中必不可少的一艘船，对吗？这真的使得使用许多工具变得更加容易和实用，这些工具不仅存在于车队中，而且还存在于外围设备中的许多商业工具。公平吗？

当然，是的。CNCF 是在整个生态系统中提供大量价值的项目的集合，有一些东西将它们绑定在一起，这些是一些高级原则。所以，你知道，它们都是开源的，它们都是面向容器的。它们面向需要大规模管理的非常动态的系统。

所以，关于 CNCF 的许多项目，有趣的一点是它们是一种建筑材料。你可以把它们看作是整个系统的库或构建模块，对吗？所以，你知道，它们集成在一起，你可以把它们插入其他系统等等。这就是我们看待 OPA 的方式。这就是我们对 OPA 的看法，是作为一个构建模块，还是作为一个库，在您环境的各个部分实现丰富、精细的控制。

绝对的。

Sandall: 是的，所以，当你开始谈论在大型组织中采用技术时，政策是特别重要的，对吗？随着 Kubernetes 的成熟，企业已经真正开始使用它并在其上部署真正的生产工作负载，他们已经认识到不仅需要简单的最佳实践类型的安全措施，还需要更加复杂、丰富和精细的规则和约束，这些规则和约束需要在系统中强制执行，以确保每个人的安全。这就是 OPA 适合 Kubernetes 的地方。

是的，绝对是。你猜怎么着我意识到，我道歉，我真的没有做好让你在[相声]上向我们的观众介绍自己。

桑德尔:[笑声]没关系。

托林，我向你道歉。除了你是这个项目的联合创始人之一之外，你为什么不分享一下你在日常工作和你的余生中做了些什么呢？

当然，是的。所以，我认为这里相关的是，我是开放政策代理项目的联合创始人。我也是一家名为 Styra 的初创公司的软件工程师。我们是开放政策代理的制定者。我们在大约三年前建立了这个项目——实际上是三年多一点，是的，所以我们有点像今天这个项目的管理者。也就是说，我们开始看到越来越多来自社区的人加入进来，开始为开放政策代理和生态系统中的相关项目做出贡献。

这就是我做的事情。我的重点是开放策略代理，但我对整个云原生生态系统、安全和策略以及所有类似的东西非常感兴趣。

**Shimel:** 所以，你知道，我也应该提到——我做了一个糟糕的工作，托林，我道歉。我们还应该提到一个大新闻——我猜是在本周，或者可能是上周晚些时候 OPA，开放策略代理，现在已经成为或正在云原生计算基金会(CNCF)的赞助下。

**桑德尔:**没错，是啊。所以，实际上，我们在 2018 年加入了 CNCF，作为你项目的沙盒。OPA 被添加到 CNCF 沙盒中。因此，CNCF 有多个层次，现在有沙盒，孵化和毕业。

所以，今年，基本上，他们对项目做一个回顾，你知道，每年，他们检查项目是如何做的，他们是如何成长的，他们的社区是如何发展的。这很有用，对吗？来维持生态系统中良好的卫生状况。但这一次，我们觉得——每个人都觉得 OPA 增长了不少，它应该在 CNCF 内提升到下一级孵化。

因此，从沙盒到孵化的转变实际上反映了我们去年在生产用户、概念和集成证明以及加入项目的新外部参与者方面取得的进步。

**Shimel:** 明白了。你知道，我只是想说，你知道，CNCF 在指导这些项目方面做得非常出色，从沙盒到孵化，然后从孵化到毕业。我忘了数字，如果是五或六个项目，他们现在已经毕业了。

是的，我想今天大概有五个毕业项目。你知道，Kubernetes 是其中之一，它是旗舰项目之一，还有其他项目。所以，是的，他们在管理一组非常重要的构建模块方面做得非常好，就像我说的，这将帮助组织实现云原生。

**Shimel:** 那么，让我问你一个问题——我想这是我们的观众会非常喜欢的。作为 OPA 项目的联合创始人，你是如何把它带到 CNCF 的，你的动机是什么？

桑德尔:嗯，这是个很好的问题。我们发现，这个项目已经进行了一年多，或者更确切地说，大概两年多了。我们在与用户和潜在用户的交谈中发现，他们希望将 OPA 视为一种厂商中立组织的一部分，对吗？所以，我工作的公司，Styra，建立了 OPA，它从第一天起就开源了，但是人们真的喜欢看到这种项目，这种核心基础设施组件有点脱离，比如说，任何特定的组织。

**Shimel:** Mm-hmm.

桑德尔:所以—

**Shimel:** 嗯，没有和任何特定的组织脱钩。与任何一个特定的供应商脱钩。

一个供应商——是的，抱歉。一个供应商。

Shimel: 没有单一的供应商。

**桑德尔** *:* 是的。所以，你知道，我们环顾四周，我们看着 CNCF，我们真的很喜欢他们所做的，我们认为这是 OPA 应该去的地方。

所以，你知道，CNCF 基本上为我们的项目提供了这种供应商中立的家，它允许我们围绕云原生生态系统中的政策创建一个聚合点。所以，这是我加入 CNCF 的主要的、高层次的动机。

**Shimel:** 明白了。这很有道理。我的意思是，我必须告诉你，你知道，我不知道你是否熟悉，但是最近，CNCF 启动了——不是 CNCF，对不起 Linux 基金会，对吧，它是 CNCF 的母公司，对吧？—

**桑德尔:**对，对。是的。

**Shimel:**—推出另一个基金会，叫 CD 基金会，持续交付。

**桑德尔:**对，对。

还有 CloudBees，CloudBees 和 Jenkins 项目的人被捐赠给了 CD 基金会。詹金斯有詹金斯 X，网飞放在 Spinnaker，谷歌放在——我现在忘了它的名字，有一个 t

**桑德尔:**泰克顿？

**希梅尔:**泰克顿。他们把泰克顿放进去。我有一个很好的机会采访了一些 CloudBees 的人，我问了他们和我刚才问你的一样的问题。你知道，这是一个非常相似的答案，不仅最终用户可能会回避单个供应商支持的项目，而且项目很难打破这种模式，让其他供应商或其他供应商的人才做出贡献，因为他们认为他们这样做是为了他们的竞争对手之一的利益。

因此，通过将它置于这样的中立方之下，你知道，它不仅对你的最终用户和整个社区来说更容易接受，而且对由供应商组成的那部分社区来说尤其有吸引力。不管你是否讨厌供应商，你是否认为他们都是出卖给那个人的商业渣滓，事实是，这些人有资源投入这些项目，移动指针，让球继续前进，推动绳子上山等等。所以，不能和他们一起生活，不能没有他们，这是一个很好的中间地带。

Sandall: 这是一个很好的观点，我认为，你知道，我们开始看到越来越多的安全供应商对 OPA 或开放策略代理感兴趣。我喜欢叫它 OPA。很难称之为 O-P-A，当你有了可以使用的 OPA 这个词，但是无论如何——

希梅尔:是啊，是啊，是啊。[笑声]

**Sandall:**[笑声]但是，是的，我们看到越来越多的安全厂商对 OPA 感兴趣，你知道，从长远来看，这将有助于实现跨多个不同系统统一策略控制的目标，对吗？永远不会有一个供应商主宰一切，总会有不同技术的融合。所以，你知道，我认为我们能做的最好的事情，就是提供这种可以嵌入到任何地方的构建模块，这种模块有着基本的基础，可以实现统一。所以，非常激动人心的时刻。

绝对的。所以，我现在要请你戴上企业家的帽子，对吗？作为你公司的联合创始人，让我们从这个角度来看。这有什么用——我对你们公司不熟悉，所以我要提前道歉。再说一遍我们的名字？

**Sandall:** 不好意思，公司的名字叫 Styra。

Shimel: 这个词怎么拼？

**桑德尔:** S-T-Y-R-A。

**Shimel:** 明白了。那么，这对斯蒂拉有什么帮助呢？

桑德尔:这是个很好的问题。所以，是的，当创始人——我不是 Styra 的创始人，我是 Styra 的员工。

Shimel: 哦，对不起。好吧。

但是不管怎样，当 Styra 的创始人创办公司时，他们观察到的一件事是，为了在广泛的技术领域统一政策的实施，需要有一种基于语言的方法应用于问题领域。

因此，这是开放策略代理提供的东西之一——它为人们提供了这种高级声明性语言，他们可以用它来编纂策略。所以，这被认为是需要的东西，你很快就会得出结论，这是在 2016 年，2015 年，甚至今天，这是真的，但你很快就会意识到这种技术需要开源，对吗？组织不太可能想要采用一种专有的、封闭源代码的语言。这是不可能的。

因此，从公司成立伊始，人们就认识到这项技术的一个重要部分将是开源。这就是这类项目的开始。

**Shimel:** 明白了。明白了，明白了，明白了。你知道，我不想让你为难，但有一点斯泰拉的背景——斯泰拉的风险投资支持或自举，或者？

是的，我们得到了风险投资的支持，我们最近在几周前的 RSA 大会上发布了一个产品。

**Shimel:** 真的？

桑德尔:所以，这非常令人兴奋。所以，你知道，你可以把 Styra 看作是政策的控制平面。OPA 有点像数据层，对吧？你可以把它嵌入到应用程序中，你可以把它嵌入到 Kubernetes 中，你可以把它放在任何地方。但是，您还需要能够管理那些到处运行的 opa。

这就是我们在 OPA 社区中看到的——使用 OPA 的人们将它构建到他们的系统中。像网飞这样已经围绕 OPA 构建了内部安全平台的公司，他们最终所做的是为策略和安全创建一个集中的管理平台。

因此，这就是我们在 Styra 所做的事情，我们帮助人们思考策略的分布式执行和集中式管理。

**Shimel:** 明白了。

Sandall: 所以，我们今天的重点是 Kubernetes，你可以查看网站，我们在那里有很多信息，但是，是的，那是高水平的。

**Shimel:** 好东西。事实上，只是看网站，我没有意识到这一点，但斯泰拉是比尔·曼的公司。

是的，他是首席执行官。

Shimel: 所以——只是想让你看看我有多大。我认识比尔·曼已经很久了，我记得他加入加州的那一天。

是的，比尔认识很多人。[笑声]

席梅尔:是啊，他到处跑。比尔在附近，我也在附近。

桑德尔:是的。

我不知道这是好事还是坏事，你知道吗？但是，嘿，我们还在踢。所以，代我向比尔问好，他会很开心的。

桑德尔:是的。好的，我会的。我们有一个很棒的创始团队。他们中的一些人设计了 Nicira，这是第一个 SDN 类型的公司，对吗？他们[相声]—

Shimel: 对，我也记得那一次。

桑德尔:是的。因此，我们在安全和策略领域有着深厚的背景，我们正在将这一点融入到云原生生态系统中。

非常酷。你知道，我不想谈论施蒂拉，因为我们真的想专注于 OPA 和 CNCF，但也许我们仍然会，也许我们会安排一些事情，第二个，我们会谈谈——我们会深入施蒂拉。

是的，那太好了。

Shimel: 你们会在马德里的 KubeCon 或者我是说，在巴塞罗那？

我们会去库比肯，是的，五月份会去巴塞罗那。将会有很多关于开放政策代理的讨论。我想至少会有三到四个疗程。还有一个小东西叫云原生拒绝前周末。[笑声]这些是演讲——就像，BSides 演讲，基本上是为了——

**希梅尔:**是的。这就是安全隐患的由来。

是的，没错。因此，将会有一个包含 OPA 内容的会议。所以，是的，这将是一个伟大的事件。

**希梅尔:**优秀。

Sandall: 当然，我们会在展会上设立一个 Styra 展台。

**Shimel:** 所以，我们将有一个，你知道，数字无政府主义者是我们的视频平台，我们将有一个数字无政府主义者的场景，我们将在那里做视频。所以，一定要——我们会离线交谈，但我们会让你们看视频。我们会继续跟进。

**Sandall:** 完美！是啊，很期待。

**Shimel:** 那么，从 CNCF 的孵化项目中毕业有时间表吗，或者说还没有确定？

桑达尔:已经开了。所以，你知道，他们对这个项目做一个年度回顾，这有点像是由社区和 CNCF 以及每个人来决定什么时候是正确的。所以——是的，现在，毕业的主要标准之一是外部贡献。所以，你知道，在接下来的一年里，我们将看到围绕 OPA 的外部贡献如何演变，如果它处于正确的位置，那么我们将继续前进。

但我们现在真的很高兴转向孵化，因为它给项目带来了更多的可见性，它给项目带来了更多的可信度——你知道，除了所有在生产中使用它的人之外，让它在 CNCF 内得到更显著的体现是很棒的。所以，我们对今天的现状非常满意。

太棒了，伙计。嘿，托林，我答应过你我们会在 15 分钟内完成，那是 25 分钟前的事了。

桑德尔:[笑声]

Shimel: 很抱歉我跑过来，但我认为我们在这里谈得很好。

是的，是的。非常感谢，艾伦。是的，我很感激有时间谈论 OPA 和 Styra，我期待着—

哦，这真的是我的荣幸。我想——我们可能会在 5 月的 KubeCon 继续这个话题。但是在我们结束之前，斯泰拉是 S-T-Y-R-A.com 的 Styra.com。OPA 项目，对，是—

是的。

希梅尔:——OpenPolicyAgent.org？

桑德尔:没错，是的。

当然，你可以在 CNCF.io 网站上找到更多关于它的信息，对吗？—

桑德尔:当然，是的，它在 GitHub 上，我们还有一个博客，如果你去 blog.OpenPolicyAgent.org，你可以在那里找到更多信息。所以，是的，去看看，然后-是的。

**Shimel:** 【相声】都不错。嘿，Torin Sandall，OPA，Open Policy Agent 项目的联合创始人，该项目现在由 Cloud Native Computing Foundation 孵化，也是我的朋友 Bill Mann 在 Styra 的一名员工。

桑德尔:[笑声]

Shimel: 很高兴有你在这里。替我向比尔问好。祝 OPA 好运。

**Sandall:** 都行。

**Shimel:** 期待五月份在 KubeCon 与您见面。

**Sandall:** 期待。回头再聊。再见。

好的，托林，谢谢。嘿，我是 DevOps.com 的艾伦·希梅尔，集装箱杂志和安全大道。您刚刚听到了另一个 DevOps 聊天。

— [Alan Shimel](https://devops.com/author/ashimmy/)