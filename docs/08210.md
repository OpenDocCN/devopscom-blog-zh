# 需要新的 DevOps 数据库平台

> 原文：<https://devops.com/a-new-devops-database-platform-is-needed/>

支持快速 DevOps 连续交付交付周期所需的大量应用程序和服务所需的各种[数据库](https://devops.com/?s=database)平台、部署环境和数据变体，以及为应用程序管道集成数据库更改的挑战，是许多组织在努力加快其 DevOps 转型时面临的日益严峻的挑战。

当你退后一步看更大的图景时，一个拥有许多数据库和各种 DevOps 连续交付数据需求的企业就出现了一个问题。顶多是把事情搞得乱七八糟；最糟糕的是，它严重阻碍了整个组织的敏捷性——这破坏了 DevOps 的初衷。

在我的书 [Engineering DevOps，](http://mybook.to/engineeringdevops)中，我解释了数据库给 CI/CD 管道带来了几个挑战。

在最简单的情况下，当数据库仅由一个应用或微服务使用时，数据库管道可以与应用管道集成，以确保其更改使用相同的版本管理系统和更改控制，从而确保数据库更改与应用保持同步。然而，许多数据库平台对变化的响应不如应用程序本身，成为管道的瓶颈。

如果一个数据库由几个应用程序使用，每个应用程序都有自己的 DevOps 管道，那么对数据库的更改必须与依赖它的所有应用程序协调。作为一种策略，维护一个通过 CI/CD 工具链链接到应用程序管道的独立数据库管道过于复杂，并且经常会引入额外的瓶颈和同步问题。

数据库管道的另一个挑战是在 CI 和 CD 阶段管理数据库中的数据。生产中的数据需要是持久的和不断变化的，即使底层数据库代码在变化。在 CI 过程中，需要使用来自生产的样本数据来确保测试是真实的，并且必须引入新的测试数据来验证新的数据库功能正在工作。

在 CD 阶段，回滚到以前版本的数据库代码必须避免回滚到与生产数据不再兼容的版本。这就是为什么数据库更改必须遵循严格的方法的关键原因，该方法在完全部署之前用应用程序全面测试数据库更改。滚动部署是将应用程序和数据库更改逐步部署在单独的集群中，这样可以在出现问题时最大限度地减小爆炸半径。独立系统所需的协调增加了复杂性和瓶颈。

那么，为什么不简单地将数据库变更作为工件集成到与应用程序相同的 DevOps 管道中呢？

gilad David Maayan 2020 年 9 月的文章 [DevOps 数据库战略和挑战:自动化、可伸缩性等](https://www.networkdatapedia.com/post/devops-database-strategies-and-challenges-automation-scalability-and-more)解释了传统数据库与 DevOps 集成时出现的一些具体挑战。

数据库工具不是为与 DevOps 工具集成而设计的。这些工具往往是特定于数据库和环境的，这使得它们很难集成到为灵活性而设计的管道中。

在多个应用程序需要在短时间内使用数据库的 DevOps 环境中，数据库性能和易管理性通常表现不佳，例如在 DevOps 连续交付的加速交付周期中。对于大型数据库来说尤其如此。如果应用程序更改必须与数据库模式同步，更改管道可能会变得复杂，尤其是在需要跨多个应用程序管道进行同步以满足连续交付目标的情况下。

虽然 DevOps 流程已被证明可持续交付应用程序，但大型数据集、有限的数据库自动化和安全问题阻碍了将数据库更改纳入 DevOps 管道。因此，数据库开发和测试继续依赖过时的流程，从备份中刷新固定且经常共享的实例。需要一个新的 DevOps 数据库平台来为现代企业数字化转型提供高度动态和高效的云原生数据库解决方案，该平台必须包括用于 DevOps、DevSecOps、持续测试和治理的 DataOps 用例。这种新的数据存储库必须设计为通过灵活的 API 和云原生架构与 DevOps CI/CD 管道无缝集成。

鉴于以上几点，传统的数据库解决方案和并行数据管道策略不足以应对企业开发运维转型的挑战。我们需要一种新的 DevOps 数据库平台，它允许数据库和数据库更改像 DevOps 管道中的任何其他工件一样敏捷。

Windocks 产品管理副总裁 Paul Stanton 在他 2021 年 6 月的 YouTube 视频 [Windock DevOps Data Repo，](https://www.youtube.com/watch?v=xvCIEV2tcVo)中说:“想象一下 TB 级数据库环境作为 DevOps 工件进行管理，整个版本化数据库在几秒钟内可用。”这就是我们需要的。

以下是这种新型 DevOps 数据库平台所需功能的示例。

自动化数据库供应
分布式存储库支持
简单的声明式构建
可动态扩展
适用于各种数据库的虚拟硬盘映像——Linux、SQL、Oracle 和其他
在标准文件系统和存储系统上工作的分布式版本化数据库环境以 DevOps 的速度(换句话说，几秒钟)交付可写数据。
·同等部署到所有操作系统和云环境、Docker 容器和 Kubernetes。
每台虚拟机(VM)有多个克隆
包括访问管理、数据屏蔽和加密在内的安全特性
与 CI/CD 平台兼容并轻松集成
与多种云(AWS、Azure、GCS)兼容
将内置的数据安全性和治理纳入 DevOps 数据。

我将在后续文章中更完整地解释这些。

### **这意味着什么**

现代企业和组织要想保持竞争力，数字化转型势在必行。然而，许多企业和组织的转型正受到太多数据库平台和工具的严重阻碍，这些平台和工具不能很好地集成，并成为持续交付目标的瓶颈。需要一种新的 DevOps 数据库平台来解决数据库集成到 DevOps 应用程序管道的技术问题，在这种平台中，数据库被视为任何其他工件。需要一种新的 DevOps 数据库平台解决方案来加快价值实现时间，并为数字化转型的企业和组织实现高效、安全的运营。