# 测试更好，测试更快，测试更智能

> 原文：<https://devops.com/test-better-test-faster-test-smarter/>

你如何平衡“快速”的需求和测试一切并交付高质量软件的需求？

随着应用程序成为当今经济的驱动力，软件的质量和发布节奏对您的业务和底线至关重要。您希望尽快将软件更新到最终用户手中。然而，如果您的产品最终出现错误或故障，导致糟糕的用户体验或服务中断，即使最快的发布周期也不会有什么影响。

我想看看软件交付过程中最重要的(如果不是最重要的话)方面之一:测试！随着软件团队在实现 DevOps 和连续交付以简化软件交付方面变得更加成熟，测试作为这些实践的先决条件发挥了核心作用。

你需要从一开始就把测试放在心上，并把测试计划作为设计软件的初始阶段的一部分——规划你的测试程序、基础设施配置和验收标准。当你设计和开发你的应用程序时，你也需要考虑如何测试它。你脑子里的测试越多，你对你需要测试什么，什么是“完成”的定义就越有牢固的理解，你的整个过程就会越快，越流畅。

让我们回顾一下每个开发或 QA 团队在计划他们的测试时应该考虑的四个问题，因为他们试图平衡质量和速度——管理和加速他们的测试，同时确保合理的上市时间。

### 多少测试就够了？

老问题:我到底需要做多少测试？可惜没有具体的答案。但是，通过一些初步的调查，您可以很好地感觉到有多少测试是必要的。

必要的测试数量很大程度上受您所在行业的影响。如果你正在测试任务关键的飞机软件，让我们希望它是非常彻底的测试！另一方面，如果你正在开发一个游戏应用，必要的测试数量可能会更少。事实是，当你运行测试时，成功率通常不是 100%。因此，关键是定义对于您的特定软件，什么可以被合理地认为是“完成的”不要在某个时候武断地决定你的发布已经准备好了，而是在事实发生之前做出决定:我们将接受什么？我们愿意推出什么级别的通过/失败？基于我们过去的所作所为，我们对什么感到满意？

所需的测试量有时是不确定的。衡量您对您的测试过程和测试量的满意程度的一个好方法是问自己，“如果现在是晚上 11 点，我需要将这些代码发送给我的最终用户，我对推出这些代码是否足够满意，或者我不确定它在野外会有什么表现？”如果你倾向于后者，那么这可能意味着你应该做更多的测试。这是一种直觉，根据行业的不同，你发布一个版本而没有任何顾虑的时间点会有很大的不同。显然，对于一些受监管的行业，您需要证明合规性，并确保您已经记录了所有测试都是成功的，然后才能开始考虑发布任何东西。

### 你应该投资什么样的测试？

决定什么是你真正关心的，什么是你需要验证和测试的。我们对应用程序的期望是什么，对项目中不同的涉众的期望是什么？

每一个软件都需要进行不同的测试。因此，你必须计划测试的内容。你不能只是说，“我要对我的代码进行单元测试，每次都要，无论如何。”有时候，单元测试并不是你需要运行的最重要的测试。

投资必须在自动化上。无论你决定哪种类型的测试对你的项目最有功能性和相关性——无论你是在做大量的单元测试还是一堆功能性压力测试——它都需要自动化。

特别是，当您向世界开放您的服务时，您需要进行相关的性能和可靠性测试，这样，如果您的负载突然增加了 200 %,您就有了如何处理的计划。你要自动缩放吗？你能自动缩放吗？最后，您甚至需要自动扩展吗？

所有这些问题都需要作为开发周期的一部分来回答。自动化测试不仅会让您为这些场景创建测试，还会让您一遍又一遍地运行这些测试。通过自动化您的测试，您可以建立一个基线，并查看您偏离的地方。

用不同的方式思考测试也是有帮助的。不要把测试看作是验证技术需求的工具，而是让你的客户满意的方法。您希望确保您的测试直接有助于客户的整体体验。因此，从最高级别的测试开始，这些测试着眼于诸如整体业务功能之类的东西——并确保软件在业务级别上工作。

### 如何让测试更快？

自动化，自动化，自动化！这似乎是显而易见的，但是试着跳出框框思考。找到你认为不能自动化的东西，并把它们整理成形。记住，你的一个开发人员坐在那里运行一个可以自动化的测试的每一分钟，都在耗费你的时间(和金钱),而他或她本可以花在更有成效的事情上。从长远来看，不自动化比承诺把事情做好花费更多。

提高测试速度的其他简单方法是，确保开发环境是生产环境的镜像，并且在较低和较高的环境中保持配置的保真度。

这也有助于确保您定义的用户需求是垂直的薄片，而不是试图测试庞大繁琐的功能。理想的情况是，您只能对已经更改的组件运行测试。您的应用程序和测试过程的组件化是至关重要的，因为您不希望总是不得不重新构建和重新测试一切。还要记住，如果你对你的代码做了增量式的修改，并且频繁地将它们发布给你的用户(敏捷，有人吗？)，您将获得足够的反馈来快速可靠地改进。认识到不要贪多嚼不烂。

将测试分成几个阶段是加快 CI 和测试周期的好方法，但要确保你的应用、构建和测试电池都是为此而设计的。使用这种方法，您实际上是在运行 CI 的多个阶段，从需要最小构建的最快周期开始，具有最少的依赖性，并继续到测试的外部/级联周期。在提交之后，运行一个最小化的构建，这样您就不需要等待(有时需要几个小时)来运行一个大范围的测试集，每次提交都要查看它是否通过。从单元测试开始，以最小化构建并提供快速反馈，然后在不同的结合点加入额外的测试，如集成测试、安装程序和可用性及性能测试。

简化测试过程的另一种方法是查看构建和测试周期的整个范围，并跟踪最低效的阶段。自动化您的手动流程后，查看瓶颈和最耗时的内容，并找出如何优化该特定流程。通常答案是并行化，但有时是硬件。迭代你的过程，并找出你可以获得最多的理由！

最后，构建和测试的并行化和分布提供了巨大的时间节省，所以考虑在一个 CPU 集群上运行测试来减少运行时间。

### 如果你想确保你所有的构建都是绿色的，你从哪里开始呢？

问问你自己，你想达到什么目标？是不是一个可以更快发布代码的过程？或者在哪里可以更容易地解决 bug？然后确保你清楚地知道你有什么。你需要了解你的测试程序和支持基础设施的每一个步骤、任务、过程和微小的细节。在白板上画出您的整个端到端工作流程，并找出导致其变慢的瓶颈。

一旦您定义了您的目标并了解了您的当前状态，您就可以将相关的工具放在适当的位置——从开发环境到您的测试框架，一直到开发后的工具，例如您的分析工具——设计正确的测试管道并雇用具有相关技能的相关人员。不要坚持自己犯所有的错误(言不由衷)，而是找到那些已经犯过错误并从中吸取教训的人——然后雇用他们！

此外，给你的团队一个快速反馈的好系统。经常进行代码审查，这样就有了责任和持续的学习过程。

考虑以下改进测试过程的最佳实践:

1.  如果可能的话，一定要提前计划好你的测试方法。当你设计你的软件时，设计如何测试它是很重要的。
2.  您需要做的测试数量取决于您所在的行业和您的具体用例。
3.  基于你过去所做的，考虑你对什么水平的测试通过/失败感到舒服。
4.  考虑预提交或飞行前构建，以确保一旦检查到主线，您的测试更有可能通过
5.  定义每个测试周期的需求
6.  将您的测试分为“快”和“慢”，并决定您每次都需要运行哪组测试，以及您只需要在某些交叉点运行哪些流程。
7.  如果你招聘得好，给你的团队带来新的技能，你的过程会变得更好更快。
8.  考虑您的客户面临什么问题，并进行分析。像客户一样使用最好的工具来测试你的软件，以获得最高的最终用户满意度。
9.  自动化您认为理所当然的手动步骤，以加快周期时间并提高生产率。速度第二。
10.  迭代测试过程，而不仅仅是代码本身。你应该一直寻找新的测试方法。
11.  测试你的测试过程。与您的团队定期召开会议，重新评估您的测试策略是否对您有效。
12.  制定代码评审，以便对团队的其他成员负责。

当你映射、设计和优化你的测试时，记住你的测试策略不需要一成不变，你可以——也应该——随时调整。

测试愉快！

## 关于作者/安德斯·瓦尔格伦

安德斯·瓦尔格伦是 T2 电力云公司的首席技术官。Anders 在设计和构建商业软件方面拥有超过 25 年的经验。在加入 Electric Cloud 之前，他曾在 Aceva、Archistra 担任管理职务，并在 Macromedia (MACR)、Common Ground Software 和 Verity (VRTY)担任管理职务，在这些公司中，他在交付 Macromedia 的 Director 7 等获奖技术方面发挥了重要的技术领导作用。Anders 拥有麻省理工学院的理学学士学位。他邀请您免费下载 ElectricFlow 的社区版，以便在任何环境中构建管道和部署任何应用程序。