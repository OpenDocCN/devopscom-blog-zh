# 持续集成的现代化

> 原文:[https://devops.com/modernizing-continuous-integration/](https://devops.com/modernizing-continuous-integration/)

在[持续集成](https://devops.com/?s=continuous+integration)/持续交付( [CI/CD](https://en.wikipedia.org/wiki/CI/CD) )的二元性中，CI 关注于构建自动化。利用 CI 实践进行软件交付对于大多数组织来说是正常的，并且可以被视为一个已解决的问题。然而，随着微服务的扩展，对日益分布式的应用程序的需求也在增加，开发团队期望每次提交都应该是一次构建。

令人惊讶的是，持续集成已经成为这些期望的一个意想不到的瓶颈。要开始实现 CI 现代化，首先了解一些挑战是很重要的。让我们开始吃吧。

## 持续集成的挑战

考虑到构建和发布候选产品紧跟开发技术的进步——比如测试工件的新语言、包装和范例——扩展持续集成实现中的能力可能是具有挑战性的。随着集装箱技术的引入，建造所需的火力和速度大大增加。

### 扩展持续集成平台

由于繁重的计算需求，运行分布式 CI 平台所需的基础架构可能与他们正在构建的应用程序一样复杂。考虑一下在本地构建和测试周期中本地机器的资源被占用了多少。现在，将这个数字乘以一个团队或组织中的人数，你就会开始明白计算能力被使用了多少。分布式构建运行器只是复杂的一个方面，管理新的构建节点何时启动和关闭可能取决于平台/最终用户。

### 跟上技术发展速度

“技术中唯一不变的是变化”这句格言是对的。随着技术的进步，新的语言、平台和范例将会出现。然而，在异构构建中包含新技术或接受新测试范例的容易程度，对于更严格的 CI 平台来说可能是困难的。这些遗留平台只是为一小部分技术而设计的。使用遗留的或僵化的方法，维护技术速度所需的依赖性管理变成了一个巨大的负担。

## 实现持续集成现代化需要什么

改变持续集成实践和平台的最简单方法是采取我所说的四支柱方法:平台基础设施现代化、工程效率策略、测试优化和快速管道开发。在这些支柱中的任何一个方面取得进步都将使您走上现代化持续集成平台和实践的道路。在所有支柱方面取得进展将使您的 DevOps 团队取得重大成功。

## 平台基础设施现代化

实际构建和打包发生的位置(例如构建节点/运行器)承担了大部分繁重的工作，并且具有相当弹性的工作负载性质。构建(例如 JAVA JAR 构建)和打包(例如 Docker 映像合成)是计算密集型任务。一旦构建和打包完成，跑步者可以无所事事。这显示了拥有一个临时构建节点的重要性。构建节点在任务期间加速旋转，然后在构建任务完成后减速旋转或被销毁，以便不耗尽资源。

## 工程效率策略

工程效率的一个核心原则是满足你的内部客户。对于软件工程师来说，这意味着尽可能接近他们的工具和项目。像许多现代的应用程序基础设施一样，向开发人员转移意味着被包含在源代码管理(SCM)的项目结构中。

CI 平台中一个常见的脱节是依赖关系管理。在过去的十年里，对于软件工程师来说，这个问题已经用 Maven、Gradle 和 NPM 等打包或构建工具解决了。工程师只需要简单地隐式或显式定义他们需要什么，依赖关系就会得到解决。持续集成工具可能会受到脱节的影响，因为我们正在利用几个可能没有公共语法的工具。因此，再次强调，重要的是开发人员密切监督他们完成项目所需的所有工具，以减少这种摩擦。

## 测试优化

虽然最初将测试引入 CI 管道的信心有所增强，但是更多的测试——有时是不适当的测试覆盖——由于与管道的集成变得容易了。一个更难识别和纠正的问题是古怪的测试。易变测试是指在没有任何代码更改的情况下，定期通过和失败的测试。这就变成了一个双重问题:增加了执行时间和对剥落缺乏信心。避免这些问题的最合理的解决方案是添加测试优化。一个现代的持续集成解决方案应该能够可视化管道顺序、定时和整体执行，以帮助识别(并最终纠正)过度的覆盖和剥落。

## 快速管道开发

软件是迭代中的练习。迭代发生的门槛越低，工程效率和敏捷性的收益就越大。在到达可提交阶段之前，本地构建会发生几十次，将它们推进到开发集成环境。在这里，拥有本地环境是关键。奇怪的是，大多数持续集成管道被设计成从本地机器外部运行。因此，转移到本地 CI 渠道的能力有助于建立外部运行渠道将会成功的信心。

## 继续您的持续集成之旅

对于许多组织来说，持续集成似乎是一个已经解决的问题，但是与任何技术一样，总有改进和现代化的空间。像任何工程效率范例一样，CI 是一个不断发展的旅程和目的地。