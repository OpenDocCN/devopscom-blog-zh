# 开发团队应该知道的常见 RDS 错误配置

> 原文:[https://devo PS . com/common-rds-misconfiguration s-devsecops-teams-should-know/](https://devops.com/common-rds-misconfigurations-devsecops-teams-should-know/)

[关系数据库](https://devops.com/?s=relational+database)已经成为希望简化和扩展数据使用、存储和检索的组织的首选。许多组织选择 [AWS 关系数据库服务(RDS)](https://aws.amazon.com/rds/) 来放弃与数据库管理相关的资源密集型任务，包括管理和持续监督。RDS 是一项完全托管的服务，可以简化和自动化这些过程，使在云中设置、操作和管理关系数据库(包括 MySQL、PostgreSQL、MariaDB 或 Aurora)及其各种耗时的活动变得非常容易。降低成本和自动化流程具有重要的商业意义，并使组织能够随着数据的增长专注于性能、可扩展性和成本效益。

也就是说，AWS 不是所有者，也不是负责保护您的数据的一方——这是组织的职责。作为云提供商，AWS 确实提供了一套令人印象深刻的安全措施来保护运行其云服务的基础设施，包括访问控制、数据库快照和加密。但是，他们的政策明确规定，保护数据是组织的责任，作为环境的管理者，您将对环境中发生的事情负责。

以下是与安全性和法规遵从性相关的六种最常见的 RDS 错误配置， [DevSecOps](https://devops.com/?s=DevSecOps) 团队应该了解这些错误配置，以保护他们的数据存储和组织资产。

**地理信任破裂(又名数据主权):** RDS 提供了跨各种 AWS 区域分发数据的便利选项。这种数据迁移有各种好处，包括最大限度地减少延迟、灾难恢复能力和扩展操作。然而，跨地域复制的安全性和治理风险可能远远超过这些好处。一个常见的错误配置包括迁移副本或将备份和快照存储在另一个位置。当敏感数据在另一个地理位置传输和存储时，组织可能会面临违反国际合规性要求的风险，例如 Schrems II(针对 EU-到美国的数据传输)。此外，移动到不同位置的数据可能对安全团队不可见，或者不受开发运维团队的管理，如果没有持续更新的清单，数据将不受阻碍和不受控制地传播。

下面的屏幕截图显示了将美国 RDS 数据存储复制到欧盟地区的快照操作。

![](../Images/6fd296af172bc9bfca2c75333b302044.png)

**保留期不足:** AWS 允许组织按照用户的配置将数据库实例保留一段特定的时间。此功能的一个常见错误配置是存在未受监控的独立快照、短期备份和无法永久删除记录。长期保留记录的组织可能会违反其 GDPR 义务，而短期备份可能会危及组织在数据丢失或遭受勒索软件攻击时恢复关键数据的能力。开发运维团队和合规主管之间清晰的指导方针和开放的沟通是迈向健康环境的第一步。

下面的屏幕截图显示了 RDS 数据存储创建过程中推荐的全面备份保留期配置。

![](../Images/df982e707a89a728d87121bd0de46b00.png)

**暴露的资源(网络访问):** 可公开访问的数据库端口和 RDS 实例是恶意行为者有利可图的配置漏洞。常见的错误配置可能会导致 RDS 数据库快照被公开访问，从而为未经身份验证的用户提供访问权限，并通过暴力攻击、已知 CVEs 和 DDoS 攻击来滥用它，从而暴露敏感数据。这种风险还会影响组织遵守国际法规要求的能力，因此在创建和维护此类资源时，应优先考虑这种配置。

下面的屏幕截图显示了 RDS 数据存储创建过程中推荐的网络(公共)访问和默认端口配置。

![](../Images/ded4aa12a4dcf8d861eeae6acdec70fb.png)

**弱加密:** 对静态和传输中的敏感数据进行加密是确保组织数据的完整性和机密性并防止未经授权的用户访问这些数据的必要安全基准。常见的加密错误配置可能包括对 TLSv1.2(及更高版本)等通信通道实施不充分的加密、弱密码套件或不受信任的 CA，这可能会导致错误的安全感。对于静态数据，另一个常见的错误是缺少密钥轮换或将加密密钥暴露给未经授权的实体。

下面的屏幕截图显示了创建 RDS 数据存储时建议实施的基本静态加密配置。

![](../Images/73d4f7d8e2e2cd2779998f02a69ec007.png)

下面的屏幕截图显示了创建 RDS 数据存储时建议实施的基本传输中加密配置。

![](../Images/85371ac8bb91ce3320c620f0337fa649.png)

**不适当的认证&授权(RBAC):** 充分的数据安全卫生的基石是基于最小特权原则，使用具有适当理由的强识别方法，确保访问仅与唯一的帐户相关联。使用 RDS，用户不得使用 IAM 帐户，向主实例或备份提供过度特权访问和权限，并且不得实施用户访问季度审查。

下面的屏幕截图显示了创建 RDS 数据存储时建议实施的身份验证配置。

![](../Images/58cb721c1e76344e5d978c6469bdd97e.png)

**未完成审计:** 可见性不能被认为是一个时间点活动。监控敏感数据的访问和使用是跟踪组织资产的重要组成部分，将在发生事故或潜在数据泄露时提供重要信息。不完整或放错位置的审核记录(包括登录/注销事件、短期审核或敏感数据从 rds 泄露到审核日志)会增加风险。

下面的屏幕截图显示了创建 RDS 数据存储时推荐的审核和日志配置。

![](../Images/e02edf20b0c58c542b6cb4f10d9fbaf6.png)

云环境中的错误配置和单点故障对于所有组织来说都是不可避免的，尤其是那些大规模运营的组织，这是因为知识差距、数据和变化的高速度以及随着数据量的增加缺乏可见性。虽然 RDS 配置可能涵盖了安全基准，但这只是保护您的环境所需的最低要求。鼓励 DevSecOps 团队与其合规主管密切合作，以确保客户数据的安全。利用 RDS 带来的好处是一项复杂且更加实质性的责任。组织必须将其数据视为内部资产的固有部分。作为其所有者，他们应该创建适当的生态系统，以便能够持续监督和监控数据、可能出现的差距，以及最重要的是确保数据安全的控制措施。