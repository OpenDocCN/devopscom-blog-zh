# 持续交付和部署:两种模式的故事

> 原文:[https://devo PS . com/ener NOC-energy-Intel-software-provider-opens-system-level-data-non technical-users/](https://devops.com/enernoc-energy-intel-software-provider-opens-system-level-data-nontechnical-users/)

EnerNOC (能源网络运营中心)是一家能源智能软件提供商，在其波士顿总部和全球各地拥有 1300 多名员工。这家上市公司帮助全球客户高效消耗能源。EnerNOC 首席工程师兼云架构师 James Nichols 表示:“我们的使命是改变世界使用能源的方式，通过关注客户购买能源的方式以及使用能源的时间和方式，帮助客户提高盈利能力和可见性，从而实现更好的决策和可持续发展。

EnerNOC 是 [Splunk](http://www.splunk.com/) (该公司也使用其他 DevOps 工具和平台，包括 [AWS](https://aws.amazon.com/) 和 [Oracle](http://www.oracle.com/index.html) )的定期用户，ener NOC 在其永久驱动中实现了全自动监控，从而超越了连续交付，转向连续部署。

EnerNOC 讲述了为什么使用持续开发和持续部署模式，其中有一章讲述了它如何转向全自动监控。

## EnerNOC DevOps 型号

EnerNOC 的 DevOps 模型不断向全自动化过渡。目前，它拥有全自动部署、全自动监控和半自动质量保证(QA)，这推动了公司的持续开发方法。

尼科尔斯说，在 EnerNOC 的遗留软件整体中，对较小应用程序“基于提交构建”的改变与进一步的自动化齐头并进，目标是该公司所谓的“值得信赖的连续部署”。这就是 EnerNOC 将自身扩展到部署自动化的关键所在。

只要模型在部署中不是完全自动化和连续的，它就保持连续交付。“这两种方法之间的大部分差异是由于仍然有手工过程的交付管道的某些方面造成的；Nichols 说:“这些部分通常由剩余的手工测试程序组成。

## 变更控制需要两个模型

EnerNOC 开发和维护必须通过变更管理审批流程的关键任务软件。这个过程包括公司内部和公司与客户之间的沟通，以及用户验收测试。这就是手工测试的用武之地。只有在这个审批管道的末端，EnerNOC 才能将软件接力棒交到生产部门手中。

由于 EnerNOC 的紧密结合的系统和人工测试，变更控制仍然存在，以及持续开发和半自动与全自动持续部署的混合。“DevOps 是一种文化运动，也是一种技术运动，因此现有的模型可以随着组织的质量和成熟度的发展而发展，”Nichols 说。如果手工测试和系统之间的关系让位于更全自动的测试和更可修改的关系，QA 可以更紧密地拥抱全自动化。

## 监测挑战/成就

EnerNOC 的应用多样性包括立足于亚马逊云、EnerNOC 数据中心和内部的混合软件。“在数据中心，我们在 Oracle 之上使用了三个层。在 AWS 中，我们使用大数据、云友好和无服务器技术的组合，”Nichols 说。业务事务数据遍历许多属于服务组利益相关者的机器。Nichols 指出:“分布式、分散式架构使得故障排除、性能管理、安全操作和生产操作变得极具挑战性。更好的监控是答案。

EnerNOC 希望让非技术用户能够通过单一控制台仪表板轻松访问系统级监控数据，并透明地了解多个系统，该仪表板具有随时可用的系统通知和故障排除功能。“我们将使用 Splunk 来完成这项工作，然后反馈我们从使用 Splunk 中学到的一切，以推动我们的开发运营和工程流程走向未来，”他说。

EnerNOC DevOps 性能团队构建了 Splunk 服务附带的仪表板，确保它能够记录对组织有价值的性能指标。性能、产品管理和开发团队保持对指标的了解，并接收相关警报。Nichols 说:“开发团队在开发生命周期的早期整合了正在进行的度量，以提高应用程序的性能。

EnerNOC 首先将 Splunk 应用于 web 日志以进行运营容量规划，然后使用 Splunk 让运营团队能够透明地了解其正在生产中运行的新实时数据产品的功能。随着新产品的出现，在运营团队成员的迫切要求下，该组织将它们添加到 Splunk 中，以便为运营团队提供仪表板。

## 当前状态:所有系统正常

EnerNOC 将 Splunk 应用于测试和生产系统，以实现一致性和加速。Nichols 说:“Splunk 是我们的主要警报基础设施，用于 CPU 利用率等低级别系统指标以及跨多个系统的复杂业务交易。Splunk 关注应用程序运行状况、跨计算机的集群状态、预期的系统任务和可疑或已知的不良系统行为，以及是否存在任何重大事件。