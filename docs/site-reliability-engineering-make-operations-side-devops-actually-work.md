# 站点可靠性工程:如何使 DevOps 的操作侧实际工作

> 原文：<https://devops.com/site-reliability-engineering-make-operations-side-devops-actually-work/>

DevOps 运动经常被指责过于关注前半部分(开发)而对后半部分(运营)关注不够。当然，比起操作运行系统，人们更关注有效载荷的部署，这导致开发和运营之间的移交被视为“翻墙”。

最近，随着站点可靠性工程(SRE)新实践的创建，我们看到了对作为这些部署目标的系统的稳定性和可靠性的新关注。这是对 IT 工具箱的一个受欢迎的补充，但它似乎仍然将所有的责任都放在了运营团队身上，以捕捉任何翻墙而来的东西。

## 站点可靠性工程的问题= IT 基础设施

在 SRE，IT 基础设施应该是高度自动化的，能够在任何事件面前自我修复。问题在于:这种方法对可预见的事件很有效，但对不可预见的事件就不那么有效了。由于这一因素，它在运行少量单个工作负载类型但规模非常大的环境中工作得很好。如果你认为这听起来像谷歌和脸书，[你就对了](https://www.moogsoft.com/blog/aiops/google-facebook-incident-management-scale-insights-srecon-2016/)。

这相当于基础设施的大规模工程，以抵御已知或可预见的问题。然而，典型的企业 IT 环境并非如此。一家大型银行可能有数千个应用程序，每个应用程序都必须适应 IT 环境之外的变化。将假设从一种环境应用到另一种环境是自找麻烦。

![](img/9bbfdd68a8f62be65dd813959a4f8104.png)

为了说明这一点，让我们看一个 IT 外部的例子。最近是泰坦尼克号沉没的周年纪念日，1912 年 4 月 15 日。皇家邮轮泰坦尼克号本身就体现了 SRE 的原则，旨在预防或应对各种紧急情况。这艘船配备了最先进的一切设备，可以安全舒适地运送乘客横渡大西洋。

众所周知，该计划并不十分成功。环境中意想不到的变化(比正常情况下更多的冰山)，保持速度的商业需要，以及其他船只对冰的错误处理警告，导致了泰坦尼克号的灾难。

虽然 IT 故障的后果很少像远洋客轮沉没那样引人注目，但许多相同的因素也适用。IT 管理员可能认为，在最坏的情况下，他们的备份和灾难恢复计划足以处理任何问题，但这些计划是围绕已知和可预见的问题设计的。意外情况很容易导致连锁故障，这就是为什么当意外不可避免地发生时，做好准备至关重要。

## 传统 IT 运营的问题=静态模型

IT 运营的主要缺陷是依赖静态的世界模型。这些模型有多种形式——CMDB 是许多人首先想到的“模型”,但静态规则集也是一种模型。然而，最危险的模型是那些不可见的模型:也就是说，放置在适当位置以确定哪些警报和事件值得考虑的过滤器。

![](img/f51c4d3d0672bcd8302896d6df621334.png)

这就是最终导致泰坦尼克号沉没的缺陷:船员们不能正确地安排事件的优先次序，并及时做出反应以避免失败。该缺陷每天还会在各地的数据中心引发无数更小的问题:充满日志的文件系统，关闭关键业务应用程序所依赖的数据库，以及没有转发该警报的过滤器，因为它通常是无害的。或者，冗余网络链路的一条链路中断，这被忽略了，因为另一条链路仍在运行，所以链路仍然存在——直到那条链路也出现故障，整个站点陷入黑暗。

关键因素是过滤器抑制这些警报没有错。根据定义，信息性或警告性警报不同于主要或严重的警报，大多数时候可以安全地忽略它们，留待以后处理。

然而，如果理解正确，这些警报的模式可以不时地识别出正在形成的未来问题。如果运营团队一天中有足够的时间来查看和审查这些问题，这些发展中的问题可以被扼杀在萌芽状态。但是，当然，他们没有——我见过的每个运营团队都被问题淹没了，在这些问题后面有一个长长的待办事项列表。

## DevOps 可以做些什么来改善运营

新的方法正在出现，使 SRE 会议背后的原则更容易理解和适用。特别是，现在可以进行更动态的降噪和关联，从持续的背景噪音中筛选出那些重要的警报，并将它们组合成一幅真实发生的画面。关键因素是能够实时地做到这一点，而不需要人类费力地计划他们将来可能需要知道的所有可能的场景。

Gartner 称这种新方法为算法 IT 操作，简称 AIOps。我们的想法是将所有可能的事件源汇集在一起，无论是来自计算或网络基础架构的警报、APM 工具报告的事务处理速度变慢、从 CI/CD 工具链运行的自动化部署，还是其他任何可能相关的事件。然后，所有这些信息都可以通过算法进行筛选，以了解什么对 Ops 真正重要，并引起正确的专家的注意，这些专家可以解决问题并快速解决问题。该流程的一部分还包括与记录系统(通常指 IT 服务管理)的集成，以及与可加速补救活动的自动化和流程编排工具的集成。

这就是我们如何让 DevOps 的运营部门能够适应不断加快的变化步伐——无论是来自希望运行更频繁部署的开发团队，还是来自需要帮助实现自己目标的业务用户，或者来自即将到来的下一个意外问题。

多米尼克·惠灵顿