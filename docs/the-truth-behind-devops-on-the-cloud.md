# 云上开发运维背后的真相

> 原文：<https://devops.com/the-truth-behind-devops-on-the-cloud/>

***云上的 DevOps 看似足够简单，但实际上可能非常复杂***

DevOps 管理员的最终目标是确保一切正常、无缝地运行——以至于管理层确信 DevOps 管理员整天都在玩单人纸牌游戏。最后，一个成功的 DevOps 团队应该让他们的系统自动化，这样他们强加给组织的摩擦水平就会最小化。

利用云环境让它看起来很容易——几乎太容易了，让它看起来好像所有开发人员需要做的就是按一下按钮。人们可能会误以为云上开发运维的复杂程度微不足道，但事实并非如此。

在云上运行 DevOps 就像在别人的大楼里租一套公寓:即使你不拥有基础设施，你也必须处理任何可能出现的问题。类似于一个过于吵闹的邻居，您可能会在一天的不同时间体验到相同容量的相同服务器的不同性能水平，因为其他人正在相同的硬件上运行。

当在你自己的硬件上运行时，还有一些安全威胁没有发挥作用。如果运行您最重要的计算的同一台物理机器也被邪恶先生使用，他可以使用各种技巧和黑客来获取有价值的数据。Meltdown Inspector 攻击就是一个例子，它对所有云提供商造成了严重的 fleetwide 性能影响，有时超过 10 %,并且需要昂贵的缓解措施。

## **理解您的数据金矿**

提供给系统管理员的大量信息同时令人敬畏、恐惧和沮丧。有这么多可用的信息，理论上，我们应该能够排除故障并修复任何和所有问题。不幸的是，理解大量可用的信息并确定必要的关键信息可能极其复杂。

本地数据中心通常采用的平面网络拓扑在云上要复杂得多。除了 VPN 和 DMZ 之外，还有多个隔离的网络、运行虚拟机的容器以及运行在分段网络上的容器，它们通过 NAT 进行多级路由和调度。在这样的环境中尝试故障排除可能是一项令人沮丧的工作，因为您并不拥有整个网络。

在您自己的数据中心中，您可能认为理所当然的某些工具和功能是不可用的，例如 [Tcpdump](http://www.tcpdump.org/) ，这是一种监控网络数据包的低级工具。例如，在 VPN 数据包丢失的情况下，您的云 VPN 服务器与其他客户端共享，因此您将无法捕获数据包来解决连接问题。

此外，在托管服务(尤其是数据库)中，通常在其他环境中用于故障排除的调试端点和工具不可用，以避免暴露其他用户的数据。例如，您无法从服务器获取完整的日志来了解它在做什么。这可能隐藏了生产中不可忽视的重要环节。

## **评估云提供商**

由于不可避免地会出现问题，选择云提供商的一个重要考虑因素是他们提供的支持水平和质量。重要的是要超越简单的 SLA，评估您可以获得的支持的实际质量和有效性。

举个例子，假设一台机器长时间死机，实际上是随机的。所有的监控和指标都讲述了一个简单的故事。机器启动了，有足够的资源和容量，但就是不响应任何连接尝试。故障排除涉及剥离问题的核心，并能够以最少的方式重现这一点，这时，人们将联系云提供商支持，试图了解发生了什么。实际问题是 NAT 路由器中的网络端口耗尽，这导致远程服务器重置 TCP 连接，导致长时间超时，从而冻结了系统。这个特殊的问题需要几天时间才能解决，并且需要对部署拓扑进行重大更改。

在云上运行 DevOps 不是一件容易的事情，云本身也不是银弹。相反，这是一种使硬件和运营资源民主化并大规模有效工作的方式。如果你能应对新的挑战，你就能享受新的效率水平。

-[耳朵末端](https://devops.com/author/oren-eini/)