# 函数式编程:不适合函数式编程的孤岛

> 原文：<https://devops.com/functional-programming-island-of-misfit-functional-programming/>

函数式编程的时代正在到来。炒作周期已经升温，IT 部门正在从功能仅按需运行的想法中获得实际和可感知的好处。

对一些人来说，好处是实实在在的。突发处理，或者频繁且快速解决的事情，看到了在功能性架构上实现的好处，功能性架构的成本可以说远胜于云实例的成本。我说“可以说”是因为你总是可以在一个未被充分利用的云实例中塞进更多的东西，但是你要按需付费——对于函数式编程来说更是如此，所以添加每一个都有一个增量成本。但是它是渐进的，你有权力选择功能性是否适合任何给定的架构。

那么为什么是这个标题呢？还记得深受人们喜爱的圣诞故事《红鼻子驯鹿鲁道夫》中的不合群玩具岛吗？他们都有点不在状态。在一个充斥着完美玩具的世界里，它们无人照管，无人需要。

从长远来看，这也是一种风险。您可以在那里弹出一个函数，配置访问点(几乎无处不在的 web 应用程序防火墙入口点，但是事情发生了变化，所以我们将坚持使用通用的“入口点”)，并开始发送请求，这种想法非常好。事实上，您只为您的请求实际得到服务的那一点时间付费也很棒。

但是这种想法假设安全性是在功能级别上实现的。如果您在任何有公共 IP 的地方部署此功能，它假定核心安全性已经包含在内。

没有这种安全感是你可能有一个不合适的玩具的第一个原因。

根据定义，基于函数式编程的系统是复杂的系统。它们是微服务的终极进化。他们将遭受与 SOA 相关的所有头痛和心痛，并增加与 REST 版本控制相关的问题，等等。将会有 50 或 500 个函数，每一个都裁剪好，各司其职，组成一个应用程序(在一个纯粹的世界里，由一个函数式编程应用程序组成)。

这些功能中的一些将变得过时和无用。你不能让他们躺在那里，等着被虐待。事实上，一种新形式的金融攻击可能就是寻找这种被遗弃的玩具，并开始反复快速地给它们打电话。

想象一下，有一天，财务部问你，为什么上个月你在功能提供商 X 的账单翻了三倍，却发现你留在那里的一个功能被无缘无故地调用了？

但是许多小代码固有的复杂性，每个代码执行一个特定的任务，很大程度上保证了会有残羹剩饭，除非你非常小心。

我的朋友们，这就是(最后，我知道)这篇博客的目的。我们今天的监控工具倾向于观察应用程序的性能，但是在您全力投入函数式编程之前，您需要更多的东西。您需要构建工具来告诉您某个给定的函数何时不再被调用——无论在哪里。这是一个以前的分布式方法都无法掌握的高要求，但在您的功能位于具有面向公众的 IP 地址的各种公共云中的情况下，这一点更为重要。

还需要一个权威的源代码扫描器。这些正在慢慢变好，但是想象一下，如果构建系统为 20 或 30 个不同的函数式编程微生物使用的一个库被破坏了怎么办？我们已经看到了足够多的忽视问题的例子，就是乞求成为一个受害者，所以对于更多使用外部库的系统来说，在构建时扫描更加重要。或者更准确地说，随着外部库被拉入更多的微服务。有些公司/服务提供商会验证您的外部依赖性，并且只允许您加载他们已经认证为安全的开源库。我从来没有用过，但它们值得一查。

入口点和访问它们的位置的列表对于仅供内部使用的应用程序非常有用。当然，对于任何人都可以调用的公开发布的 REST API，您无法做到这一点。我是一名开发人员，也是一名 D&D 玩家，所以我将使用那个例子:Wizards/Hasbro 无法控制从哪里调用这个 [API](http://www.dnd5eapi.co/) 。这同样适用于为其他人提供访问权限的任何 web 服务 API。但是内部 API 是内部系统不可分割的一部分，不对外调用？你需要一个自动的方法在内部源代码中找到对它们的引用，并进行计数。就像垃圾收集一样，您需要记录那些计数为零的垃圾。

事实是，函数式编程在许多方面降低了操作的复杂性。这无疑降低了运营开销。但是这种复杂性被一种不同的操作复杂性所取代；维护成为一个更大的问题，已经发生的代码分解成更小块的情况增加了，带来了交叉引用的复杂性。

记住这一点。您将会有孤立的功能，您将会有安全问题，您将会改变操作的复杂性。从第一天开始就为这些事情做好计划。他们根本不是交易破坏者，功能性的好处在某些垂直领域已经很明显，随着我打字，更多的一般好处正在被发现。但是它们是新的问题，需要在这个新的架构中找到答案。

因此，从一开始就构建监督和工具，并去看看函数式编程如何能使您的项目受益。目前，它并不是所有问题的答案，但像大多数很酷的新 it 事物一样，它是解决业务问题时手头的另一个工具。

并且不要让你的函数式编程微服务最终停留在不适合函数式编程的孤岛上。

唐·麦克维蒂