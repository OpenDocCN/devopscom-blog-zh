# 没有综合偏头痛的综合测试

> 原文：<https://devops.com/integrated-testing-without-integrated-migraines/>

我总是惊讶于有多少实践者(或者更确切地说，管理者)吹捧测试驱动开发(TDD)的好处。这从本质上改变了传统开发人员的角色，变成了开发人员和测试人员。但是似乎只要我能够为我希望创建的创新构建一个测试，宇宙中一切都很好，并且我可以宣布自动化测试与我的 DevOps 过程集成的完全成功，从那以后晚上可以睡得很好。

但是在昨天之前的世界里，测试人员倾向于和开发人员有不同的想法。它们以不同的方式进化，带着应用程序的伤疤，这些应用程序在开发人员的笔记本电脑上测试得很好，但在最初的安全港之外的世界中发生的无数情况下不知何故就死了。事实上，拥有各种自动化工具的人类测试人员往往会向开发人员“证明”他们神圣的代码实际上并不那么虔诚，而是比他们想象的更“神圣”(也就是说，包含漏洞)。因此，再次保持代码/测试/代码的循环，直到成功地通过了对产品的挑战。

还有一个关于测试的现实是开发人员不容易克服的。唯一能够容易地伴随新特性或功能的测试类别主要是功能测试。“功能起作用了吗？”似乎是开发人员可以为他/她的代码构建的测试类型。尽管有鸡舍中的狐狸的比喻，但是在代码进入生产阶段时，还有很多其他类型的测试同样有效。这些测试中的大多数都不容易由最初的开发人员构建。

有人可能会认为性能测试有点重要。在这种情况下，我不仅关心我的新特性的有效性，我还关心与用户体验相关的性能(时间)，包括我的生产环境的条件。为了正确地衡量这一点，我可能需要确保所有的集成测试也已经成功完成。假设所有这些都按预期完成，我可能仍然希望用户测试我的应用程序——你知道，看看它是否确实是他们在现实中想要的(在从他们提交的故事的古埃及笔记中解密需求之后)。除此之外，一些功能主要出现在批处理上下文中，或者可能只有在移动应用程序中实现接近时才会出现，因此上下文对于测试同样重要。

## 集成测试的细微差别

但是回到我们最初的问题，让我们假设我可以测试一些东西，让我们假设我已经测试过了。我们将何去何从？一旦我的新特性的有效性被测试，我是否应该将测试执行从构建自动化中分离出来，并将其转移到我只定期执行的回归测试列表中？这似乎是合乎逻辑的，因为这个测试可能需要在集成后测试期间再次运行(特别是如果它操作具有上游依赖关系的数据)。在第一次成功发生之后，我的测试的“价值”是什么？如果它有价值，那么我必须开始用看待代码的同样方式来看待我的所有测试:它需要被版本控制。

将功能测试与它们验证的代码版本配对将允许我向前或向后滚动测试自动化，以匹配目标测试环境中的代码版本。例如，如果在我的集成环境中编码构建版本 1.5 失败了，我可以回滚到版本 1.4，同时回滚对旧版本有效的测试。这比使用为我的代码的 1.5 版本设计的测试要好，因为用旧代码测试新特性的有效性肯定会产生错误。

但是，像对待版本控制代码一样对待测试脚本(或实体)是大多数组织尚未解决的问题。将测试作为构建后部署自动化的一部分进行部署同样令人望而生畏。

当然，这些都没有解决更根本的问题:我的测试到底有没有价值？因为我可以测试一个特性或功能，我应该测试它吗？该特性或功能对用户体验是否至关重要？我是否以这样一种用户体验将被评估的方式来测试它？第一次测试一个日期字段是否只允许有效的数据输入似乎很重要。但是一旦日期字段的特征被软件库、高级编程语言或数据库结构如此普遍地定义，也许继续验证输入是过量的并提供递减的价值。测试正确的东西和测试一样重要。

然后，让我们假设我们已经找到了要测试的项目的 Rosetta stone，并且我们已经创建了用奥林巴斯传下来的脚本来测试这个特性的能力。如果该特性的持续有效性或性能特征对用户体验仍然重要，也许我们不仅发现了要测试的东西，还发现了要监控的东西。这是我们开始思考未来两年的地方。如果我的 DevOps continuum 的一部分是集成版本控制测试的能力，为什么不集成版本控制监控呢？(这是 DevOps 的运营人员最终感兴趣的地方。)

与其仅仅从受 TDD 支配的开发人员的角度来检查测试，为什么不从编码、集成、性能、用户以及最终的监控角度的更全面的角度来检查“评估”的生命周期。如果我的监控工具能够进行配置调整、参数调整以及上限和下限调整，那么通过读取外部文件或利用 API，我们难道不应该将我们的监控配置文件与我们按版本谨慎部署到生产中的应用程序版本进行配对吗？也许一个不太有用的测试简单地被淘汰，而一个更有用的测试发展成一个程序特性，我们监控它直到特性本身被淘汰。

将运营团队融入到关于自动化监控的讨论中肯定会引起他们的注意。至少，在部署期间关闭监控工具并在之后再次打开它们的能力将减少“噪音”，并有助于在警报出现时将资源集中在真正需要的地方。了解生产监控方式与测试环境的独特需求之间的差异，以及将二者融入开发运维自动化的能力，同样具有吸引力。

在任何情况下，对应用程序的评估不仅包括确保有效性的原始测试，还包括为确保持续的预期性能而进行的监控。思考测试从哪里开始，哪里的监控更有效或更有必要，可以帮助这两个学科保持谦虚，只专注于关键的东西，而不是都试图承担世界的重量。DevOps 的目标不是增加头痛的频率和持续时间，而是消除头痛。

要继续对话，请随时[联系我](/cdn-cgi/l/email-protection#2f445d465c5b464e4101414a435c40416f47405b424e4643014c4042)。