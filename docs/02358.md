# Kubernetes 收养:你准备好了吗？

> 原文：<https://devops.com/kubernetes-adoption-are-you-game-for-it/>

企业正在迅速接受云优先战略，微服务在这一过程中发挥着关键作用。但是企业正在取得不同程度的成功，这是由许多因素来衡量的，包括企业中 DevOps 的成熟度、确定微服务的合适候选对象的能力、选择合适的容器管理平台、足够的工具，以及设计思维的文化转变。

由于有大量关于微服务采用和策略的材料，本文将重点关注容器管理生态系统，它在微服务采用的成功中起着至关重要的作用。今天，Kubernetes 已经成为事实上的容器编排平台。大多数公共云提供商以某种形式提供 Kubernetes 即服务，以将管理 Kubernetes 的复杂性抽象为一个平台。

目前，我们看到企业在其组织内采用 Kubernetes 的三种主要模式。

## **模式 1: Kubernetes 作为托管服务**

虽然 Kubernetes 使容器管理变得有些简单，但作为一个平台来理解和管理它仍然是一件复杂的事情。已经开始实施云战略的企业发现，通过利用云提供商提供的 Kubernetes 即服务，很容易测试 Kubernetes 的未知领域。它使他们能够了解 Kubernetes 对其各自应用程序架构策略的影响，并确定其系统中的差距(如开发运维管理、安全管理和发布管理的成熟度)以及其监控能力。

## **模式 2: Kubernetes 作为交钥匙解决方案**

某些受行业法规驱动且专注于技术的企业(在其他容器技术解决方案方面拥有丰富的经验)已表示有兴趣将 Kubernetes 设置为私有云的一部分或内部部署，以避免供应商锁定和与托管 Kubernetes 相关的有限控制。有许多这样的交钥匙解决方案可供选择。

## **模式 3:自托管的 Kubernetes 平台**

与其他两个类别相比，这个类别较小。然而，有一些企业完全接受开源软件开发模型，并为 Kubernetes 社区做出了贡献。有一些工具和框架可以让企业自己建立和管理 Kubernetes。

采用上述任何一种方法都有优点和限制。关于选择哪种策略的决定取决于企业及其商业策略的成熟度。

## **采用中的挑战**

无论选择何种采用模式，都要考虑一些关键挑战，包括:

1.  **名称空间管理:**名称空间在管理跨应用程序域和环境的隔离方面起着关键作用，提供了对资源和用户管理的受控管理。有界上下文可以与名称空间定义和标准相链接。定义适当的命名准则来推动跨集群的命名空间管理非常重要。
2.  **资源管理 *:*** 有必要定义资源利用(资源配额)准则，以确保容器化的应用程序共存，而不会因运行时的资源违规而被消除。
3.  **策略管理:**定义适当的策略至关重要，包括集群访问控制、服务访问控制、资源利用控制和秘密访问控制。
4.  **审计和合规:**审计平台的补丁级别、秘密存储、针对安全漏洞的合规性、秘密存储的加密、存储卷、集群策略、角色绑定策略和用户管理控制非常重要。
5.  **混沌测试你的平台:**为了保证集群的健壮性，有必要对平台进行混沌测试。它还有助于测试容器化的应用程序的稳定性以及这些容器崩溃的影响。它还将提供关于平台在高负载期间或资源不可用于平台时如何表现的重要信息。
6.  管理部署清单: Kubernetes 遵循基于声明的管理，这意味着每个对象或资源指令都通过声明性清单来描述。这导致了版本控制的复杂性，容易出现人为错误和数据损坏。有必要利用工具或创建自定义实用程序来管理这些清单。
7.  **平台的可观察性:**虽然 Kubernetes 提供了各种机制来监控其内部组件，但它并不推荐标准的监控方法。在设计微服务时，有必要引入定义明确的健康管理标准。在 Kubernetes 集群上部署的每个容器化应用程序中包含适当的[活性](https://en.wikipedia.org/wiki/Liveness)和就绪性探针。将探测器生成的指标和平台生成的指标与外部监控平台相集成，以全面观察集群。
8.  **服务的持续部署:**不建议在大规模生产环境中使用基于 kubectl 的部署。相反，使用一些专门为 Kubernetes 构建的成熟开源框架(如 [Helm](https://helm.sh/) 或 [JenkinsX](https://jenkins-x.io/) )来管理无缝部署。
9.  **归档和备份:** Kubernetes 使用 etcd 作为其内部元数据管理存储来管理跨集群的对象。有必要为 etcd 和 Kubernetes 集群中使用的任何其他依赖持久性存储定义备份策略。
10.  **容器安全管理:** Kubernetes 通过从预定义的映像库中下载相应的映像来部署应用程序。存储库生态系统有责任确保正在部署的图像的图像来源。持续安全必须作为 DevOps 管道的一部分，以确保容器得到良好管理。
11.  **服务网格支持:**服务网格在简化服务到服务的通信中起着关键作用。它通过外部化的策略抽象出服务之间的服务级访问控制和安全管理。它还提供路由和负载平衡功能。有必要选择一个合适的[服务网格](https://devops.com/how-service-mesh-addresses-3-key-microservices-challenges/)，它与 Kubernetes 集群以及底层基础设施兼容。

## **结论**

Kubernetes 简化了容器的操作，但是它需要一种系统的方法和最佳实践来确保流畅的可维护性，以及无缝的开发人员交互。对于任何正在向采用 Kubernetes 过渡的企业来说，必须有一个采用 Kubernetes 的战略来确保成功。

——[sreekanth nya mars](https://devops.com/author/sreekanth-nyamars/)