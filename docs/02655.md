# 发布的死亡:向持续交付和实验的转移

> 原文：<https://devops.com/death-of-the-release-the-move-to-continuous-delivery-and-experimentation/>

***随着我们从持续交付转移到持续实验，我们还必须开发新的实践*** 

随着软件开发过程的发展，我们已经基本上告别了定义产品版本的想法。许多现代产品交付团队更进一步——甚至“产品发布”的概念也开始淡化。相反，产品正在成为一个流动的、快速发展的功能集，为任何给定的用户进行独特的组合。

25 年前，一个软件产品的新发布是一个值得注意的事件。营销部门甚至会坚持为这个版本取一个朗朗上口的名字。Internet Explorer 6，Office 2000，Windows XP，OSX 山狮。对于一些类型的软件来说仍然如此——操作系统是最值得注意的——但是对于我们日常使用的大多数软件产品来说，版本的概念已经逐渐消失。你现在用的是什么版本的谷歌地图？脸书怎么样？推特？就最终用户而言，没有版本，只有“当前”

一些不同的力量将软件产品从发布版本中移走。敏捷软件方法和相关实践(如连续交付)的兴起，使得软件团队可以大大缩短软件交付周期。曾经几个月发布一次的产品现在每隔几天就更新一次。

与此同时，作为一个平台，网络能力的增长已经将许多产品从桌面转移到了浏览器中。这大大减少了发布产品新版本时的摩擦。向您管理的服务器推送代码更改比说服您的用户下载并安装更新要容易得多。

最后，从大型整体系统到面向服务的架构，以及最近几年的微服务，已经有了架构上的转变。这些现代架构由许多小型的、可独立部署的单元组成。通过将部署范围缩小到一个特定的服务，这再次减少了部署代码变更的摩擦。

这些力量的结合导致了软件发布周期的急剧缩短，对于一些团队来说，从每个发布之间的几个月或几年到每周，然后每天，然后每小时的软件交付率。一个新软件版本的交付已经从一个大张旗鼓的营销事件变成了一件几乎持续发生的事情，甚至对于大型产品也是如此。早在 2011 年，亚马逊的工程师们每 11.6 秒就发布一次产品变更。

随着团队从整体服务转向微服务，不再有一个可部署的单元，而是一个独立可部署服务的生态系统。询问环境中运行的是哪个版本已经没有意义了。相反，我们必须询问每个服务运行的是哪个版本的*。*

然后是特征标记。人们可以把有特征标志的服务想象成存在于潜在代码路径的量子叠加中，为每个请求分别解析到一个特定的集合。这意味着一个服务在一个环境中的行为可以根本改变，而不需要任何代码部署，也不需要对发布版本进行任何可观察到的改变。

现在，随着我们从持续交付转移到持续试验，我们正在到达这样一个点，即试图用一个“版本”，或者甚至一组版本来描述当前运行的软件不再有用。形势变得更加不稳定了。

## **在发布后的世界中应对**

像微服务和持续实验这样的现代方法对产品交付团队来说是一个福音。由于它们提供了紧密的反馈回路，我们可以更快、更安全地行动。但是这个新世界也带来了挑战。

当您不确定涉及哪些代码时，诊断一个 bug 可能会困难得多。测试人员的负担变得更大，因为他们需要考虑不同服务的多个版本之间的交互——每个版本都有不同的特性标志，在不同的请求之间表现不同。

从用户的角度来看，产品的快速变化可能有点让人不知所措。新特性频繁出现是好事，但是每次登录时改变用户界面可能会让人迷失方向。更糟糕的是，某个功能某天可用，第二天就没了。用户也可以警惕他们没有得到与其他人相同的体验的想法，特别是如果有任何不公平商业行为的迹象。

具有讽刺意味的是，虽然这种加速的特性交付部分是通过持续的实验实践实现的，但是同样的变化速度本身也会干扰特性实验。当在实验过程中有其他变化发生时，很难在统计上将 KPI 的上升与功能实验相关联。

增强软件的可观察性——日志记录和其他工具的质量——是减轻这些挑战的一个关键方法。另一个是保持活动特征标志的数量相当低，这在许多方面都有帮助。它减少了多个相互作用的标志的测试负担，以及实验相互干扰的风险。更少的活动标志也意味着对你的用户来说，同时改变的东西更少。

管理共享系统中的所有特征标志有助于了解活动标志的数量并避免干扰实验。集中式标志管理还意味着您可以将一组功能更改批量发布到一个版本中，这有助于避免许多小的更改让您的用户不知所措。一个集中的系统使测试人员更容易看到他们应该期望在不同的系统中使用哪些标志，以及这些标志可能如何交互。

我们正在进入一个时代，这个时代将涉及到我们向用户发布新体验的速度的巨大爆炸。接受产品交付发展的下一个阶段，可以使团队更快更安全地前进。但是进入这个勇敢的新世界需要我们开发新的实践，如果我们想要避免后发布世界的陷阱的话。

彼得·霍奇森