# 让开发人员高兴并保持高速度

> 原文：<https://devops.com/keep-developers-happy-velocity-high/>

在今天的经济中，那些能够加速软件交付和提高开发人员生产力的公司会胜出。然而，随着应用程序变得越来越复杂，代码库越来越多，公司被迫实施更全面的质量保障措施，这降低了他们交付新软件的速度。在更短的时间间隔内交付更多的增量构建可以解决这个难题:更快地满足客户需求，减少工程师的开销，并且降低风险，因为发布到产品中的变更更小。

这就是为什么高速工程团队不仅应用连续交付流程，还借鉴了包括亚马逊、网飞和脸书在内的知名企业的经验。这些公司已经将实验作为他们发布过程的基础，在使他们广泛可用之前，在较小的团队中尝试主要的功能发布和重新设计。通过使用新技术，如功能标记、推广和流量分流，实验不再只是营销团队的未来；这也很快成为高绩效开发团队的基本实践。

今天，围绕 velocity 的讨论集中在开发人员可以用来最大化持续交付、软件开发和实验计划的有效性的关键实践上。以下是一些需要考虑的关键想法。

### 减少对 QA 团队的依赖实际上会让你更快(左移)

许多组织避开了传统的智慧，不再重视编写全面测试套件的繁重工作，而是选择将它们扔给质量保证团队。这种方法几乎总是不太有效，并导致组织失去动力，而不是保存它。

更高性能的团队实际上“左移”并授权开发人员拥有 QA 过程的许多部分。坚实的测试基础会减少以后的开销，并使工程师能够更快地将高质量的代码发布到产品中。与等待完整的 QA 周期结束相比，公司可以高效、快速、更有信心地满足客户和产品需求。

但是如果你没有能力(或者说奢侈)重写几万个测试呢？好消息是，即使没有扩展的测试覆盖，您仍然可以使用代码覆盖工具来利用这种方法。这些工作是通过评估在测试运行期间有多少代码被执行来完成的。如果整体覆盖率下降，这意味着某个特性可能是仓促开发的，并且没有经过测试，不应该合并到代码库中，直到比率达到平衡。这种代码到测试的度量甚至可以“阻止”代码合并，除非它达到或超过前面的阈值。

### 优先考虑构建和测试框架本身

优先开发构建和测试框架的团队——相对于单独的测试——会获得更快、更可靠的构建。但是，为每个开发人员构建可靠的、能够以高效的方式处理成千上万次测试的过程是一场斗争。

特别是对于更复杂的测试套件，由于所有的移动部件，这些测试有变得脆弱或者偶尔失败的趋势。优化构建了一个“测试看门人”,它可以自动禁用以这种方式失败的测试，而不需要人工干预，并将它们分配给所有者进行修复。记住:不可靠的测试有时比根本没有测试更糟糕。

### 通过实验实现更快的发布周期

希望对其应用程序堆栈进行额外的实时洞察和微调的公司正在转向功能标记和功能部署，以扩展其功能。

功能标志是简单的控制流布尔值，允许开发人员通过在虚拟开/关开关后面设置门，在他们的应用程序上使用一个新的实验性过程，并且如果发现问题，可以选择禁用它，所有这些都不需要另一个代码部署周期。一个例子可能是“停机维护”通知，或者更高级的东西，比如不需要代码展示来更新内容的新产品主页。

特性发布通过将用户分成两个或更多的实验组，使这个概念更接近真实的实验，允许每个新特性在正式发布之前进行 beta 测试。每一个新的特性都成为一个机会来运行一个实验，并收集对你的发展假设的即时反馈。

最后，还有流量分流，这是一个类似于功能推出的概念，它将少量用户透明地路由到一个新的实验版本，以在他们到达更广泛的受众之前识别任何错误。功能部署和流量分割之间的主要区别在于流量分割整个应用程序和单个功能的“全包”性质。

担心你的大型产品发布的自动化和手动测试没有抓住所有的东西？将一小部分流量作为“金丝雀构建”发送到新应用程序，看看会发生什么。针对少数用户，优化不同生产环境(例如，稳定版本与候选版本)之间的流量分流实验。脸书和其他人已经利用这一过程多年。

### 向左移动，进入一个高速发展的未来

彻底的测试有助于公司在问题接触到客户之前发现问题，但是预测你的产品的每一种可能的用法或场景是非常困难的。投资这些发布策略将有助于公司减少无意的错误潜入代码的风险，或者，更糟糕的是，无意中把他们的客户变成 QA 团队。

我们的建议？不要让特性开发优先于必要的步骤，以防止您的组织精益工作。通过向左转，让您的开发人员能够尽早参与到开发过程中来，并看到开发人员的生产力和速度大幅提升。

## 关于作者/布莱恩·卢卡斯

Brian Lucas 是优化 T2 公司的高级软件工程师，负责构建、测试和发布工程。此前，他是可信和喧闹公司的首席技术官，也是 Sling (Slingbox)的首席架构师。他拥有四项专利。在 [LinkedIn](https://www.linkedin.com/in/brianlucas1/Hi) 和 [Twitter](https://twitter.com/brianglucas) 上与他联系。