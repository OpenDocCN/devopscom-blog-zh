# 为全栈解决方案选择正确的监控工具

> 原文:[https://devo PS . com/choose-the-right-monitoring-tools-for-a-full-stack-solution/](https://devops.com/choosing-the-right-monitoring-tools-for-a-full-stack-solution/)

根据关于 APM 工具的 [marketsandmarkets](https://www.marketsandmarkets.com/PressReleases/application-performance-management.asp) 报告，到 2019 年，监控工具市场预计将增长到 49.8 亿美元，CAGR 为 12.86%，到 2023 年，DevOps 市场将达到 87.638 亿美元的市场规模，CAGR 在 2017 -2023 年期间增长 18%(来源:[市场商业内幕](http://markets.businessinsider.com/news/stocks/global-devops-market-2017-2023-focus-on-monitoring-performance-management-delivery-operations-management-lifecycle-management-analytics-and-other-solutions-1002241696))，更多关注监控和性能管理、交付和运营管理、生命周期管理、分析和其他解决方案

## 全栈监控工具的选择标准

随着大量 DevOps 工具和新工具在市场上出现，在投资工具并期望获得预期结果之前，根据正确的需求选择正确的工具是非常重要的。在根据需要选择合适的工具时，必须进行一些考虑和分析。您选择的监控工具应该能够进行完整的端到端监控，并且应该能够实现更快的故障排除和快速补救。

以下是可用作监控工具分析因素的一些关键标准。

### **监控功能**

企业中的平台、操作系统、设备和应用程序的组合可能极其多样化，这需要监控基础架构、平台、云环境、应用程序性能、网络监控、流程编排、容器、数据库、终端用户监控，涵盖异构工作负载及其性能。查看适合需求的监控工具支持哪些功能。

### **基础设施监控**

基础设施监控工具应测量服务器、组件、存储、数据库、虚拟系统、网络交换机、安全性、用户权限、应用程序和 web 服务器上的性能和吞吐量、数据库级查询和数据库事务、延迟、传输速率、数据库连接时间的响应时间、可用性、正常运行时间、CPU 使用情况、内存使用情况、磁盘使用情况、流程级使用情况和负载，并提供测量的时间序列数据、流程级数据汇总和趋势历史。能够进行基础设施监控的工具应该能够提供上面提到的大多数测量。

### **网络监控**

网络监控工具应提供性能指标，如带宽、延迟、响应性、不同端口级别指标、网络数据包流量、主机的[CPU](https://whatis.techtarget.com/definition/processor)使用情况，并提供自定义指标和这些指标的汇总。网络监控工具需要一个全面的平台，能够跨各种网络拓扑(异构网络(有线/无线)、基于云的网络和软件定义的网络)工作。选择能够自动发现节点、设备、路由器、防火墙规则、端口和协议、自动规则、阈值和警报的工具，以及能够感知应用的工具，这些工具可以通过网络路径、网络流量分析来检测网络中的应用和服务，并提供有关网络状态的图形/表格，以确定性能问题是由网络还是应用本身引起的，并且可以生成网络拓扑图。

### **集装箱监控**

监控容器/微服务包括捕获关于 CPU 使用、内存、网络、磁盘使用、容器内运行的进程的容器级状态，以及容器主机的使用、容器级日志、运行/停止的容器、关于容器状态的编排级度量、集群统计、容器网络、容器级、容器级和系统级的应用端点、容器级的性能度量以及在其中运行的服务等。容器在集群中运行，监控短暂的容器工作负载在生产中是必要的；除了 container orchestrators 提供的现成监控数据之外，选择能够提供上述容器监控功能的工具。

### **应用性能监控**

应用程序性能监控是全栈监控中的一个关键组件，在全栈监控中，通过对应用程序及其依赖项可用的分析和跟踪来收集和集中日志，提供对性能的测量，如最终用户响应时间、可用性、吞吐量、错误率、页面加载、页面速度慢、错误发生率、任何第三方 JavaScript 速度、浏览器速度、跟踪 SLA、页面膨胀、跨地理区域的客户群分布，检查最终用户事务并使用合成事务模拟最终用户操作，并提供来自最终用户体验的详细深入分析和关联数据，提供整个应用程序栈的全面可见性。选择涵盖分析、跟踪、终端用户体验监控、日志监控和日志分析的 APM 工具，至少提供数据关联和对事务的下钻功能以及全栈可见性。

### **云监控**

云提供商为在其云环境中运行的工作负载提供监控功能，提供日志跟踪、性能指标、网络级指标、应用组件的深入可见性、微服务的测量、PaaS 服务，还提供仪器数据的存储和分析。工具选择可能取决于对多个云提供商的互操作性和集成的支持、不同数据库/存储之间的数据交换、执行数据的转换/丰富，以及使用下钻方法从最终用户体验的角度提供具有相关性和业务洞察力的数据的可视化，并执行自动补救、自动发现、基线和预测指标。

### **部署模式和定价**

监控工具有内部部署、SAAS 基于云的部署模式、开源/商业版本，根据配置工具的复杂性、所需的维护和支持、适当的部署模式和定价/许可需求，可以选择适当的工具；然而，使用 SaaS 的监测工具似乎有增加的趋势。

### **基于代理/无代理的监控方法**

监控工具使用基于代理/无代理、基于推或拉的方法从服务器和应用程序收集数据。收集器可以充当指标/日志运送者，将数据推送到中央服务器进行存储和处理。基于代理的方法可能涉及在考虑进行监控的机器中部署监控代理，这可以通过配置管理工具/基础自动化脚本(如 Chef、Puppet 或 Ansible)部署到目标机器。工具可以支持机器的自动发现，这些机器可以将自己注册为用于监控的客户端机器。基于代理的监控也有助于监控其他代理。选择适合维护基于代理的监控工具的需求和工作量的工具。

### **报警**

根据预定义的阈值和规则设置的通知是监控工具的必备功能。工具应提供发送邮件和 web 挂钩的能力，集成到协作/ChatOps 工具，如 Slack 或 Hipchat，并提供定义自定义阈值和每隔一段时间运行批量警报的能力。

### **仪表盘**

监控数据和指标可用于决策制定和利益相关者的认可，为此需要不同来源和组件的指标的集中式端到端仪表板。许多商业工具提供聚合的以及详细的相关信息和被监控的应用程序的分离数据。这些工具必须提供现成的仪表板功能，并能够添加/更新新的仪表板视图和创建图表，根据需要创建自定义查询。

### **可定制性**

许多监控工具可能提供用于监控不同工作负载的功能，但是确定这些工具是否在定义定制指标、定制仪表板、定制检查和插件、扩展工具功能的社区支持、可定制工作流、定制阈值和规则以及编写定制查询的能力方面提供定制会影响您对监控工具的选择。

### **扩展性**

尽管执行监控，但东西可能会坏掉；因此，监控工具应该对协作工具具有可扩展性，协作工具可以通过适当的渠道提醒团队采取行动。与基于票证的控制和事件管理工作流的集成、自动票证机制、自动补救工具和 REST API 支持是评估监控工具时需要考虑的一些关键事项。

### **生产等级**

确定监控工具在给定负载下的性能以及对生产集群设置的支持。该工具应能够在规定的时间内对规定的服务器集和时间间隔做出响应，并存储从不同来源(服务器、设备、应用程序等)收集的时序数据。)并检查监控工具是否可以根据负载进行扩展。可伸缩性、性能会在很大程度上影响选择监控工具的决策。

### **分析–AIOps**

商业监控工具提供了运行机器学习技术的能力，这可以执行数据中的异常检测，帮助预测容量和需求，并基于度量来维护库存。根据业务需求的高级用例，选择能够提供这些功能的工具，以加快 IT 运营成熟度级别。

### **票务和事故补救**

尽管有深入的监控，缺陷可能会泄漏，SRE 团队可能不得不分类并解决问题。可以在 ITSM 工具中定义自动跟踪和自动修复工作流，它可以与监控工具集成，并根据定义的警报触发修复工作流，并通过不同的渠道通知 SRE 团队。选择可以轻松与 ITSM 工具集成的监控工具，并提供现成的选项来开发不太复杂的自定义工作流，以实现监控和自动修复中基于阈值警报的自动申请等使用情形。

## 结论

在选择全栈监控工具时，选择能够为各种工作负载提供监控功能的工具，包括容器、物联网和具有用户界面和集成仪表板的综合平台，以及 IT 运营工具、ITSM 工具和 AIOps 工具之间的集成和互操作性，这些工具提供事件关联和分析。选择规模合适并解决技能组合、技术需求、定价和部署模式的工具，重点关注必备功能，将使 SRE 团队能够更快地对问题进行分类和补救。

— [拉旺亚·苏巴拉亚路](https://devops.com/author/lavanya-subbarayalu/)