# Datadog 见证了 AWS Lambda 无服务器应用的激增

> 原文：<https://devops.com/datadog-sees-spike-in-aws-lambda-serverless-adoption/>

Datadog 发布的一份报告显示，使用该公司 IT 监控平台[的近一半组织已经采用了 AWS Lambda 无服务器计算框架](https://www.datadoghq.com/state-of-serverless/#3)。

Datadog 的产品经理 Stephen Pinkerton 说，考虑到无服务器计算框架的相对年龄，这个数字表明无服务器计算框架正在被主流 IT 组织广泛使用。

该报告发现 Datadog 客户调用的中值 Lambda 函数运行了大约 800 毫秒。将近五分之一的函数在 100 毫秒内执行，而大约三分之一的函数在 400 毫秒内执行。四分之一的 Lambda 函数的平均执行时间超过三秒，而 12%的函数需要 10 秒或更长时间。Lambda 函数的持续时间值得注意，因为无服务器延迟不仅会影响应用程序性能，还会影响成本。Lambda 的定价基于“GB-秒”的计算时间，即分配给函数的内存乘以函数调用的持续时间。

不足为奇的是，报告指出 47%的功能被配置为以 128MB 的最小内存设置运行。相比之下，只有 14%的函数的内存分配大于 512MB，尽管 AWS 允许每个函数高达 3,008MB。

作为进一步限制成本的努力的一部分，大多数组织不使用一个函数来调用另一个函数，然后等待响应，这将导致可计费的调用时间。相反，无服务器函数通过消息队列进行异步调用。无状态的函数最常从单独的持久数据存储中读取数据或向其写入数据。

亚马逊 DynamoDB 是一个基于键值存储架构的文档数据库，是使用最广泛的持久存储形式，其次是 AWS 作为服务提供的 SQL 数据库实例，然后是亚马逊 S3 云存储服务。

亚马逊简单队列服务(SQS)是 Lambda 请求的消息队列的首选，其次是亚马逊 Kinesis 和亚马逊简单通知服务(SNS)。

该报告还指出，每个 Lambda 函数都有一个可配置的超时设置，范围从 1 秒到 15 分钟。三分之二的配置超时为 60 秒或更少。默认情况下，Lambda 客户在任何给定的区域只能同时执行 1，000 个函数。所有函数中只有 4.2%具有配置的并发限制。总共有 88.6%运行 Lambda 的公司在其环境中至少对一个功能使用了并发限制。

报告发现，就使用的编程语言而言，Python 和 Node.js 形式的 JavaScript 是 Lambda 上使用最广泛的语言。运行 Lambda 的 Datadog 客户中有近一半(47%)使用 Python，而 39%运行 node . js。Python 3 比 Python 2 多一倍，Python 2 已经寿终正寝。

最后，报告指出，在采用容器的组织和采用无服务器计算框架的组织之间有很高的相关性。AWS 中近 80%运行容器的组织已经采用了 Lambda。然而，平克顿说，在这一点上，相关性更多地与组织采用前沿技术的意愿有关，而不是与将容器和无服务器计算框架编织在一起的任何努力有关。

Pinkerton 还推测，组织使用 Lambda 的主要原因是为了提高应用程序的性能。然而，值得注意的是，无服务器计算框架也倾向于通过依赖外部函数来运行核心应用程序之外不经常调用的代码，从而缩小应用程序的规模。

Datadog 计划在其他云平台上评估无服务器计算框架的使用情况，一旦它们达到足够的临界质量。与此同时，很明显，无服务器计算框架正在迅速成为任何 DevOps 管道的延伸。

— [迈克·维扎德](https://devops.com/author/mike-vizard/)