# 向云原生应用和 API 的演进

> 原文:[https://devo PS . com/the-evolution-to-cloud-native-applications-and-APIs/](https://devops.com/the-evolution-to-cloud-native-applications-and-apis/)

如果您在应用程序开发方面花过一段时间，您会对变化很熟悉。这是唯一不变的。

随着我们如何构建应用程序，用于保护应用程序安全的技术也发生了变化。

保护现代应用程序比以往任何时候都需要更多的努力。回顾一下应用程序开发在过去十年中的变化将会解释为什么需要更多的努力。

## 传统的 Web 应用程序:从菜单下订单

传统的 web 应用程序就像在餐馆里从菜单上点菜一样。你有一份菜单，你要了一份。厨师决定哪些配料是必需的，以及盘子端上来后的样子。

在传统的 web 应用中，客户端获取一个 URL。假设你想看到一个营销指标的仪表板，因此你的浏览器检索*example.com/dashboard.jsp*。客户端不控制仪表板上的内容；它只知道索取。

web 服务器分三步处理请求:

1.  web 服务器从数据库中提取数据。
2.  服务器构建一个 HTML 页面，其中包含数据。
3.  服务器将呈现的 HTML 页面返回给客户端。

web 服务器决定将哪些数据放入仪表板以及数据放在哪里。客户端简单地请求一个资源并显示服务器返回的内容。

![](../Images/645f45f7cf1765d9b6a08382649fcb05.png)

在这个模型中，客户端通常只有很少的代码。它向服务器请求一个 URL 并显示返回的内容。所有渲染和数据处理都在服务器上进行。

## 现代 Web 应用程序:自助餐式

现代 web 应用程序让客户端处于控制之下。与其说是坐式餐厅，不如说是自助餐。

客户端通常是单页面应用程序(SPA ),或者是动态更新同一页面而不是总是向服务器请求新页面的应用程序。

在自助餐中，你拿着你的盘子，挑选你想要的食物。每一道菜都可以根据你当时的需求有多种配置。

水疗就像那些盘子一样。与单个服务器创建整个页面并将其返回给客户端不同，客户端知道如何制作页面，并且只需要制作页面所需的数据。

通常，应用程序编程接口或 API 向客户端提供这些数据。业务逻辑向使用 API 的客户端公开，这些 API 只返回客户端需要的内容。也许客户只想要一个帐户的最后 20 个通知或最近的 10 封电子邮件。

将 API 用于业务逻辑和数据检索打开了应用程序开发的世界。您不再需要构建 web 应用程序。您可以使用移动应用程序来代替。您可以使用任何技术或形式来访问数据，从移动到物联网(IoT)或其他开发人员构建自己的应用程序。

JSON 是一种轻量级数据格式，是现代应用程序最有用的支持技术之一。它允许所有的 API、客户机和数据库使用相同的格式存储和传输数据。没有必要进行数据转换，这有助于保持应用程序的响应性。

回到上面的仪表板示例，SPA 不会一次向服务器请求整个仪表板。相反，它会向适当的 API 请求构建仪表板本身所需的特定数据。

![](../Images/ecdd0b7ad72c78a377b0ff40e5c8567b.png)

对 API 和终极灵活性和开发速度的渴望让位于微服务的发展。这些服务被有意地保持为小规模，以便彼此独立地更新，并且更新得更频繁。

spa 强调客户端，导致客户端中更复杂的代码和客户端中安全漏洞的风险(稍后将详细介绍)。但这一变化开启了物联网设备等转型技术。

## 从整体到微服务

应用程序开发发展的一个共同主题是将功能和特性分解成更小、更细粒度的组件。就像上面的 SPA 示例一样，web 页面的功能是在独立的组件中，当您从总体上看整个应用程序架构时，这一趋势也是真实的。

传统应用程序可能被设计为具有独立的模块和功能，每个模块和功能在内部相互调用，而现代设计现在将独立的功能分解为离散的服务。现在，不同于每个开发团队在他们的应用程序中维护相似的代码/功能，许多业务功能被分离到明确定义的服务中。考虑一个可以被许多其他应用程序使用的“地址验证”服务。验证地址的功能与使用服务的“客户”相分离，这为交付生命周期带来了价值。这种方法使开发团队能够关注更小的、更细粒度的变更，从而缩短他们的周期时间并加速交付。

## 微服务——应对不断加快的变革步伐

数字化转型和行业内变革步伐的快速加快要求一种新的思维方式。澳大利亚电信公司资本规划与交付执行董事 Bronwyn Clere 在 2017 年 PMI 行业脉搏报告*‍*中引用的话概括了这一想法

我们正在实现一些功能和产品，并使用 18 个月前还没有发明的技术。我们再也负担不起这些持续两到三年的大型整体项目了。我们知道，我们在那段时间开始时着手做的事情并不是我们最终要做的事情。因此，我们关注非常快速的交付周期，问我们自己:我们如何非常快速地动员一个项目？我们如何使用正确的交付技术来快速完成它？我们如何将产品推向市场、客户或企业？ ‍

各地的商业领袖都要求技术团队更快地交付产品。结果，团队采用了新的工作方式和新的设计解决方案的方式。我们已经看到敏捷、 [CI/CD 和 DevOps 工具](https://harness.io/)被广泛采用。类似地，应用程序开发和体系结构已经发展到进一步支持 velocity。

## 云原生架构之旅

不断加快的变革步伐将给任何 IT 基础设施带来巨大压力。但是**云原生架构**从根本上改变了应用的构建和扩展方式。

云原生技术，如容器、服务网格、微服务、不可变基础设施和声明式 API，使开发人员能够在公共、私有和混合云上构建和运行可扩展的应用。

云原生架构专注于创建具有高弹性的松散耦合服务。开发人员可以频繁地进行更改，而不会对整个系统产生负面影响。

让我们快速浏览一下云原生应用程序，以便您可以看到它们与传统 web 应用程序的不同之处。

大部分云原生应用包括许多部署在容器中的微服务。每个服务都与其他服务相隔离，可以在不影响其他服务的情况下轻松地销毁和重新创建。

通常，像 Kubernetes 这样的编排工具用于监控应用程序中使用的所有微服务。当数百个服务服务于一个应用程序时，编排是必要的。Kubernetes 可以检测出故障的容器或服务，销毁它们，并重新创建新的容器或服务来保持应用程序平稳运行。

每个服务都可以独立于所有其他服务来创建和更新。每个服务可以使用完全不同的编程语言。只要每个服务公开一个文档化的 API，幕后使用的语言并不重要。

下图是微软的 eShop on Containers 开源应用程序。它展示了使用云原生技术的真实应用程序的样子。

![](../Images/c2e3f417b4ba9457a00b3f13fb0f02d9.png)

在这个示例中，构建营销微服务的开发团队可以根据需要随时进行更改，而不会影响订购或购物车功能。每个服务中可以使用不同的技术，并且每个服务都有单独的数据存储。灵活性和速度是现代发展的标志。

在下一篇文章中，我们将深入探讨在采用云原生应用程序时需要考虑的具体挑战和注意事项。

## 云原生成功的 4 个必要思维转变

变化的速度不仅仅影响技术。过程、管理风格甚至思维方式都必须进行调整，以使现代应用程序开发在您的公司内取得成功。

### 交付:思考敏捷和开发

由于对缩短交付周期和自动化交付的强烈需求，云原生架构采用了支持快速响应的交付实践。开发人员可以在几秒钟内部署新代码，一些公司一天要将新代码推向生产数百次。

因此，你的项目管理过程必须改变。敏捷实践(Scrum、Sprint、Lean 等。)以及强大的 DevOps 功能(即基于主干的开发、CI、CD 等)，最好地支持大规模微服务开发。在尝试大规模进行云原生开发之前，完成交付、文化和组织变革至关重要。DevOps 手册是 DevOps 开发新手的绝佳资源。

### 生产:考虑产品，而不是项目

“把它扔到墙上”并让运营部门管理应用程序的时代已经过去了。考虑到具有多个微服务和相关 API 的现代应用的复杂性，开发/产品团队需要像在开发中一样“拥有”生产中的应用。为了成功扩展您对云原生应用程序的采用，您需要探索并采用[“产品管理”而非“项目管理”](https://martinfowler.com/articles/products-over-projects.html)作为管理应用程序整个生命周期的实践。

将您的应用程序视为一个长期产品，它会随着时间的推移而改变。市场洞察力和客户反馈将继续改善它。这不是一劳永逸的练习。

### 安全性:处处考虑安全性

在这个新环境中，安全性是一个主要问题。在应用程序周围建立防御墙和护城河的堡垒，然后您“信任”堡垒内部的活动的传统方法在应用程序的单个元素被期望与其他组件通信的世界中是不够的。在许多层面上，新的安全模式是每个微服务、每个组件都必须具有内置的安全性，他们需要接受“零信任”作为他们如何操作的策略。

### 不信任任何人–对微服务的零信任

[零信任](https://www.paloaltonetworks.com/cyberpedia/what-is-a-zero-trust-architecture)是一种安全架构，其座右铭是:“永远不信任，永远验证。”这意味着在返回数据或执行操作之前要验证每个请求。

在传统的网络架构中，我们保护外围设备。防火墙和隔离区只允许某些类型的流量进入网络。我们使用 VPN 来实现公司服务器和远程员工之间的安全通信。

然而，这种安全方法的最大缺陷是网络中的流量是隐式信任的。这就像一个保镖保护夜总会免受一长串想要参加派对的人的骚扰。很难进入俱乐部，但是一旦保镖让你进去，你就可以做任何你想做的事情。

在零信任网络中，所有流量都被认为是可疑的。仅仅因为一个请求来自你的环境，并不意味着你可以信任它。在服务返回数据之前，首先检查每个请求。

微服务架构需要零信任架构才能安全。它将确保没有请求被遗漏。

## 云原生应用的尽职调查、合规性和监督

除了将零信任作为支持微服务安全运行的方法之外，组织还必须重新思考如何监控和管理其安全状况。我们已经讨论了 web 应用程序中的几个重大变化，尤其是在过去十年中。

*   比以往任何时候都更快的变化
*   不同平台上的小型独立服务
*   自主团队
*   云原生
*   更多移动部件
*   更多的人会被遗漏。

保护这种新型应用程序需要更高水平的努力。云原生应用和微服务产生了新的安全漏洞，公司必须考虑这些漏洞以应对攻击。

在下一篇文章中，我们将讨论需要采取哪些安全措施来保护云原生应用。