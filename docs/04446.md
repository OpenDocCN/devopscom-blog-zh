# 配置管理中的 6 个严重错误，第 2 部分

> 原文:[https://devo PS . com/6-大-坏-错误-配置-管理-部分-2/](https://devops.com/6-big-bad-mistakes-configuration-management-part-2/)

在我关于配置管理中的重大错误的文章的第一部分中，我回顾了在配置管理工作中使用错误工具的危险。供应管理工具、应用发布自动化工具和持续集成工具在您的 DevOps 工具链中都有自己的位置。但是它们不应该用来替代持续的配置管理。在这篇文章中，我不太关注滥用工具，而是关注应该避免的不良实践、有限思维和短视行为。

## 错误 4:服务器直接访问生产环境

这只可能不会咬你…直到它咬你。我和许多公司合作过，那里的开发人员可以直接接触到产品。这可不好。而且，在许多情况下，这违反了合规性政策。请各位开发者朋友不要见怪。你不应该想直接接触生产。我发现十有八九，你的代码不是问题所在——配置才是问题所在。然而，您被要求直接登录到服务器，在您的环境(在那里运行良好)和生产环境之间进行比较。这就引出了“他是怎么修好的？”问题，并导致可怕的打字错误和其他人工错误。我目睹过公司在几分钟之内损失数百万美元，因为有人直接登录到服务器并进行不正确的配置更改。

问题是，你如何切断生产的直接通路？如何在不登录服务器的情况下快速发现环境之间的配置差异？答案是一个好的配置管理解决方案，它可以快速显示所有层的环境之间的差异。当您进行文件到文件的比较时，这很容易，但是注册表项比较或者 WebSphere 比较呢？找到一款配置管理工具，让您能够在需要时快速了解保持应用运行的重要部分。坚持使用配置管理解决方案，该解决方案具有强大的 RBAC(基于角色的访问控制),能够控制可以进行哪些更改、何时何地进行更改、谁可以进行更改，甚至谁可以批准更改。

## 错误 5:将数据库管理员排除在外

我工作过的大多数公司都完全脱离了数据库和中间件团队——数据库管理员并不真正知道中间件团队在做什么，而中间件团队也看不到数据库管理员在做什么。我认为有几个原因:人和技术。我们今天不担心人员方面，只是说每个团队都认为另一个团队“古怪”。从技术方面来看，传统工具根本不提供对中间件和数据库层的配置可见性。因此 DBA 最终拥有一个工具集，而中间件团队拥有完全不同的工具集。这妨碍了协作、协调的发布，以及确保应用程序完全配置、正确执行和运行所需的完整配置图。

这是个大问题。事实上，37%的调查受访者承认，他们依赖脚本和手动流程来确定其生态系统中的哪些应用程序使用哪些数据库。另有 38%的人承认他们甚至没有办法确定这些信息。说说眼罩吧！我的建议是找到一个中间件和数据库团队都可以使用的解决方案。这并不一定意味着数据库管理员会更换他们最喜欢的工具，但是他们现在已经参与到了这个过程中，允许进行以前所缺少的协作和编排。

此外，如果您使用单一的集成配置管理解决方案，您的管理层、中间件、操作系统和数据库管理员团队都将了解应用运行的各个方面。中间件团队可以看到是否有可能导致应用程序问题的模式变化，而不是花费数小时寻找他们永远不会发现的中间件配置问题，反之亦然*。*拥有一个统一的工具可以减少平均诊断时间，因为您可以在一个地方看到所有层。

## 错误 6:只关注堆栈的一部分

前面的“大而坏的错误”很好地延续到了这个错误:只关注堆栈的一个部分。有许多层支持您的应用程序，我们在本系列中已经涉及了几层，即中间件、数据库和操作系统。在每一层中，您可能支持不同的技术。一些应用程序可能运行在 IIS 上，带有 SQL Server 后端，而其他应用程序运行在 WebSphere 上，带有 Oracle 后端。然后，您需要担心操作系统设置:确保设置了注册表项，系统服务有正确的帐户，文件系统权限是准确的，安装了所有正确版本的 Linux 包，等等。

由于缺乏对应用程序堆栈上上下下的全面覆盖，许多公司选择只为 it 的一个部分开发配置管理工具。这些单点工具倾向于关注最关键的业务应用程序，它们遇到最多配置问题的应用程序，或者仅仅是最难管理的应用程序。这不一定是一件坏事，但注意不要太专一。尽量不要选择一种配置管理解决方案，这种解决方案只适用于堆栈的一部分，而不适用于其他部分，或者在一种环境中适用(Linux/Unix)，但在另一种环境中不适用(Windows)。管理这些分散的单点解决方案，覆盖面上有令人抓狂的缺口和重叠，可能会让人精疲力尽。

选择一个可扩展到堆栈的其他部分、业务或其他团队的工具。我的建议是列出您现在和将来使用的所有需要配置管理支持的技术。将它们划分到堆栈的不同部分，然后将它们从“最难管理和/或最关键的业务”到“最好拥有”进行排序在评估配置管理工具时请参考这个列表，这样您就不会舍本逐末。确保该工具能够支持您的所有顶级项目，并询问他们关于您“最好拥有”的路线图。

收听我们即将举办的[网络研讨会](http://webinars.devops.com/iis-middleware-configuration-management)，该研讨会也将涉及这些主题。

## 关于作者/克里斯蒂·麦克道戈尔

![](../Images/a10be4f22e905fe9fbcd56580d3f615e.png) Kristy McDougal 负责 [Orca](http://www.orcaconfig.com) 的产品和销售工程，这是一款面向 DevOps 团队的应用发布和配置自动化解决方案。在推出 Orca 之前，Kristy 是 BMC Software 全球开发运维专家团队的高级售前顾问。在 BMC 之前，Kristy 曾在 VaraLogix、Virtual Bridges、Global Foundries 和 Advanced Micro Devices 担任技术职务。她的经验包括 Unix 系统管理、系统工程、售前咨询和售后服务。Kristy 获得了 ITIL 基金会的认证，毕业于德克萨斯大学奥斯汀分校的电气工程专业。