# 持续可靠性:QA 和 sre 如何改进他们的 CI/CD 工作流程

> 原文：<https://devops.com/continuous-reliability-how-qa-and-sres-can-improve-their-ci-cd-workflow/>

保持和加速软件交付速度的一个关键挑战是平衡软件的可靠性和变化率。随着工作流程越来越自动化，以及由几十到几百名工程师组成的团队频繁引入变更，在早期识别会产生严重影响的问题的能力变得至关重要。

这个挑战提出了许多问题:有这么多错误，花费我宝贵的时间来解决一个特定的问题真的值得吗？我如何提前发现代码或基础设施中可能产生影响的严重问题？一旦一个版本被向前推进，我如何知道它做得有多好——它应该被完全部署、热修复甚至回滚吗？

这就是为什么我们需要 CI/CD 工作流双向工作，帮助我们升级和改进我们的应用程序，并允许我们根据它在用户中的表现进行学习和调整。输入连续可靠性。

## **每个人之间的反馈回路**

代码质量关卡和上下文反馈循环是 CI/CD 构建块，它们定义了持续可靠性的新兴实践。当前最常见的反馈循环是在开发和 QA 团队之间，它通常是每个好的开发周期的主干。然而，反馈循环与整个开发周期相关，它们不会随着 QA/dev 在阶段环境中部署和测试元素而结束。

众所周知，产品往往表现出意想不到的和令人惊讶的行为，有些人甚至会说问题和错误是凭空出现的。这就是为什么 QA 和 SRE 团队需要关于发布的实际质量的准确答案。他们需要识别关键异常何时从准备阶段转移到生产阶段，最好能够在它们损害应用程序、工作流或客户之前阻止它们。

## **定义重要的异常**

异常检测对于持续可靠性至关重要。在大多数应用中，错误和性能异常可以映射为三种核心类型:

1.  新缺陷:在系统中引入新的错误，通常是代码变更的结果。
2.  **错误增加**:某些错误的相对数量(即与吞吐量相比)的增加，通常是代码或基础设施变化的结果。
3.  **变慢**:由于代码效率低下或基础设施的供应或配置不当，应用程序关键部分的响应时间缩短。

其中任何一项的引入都会导致 [CPU](https://en.wikipedia.org/wiki/Central_processing_unit) ，GC 和 IO 的增加。因此，不仅 QA 和 SRE 团队必须阻止他们进入生产，而且还必须优先考虑和分配有助于解决最重要问题的严重性。

然而，由于高信噪比，检测大规模系统中的异常几乎是不可能的，当出现问题时，我们通常只能依靠用户和客户来提醒我们。这就是为什么需要一种客观的方法来量化一个发布的质量——这种方法在于能够汇聚[机器学习](https://devops.com/are-self-service-machine-learning-models-the-future-of-ai-integration/)和关键代码级数据，以自动阻止糟糕的发布沿着链向上移动。

## **通过质量关口的持续可靠性**

一旦我们理解了什么应该算作我们应用程序中的异常，下一步就是设置质量关来帮助我们识别、理解并有希望阻止坏代码进入生产。

以异常的三个核心类型——新问题、回归和减速——为例，我们可以评估我们的代码在提升之前应该通过的四个核心质量关:

1.  **错误量:**基于代码调用的应用程序的标准化错误率在两次发布之间不应该增加。
2.  **唯一错误计数:**唯一错误计数的数量，尤其是在关键应用程序中，不应在两次发布之间增加。
3.  **新错误:**严重类型的新错误或高速发生的新错误应阻止发布。
4.  **增加错误和减速:**严重的倒退和减速应该阻止发布。

这四个标准可以帮助您定义一个强大的、广泛适用于复杂环境的基准，但也不会复杂到仅仅是一个学术练习的程度。它们将帮助您了解您的代码是否准备好部署到您的预生产或生产环境中，并帮助减少甚至消除您的应用程序中的错误、问题、速度减慢和异常。

— [Tal Weiss](https://devops.com/author/tal-weiss/)