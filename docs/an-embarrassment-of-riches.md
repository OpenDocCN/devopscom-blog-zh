# 财富的尴尬

> 原文：<https://devops.com/an-embarrassment-of-riches/>

历史告诉我们，人们很少会在最激动的时候珍惜他们所拥有的。我们这个高度互联、高速发展的世界也不例外。让我们沮丧的事情就在我们面前，而让一切变得更好/更安全/更快的事情都被认为是理所当然的。

生活中也是如此。我们预计我们的部署和发布会很容易，因为在这方面生活比 10 年前容易得多。当事情不顺利时，我们会感到沮丧，因为事情往往就是这样。

敏捷解决的一个问题是，大多数商店不会殴打问题的负责人，直到他们离开。这并不是说没有人是批判性的，只是官方政策不允许对甚至是愚蠢的错误横加指责。目标是变得更好，而不是痛击对错误负责的人。大多数时候，这是一个完全积极的变化。特别是因为，在复杂的系统中，往往不是一个人的错误，而是许多人的错误。

在使用敏捷之前，我匆忙修复了几家大银行使用的一个软件。他们需要修复，而我最有资格做这件事。我用打印机的文件句柄打开打印机，并向它写入数据。测试一切顺利，我们把它运了出去。结果是几家大银行的一套数据库遭到灾难性的破坏。

我不知道，有人在满足某些条件的情况下重用了打印机文件句柄，并在数据库上打开了它。这是为打印机预留的，我从来没有想到过，我简单地重新打开它，并使用它。将它指向数据库的奇怪条件在测试中从未遇到过，我对我们的声誉和相关银行对我们软件的信心的一些严重损害负有责任。

令人欣慰的是，我们的开发团队已经在“快速完成，不要指手画脚”，所以有人提到，本来可以做更好的测试，我们实施了计划来做到这一点，使用擦洗的客户数据。根本原因——使用保留的文件句柄访问其他内容——已经解决。我自己对造成这种混乱的焦虑让我坐在操作人员旁边，他们使用一些令人震惊的 Unix 命令行技巧，一次重建一个被破坏的数据库。最终，软件和团队因为体验而变得更好。我很早就得到了不要相信代码会按预期运行的教训。

关键是，因为我们最大的客户理所当然地感到愤怒，就因为一个让我们所有人都高度紧张的错误而抨击我不会解决问题。让我完成工作，与测试团队一起确定根本原因，并把事情做得更好。

今天我们在 DevOps 也面临着类似的问题。你在生产中测试吗？你在生产中测试多少？如果你有类似的完全不可预见的问题出现呢？

答案是你必须在生产中测试。不可避免地，在生产中会有错误，尽早发现并修复它们比在生产中测试要好得多，因为应用程序是实时的，有些事情你无法在生产之外测试。无论哪种方式，你都是在生产中测试，问题是你有多少控制权。

这是 DevOps 的强项之一。使用诸如特性标志、监控和 [AIOps](https://devops.com/what-is-so-special-about-aiops-for-mission-critical-workloads/) 之类的东西，您可以通过更改来启动一小部分生产服务器。或者在生产中为低服务器数量的应用程序部署并行服务器，然后让一些客户来测试新的变化。是的，如果有一些不可预见的问题，这些客户可能会有可怕的经历，但是如果你没有测试就推出，几个客户总比你所有的客户好。对于一些行业来说，建立一个愿意被用来测试像这样的新功能的人的名单可能是一种营销策略。

我们仍然会对出错的事情感到沮丧，但是在重大灾难袭击我们的生产服务器之前发现这些问题的快乐也应该会存在。不久前，你把它推广给所有人，并处理了后果。崩盘规模很大，甚至更令人沮丧。最好让一些客户受到影响，并且能够在紧急情况发生之前解决问题。

我以前说过，我们工作在一个惊人的时代，在响应能力上有了巨大的飞跃。好好利用他们。从制作和运行伟大的软件中抽出时间来欣赏它们，哪怕只是一小会儿。

然后增加更多的功能，修复更多的 bug。毕竟我们正处于紧要关头。

唐·麦克维蒂