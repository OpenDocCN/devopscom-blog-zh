# 全天开发:用 Ansible 进行系统加固

> 原文:[https://devops.com/system-hardening-ansible/](https://devops.com/system-hardening-ansible/)

DevOps 管道不断变化。因此，相关的安全控制必须根据具体情况来应用。

我们希望安全，但我认为我们所有人都宁愿把时间花在开发和部署软件上。保持服务器更新和所有其他安全任务就像打扫你的家一样:你知道这是必须要做的，但你真的只是想享受你干净的家。好消息是你可以雇佣一个“服务”来保持你的应用程序安全更新，给你更多的时间去开发。

在最近的 [All Day DevOps](http://www.alldaydevops.com/) 大会上， [Appsecco](http://appsecco.com/) 的创始人兼董事[阿卡什·马哈贾](http://linkd.inwebappsecguy/)n([@马卡什](https://twitter.com/makash))与 [Ansible](https://www.ansible.com/) 讨论了加强系统安全性的问题。除了在 Appsecco 的职务之外，Akash 还参与了开放 Web 应用程序安全项目(OWASP)的本地领导工作。

### **错误配置**

在他的演讲中，Akash 提到了 OWASP 十大安全漏洞列表，集中在第五位:安全错误配置。为了确定你是否遵守了指导方针，清单上的第五个问题是:

*   你的软件有没有过时的？
*   是否启用/安装了任何不必要的功能，包括端口、服务、帐户、页面或权限？
*   默认帐户及其密码是否已启用/未更改？
*   安全设置和库是否未设置为安全值？

我确信阅读这篇文章的人都还在使用默认的管理员密码，但是我们能说你的同行也是这样吗？你有没有在你的服务器上安装最新的软件补丁？

![](../Images/a352f60ebb51ddbf17c5ef6627a99f61.png)

### **自动化**

如果一项任务可以自动化，开发人员就可以自动化它。因此，我们也应该尽可能自动化我们的安全任务。OWASP 在此提供指导，建议您应该:

*   拥有可重复的安全强化流程。
*   确保您的开发、QA 和生产服务器配置相同，但密码不同。
*   自动化该过程，以最大限度地减少设置新的安全环境所需的工作量。
*   实施将所有新软件更新和补丁程序及时部署到每个已部署环境的流程。
*   定期运行扫描和审核，以帮助检测未来的错误配置或缺失的修补程序。

这都是安全强化的一部分，即“我们识别系统上存在的默认配置并应用将配置更改为安全值的更改的过程。”这可以应用于您的网络、传输、应用程序和内核网络参数。

### **可翻译的剧本**

Ansible 是 Akash 喜欢使用的解决方案之一，但市场上还有其他提供类似价值的解决方案。我并不想赞同或评价某个解决方案，而是让我分享一下 Akash 使用他的工具集的经验。

他为什么喜欢？归结起来就是剧本。一个可行的行动手册是一个编码的安全文档，允许你描述一个系统的期望状态，而不是如何达到那个状态的具体步骤。正如 Akash 指出的那样，事情是会变的——当系统发生变化时，最好描述最终状态，而不是不得不改变命令。

![](../Images/8bdb97439c6285c763bf3a209cde208c.png)

行动手册的其他优势包括:

*   剧本是在 YAML 编写的，为我们提供了学习和训练的框架
*   剧本是文本文件，所以我们可以使用 Git 进行版本控制
*   管理剧本就像管理任何软件项目一样
*   剧本作为代码是基础设施，但为了安全
*   剧本由角色组成，这是安全性的一个重要方面
*   许多行动手册都是开源的

底线是您可以并且应该自动化您的安全强化过程。你的用户和其他利益相关者会感谢你，最重要的是，你会感谢你自己，因为你可以花更多的时间在你喜欢做的事情上。

Ansible 只是可用于自动化安全任务的解决方案的一个例子。如果你想了解更多，Akash 将在他的[全天 DevOps 大会会议](https://youtu.be/bNwzVq1MfTY)(仅 30 分钟)中详细介绍 Ansible 的入门知识。来自[全天 DevOps 会议](http://www.alldaydevops.com/)的其他 56 个演示文稿也可以在网上免费获得[点击这里](http://www.sonatype.com/all-day-devops-on-demand?__hstc=31049440.fff56b041308a66b74cf93c40ea2030a.1456347809383.1485535294436.1485539851201.581&__hssc=31049440.3.1485539851201&__hsfp=1394008546)。

本博客系列回顾了 11 月举办的全天 DevOps 会议，该会议共有 13，500 多名注册与会者。上周我讨论了“[大规模开发](https://www.linkedin.com/pulse/devops-massive-scale-derek-e-weeks?trk=prof-post)T2”。“下周，请关注由 Intuit 公司的 Ian Allison 发表的“为了乐趣和利润而运作红队”。

— [德里克·威克斯](https://devops.com/author/derek-e-weeks/)