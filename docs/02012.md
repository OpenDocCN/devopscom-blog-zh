# 敏捷和 DevOps 的成功需要持续的测试

> 原文：<https://devops.com/agile-and-devops-success-needs-continuous-testing/>

推进[敏捷](https://devops.com/are-your-development-processes-truly-agile/)转换的核心方法之一是引入持续测试。所有这些变化，既是技术上的，也是文化上的。预期的结果是更少的中断构建和减少的从中断到修复的时间，以及测量团队改进雄心的尺度。

**测试位和连续位:**测试应该是任何敏捷开发人员技能的一部分；转变是将它应用于整个构建管道。Continuous 意味着自动化，构建就像一个状态不断变化的生命体。随着云计算和虚拟容器的出现，基础设施选项已经扩展。

假设你团队的开发人员在组件上工作，独立地构建和测试整个应用或服务的大块。他们接收故事和任务，以改善客户的旅程，然后添加功能来实现这些。完成后，他们将他们的工作签入到您团队的代码库中。

## **从一名开发人员、一台笔记本电脑和一次测试开始**

对于单个开发人员(或一对开发人员)来说，最初的测试重点是单元测试和覆盖测试。无论是先编写测试还是先编写代码，单元测试都会检查新代码的边界，而覆盖测试会检查所有代码路径是否都被执行了。

举个例子，也许开发人员已经在银行系统的账户组件上实现了“客户想要存钱”的故事。测试应该检查如果用户存入零、负或零头钱会发生什么，并且覆盖范围确认测试已经沿着新特性的所有可能的代码路径漫游。通过这种方式，覆盖测试还可以防止开发人员在没有引入相应测试的情况下添加代码。

此时，确保测试作为构建的一部分运行是值得的，这样每次开发人员构建代码时，所有的单元测试都会运行。对于大多数构建系统来说，这是一件相当标准的事情。底线是签入破坏代码的机会大大减少。

## **现在更大的画面**

新代码在开发人员的笔记本电脑上运行，测试通过，他们签入了代码。但是在一个繁忙的企业团队中，其他开发人员也在处理同一个组件，甚至可能是同一个文件。这和几个作者一起写一本书的一章没什么不同。您的开发人员使用代码的稳定快照。很有可能其他人所做的更改与您的开发人员刚刚所做的更改相冲突。那么我们该如何进行呢？

这是中心构建的目的。中心构建的工作是检查该组件的所有代码，构建它，并在新代码被检入时运行所有相关的测试。在当今世界，可能的途径是在云服务器上创建一个容器，在那里可以从头开始构建组件，然后所有的测试都在其上运行。传统上，像 Jenkins 这样的工具会监视 git 签入并开始构建。结果是团队总是知道整体构建是绿色(工作)还是红色(损坏)。开发人员必须明白，核心版本才是真实的来源，而不是他们笔记本电脑上发生的事情。因此，最新的签入导致了正确构建的组件。接下来呢？

开发一个软件系统需要三种类型的测试。确保新功能正常工作且不损坏组件的测试，确保组件仍能相互协作的测试，以及确认您的组件参与所有预期工作的客户旅程的测试。如果没有客户旅程测试来证明客户可以将现金存入系统，那么存款功能就没有任何意义。

第二种类型的测试，通常被称为集成测试，需要一个当前所有成功构建的组件可以相互通信的环境。今天，这可能意味着某种形式的容器编排，将系统的组件放在它们的容器中进行管理。客户旅程的测试可能涉及模拟客户对网站或移动应用的操作，具体取决于应用或服务的访问方式。这些是涉众最感兴趣的测试，因为他们确认了故事中所要求的实际工作。与集成测试一样，这些测试可能不经常运行。

## 我嘲笑你

模拟(或伪造)服务和数据是测试过程的必要部分，通常，必须作为测试的一部分进行维护和扩展。一个特性故事可能需要开发人员花费更多的时间来开发或扩展一个模拟服务，而不是编写它帮助测试的代码。例如，需要一个有交易历史的模拟账户来测试一个新的存款功能。

真实环境永远无法在测试环境中完全模拟。有时一个实时服务使用一个付费的第三方服务，在测试中使用它太贵了。通常情况下，不允许开发人员处理实时客户数据。

## **构建处于活动状态**

所有提到的结构都是一种简单态度的产物:“我怎么知道这是否可行？”为了让持续测试蓬勃发展，工程师应该总是质疑系统的每个部分是否都被测试，以及测试是否与特性开发同步发展。当测试或模拟缺失时，敏捷团队会提到技术债务。顾名思义，这是以后必须付出的代价。

当团队成员意识到他们不能只签入代码而不检查中心构建就去吃午饭，这是一个好的迹象。信息辐射器，比如构建状态的大屏幕显示，应该被用来让扩展团队理解构建的状态是每个人都关心的，贯穿整个生命周期。

大卫·伊斯曼