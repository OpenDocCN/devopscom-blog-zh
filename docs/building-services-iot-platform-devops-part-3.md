# 使用 DevOps 构建服务和物联网平台，第 3 部分

> 原文：<https://devops.com/building-services-iot-platform-devops-part-3/>

业务需求和物联网需求在连接数百万设备、人员、流程、工具和系统方面呈现出新的维度。由于创造新物联网解决方案的无限可能性，DevOps 团队是在后台处理业务、开发、运营和基础设施需求的同时应对成功推出物联网解决方案的挑战的关键角色。本文重点介绍在物联网开发过程中采用的一些 DevOps 最佳实践，以加快上市速度。

### 物联网开发期间采用的 DevOps 实践

1.  通过设计实现安全性——团队需要接受教育并意识到安全威胁。使用威胁模型缓解技术，如使用身份验证；单独存储机密并保护这些机密；使用防篡改协议、数字签名、时间戳、审计跟踪、加密、授权策略、过滤；以及在安全设计和开发期间以最低特权运行服务。
2.  左移安全分析和安全测试–集成安全分析工具，定制安全合规性规则，并作为持续集成管道的一部分运行安全测试，生成漏洞的安全威胁报告，并根据这些威胁报告在开发阶段早期修复问题，最大限度地降低安全风险。
3.  在开发过程中遵循安全标准，如安全开发生命周期(SDL ),该标准提供了为物联网平台的设备和应用组件构建软件的指南和措施。
4.  对设备软件、应用软件、PaaS 规则和配置执行代码审查，因为考虑到基础设施的复杂性、数百万设备连接和动态环境配置，质量保证可能会成为一个巨大的风险。代码评审工具需要集成到具有拉式请求代码评审的 CI 管道中。
5.  在版本控制存储库中使用正确的分支策略，包括预提交/预检构建、用于合并代码更改的拉式请求以及用于维护分支和使用正确分支策略的访问控制，因为设备和应用程序开发将有多个分散的开发和部署管道，以减少开销。使用分布式存储库/中央存储库，具有基于需求的可追溯性和可审计性。
6.  自动化部署并创建部署管道，用于设备开发、应用程序开发、基础自动化脚本开发，构建和部署管道针对不同的目标端点。
7.  定制构建和发布管道，以便从多个构建和部署管道中提取包，作为部署单元进行集成和部署。
8.  为应用程序的推广计划频繁的发布周期——比如每月一次。固件更新推出的发布节奏可以计划为三到六个月，因为设备更新不能如此频繁。
9.  持续监控部署–使用发布管理工具来协调发布和发布协调活动，通过把关检查和批准来查看每个环境中部署了什么，以及可跟踪性和审计。
10.  如果固件部署或应用程序更新失败，启用反馈循环和自动警报。
11.  DevOps 团队可以为设备定义关键原则、要满足的标准和要遵循的标准；要提供的基础设施；连接到现有/新设备和服务的设备协议使用和标准。通过遵循相同的连接和通信协议，这可以降低开发和部署到多种不同设备的复杂性。
12.  培训开发人员、QA 和硬件开发人员团队如何为物联网开发进行持续集成，遵循敏捷和精益实践，并确保应用和流程中所有层的安全标准。
13.  采用以用户为中心的测试自动化和端到端测试方法，并从测试完整流程的角度构建强大的测试案例，使用可能不在您的范围内但将成为您整体物联网平台生态系统一部分的设备/服务。
14.  创建/利用基于容器的测试环境和设备模拟器，结合服务虚拟化进行功能测试。
15.  自动化基础架构配置–使用正确的配置管理工具自动化基础架构及其依赖关系，通过代码创建环境，而不是配置基本虚拟机。
16.  使用 Docker Swarm 或 Kubernetes 等容器和集群管理工具进行服务发现、自动扩展、自我修复和调度。
17.  在创建的基础架构模板/脚本中使用 RBAC、服务帐户和安全访问控制，而不是单个用户凭据，以限制未经授权的用户使用脚本调配环境的风险。在设备、云安全、应用安全和基础设施自动化模板中构建安全性。使用机密、密钥库、加密方法和证书来保护凭证和访问控制。
18.  为应用程序开发和基础自动化开发配置单独的构建和部署管道作业，因为自动化基础架构将涉及大量的开发工作。
19.  使用脚本工具(如 Python)创建基础设施验证测试，或使用测试框架(如 Pester)或任何其他开源工具，并将基础设施测试与 CI/CD 管道集成。确保每次配置基础架构时都运行这些测试。
20.  除源代码外，对基础架构模板、脚本、用户配置文件、环境配置和设备配置进行版本控制。
21.  设置监控工具的集中控制面板，以监控群集、节点、防火墙规则、虚拟机、应用程序、设备和服务。反馈应该反馈给开发人员/QA/DevOps 团队。
22.  配置应用程序以提供关于异常、内存泄漏和响应时间的日志记录，并将日志推送到监控工具或监控工具中的仪表板。
23.  使用来自应用程序和设备的遥测数据来导出分析图表/趋势，并设置 KPIs 指标来衡量应用程序性能/可用性，以及从导出业务指标来设置开发和运营的 SLA，从而提高工作效率。
24.  确保 DevOps 团队与软件和硬件团队的开发/QA 团队密切协调，因为管理物联网平台需要更多物联网领域硬件和软件方面的技能和专业知识。
25.  借助多云管理平台管理传统和云基础架构，并监控和优化基础架构的使用。
26.  创建 DevOps 治理计划/指南，明确定义访问控制策略、设备访问权限、不同云中基础架构配置的控制限制、要使用的 PaaS/IaaS 服务的限制等。，并对 devo PS/开发/测试/运营、工具等要遵循的流程进行标准化。

近年来，遵循 DevOps 实践进行应用程序开发已经变得非常简单。然而，在工业企业遵循传统方法和实践的物联网中，适应敏捷方法并遵循 DevOps 实践，再加上正确的 DevOps 技能团队、工具和专业知识，可以简化物联网开发。

## 关于作者/ Lavanya Subbarayalu

Lavanya Subbarayalu 是 HCL Technologies 技术办公室的高级建筑师。她在 IOT、Azure、devo PS consulting&Microsoft technologies 等领域拥有专业知识。她在 DevOps COE 工作，从事 DevOps 解决方案和咨询工具的设计和开发。在 [LinkedIn](https://www.linkedin.com/in/lavanya-subbarayalu-85b05677/) 上与她联系。