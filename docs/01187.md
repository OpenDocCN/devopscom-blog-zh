# Intuit 的 DevSecOps:战争游戏和文化黑客

> 原文：<https://devops.com/intuits-devsecops-war-games-culture-hacking/>

如果你曾经想了解 Rugged DevOps(有人称之为 DevSecOps)，请与 Intuit 的 Shannon Lietz、Ian Allison 和 Scott Kennedy 坐在一起。我们讨论了许多重要的话题，包括内部战争游戏，文化黑客，游戏化的坚固 DevOps 和开始作为一个小团队。对于新手和专家来说，这段对话中有 100 个金块。

德里克·威克斯:今天我和 Intuit [开发团队的一些人在一起。我们将向他们介绍一些关于 Rugged DevOps 以及在](http://www.devsecops.org/) [Intuit](https://www.intuit.com/) 工作的情况。先做一些介绍吧。

艾莉森:我是伊恩·艾莉森。我在 Intuit 帮助管理[红队](https://en.wikipedia.org/wiki/Red_team)，我猜你会说，这是一种控制我们公司安全的有趣方式。我们试图通过成为攻击者来领先于攻击者。我们本质上是有道德的黑客。我们追求所有我们自己的东西，以确保我们能找到我们所有软件的缺陷所在。

我是香农·利兹。我在 Intuit 工作了 3 年半，帮助建立了 Intuit 的 24×7 DevSecOps 能力，领导红队、我们的安全运营能力、我们的网络足球，以及我们也认为的“蓝队”:能够寻找缺陷。

该组织确实必须转变我们进行软件开发的方式，因为我们是一家有 30 年历史的软件公司。我们现在看到传统的组装软件的方式真正拥抱了 DevOps。对我们来说，能够真正与坚固的 DevOps 在行业中合作，努力帮助将安全性融入 DevOps 运动，是一件令人兴奋的事情。

肯尼迪:我是斯科特·肯尼迪。我负责网络工作中的取证和威胁情报部分。

**周:** Shannon ( [@devsecops](https://twitter.com/devsecops?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor) )，告诉我一些关于软件供应链的事情，以及软件开发的愿景如何影响了你对 Intuit 的看法。

Lietz: 这真是个好问题。当[乔希·科尔曼](http://www.rsaconference.com/speakers/joshua-corman)和我第一次交谈时，感觉很有趣；我们有很多共同点。其中之一就是软件供应链。我真正喜欢这个概念的是能够以某种方式驱动流程，这样你就可以减少缺陷。

过去曾在丰田工作过，了解供应链的心态，你会知道如何更好地把一些东西组合在一起，不断改进，弄清楚如何分享这一过程，然后真正弄清楚哪些东西是重要的。拥有更少、更好的供应商确实是一个核心概念。

我喜欢透明的想法，以某种方式构建事物，并真正进入持续改进。你需要从机会的角度来看待事情——确保你不只是想让事情变得完美。随着时间的推移，你在寻找那些改进的机会。

[https://www.youtube.com/embed/nRaURhaTH9o?feature=oembed](https://www.youtube.com/embed/nRaURhaTH9o?feature=oembed)

Weeks:当我们考虑您的安全团队中的加固 DevOps 时，您如何衡量您所做工作的成功？您认为什么样的指标对业务至关重要？

Lietz: 我们衡量一切。例如，平均补救时间(MTTR)。一旦有人发现了一个缺陷，我们就从它进入供应链的时候开始分析，直到它真正得到解决。我们跟踪每一件事，从平均时间到补救，到票证创建的时间，到能够查看代码实际发布的时间，到代码实际被找到的时间，然后我们随着时间的推移处理这些事情。我们真的努力提升。

**_ _ _ _ _ _ _**

一旦有人发现了缺陷，我们会从缺陷进入供应链的时间到它真正得到解决的时间对其进行分析。

**_ _ _ _ _ _ _**

我们像软件开发团队一样利用 JIRA[软件]。我们记录我们的缺陷，并找出如何让开发团队对这些想法负责。它经历了发布和回归测试的过程。作为其中的一部分，我们回头看看我们的机会在哪里。

举个例子，我们从可能需要几周时间的地方开始。然后我们把它减少到几天，最终减少到几个小时。我们已经看到缺陷解决现在只需要几分钟。当我们发现这只是一个工程师的错误时，我们意识到“错误确实会发生。”我们发现，我们的周期时间也有助于我们实时发现故障堆栈漏洞，因为我们可以更积极地利用这种方法进行端到端测试。

**周:**运营的一致性如何帮助强化开发运维，组织内部的 it 脆弱性如何？

**Allison:** 我们做的事情之一是为我们所有的客户使用的所有 ami 使用黄金映像([亚马逊机器映像](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html))，我们要求每个人都使用这些 ami。我们还围绕扫描这些 ami 构建了一些非常有趣的自动化。当我们第一次启动 native U.S .时，我们很快意识到一件事，当我们尝试对另一个系统进行完整的漏洞扫描时，如果它设置为自动扩展，我们突然就有了 50 个系统。对吗？我们不能…很难对系统进行全面的漏洞扫描，所以我们想出了一种方法，用一个特殊的帐户来共享所有的 ami。然后我们把它们拿出来扫描。然后我们给他们打分。

根据所发现的漏洞，您将获得一个字母等级，如从 A 到 F，基于您所拥有的系统。虽然我们总是努力让我们的基本形象是 A，人们继续运行旧的形象。但是他们会被评分，这些分数会被推高，所以他们组织结构中的每个人都可以看到他们帐户的分数。我认为通过一点标准化，基本上是通过这些图像，让我们知道每样东西里都有什么，并且我们对每个人都有一个等级。这有助于每个人都很好地了解他们在安全方面的立场。

**_ _ _ _ _ _ _**

根据发现的漏洞，您将获得一个字母等级，如 A 到 F …这样组织结构中的每个人都可以看到他们的帐户等级是多少。

**_ _ _ _ _ _ _**

**Weeks:** 这不仅是一种分级，还是一种策略执行治理，分级扮演着这种角色。在这个评分系统中，你所在团队的反馈速度有多快？

**Lietz:** 这真的很快，我们已经通过一些科学发现，拥有像 AMIs 这样的基于组件的资源为我们提供了一个优势，当我们做像修补漏洞这样的事情时。使用基于 AMI 的资源，我们已经看到，当其中存在缺陷时，我们可以快速找到并修复所有有缺陷的 AMI。这提高了整个公司每个人的安全性。

因此，如果你只是挑选出真正好的组件，跟踪这些组件并为它们增加安全性，那么你实际上会在我们的管道中看到不同的效果。一个简单的改变实际上可以对减少管道中的问题产生巨大的影响。

**Allison:** 真的很有意思。今天早上，我收到一封电子邮件，邮件中写道，“为什么我们的基线急性心肌梗死从 A 级升到了 C 级？”

我们刚刚收到一个新漏洞的通知。我们的员工发现了它，我们扫描了它，然后我们将分数发布到我们的门户网站上，所有的客户都可以在那里查看分数。我们的客户能够很快看到这一变化。

他们现在可以说，“哇，不到 12 个小时就从 A 变成了 C。”我认为反馈非常重要。另一件重要的事情是我们有人去寻找。我不会收到电子邮件询问为什么这种情况发生了变化，如果人们不是真的想提高成绩的话。

**周:**你提到了客户。这些是内部客户吗？

**艾莉森:**内部。

是的，对于我们的开发团队来说，作为一个安全团队，我们确实改变了我们思考问题的方式。以前是治安队会出去治理。基本上，你害怕安全小组来找你。

我们已经真正改变了我们组织内部的运作方式。我们对我们的资源组件进行分级，并且对我们的应用程序组合在一起的方式进行分级。这改变了开发人员的操作方式，因为他们真的想知道如何在安全性方面取得更好的成绩。它创造了一种学习动力，激励人们不断改进。

**_ _ _ _ _ _**

这改变了开发人员的操作方式，因为他们真的想知道如何在安全方面获得更好的成绩。它创造了一种学习动力，激励人们不断改进。

**_ _ _ _ _ _**

**周:**它是否创造了谁的成绩更好的竞争性或游戏化？

当然，这也是我们当初这么做的原因。就你的观点而言，游戏化是指当你开始给组件评分时，你实际上可以开始利用排行榜的概念。我们确实有排行榜。我们有 API，在那里你可以降低你的分数，并把它们包含在你的自动化中。有了这些，您可以制定治理决策。

如果你的“游戏正在进行中”，你的领导就可以在他们的管道中要求具体的分数。这提升了系统，你会看到一个持续改进的生命周期。最终，你会看到更少的缺陷，最终，你会得到我们思维方式中的六适马概念。DevOps 实际上是关于持续改进和拥抱自动化。接受这个概念可以让我们更快地发现更少的缺陷。

**_ _ _ _ _ _**

DevOps 实际上是关于持续改进和拥抱自动化。接受这个概念可以让我们更快地发现更少的缺陷。

**_ _ _ _ _ _**

**周:**当你接受持续实践和 DevOps 实践时，有没有意识到某些旧的做事方法不能让你前进？

**Kennedy:** 在审视我们所做工作的进展时，Intuit 做出的一个决定和我看到的一件非常独特的事情是他们决定我们将迁移到 AWS 的方式。我们的想法是让混乱小组成为第一批出来的人，那就是安全小组。因此，安全团队出去寻找如何使用 AWS 的每一个产品，并创造了白名单的概念。每个产品都被评定是否符合安全要求。

因此，没有一个团队可以把 AWS 昨天发布的这个新的很酷的工具拉下来并在生产中使用，因为它没有被“列入白名单”可以计入他们的得分。他们的得分不仅被开发团队使用，而且在向董事会报告时也很有用。当董事会问:“我们公司在整个组织中的表现如何？”我们可以说，产品 A 的得分比产品 B 低，然后他们转向负责该产品的副总裁说:“嗯，为什么？”

**_ _ _ _ _ _**

当董事会问:“我们作为一家公司，在整个组织中表现如何？”我们可以说，产品 A 的得分比产品 B 低，然后他们转向负责该产品的副总裁说:“嗯，为什么？”

**_ _ _ _ _ _**

我们决定不急于进入云，而是采取一种谨慎、深思熟虑的方法，以一种非常智能和深思熟虑的方式进行迁移。与此同时，我们给了混沌团队犯错误和成长学习的能力，这样他们就可以立即回头和其他人分享错误。他们可能会说，“嘿，这些东西对我们不起作用。我们遇到了很多问题，尤其是在考虑客户和客户角色等问题时。”

当你有成千上万个账户并且需要某种管理控制时，你如何控制？

您可以做出巨大的努力来强制您的名称空间和活动目录成为控制的来源。或者，您可以使用 IAM 等特定于供应商的工具，让每个帐户都有自己独立的孤岛，但是有了跨帐户角色的概念，您就可以从一个集中的帐户进行远程管理。你已经封锁了。您有能力拥有一个受限的组，并且能够远程进入并执行必要的操作。

这也给你一个审计线索。这也为您提供了内置的多因子，因为 AWS 产品中添加了这些内容。

[https://www.youtube.com/embed/kCo-D_x2dUQ?feature=oembed](https://www.youtube.com/embed/kCo-D_x2dUQ?feature=oembed)

Lietz: 我认为归根结底，我认为文化黑客化你的环境会产生深远的影响，尤其是当你正在经历 DevOps 转型的时候。

**周:**什么是文化黑客？

Lietz: 这是个很好的问题。当我们真正试图找出我们作为一个安全团队如何改变和转型时，我们会使用它。公司里发生的很多事情都是基于传统的流程:以前有效的流程，我们为什么要改变有效的流程，对吗？如果你真的要进入一个创新的框架；如果你真的想进入下一代创新领域；如果你试图找出在那种情况下什么会起作用……它永远不会是起作用的东西。这将是你进入下一步时将要学习的东西。

文化黑客实际上是观察现在正在工作的人，并试图找出你将如何帮助他们从 A 到 B，做出改变。这种体验会是什么样的？

在 Scott 看来，我们所做的是迫使我们的安全团队对 DevOps 团队产生共鸣。我们经历了在云中开发一些东西的过程，利用它作为一种方法来消除他们的偏执，并试图平衡在特定时间框架内完成一些事情的概念。我们努力讨论如何安全可靠地完成这些工作，但最终仍然能够为企业提供服务。

我认为，当你试图弄清楚如何将某人从他们所在的岩石移动到你需要他们所在的岩石，并试图弄清楚那些机制是什么时，文化黑客才真正发挥作用。

**_ _ _ _ _ _**

当你想出如何将某人从他们所在的位置转移到你需要他们所在的位置时，文化黑客就开始发挥作用了。

**_ _ _ _ _ _**

**周:**您的安全实践的一部分是查看开源和第三方组件以及您自己的二进制文件。你能解释一下 Intuit 是如何使用 Sonatype 解决方案来更好地管理这些漏洞的吗？

是的， [Sonatype Nexus](https://www.sonatype.com) 是一个非常棒的平台。我们喜欢 Nexus 仓库。我们喜欢你们组建[社区](http://www.sonatype.org/nexus/)的方式。我们学到了很多。

我们的许多 DevOps 实践都与它一起工作。我们已经将 Nexus 库整合在一起，进行代码签名，并找出如何以某种方式真正保护我们的管道。我们正在利用这样一个事实，即我们可以挑选组件，跟踪它们，然后扫描它们(寻找已知的漏洞)。

这使得我们能够减少投入生产的缺陷数量。实际上，扫描和寻找我们的组件和开源库中的漏洞可以让我们更好地决定在软件中包含什么。

**周:**当你管理开发人员正在使用的开源、第三方或专有组件时，团队是否有任何反馈说，“嘿，你在限制我的行为，而不是改进我的创新”？

**Lietz:** 我们发现，安全批准、例外和关口的概念确实行不通。很多时候，你只是创造了一种文化，让开发人员出去做，然后你会发现这一点。当谈到真正的合作和如何在您的业务中无边界地考虑安全性时，这一切都与透明度有关。都是利益问题。它在您的存储库管理器中创建了类似安全降价文件的东西。它是关于在你的开发过程中从安全的角度对你正在做的事情承担责任和义务。它最终有一个 attacks.md 文件，跟踪那里有什么，跟踪你的开源，了解你在利用什么组件，以及你为什么决定把这些东西引入你的项目。

**_ _ _ _ _ _**

从开发过程中的安全角度来看，这是关于对你正在做的事情承担责任和义务。

**_ _ _ _ _ _**

在最高水平上，所有这些都是可行的。但是真的有工具可以帮助你得到贡献的其他开源程序员做出决定是非常必要的。他们可能做出的所有决定也是你的决策树的一部分，最终，你要把所有这些整合在一起。攻击面不仅仅是您的团队正在做出的决策，而是您在已有代码库中共享的决策。

**周:**你的做法很成熟。很明显，你已经花了很长时间来开发它们，有些人看到这个可能会想，“嗯，Intuit 是一个巨大的组织，”如果他们还没有开始走上崎岖的开发之路，这可能会让他们望而生畏。你能成为一个小团队并在这些实践中取得成功吗？

Lietz: 我们并不是一个庞大的组织，但我们现在的规模相对较大。当我们开始的时候，我相信我是大概三个人中的一个，仅仅在几年前。我们已经广泛地雇佣了我们的团队来帮助发展，我们所做的一些事情真的让我们能够以不同的方式运营，引进人才并让他们立即获得成功。我们的实践允许某人“第一天”就能够与环境一起工作，能够开发代码，能够在那一周贡献代码。

我们做类似每周演示的事情，实际上我们做视频演示。一个人必须在第一周内进来，编写程序，保护程序，操作程序，制作演示。因此，为这些人提供合适的酒吧真的很重要，但更重要的是，我们的红队队长(指着伊恩)，他进来了，令人惊讶的是，他几乎凭空创造了一个红队。让取证部门的人帮助我们也是如此，他们刚刚做了一项令人难以置信的工作，让我们有一个生命周期，我们可以拍摄一些东西，并能够在它实际离线时从中学习。

**_ _ _ _ _ _**

一个人必须在第一周内进来，编写程序，保护程序，操作程序，制作演示。

**_ _ _ _ _ _**

在这些实践中，你开始超越今天流程的正常基线实践，并真正思考如何支持创新。你很快就进入状态了。你会得到一种学习文化。你让人们知道犯错误——以及如何从中吸取教训——是没关系的。这是你正在建立的实际文化中非常重要的一部分。

Allison: 是的，我想说的是，这都是关于迭代，对吗？我们从小处着手，不断重复我们正在做的事情，努力做得更好，做得更好。

当我第一次开始这段旅程时，我是一名安全人员——一名笔测试员。总是开发商的错。开发人员总是会犯错误。我总是不得不收拾他们的残局。但是在开发了 Ruby APIs 和 Ruby 六个月后，我拼了命地写代码，我终于有了共鸣。

我真的理解开发人员正在经历什么，以及他们为什么做出这样的选择。但我认为，通过允许我们帮助他们，通过创建允许他们自助服务的工具，了解 it 而不强迫他们…帮助他们使自己更加安全，而不必成为安全专家。我认为这是我们的终极目标。

香农:成为友好的黑客，对吗？基本上，走出去攻击他们，使他们的应用程序不会受到外部攻击者的攻击，这确实是该框架的一部分。

[https://www.slideshare.net/slideshow/embed_code/key/jpj1UNgJbTcCMO](https://www.slideshare.net/slideshow/embed_code/key/jpj1UNgJbTcCMO)

**[The Journey to DevSecOps](https://www.slideshare.net/SeniorStoryteller/the-journey-to-devsecops "The Journey to DevSecOps")** from **[SeniorStoryteller](http://www.slideshare.net/SeniorStoryteller)**

**肯尼迪:**公司红队的转变意义深远，因为你可以看到人们的反应。当红队开始时，它并没有被很好地分享，很多人突然非常沮丧，因为他们被红队攻击了。但是当有人指出，“好吧，你希望发生什么？你是愿意让中国的某个人这样对你，不跟你一起工作，不坐在你旁边帮你修理产品，还是愿意有一个朋友，顺便说一下，他们的工作是攻击？”

当我们进行了几次演习，并实际练习了保护公司免受攻击的能力时，人们感到沮丧。“哦，我不得不做所有这些工作。”

我对他们的回答是:“嗯，你做得对。”

“你做得对。你看到了不好的事情。你做到了。你做得很好。你练过肌肉。现在，当它再次发生，而且不是红队，我知道你会知道该怎么做。您知道这个流程是可行的，我们实际上可以更快、更安全地保护公司。”

**_ _ _ _ _ _**

**您知道该流程是可行的，我们实际上可以更快、更安全地保护公司。**

**_ _ _ _ _ _**

**周:**是啊。这是一个不可思议的故事。谢谢分享。

我的最后一个问题:如果您可以在开发、安全或运营方面挑选一个您希望在组织中拥有的超级大国，它会是什么？

对我来说，他们都是一样的；他们是一样的，对吗？我们就是干这个的，德夫塞科普斯，对吧？我们尽量不把它们分开，因为我认为一旦你开始把它们分开，你就开始失去洞察力。

肯尼迪:是的。

Allison: 拥有它们是一件好事，所以我会选择它们。

肯尼迪:情况相当稳定。DevSecOps 就是答案。问题是什么？(笑声)

**Lietz:** 我认为我们走出去并创建 DevSecOps 的原因只是简单地改变我们对开发和技术的看法——并真正走在它的前面，意识到攻击者并没有安排约会或会议来帮助您了解他们将如何攻击您的软件，那么我们为什么要这样做呢？为什么我们在脆弱的水平上运作？

我认为我希望拥有的超级力量是 DevSecOps，因为我知道我们正在创造一种不那么脆弱的安全能力，这种能力将使我们能够领先于攻击者，使他们更难追踪构建的软件，我们正在看到这些改进。那其实是一件很棒的事情。

**周:**听起来真的很刺激，而且很爽，非常感谢大家。我真的很感激。

**全体:**谢谢。

如果你喜欢这个采访，并且正在寻找更多关于加固开发的好材料，我邀请你下载来自 Forrester 的 Amy DeMartine 的这篇很棒的研究论文，“加固开发的 7 个习惯”

![Untitled2](img/a0c9d0a76408271f4d705b7e4ddfcffa.png)

正如 Amy 指出的，“没有安全和风险(S&R)专家的专业知识，DevOps 实践只能在一定程度上提高速度和质量。旧的应用程序安全实践阻碍了快速发布，而安全漏洞代表的缺陷可能会使公司面临网络攻击。但是 DevOps 实践者可以通过在 DevOps 反馈循环中包括 S&R pros 和在自动化生命周期中包括安全实践来提高速度和质量。这些新的实践被称为坚固的 DevOps。"