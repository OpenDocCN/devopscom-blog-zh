# SRE 实用事件响应指南

> 原文:[https://devo PS . com/sres-guide-to-practical-incident-response/](https://devops.com/sres-guide-to-pragmatic-incident-response/)

在我过去作为 SRE 的经历中，我学到了一些关于如何应对和从事件中学习的宝贵经验。如果你想要 TL；博士，我在这里总结一下:

*   声明并运行小事故的追溯。压力更小了，行动项目变得更可行了。
*   减少分析事件所需的时间。你会记得更多，会从这件事中学到更多。
*   对人而不是机器感受到的疼痛保持警惕。我们宣布事故的唯一原因是因为那些机器另一边的人。

现在，让我们更深入地了解这些课程，并探索它们如何帮助您建立一个更好的实用[事件响应](https://devops.com/?s=incident+response)系统。

### 1.首先关注小事件

忽视小问题的坏习惯往往会导致更大的问题。您应该对小事件(速度变慢、小错误等)进行回顾。)因为这些通常有最可操作的要点——而不是发射月球和创建“重新架构异步管道”作为永远不会发生的吉拉入场券。关注低风险事件和回顾是在你的组织中改变行为的好方法。

让我们来看一个明显的例子，关注小事件会产生巨大的影响。典型的例子——我的公寓。我住在一个改造成公寓的旧糖果厂。我们有电梯(感谢上帝)，但有些按钮按下后不亮。LED 显示与楼层按钮上的数字不符。是的，电梯上上下下，但总的来说，你可以看出它有毛病。

一天，我回到家，发现电梯门上贴着“故障”的通知。我很惊讶吗？一点也不。当然，按钮贴错标签、发光二极管坏了的电梯会停止工作！

这与一堂重要的软件课没有什么不同——忽略小问题往往会导致更大的问题。开始时的不便会导致彻底的崩溃。这就是为什么你应该首先关注小事件。我听到许多公司说，“我们需要改进事件响应！每次我们出事，都是一片混乱！”

他们在谈论高严重级别事件期间的意外停机时间，他们希望改善这种情况。

我说，这是错误的事件类型，用于修复您的事件响应系统和流程。首先关注小事件。对小事件进行追溯可以帮助您建立强大的事件响应模型，因为它们具有最可操作的要点，并且是通过重复和实践改变行为的最佳方式。

如果你有一个高风险的，12 小时的事件，你运行一个小时的回顾，你不会得到你想要的结果。你需要从小处着手。对引入的错误进行追溯；也许一次糟糕的数据迁移并没有真正影响什么，但却占用了你一天中的几个小时。

Heidi Waterhouse 在这篇关于可靠性的文章中很好地抓住了这个想法。沃特豪斯说，你坐过的每一架飞机都有许多小问题，“……比如粘粘的行李插销、破损的座位或磨损的安全带。这些问题都不是飞机停飞的原因。然而，如果出现足够多的小问题，飞机可能不再符合乘客适航性的要求，航空公司将停飞它。一架有许多故障呼叫按钮的飞机也可能在其他方面维护不善，比如对涡轮叶片微裂纹或起落架行为的错误检查。”

我完全同意。外推至软件:小事情通常是大问题的指示器，可能会导致未来的灾难。

### 2.跟踪平均追溯时间(MTTR)

思考您在组织中衡量什么很重要。你应该衡量自己的进步，这里最重要的指标是[平均恢复时间](https://firehydrant.io/blog/the-mttr-that-matters) (MTTR)。每个人都应该追踪 MTTR。这是提高您团队中[事件响应](https://firehydrant.io/incident-response/)的一个很好的统计数据，因为它有助于您理解事件和回顾之间的延迟。

最简单的方法就是等待两个星期。最好是快速进入一个房间，弄清发生了什么，而不是等很长时间，直到你把一切都准备好了。

跟踪 MTTR 可以帮助你在事件发生后进行及时一致的回顾。设置一个计时器，并为自己制定一个 SLO 或 SLA，上面写着:“这是我们进行追溯所需的时间。”

追溯时间因事故本身的严重程度而异。如果是 SEV1，清空所有人的日程安排，因为你需要在事件发生 24 小时内进行复古。对于三起事件，你有更多的宽容。

我还喜欢跟踪追溯事件与已申报事件的比率。这是一个应该上升的指标；您应该看到回顾与事件的比率在增加。您也可以根据严重性来分解这个数字。如果 SEV1 与 SEV3 事件的追溯比率较低，起初可能没问题(记住，从小处开始)，但您希望这些指标最终变得相等。

### 3.对降级的服务体验发出警报，别无其他

事件的严重性与客户的痛苦直接相关。如果没有很多人感到非常痛苦，我们就不会宣布 SEV1s。

对电脑生命体征发出警报很容易导致疲劳和倦怠。随着您的公司开始扩大规模，您将使用更多的 CPU 你将会使用更多的内存。将警报与计算机生命体征联系起来不是一个好兆头。

如果我跑，我的心脏会跳得更快——它只是在做它的工作。在凌晨 2:00 呼叫人们，因为磁盘容量为 80%,尽管直到下个月你才会用完空间，这是失去伟大队友的好方法。我曾经和一些人一起工作过，他们离开以前的公司完全是因为他们因为无关紧要的事情被传呼了太多次。

这就是为什么您需要提醒服务的降级体验，而不是其他。CPU 以 90%的速度燃烧并不一定是一件坏事，但是你需要上下文来决定。创建与客户体验相关的 SLO，并就此发出警报。在很大程度上，人们遇到服务问题是你唯一应该警惕的事情。

我见过的思考这个问题的最好方法之一来自 Soundcloud 开发者，他们解释说[你应该警惕症状，而不是原因](https://developers.soundcloud.com/blog/alerting-on-slos)。我心跳快不一定是问题。但是如果我的心率加快导致头晕，我摔倒了——那就有问题了。所以，我需要对类似的事情保持警惕。在凌晨 2:00 呼叫人们，因为磁盘容量是 80%,你要到下个月才会用完，这是不好的。但是传呼别人，因为你知道磁盘容量问题会串联成其他系统性问题。您可以将同样的想法应用于其他潜在的停机原因。夜间叫醒你的传呼警报应该只基于症状。