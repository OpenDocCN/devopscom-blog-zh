# 开发运维与服务挑战

> 原文：<https://devops.com/devops-challenge-services/>

在 RackN，我们多年来一直致力于使 DevOps 可以跨平台移植。对我们来说，这意味着能够在云和金属之间移动。在对可移植性的几个挑战中——可组合性、API 异构性、序列、跨系统依赖性——使配置管理工具与服务一起工作已经变得特别重要，因为构建系统的重要部分依赖于不可直接配置的服务。

让我们以 DNS 为例。每当我们在一个节点上配置服务时，都会涉及到 DNS。如果我们打开一个 web 服务器，我们希望为节点使用一个逻辑名称。如果是安全的 web 服务器，该名称应该与我们的证书相匹配。如果我们想让该服务可被发现，我们可能需要为该节点添加一个逻辑名称，比如“clustermanager6.example.com”或类似的名称。如果您包括 BMC 和机架位置的名称，更不用说 IPv6 命名了，那么很容易想象节点有 10 个名称。甚至云节点也有类似的问题。要管理的条目太多了！

所有这些 DNS 名称和类似服务的问题在于，它们不能从节点进行配置。它们是带有需要受限授权的 API 的服务。

## 服务和自动化

DNS 只是一个简单的例子。系统级 DevOps 有许多地方的配置工作流需要包含外部服务操作。在云环境中，这通常意味着要么编写与特定云 API 对话的配置前或配置后步骤，要么使用特定于云的模板文件之一。在物理环境中，这通常意味着增加许多手动步骤，或者将自动化严格限制在清单映射文件中。无论如何，节点不拥有 DNS 配置—它是一个节点外部服务，具有特定于站点的 API 元素。

所有这些方法都使 DevOps 变得脆弱，并且受到站点的限制。五年前这还可以，当时选择更加有限，剧本由 DevOps 工匠手工制作。今天，我们需要我们的自动化变得健壮、可移植和透明。

我们意识到系统自动化需要将服务交互视为等同于配置。这意味着，当我们进行资源调配时，我们要确保服务步骤能够融入配置步骤序列中。不能假定它们是正确的，也不能将其委托给前置或后置条件，因为这样就不可能测试和重新创建工作环境。

你能做什么？我们发现服务注册工具(我们喜欢 Consul.io)是必不可少的，并且相对容易实现，以帮助跟踪我们管理或代理的服务。更广泛地说，我们一直在开放的数字 Rebar 上工作，将配置和服务融合到单一的工作流程中。

第一步是重新检查您的配置管理脚本(及其先决条件)中隐藏的服务 API 交互。暴露这些外部依赖将帮助您提高自动化的可重复性和可移植性。