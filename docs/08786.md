# 通过制造混乱来提高弹性

> 原文:[https://devops.com/improving-resiliency-by-creating-chaos/](https://devops.com/improving-resiliency-by-creating-chaos/)

在数字经济中，防止停机至关重要。当数字系统出现故障时，对商业的影响是巨大的。对于大型企业来说，停机时间的成本可能高达每分钟数千美元。这还没有考虑到客户不满的影响以及对公司和相关 IT 职业的声誉损害。

无论您如何衡量，it 失败都是代价高昂的。由于当今分布式 It 系统日益增加的复杂性和相互依赖性，这在很大程度上也是不可避免的。云计算、微服务架构和裸机基础设施的结合创造了许多移动部件和潜在的故障点，使得这些系统完全不可预测。

IT 故障将会发生，这是很容易承认的。理解如何修复它们更加困难，尤其是当相互依赖并不总是显而易见的时候。直到最近，[构建测试](https://devops.com/?s=build+testing)一直是确保质量和弹性的首选方法，但这种测试没有考虑导致不可预测事件的环境因素，也没有考虑处于休眠状态且未被注意到的级联故障如何触发更大的故障。

## 混沌工程如何有所帮助

混沌工程是一种相对较新的企业软件开发和测试方法，旨在消除这种不可预测性。

如果您的最终目标是获得清晰性和提高弹性，那么将混乱引入系统听起来可能违反直觉。事实上，如果你听说过任何关于混沌工程的东西，你可能会对一些术语感到震惊:“爆炸半径”、“随机终止”、“故障注入”和“风暴”，仅举几例。

实际上，混沌工程就是在分布式环境中进行受控实验，这样数字工程团队就可以对系统容忍未来不可避免的故障的能力建立信心。

## 它是如何工作的

混沌工程的过程包括在测试或生产环境中通过以受控方式创建破坏性事件(如服务器中断或 API 节流)来给应用程序施加压力。通过观察系统如何响应，可以在这些弱点影响到真正的客户之前做出改进。

实验从最初的范围确定到执行都是精心策划的，它们所提供的见解意义深远。

混沌规划从确定实验的目标部署开始。这个过程需要对应用程序架构和基础设施组件进行全面的审查，以首先定义我们所说的稳态行为。换句话说，在你开始实验之前，你需要了解“正常”是什么样的。

然后，您可以形成一个关于系统在破坏性事件中会如何表现的假设。您需要从您可能会干扰的业务领域中获得支持，并且您需要仔细规划测试的参数，必要时缩小范围。从混沌实验开始是个好主意。您需要在任何给定的系统中多次复制它们，以正确测试其弹性。

## 实验工具

幸运的是，已经有许多不同的工具可以帮助组织实施和管理计划内中断。我们今天所知的混沌工程起源于 2010 年在网飞大学使用工具[混沌猴](https://netflix.github.io/chaosmonkey/)进行的实验，该工具现在仍然存在并被使用。

如今，有更多的混沌产品可用，包括来自微软 Azure 和 AWS 的服务以及 Gremlin、ToxiProxy、Litmus 等等。组织可以选择适合其环境规模的工具，并决定他们希望流程的自动化程度。工具的选择也将取决于实验是否被设计成在基础设施、网络或应用级别测试系统。

## 混沌文化

混沌工程不仅仅是一套工具和规则。它包括采用一种团队相互信任并协作以建立弹性和推进创新的文化。

当谈到思考这种文化转变时，回想一下 DevOps 刚出现的时候可能会有所帮助。当然，人们会说他们在使用 DevOps 工具，但这并不一定意味着他们实际上在实践 DevOps。DevOps 包括打破组织中不同小组之间的孤岛，创造信任的氛围并实现协作——混沌工程文化需要具备的一些相同属性。

## 为什么你需要混沌工程

虽然混沌工程听起来像是一种破坏性或不受控制的练习，但实际上恰恰相反。

混沌实验需要细致的计划，重点是在故障变成停机之前将其根除。混乱测试远非缺乏控制，它是一个紧密协调的过程，组织对从测试发生的速度到测试什么组件的一切都保持着牢固的控制。混沌工程不会制造问题，而是揭示问题。