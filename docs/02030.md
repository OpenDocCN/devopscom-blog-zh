# 大型基础设施监控的挑战

> 原文：<https://devops.com/challenges-of-big-infrastructure-monitoring/>

当今 IT 现实日益增长的复杂性是不争的事实:软件正变得越来越复杂，它所运行的基础设施也是如此。这种复杂性部分来自于向我们管理的基础架构添加一层又一层的内容(从裸机服务器到虚拟机到容器再到基于功能的计算),以及我们采用新技术的速度和淘汰旧技术的速度。

短暂的多代基础设施(通常是并存的)是新的常态。新旧技术交织在一起，虽然新技术可能会闪闪发光，令人兴奋，但随着下一个新事物的出现，它们很快就会变得普通。

这里有一个发人深省的统计数据:2017 年第四季度， [IBM 的大型机业务增长了 32%](https://www-03.ibm.com/press/us/en/pressrelease/53620.wss) 。因此，尽管 IBM 的云、人工智能和安全计划正在兴起，但大型机维持着他们的大部分业务。旧技术依然存在，我们必须找到新的解决方案来弥合新旧技术之间的差距。

当我们谈到大型基础设施时，这些技术的大杂烩以及它们带来的挑战变得更加复杂。

## 什么才算大型基础设施？

出于本次讨论的目的，big infra 是一个已经存在了至少 10 年的组织。这意味着他们已经取得了成功，他们已经发展壮大，他们的基础架构也随之发展壮大，而且正在使用的技术也在不断扩展。

你的组织的确切年龄、规模和收入并不特别重要；重要的是，你有足够的时间来积累资源、人员、实践和技术，以创建我认为的路径组合问题——基本上有足够的遗留基础架构来开始创建问题。

## **大型基础设施的挑战**

大基础设施的挑战源于技术本身和人们使用该技术的方式。随着组织的成长，其团队通常会变得更大、更孤立，部门目标变得不连贯。即使朝着同一个目标努力，不同的部门也有不同的方法来达到这个目标。

现在，将工具和技术添加到组合中:随着时间的推移，团队选择他们喜欢的工具，或者构建他们自己的工具，这在一段时间内工作良好，直到他们不得不与另一个使用不同工具和完全不同的实践集的部门合作。

现在，再加上不同的工作风格、性格类型和公司政策，一切都会很快变得复杂起来。试图跟踪谁在使用什么，他们如何使用它，以及什么在工作(或不工作)并不是一件容易的事情。

例如，一个客户有一个团队在使用 Chef，并且全力以赴，并且试图从其他团队那里获得购买，但是另一个团队是早期的 Docker，手动滚动 Docker 主机，并且不想采用 Chef。然后有一个不同的团队是早期的 Kubernetes，不想使用 Docker，还有一个团队使用 Puppet。一旦他们不得不彼此合作，事情就会破裂——总有一方会胜出。您几乎必须维护一个逻辑图，说明什么团队使用什么工具，作为准备与这些业务部门开会的前奏。不仅应用程序的部署方式不一致，这些不同技术的监控方式也不一致。

例如，过去，网飞[表示](https://medium.com/netflix-techblog/lessons-from-building-observability-tools-at-netflix-7cfafed6ab17)监控占其基础设施成本的 30%,最近提到他们计划在 2019 年在基础设施上投资 19 亿美元。想想所涉及的规模和复杂性，他们正在为支持大约 1.25 亿用户的系统存储和分析日志、行为和指标。

## **连接大基础架构中的不同数据**

那么，如何将分散在不同工具和系统中的所有数据简化并连接起来呢？

一个解决方案是数据湖，它是一个集中的存储库，允许您将数据集中到一个地方，因此您可以对基础架构有一个整体的了解。事实上，大基础架构最终会产生多个彼此孤立的数据湖。

您还可能遇到方桩/圆孔的情况——一种格式的数据需要转换成另一种格式才能进入数据湖。

这就是监控工具变得必不可少的地方。寻找一种旨在收集不同数据类型的数据并将其转换为任意数量的格式的监控工具，以便您可以建立一个自动化的工作流，从传统系统(例如大型机)以及容器等现代基础架构中获取数据。

这个想法的一个例子是 Sensu，以及我们对 Nagios 插件规范和[Prometheus exporter metrics](https://blog.sensu.io/the-sensu-prometheus-collector-972c441d45e)(以及许多其他度量格式)的[支持。通过使用支持各种指标格式的监控工具，公司可以将他们已经在使用的服务检查以及来自云计算基础架构的数据插入到他们的监控设置中，并获得关于他们系统的有价值的信息。](https://blog.sensu.io/the-story-of-nagios-plugin-support-in-sensu)

Grafana 这样的可视化工具是锦上添花。使用 Grafana，您可以将数据连接到任何存储位置(例如，Graphite、InfluxDB、Prometheus 等)。)，将数据可视化并显示在可共享的图表和仪表板上。使用监控工具作为 Grafana 的数据源意味着公司可以显示监控事件和库存——甚至可以在同一个 Grafana 仪表板上混合这些数据和不同的数据源。将整体监控解决方案与 Grafana 的可视化功能相结合，可以提供您所需的基础架构的数据驱动视图，即使它仍然是多代、多孤岛、多数据湖、2，000 种不同格式类型的 big infra 的混合。

— [Sean Porter](https://devops.com/author/sean-porter/)