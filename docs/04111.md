# 习惯生物、雪花和综合税

> 原文：<https://devops.com/creatures-of-habit-snowflakes-and-integration-tax/>

***微软的多诺万·布朗在与 Redgate Software 的马特·希尔伯特的对话中，讨论了数据库开发人员面临的最大挑战*** 

当 DevOps 在 2009 年 Flickr 开创性的“[10 deployments per day](https://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr)”Velocity 演示中首次被提及时，它被一些人认为是奇怪的，与企业文化格格不入。这是公认的做事方式的对立面，是对已建立和已证实的流程的威胁——这是彻头彻尾的危险。

时代变了。像优步、Airbnb、Spotify 和 GitHub 这样的独角兽离不开它。微软欣然接受并积极推广它。它已经成为在技术市场中获得竞争优势的关键，这个市场的发展速度和变化速度比以往任何时候都要快。

但是数据库呢？为什么版本控制、持续集成和自动化部署等实践被引入到应用程序开发中，但在数据库中却被束之高阁？例如，2017 年"[数据库开发运维状况调查](https://www.red-gate.com/solutions/database-devops/report)"发现，39%的应用程序实现了持续集成，但数据库的持续集成比例降至 20%。这是怎么回事？

为了寻找一些答案，我们采访了微软首席 DevOps 经理兼 DevOps 倡导者多诺万·布朗。也被称为黑衫男子，他的非官方口号是#RubDevOpsOnIt。他住在德文普斯。事实上，你不能阻止他谈论它，热衷于它的优点。

他将 DevOps 描述为“人员、流程和产品的结合体，能够为我们的最终用户持续提供价值。”多诺万认为，这三者中最重要的是人。相反，这也是最难解决的问题。

### “人是习惯的动物。”

“如果你已经用同样的方式做了 30 年，”他说，“你为什么还要修正它？我们都抵制改变，即使改变是为了更好，而 DevOps 需要很多改变。”

其中很大一部分需要来自等式的运营端，因为尽管包括版本控制和持续集成在内的过程已经成为开发人员的第二天性，但运营团队传统上并不每天都这样做。事实上，老年退休金计划经常被视为变革的反对者。

然而，多诺万确实举起手来，认为自己对分裂负有部分责任。“从历史上看，”他说，“他们不得不成为看门人，因为像我这样的开发人员 20 年前在生产服务器上肆虐，用管理凭证在那里运行。在我看来，他们的工作从来不是为我们部署软件。他们的工作是保护和管理基础设施，确保它尽可能高效地运行。不过，那段历史会一直伴随着我们，因为从开发者的手指到用户的手中有太多的法规和繁文缛节。”

他认为 DevOps 是解决问题的方法。“我希望 DevOps 将帮助我们迫使他们做的事情自动化，这从来不是他们的工作，并重建开发人员和运营人员之间的信任。我们真的需要帮助运营人员认识到，我们不是要取代他们，而是要让他们有能力让我们不断创造价值。”

然而，这并不取决于运营团队本身。c 级管理人员也扮演着重要的角色，因为他们通常喜欢传统的软件开发方法，目标和长期战略阻碍了开发工作。

多诺万说:“我注意到，在许多努力采用 DevOps 的公司中，他们没有得到管理层的支持。”“你有这种自上而下的瀑布心态，仍然想要 GANT 图表和里程碑，以及根本不符合敏捷思维的东西。我在组织中最成功地实施了 DevOps，其中 C 级主管得到了它。当你的基层团队明白这一点，但其他人都不明白时，他们通常会被传统扼杀。”

该数据库与 Donovan 将人员、流程和产品整合在一起的目标是分不开的。在加入微软之前，他是一名流程顾问和 Scrum 大师，帮助许多公司将 DevOps 引入他们的开发实践。他确保数据库是其中的一部分。

当时，就像现在一样，包含数据库是一项挑战，但 Donovan 利用现有技术解决了这个问题，使客户能够像对待 DevOps 解决方案中的所有其他元素一样对待数据库。

然而，他承认这是一项艰苦的工作。“由于存在失败的风险，这实际上是管道中最难自动化的部分，”他说。“您可以轻松回滚前端；您不能对您的数据库做同样的事情，因为在部署期间发生的任何事务都有可能丢失。因此，这是开发运维管道中至关重要、不可或缺的一部分，我向任何声称正在进行开发运维的公司提出挑战，这些公司只是在前端进行开发运维，但他们的后端仍然是手动完成的。对我来说，他们是装的。”

### 作为代码的基础设施不应该是特殊的雪花。这只是你解决方案的一部分。

关键是要记住，为更改数据库而编写的代码仅仅是代码。传统上，它是在应用程序代码之外独立管理的，数据库更改通常是在最后一分钟即时管理的。因此，部署已经变得令人担忧，团队已经准备好应对预期的停机时间。

但是，将它包括在版本控制中—以及持续集成和自动化部署中—并且数据库可以与应用程序并行开发。这样就可以更早地发现问题，部署变得可预测和可靠，停机和回滚成为过去。

更吸引人的是现在可用的工具——在多诺万做顾问的时候才刚刚出现的软件。正如他所承认的:“工具必须成熟，以允许我们克服许多数据库部署特有的障碍，以便我们可以将每个人都纳入 DevOps 管道，而不仅仅是独角兽。每个人都应该有权使用他们的数据库，并将它们作为 DevOps 管道的一部分。在此之前，这仍然是一个瓶颈。”

然而，如果通过引入工具将 DevOps 引入数据库，公司会陷入 Donovan 所说的“供应商爆炸”的泥潭，这是要付出代价的

### '你添加到你的渠道中的每一个供应商都会增加集成税。'

集成税是公司在培训和引入不熟悉的工作方式方面，使用一个解决 DevOps 难题的新软件的成本。如果成本太高，例如，将人们移出他们熟悉的开发环境，这就违背了 DevOps 的理想。一种繁重的工作方式被另一种取代了。

Donovan 热衷于通过鼓励公司与尽可能少的供应商合作来消除这种税，最好是那些已经预先支付了集成税的供应商。例如，引入在现有软件内部或与现有软件并行工作的工具，从而减少熟悉这些工具所需的时间，充分利用现有基础设施而不是增加基础设施。

否则，多诺万总结道，“你是在为这种整合纳税。当我们微软的合作伙伴为我们的产品创建扩展时，是供应商和微软预先支付税款。”

最后，我问 Donovan，对于采用 DevOps 作为数据库的公司来说，最大的挑战是什么。他的回答最能说明问题。

“如果您对您的数据库和系统的其余部分采用不同的开发运维方式，我认为这是有问题的。当我想到 DevOps 时，数据库是其中的一部分。我不需要单独谈论这件事。”

## **关于作者/马特·希尔伯特**

Matt Hilbert 是 T2 red gate 软件公司的科技作家，拥有 20 年的工作经验，为许多世界上最大的科技公司工作，也为许多最小的公司工作。他对新兴技术有着特殊的魅力，并一直致力于向更广泛的受众反编译、解开和解释 techspeak，并激发人们对技术提供的无限可能性的兴趣。