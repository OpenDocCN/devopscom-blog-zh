# 面向开发运维的自动化多平台部署

> 原文:[https://devo PS . com/automated-multi platform-deployment-for-devo PS/](https://devops.com/automated-multiplatform-deployment-for-devops/)

在更简单的情况下，每个 CI/CD 管道只需要支持一个部署平台。

在现实世界中，多平台部署(这意味着部署一个应用程序在多个操作系统平台上运行)是许多组织的必备条件。我们生活在一个操作系统多样化的时代，只为一个平台部署通常不是一个选择。

考虑到这一挑战，让我们看看在 DevOps 中实现多平台部署的最佳实践。

## 处理多平台

也许你正在从头开始设计一个基于容器的多平台应用程序。也许您正在考虑将传统的、单一的客户端-服务器应用程序转换为持续交付的微服务。或者，可能是时候扩展您现有的 DevOps 交付渠道以包括多个平台了。事实是，大多数 DevOps 团队迟早需要理解和处理多平台部署，以及它如何影响持续交付和持续集成。

DevOps 团队在为多个平台编排自动化部署时面临哪些基本问题？让我们看看多平台部署中涉及的关键问题，以及在自动化 DevOps 连续交付链的上下文中处理这些问题的最有效方法。

但是首先，我们将考虑多平台架构中最基本的区别之一。

## 多平台，单层

在单层模型中，相同的独立应用程序被部署到多个平台。当然，这是发布传统桌面应用程序的标准模型。然而，许多应用程序的更新过程已经转向频繁的自动推送更新，现在已经成为一种持续交付的形式。对于 web 浏览器、桌面办公套件和更专业的应用程序来说，这是典型的情况。这也是独立移动应用的规则。

## 多平台、多层

在多层和多平台部署中，不同的平台有不同的角色，部署到平台的程序元素取决于其角色。通常，这涉及某种客户端-服务器架构，应用程序的客户端部分安装在移动和/或桌面设备上，服务器功能部署在云或混合云环境或本地服务器上。在企业级，本地硬件可能由一台或多台大型机组成。

我们将主要关注多层应用程序；然而，这里涵盖的大部分内容也应该与单层多平台部署相关。

## 多平台部署设计:整体架构

关于应用程序架构的基本决策将不可避免地对您的部署策略产生重大影响。理想情况下，您的 DevOps 团队的关键成员应该是关于整体架构决策的积极参与者；至少，你的团队需要了解最新的设计流程。

当应用程序具有混合后端时尤其如此，关键任务在云服务和本地硬件之间拆分，因为随着设计团队对这些任务所需的资源和每个平台的负载处理能力有了更好的了解，任务的分配可能会发生变化。

## 示例:云事务、大型机数据库

例如，假设您有一个非常大而复杂的数据库，其中包含客户和交易记录。它必须在大型机上维护，因为它包含遗留元素，或者出于安全原因，出于公司政策，或者(通常情况下)出于这三种原因。您的应用程序可能涉及大量的事务和其他客户流量，其中大部分将存储在数据库中。为了将流量从大型机转移出去，客户交互将在云中处理，交易数据最初存储在云数据库中，然后转移到大型机数据库。

*   云数据库会代表大型机数据库的一个实际的字段到字段的子集吗，或者数据在传输到大型机之前需要被清理和解析吗？
*   您会将数据库代码从大型机移植到云中，还是创建一个云原生数据库(例如，COBOL vs. SQL)？
*   所有的用户访问是通过云接口，还是应用程序根据负载在云和直接访问大型机之间切换？

诸如此类的问题可能会产生重大影响，不仅仅是对微服务和代码级设计，还会对部署策略产生重大影响，因为它们将决定数据库微服务在两个平台上的耦合程度。

## 多平台部署设计:特定于平台的问题

为了在最终用户和后端微服务级别设计多平台应用程序，并使用自动化工具进行部署，对每个平台上可用的资源及其所需的依赖关系有一个清晰而详细的了解是至关重要的。

对于前端，这可能意味着为 Android、iOS、Windows、OSX 和 Linux 维护不同版本的应用程序。对于后端基于云的部分，您可以在相对标准化的容器环境中工作。然而，即使在这里，您也需要熟悉特定云提供商的资源和要求。

在大型机方面，您需要对大型机环境有很好的了解，包括操作系统和可用的资源。这对于本机大型机操作系统(如 z/OS)来说是必要的，如果您打算在 Z 上使用虚拟化操作系统(如 Linux ),这种情况在很大程度上仍然存在，因为它可能会与底层系统资源进行大量的交互。

## 设计多平台部署:自动化管道

跟踪与平台相关的问题并管理它们对您的持续交付管道的影响可能看起来是一项艰巨的任务，但它不必那么困难。

关键是充分理解所涉及的平台，将这种理解整合到您的自动化工具中，并将所有的目标平台整合到您的自动化交付链中。这意味着(例如)跨平台的自动化测试、每个平台的依赖性检查、协调部署和集成监控。

各种各样的工具，包括开源的和私有的，都可以用于所有这些目的，它们通常可以集成到一个自动化的连续交付系统中。

## 用于多平台部署的集成工具

然而，使用高度集成的套件进行完全协调的部署有相当大的优势。例如，如果您正在与 IBM Z 合作， [UrbanCode](https://developer.ibm.com/urbancode/products/urbancode-deploy/features/urbancode-deploy-system-z/) 为您提供了一套完整的 DevOps 工具，它完全集成到了 z/OS 生态系统中。它是一个基于代理的系统，包括用于设计自动化流程、多平台部署、依赖性检查、库存和集成监控的工具；它是专门为管理多层部署而设计的。

使用高度集成的部署套件(如 UrbanCode)的优势在于，您不需要花费时间来学习自动化什么、如何自动化或组装基本的自动化基础架构。您可以专注于管理连续交付系统所需的特定自动化组件和设置。当您处理大型、复杂且业务关键的平台(如大型机)时，与该平台高度集成的自动化部署套件可能是非常有价值(且节省时间)的资源。

DevOps 的自动化多平台部署可能具有挑战性，但这是完全可能的。工具就在那里，你可以让它发挥作用。

迈克尔·丘奇曼