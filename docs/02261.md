# 从 Salesforce 中断中吸取的教训

> 原文：<https://devops.com/lessons-learned-from-the-salesforce-outage/>

每个人都有糟糕的日子。每个公司都经历过由于数据库部署错误而导致的某种中断。即使是精英中的精英，拥有训练有素的员工、世界一流的最佳实践和深思熟虑的流程，也会犯错误。5 月 17 日，[sales force](https://salesforce.com/)T2。com 过了糟糕的一天。

## 发生了什么事？

该公司部署了一个有缺陷的数据库更改脚本，该脚本破坏了生产中的权限设置，并授予用户对受限数据的读写权限。这为未经授权的员工窃取或篡改公司数据打开了方便之门。因此，Salesforce 需要关闭其大部分基础架构才能找到并正确解决问题。停电持续了 15 小时 8 分钟。根据 [Gartner 的停机成本公式](https://blogs.gartner.com/andrew-lerner/2014/07/16/the-cost-of-downtime/)(5600 美元/分钟)，这次停机的成本约为 500 万美元。此外，由于如此多的公司依赖 Salesforce，这是一个非常明显和令人尴尬的中断。(看看社交媒体上的#SalesforceDown 和#permissiongeddon 就知道了。)

由于数据库的工作方式，Salesforce 不得不关闭一切。不像拉单个应用那么简单。谁知道有多少 Salesforce 员工疯狂地工作以关闭整个数据库，找到有问题的数据库脚本，并恢复一切—所有这一切都是因为一个更改脚本。这样过周末可不好玩。

## 这告诉我们什么？

从历史上看，Salesforce 客户很少经历过服务中断。在服务中断的那天，许多忠诚的顾客在推特上谈论服务有多可靠，这令人印象深刻。

也就是说，这次中断应该是一个警钟，让用户意识到他们对平台的依赖，这已经成为我们开展业务的一个更重要的组成部分。我听说过整个办公室在那个星期五无法完成工作的轶事。

客户的反应表明，他们显然在 Salesforce 有自己的东西。这次停电显示的不是这家公司的任何具体缺点；而是每个人都有盲点，不管测试过程有多强大。

**给 IT 专业人士的教训:**

*   不要忘记数据库。不幸的是，这个问题太普遍了。在生产中执行数据库更改脚本并导致意外问题的例子数不胜数。这表明数据库经常是软件测试和发布周期中被遗忘的部分。除非公司在变更管理时开始认真考虑数据库，否则这样的事情还会继续发生。

*   自动化一切。人工努力失败。人类会犯错。Salesforce 等处理敏感客户数据的公司不应将其放在互联网上，除非他们已经将系统的每个方面(包括数据库)自动化。公司需要一个强大的数据操作流程，其中包括类似生产的数据，并自动执行验证数据库更改。

**面向最终用户的课程:**

*   建立连续性计划。依赖 Salesforce 等系统的组织需要有一个业务连续性计划，以便在系统崩溃时继续运营。这包括将 Salesforce 任务和日历与 Office365、Exchange 或 Google Apps 同步。然而，由于 Salesforce 已经成为大多数使用该技术的公司的记录系统，备份数据将非常困难——毕竟，公司使用该平台的初衷是避免托管自己的数据。

*   要求问责。此外，用户可以也应该要求软件供应商承担更多责任。这可以采取要求退款的形式，但客户也需要与他们的客户经理交谈，以了解 Salesforce 正在采取哪些措施来确保这种情况不会在未来发生。现在是 2019 年，公司一直在更新软件，而不会在季度末停止生产系统。此外，除了必要的安全问题，公司还可以要求公司在营业时间内不要改变生产系统。

底线是，虽然导致 Salesforce 停机的错误代价非常高，并且对客户来说非常明显，但它们也是完全可以预防的。

罗伯特·里维斯