# 避免云成本事件的四个步骤

> 原文:[https://devo PS . com/避免云成本事件的四个步骤/](https://devops.com/four-steps-to-avoiding-a-cloud-cost-incident/)

最近的 [Flexera 2022 年云状态报告](http://Flexera 2022 State of the Cloud Report)发现，组织浪费了 32%的云支出，高于去年的 30%。这可能是由于未使用的资源、恶意活动或过于雄心勃勃的项目引发的云成本事件，如果不及时发现和纠正，会产生巨大的财务影响。

随着组织的[云基础设施](https://devops.com/reducing-cloud-infrastructure-complexity/)走向成熟，将云资源使用和成本准确映射到产品线、团队和业务部门变得越来越复杂和困难。然而，准确的云成本归属对于了解团队资源使用情况和确定准确的销货成本(COGS)利润至关重要，对于预算和预测也是必不可少的。组织需要可靠、精细的云环境视图，以便将成本归属于各个部门，并优化有意义的预算。

云成本飙升可能会很快耗尽组织的预算，并且很难追踪，但企业只需采取几个简单的步骤，就可以帮助保护自己免受云成本事件的影响。

### 有一个强有力的标记策略，可以精确地确定成本

云运营团队需要确定什么对业务报告是重要的，这将有助于定义和创建标记策略。例如，当一个组织有两个管理特定服务的团队时，这两个团队应该保护带有团队标识符的服务。此外，团队应该为他们运行的环境添加另一个标签，以便他们可以在团队和环境之间分配云成本。

当应用程序使用大量资源时，如数据库和存储，团队应该考虑添加一个特定的应用程序标记，并按每个应用程序分解成本。应该注意的是，没有一个放之四海而皆准的标签解决方案，因此企业需要确定什么有效，并在以后通过添加和删除标签来尝试不同的策略。

### 了解云成本所有权以避免混乱

问问你自己，你的组织在多大程度上将云成本归因于团队、应用或 COGS。如果答案是“不太好”，那么你就错过了关于你的云成本如何与你的业务相关的重要信息。

缺乏这种背景或对资源分配的可见性使得云运营所有者和高级领导难以管理并且不可能就谁负责各种费用和资源达成一致。手动成本分配无法准确扩展，也无法考虑跨团队和应用程序的共享集群资源使用。这造成了混乱，当用户在没有责任或清晰可见性的情况下任意分割数据并声称所有权时，这种混乱可能会升级。

发生的情况是，在有两个所有者的情况下，成本有时会被重复计算——或者在没有所有者的情况下，成本甚至会被完全忽略。由此产生的数据质量低劣，不可信且不可操作。无法可视化环境中的资源使用会冲淡、阻碍甚至挫败成本改进计划和优化。

云成本应该有一个负责人，他可以确保云支出与业务价值挂钩。了解谁拥有哪些作品将有助于查明原因。

### 建立和监控云预算

关于云支出的历史数据是金，它可以帮助预测和预算云的成本足迹。如果这种情况没有发生，那么它应该被标记和调查。

一旦您控制了成本数据，组织就可以准确了解云支出的情况。然而，这与支出的预期相符吗？通过在项目的每个阶段建立和监控预算，组织可以控制云支出，并防止工程师过度分配性能时成本失控一旦预算到位，组织就可以监控支出并调整资源规模，以平衡实际使用情况，而不是在执行开始时的估计使用情况。

随着时间的推移，适当调整资源规模将有助于实现最佳支出，并确定可以关闭的未使用资源。组织应该识别出不再需要时仍在运行的开发和测试实例，并关闭它们。

### 实施成本异常检测

组织可以通过持续监控和优化云成本来保护自己免受成本异常的影响。成本异常检测有助于在问题出现之前及早发现。当资源所有者的预测超出设定的预算时，可以通过 Slack 或电子邮件直接向他们发送及时、可操作的警报，这一点尤其有效。最佳选择是采用云成本监控和优化(CCMO)工具，当成本异常发生时，该工具会实时发出警报。这些工具必须能够检测异常并分析其根本原因，同时还允许了解哪里出了问题，以避免将来出现类似的错误。

为动态云环境执行持续成本监控和异常检测工具对于识别任何与预期支出不一致或偏离既定模式的活动至关重要。通过适当的监控，组织可以在事件发生之前采取纠正措施。

不必要和意外的成本事件会迅速耗尽企业的预算，尤其是在其云基础架构增长时。组织需要实践这些步骤，以全面了解其云环境。