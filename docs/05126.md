# DevOps 聊天:针对时序数据的 InfluxDB 云 2.0 托管服务

> 原文：<https://devops.com/devops-chats-influxdb-cloud-2-0-managed-service-for-time-series-data/>

我们似乎无法生成足够的数据。就像他们说的，你还什么都没看到呢！基于云的托管服务是从私有和云位置的各种来源获取、存储和访问大量数据的自然解决方案。托管在云中的企业解决方案是好的，但是开发人员友好的、基于 API 的、非基于企业使用定价的解决方案会获得更广泛的受众。

进入 InfluxDB 云 2.0。这个名字已经说明了一切。InfluxData 产品副总裁 Tim Hall 加入 DevOps 聊天，讨论该公司新的基于云的时序数据库产品。

InfluxDB Cloud 2.0 代表了向基于云的、开发人员友好的产品的转变，具有更好的可访问性。我们讨论用例；免费和基于使用的定价；用于查询、分析和数据处理的新 FLUX 语言；常用 APIs 和滚动条堆栈。TICK 代表 Telegraf、InfluxDB、Choronograf 和 Kapacitor。这是一次功能丰富的对话，请加入我们。

此外，请查看 influx data 10 月 16 日的网络研讨会；[优化现实世界中的时序性能](https://webinars.devops.com/optimizing-time-series-performance-in-the-real-world)。

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/696387763&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/696387763&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

## 副本

米奇·阿什利:大家好。我是 DevOps.com 的米奇·阿什利，您正在收听的是另一个 DevOps 聊天播客。今天，我邀请到了 InfluxData 产品副总裁 Tim Hall，我们的主题是他们的新产品 InfluxDB Cloud 2.0。蒂姆，欢迎来到 DevOps 聊天。

蒂姆·霍尔:嘿，米奇。谢谢你邀请我。

阿什利:优秀。很高兴你能上播客。你能不能先介绍一下你自己，你在 InfluxData 做什么，也许对于不知道 InfluxData 的人来说，给我们介绍一下 Influx。

**大厅:**当然可以。所以，我是潮人的产品主管。我差不多三年前加入的。我有大数据开源技术的背景。我在 Hortonworks 工作过一段时间，负责那里的产品管理团队。他们专注于 Hadoop 领域。在此之前，我在 Oracle addition HP 的产品管理部门工作过，主要是在监控和数据集成领域。

所以，潮人在当时是加入小公司的绝佳机会。在过去的 3 年里，我们已经发展到将近 160 人，这是我职业生涯中所做的所有事情的汇聚点，从监控技术到集成再到大数据。因此，我们的首席执行官埃文·卡普兰(Evan Kaplan)和创始人保罗·迪克斯(Paul Dix)邀请我们加入这个团队，看看我能做些什么来帮助打造一个伟大的产品，这真是太棒了。

阿什利:太棒了。简单地告诉我们——influx data，你是做什么的？

**Hall:** 因此，InfluxData 专注于为时间序列数据提供一个平台，时间序列数据是关于任何带有时间戳的东西。时间序列可以分为两类——常规序列，即您采样的事物。想象一下，把一个咖啡杯放在河里，然后倒进一个桶里，我们就是桶，你经常这样做——每 30 秒，每分钟，每 5 分钟，但这是有规律的。是有规律的时间间隔。不规则系列也受到流入量的支持，流入量是指事件或日志，任何时间点发生的事情，可能是有人使用钥匙卡进入大楼，将他们的 ATM 卡放入 ATM 机，诸如此类的事情。这些都是事件。

因此，我们处理这两件事，我们有很多人在使用我们，无论是在开源社区，在本地，还是在他们决定使用软件的任何地方，现在我们的云产品也在广泛的使用案例中使用，从 DevOps 监控使用案例和构建和组装可观察性平台到物联网使用案例，包括消费产品和工业产品。

阿什利:嗯，在一个我们似乎无法产生足够数据的世界里，听起来你们在市场上都处于有利地位。*【笑声】*

霍尔:每天都有更多的人来，对吗？所以—

阿什莉:是啊，不会变少的。

霍尔:是的，你用它做什么真的是个问题。我认为，再一次，我们专注于为开发者提供一个平台。我们的目标是让开发者开心。我们的动机是试图让开发人员从安装到解决问题的过程中快速解决问题。我们称之为给力的时候。我们希望这个过程尽可能的短，但是很多技术并不总是这样。你在摆弄依赖项和其他东西，而 Influx 是从没有依赖项的盒子里出来的，安装它，让它非常非常快地运行，然后开始工作，解决你的问题。

Ashley: 我非常感谢你对开发者社区的关注。事实上，我们——几周前我刚刚和你们的社区经理 Tom Crow 一起做了一个网络研讨会，顺便说一下，他做得非常好，他谈到了他如何与开发人员社区合作。

所以，让我们跳到 InfluxDB Cloud 2.0。这是你的第一个 SaaS 在线产品，对吗？

霍尔:实际上不是，米奇，但我很高兴你问了。因此，以前，我们有 InfluxDB Cloud 1.0，它实际上是在我们的企业版基础上提供托管服务。

我们面临的挑战是，我们已经看到了良好的采用和良好的牵引力。我们有大量的客户购买它，但挑战是它有点贵，而且它是我们为他们运行和管理的企业软件的专用实例，但它受到特定资源的限制。因此，你会购买一个计划，支付费用，然后如果你继续发展和使用它，那么你就必须升级，通常是通过联系支持，我们可以在几秒钟内完成，但它确实需要比你可能从你能想到的绝大多数云服务中获得的更高水平的交互性，更像一个实用程序。

因此，我们对 InfluxDB Cloud 2.0 的关注点是提供第一个完全无服务器的时间序列平台，为我们的客户提供这种灵活性，让他们只需采用即可。

Ashley: 所以，这是真正的云服务，而不仅仅是云中的应用程序。

**大厅:**没错，没错。我们以多租户的方式公开所有功能，这意味着我们显然同时在一大群人之间进行测试和验证，保持该平台正常运行并可供每个人使用是我们的目标。

Ashley: 我知道你们不仅仅是在云中存储。你有可视化，用户界面-其他功能？你想谈谈这个吗？

**霍尔:**对，没错。所以，你知道，这个故事有三个部分，对吗？第一部分是，您需要能够输入数据，并且您需要能够使用 velocity 来做到这一点，我们需要存储和放置这些数据，我们需要快速完成这一工作，并使其可供查询和访问，以及一直到可视化。

所以，我们把故事的所有这些部分结合在一起。最近增加的功能还包括创建监控检查的能力，允许您对已存储的数据创建查询，并确定它们是否超过了某个阈值或以某种方式、形状或形式创建了状态变化。然后，您可以从那里创建一个通知，该通知可以通过各种渠道发送给您，包括 HTTP POST、Slack(在我们的免费层中提供),当然，还有 PagerDuty，这是一个非常受欢迎的机制，用于提醒您的 DevOps 团队。

阿什利:嗯。我认为，除了某种集成级别类型的功能之外，您还将 API 更新为云中的 InfluxDB，对吗？

**大厅:**没错。实际上，其中一个目标是，你知道，通过 TICK stack 的 1.0 行，T、I、C 和 K，这是许多 DevOps 人可能熟悉的，有四个部分—Telegraf、InfluxData(数据库本身)、Chronograf(这是我们的可视化工具)和 Kapacitor(这是我们的异常检测)。

我们已经真正将该堆栈的 I、C 和 K 部分集成到我们的 InfluxDB 2.0 产品中。这既是开源也是云。我们想做的是，首先，从查询和任务的角度，将你用来与数据交互的语言结合起来，我们已经通过你引入的一种新语言 Flux 做到了这一点，这并不奇怪，这家公司的名字是 Influx。所以，Flux 是我们引入的新语言。显然，我们保留了 Telegraf，这是我们的数据收集代理，可以分发并用于发送数据。

现在，关于 T，I，C 和 K 的另一件事是，这些元素中的每一个都有自己的 API。所以，如果你和其中一个合作，它不一定会转化为另一个。因此，我们已经统一并创建了一个通用 API 作为 InfluxDB 2.0 的一部分，它允许您做任何事情，从驱动仪表板销售和仪表板本身的创建，一直到提交查询、检查、通知规则等，所有这些都在一个通用 API 的背后。

而且 API 在开源和云版本中是一致的。这使得*【Cross talk】*—是的，对不起，这使得开发者可以编写一个应用程序，无论是针对云还是针对开源。如果他们出于任何原因需要交换它，例如，如果您的旅程从开源开始，并且您想，“好吧，现在我需要 InfluxDB Cloud 2.0 提供的规模和弹性”，他们不必对他们的应用程序代码进行任何更改。他们可以更改端点，指出我们的云。

阿什利:非常有趣。你知道，我们现在构建的应用程序更多的是以 API 为中心，而不是通过 API 来公开应用程序。这是否改变了您重新设计 API 的方式，即您集成所有这些组件的方式，以及云中的 InfluxDB 或多或少使用自己的 API，因为它可以跨这些功能协同工作？

**霍尔:**确实如此。我们实际上是自己 API 的消费者。坦白地说，这是我们的哲学。以前的挑战是，它分散在 TICK 堆栈的四个组件中，我们真的试图统一这一点，并再次考虑让开发人员满意，并在他们之间提供一致的 API 体验。

Ashley: 这也是你提到的一件事，谢谢你提供的关于 TICK stack 的信息。过一会儿我还有另一个问题。但是回到你的 1.0 版本和 2.0 版本——你有没有改变一些定价模式，做些什么让开发者或者企业更容易接受

**霍尔:**是啊，完全。在 InfluxDB Cloud 2.0 中，它是一个完全基于使用的定价模型。我们还为开发人员提供了一个免费层，因此免费层是有费率限制的，但您可以访问大多数特性和功能。显然，我们已经在付费墙后面推迟了一些事情，但一般来说，现在都是按需付费，我们已经在网站上以及文档中公布了这种定价模式，它准确描述了您为阅读、权利、存储等支付的费用，您只需为您使用的内容付费。

这才是提供无服务器产品的真正目标。人们希望将它作为一种实用工具，你知道，与我们在 1.0 系列中的托管服务进行比较和对比，你知道，他们为他们不使用的东西付费，对吗？这是一个固定的价格，所以，你知道，这就是为什么它看起来有点贵。所以，我想现在，我认为，我们的价格对开发商来说是优化的，随着他们的成功而增长。

Ashley: 听这个播客的开发者可能会想到的一件事是，开发者肯定不喜欢残废软件。所以，您关注的是数据保留限制、速率之类的东西。我相信您已经从您的开发人员社区那里听说了如何正确构建对他们仍然非常有用的免费层产品。

霍尔:对，对。我认为我们已经有了一个很好的心态。在数据保留方面，我们目前允许 72 小时存储数据至少 3 天。在时间序列的世界里，这可能是很多数据。我认为摄入率也是相当合理的。只是让你了解一下，我自己实际上也在使用免费层。我还没有和产品经理掰手腕，让我使用所有的特性和功能，虽然我认为这是可能的，但我想看看我能做些什么。

阿什利:嗯。

**Hall:** 所以，我最近和我儿子一起做的一件事就是，我们为他制作了一台游戏电脑。你知道，最昂贵的组件之一，机器中最昂贵的两个组件是显卡和 CPU。

阿什利:嗯，是的。我也会说同样的话。*【笑声】*和我的儿子们做同样的项目，但是是的。

**大厅:**没错。因此，挑战之一，当然，是我想确保我们正确安装了 CPU，我担心它过热。所以，我们有一个很好的，很大的，你知道的，散热器。但我启用了 Telegraf 中的传感器插件，基本上可以让我访问 CPU 温度数据。我要把它发送到流入云。然后我要做的是，我已经创建了一个检查来检查温度，我已经创建了警告和临界阈值级别，然后我将通知发送给我自己。

所以，总的来说，它工作得很好，Mitch，但是我发现了一个有趣的副作用和好处，那就是，我的儿子回家后决定不做作业。

阿什利: *【笑声】*是的。我只是好奇。

**霍尔:** *【笑声】*所以，现在我有了一个非常独特的儿童监控服务，让我可以识别他什么时候应该做作业，什么时候应该玩游戏。而且他还没弄明白我是怎么做到的，所以我肯定不会给他发这个播客。

阿什莉:你太狡猾了，爸爸。家长控制，他甚至不知道。*【笑声】*太搞笑了。

嗯，我想回到 TICK stack，因为我知道你们一直非常积极地通过 Telegraf 和 InfluxDB、Chronograf、Kapacitor 提供开源软件。那有什么计划？你说你在开源或代码方面做了很多，并将其构建到云产品中。开源的未来计划是什么？

霍尔:是的，谢谢你的关心。我的意思是，我们公司的核心价值观之一是我们是开源的坚定信仰者。作为其中的一部分，我们已经在 2.0 产品上工作了一年多，它已经经历了一系列的 alpha 版本，我认为我们目前达到了 alpha 18，它与我们作为 InfluxDB Cloud 2.0 的 GA 实例提供的特性和功能相匹配。我们可能会有一些社区成员在那里挠头，说，“嗯，那么，怎么回事？这怎么还没正式上市？”

我想说得非常非常清楚，因为我们有这么大的社区，我们重视他们的反馈，但我也重视不给他们一些坏的东西和还没有准备好的东西。因此，我们非常小心地将 GitHub 存储库中的 2.0 代码行标记为 alpha 代码，因为我们正在努力完成我们希望在 2.0 行中拥有的特性和功能。

因此，接下来我们面临的关键问题有三个。第一，我们正在向 Flux，我们的新语言，的特性完整性迈进。我们正在学习很多关于在云环境中运行 Flux 的事情，并从社区成员那里获得反馈，在我们将这种版本称为 Flux 之前，我们可能希望完成一些事情。

其次，我们确实需要创建迁移工具，在这方面我们正在做两件事。显然，希望长期存放和存储数据的人会希望将数据从 InfluxDB 1 转移到 InfluxDB 2。我们在 InfluxDB 2 中创建了一种新的模型，其中包括一个存储桶的概念，这是您放置数据的位置，以及如何保护该存储桶。因此，需要使用一些迁移工具来大批量迁移数据。

最后，我提到过，我们引入了一种新的主要语言，用于在 InfluxDB 2 中处理数据，它统一了查询数据以创建仪表板和生成报告的能力，以及人们可能在其上构建的其他用例，但它也是用于任务和创建批处理操作的同一种语言。

比方说，InfluxDB 和 Kapacitor 之间肯定不是这种情况。Kapacitor 用了一个叫 TICK Script 的东西，InfluxQL 是 InfluxQL。InfluxQL 是一种类似 SQL 的语言，访问 InfluxDB 中的数据很容易。我们当然不会放弃这一点，但我们正在做的是，我们将为您创建使用 InfluxQL 的能力，但在幕后和运行中，我们会将其转换为 Flux 引擎可执行的内容，然后将结果返回给客户。这应该允许现有的仪表板和查询与 InfluxDB 2.0 和显然的 InfluxDB Cloud 2.0(当我们在那里提供它时)无缝地本机工作。当我们达到这一点时，我们将宣布测试版，这意味着我们将拥有包括那些迁移工具在内的功能完整性，然后是社区真正开始投入并尝试它的时候，然后我们将更加关注测试版声明和我们宣布 2.0 GA 之间的性能和用户体验变化。

但与此同时，我们将继续向云版本添加功能，它们将通过我们的 alpha cadence 出现在开源中。但我要说的是，这三件大事，你知道，迁移工具，InfluxQL 支持，以及在第一版中作为一种普遍可用的语言完成 Flux 是我们关注的地方。

阿什利:好的，非常好。当然，这是一个经过深思熟虑的策略，你已经做了很多工作，我们也期待在开源道路上看到这些工作。

您提到了存储桶，提醒我问一下—您在哪些类型的云中提供云 2.0 服务？

是的，问得好，米奇。因此，目前我们在 AWS 中可用，我们在两个地区可用——美国西部 2，在俄勒冈州，我们刚刚在欧洲开始测试过程，在法兰克福可用，它目前使用相同的代码，但我们只是还没有打开欧洲人向我们支付的能力。但是在宣布正式上市之前，我们可能会在欧洲进行 4 到 6 周的测试。

此外，今年早些时候，我们在 Google Next 上宣布，我们将在 GCP 上线。因此，我们的目标是继续前进。最有可能的是，这将出现在美国东部地区，只是为了填补一个地理战略，但我们对与谷歌的团队合作感到非常兴奋。我以前在甲骨文的一些同事现在也在那里，和他们重新联系很有趣。

阿什利:嗯。

**Hall:** 我们有望在年底看到那片土地，然后我们会花时间和微软团队的 Azure 在一起，所以，我会在欧洲和古巴寻找那片土地。

阿什莉:好的。非常好。当您告诉我们您的背景时，我真的回到了最开始，我真的很感兴趣，您认为公司如此关注开发人员社区与您在 Oracle 工作的更传统的数据库公司相比，在处理 InfluxData 方面有什么不同？不是说他们没有开发者产品，他们有，但是很明显，这是你宇宙的中心。你学到了什么，或者你现在采取的方法有什么不同？

霍尔:我会说这是一个组合，米奇。比如，Oracle 领域中肯定有一些非常强大的东西可以应用于开源社区。

例如，特性标志项——所以，不要在默认情况下打开所有最新、最棒、最酷的特性的情况下发布新版本的数据库。这实际上阻止了人们从旧版本快速转移到新版本。因此，我们试图保持这些东西关闭，并向人们提供亮点，并发布有关如何激活和打开它们的说明。这是一把双刃剑，因为新来的人，你会希望他们使用最新、最棒、最好的技术，我们会努力强调这一点。但我们也希望人们尽快行动起来，消除那种支持的长尾效应。

所以，一个非常顺利的过程。这在某种程度上来自 Oracle—是的，特性标记那些新事物，明确地突出它，以便他们可以利用。但是让开发人员——他们很聪明。如果你告诉他们住在哪里以及如何打开这些新功能，他们就会利用这些新功能。

阿什利:嗯。

**大厅:**另一方面，在社区方面，你知道，听听社区的反馈。我要说的是，这是我最先想到的一件事，如果不是完全显而易见的话，你知道，引入 Flux 作为一种新的查询语言背后的动机并不是轻而易举的。但它确实是对我们的社区成员提出的所有悬而未决的疑问和问题的回应。他们不能移动某些工作负载，他们不能执行某些功能，他们需要语言的更大灵活性。所以，流动是倾听所有反馈的起源。

你知道，不幸的是，这些问题中的一些肯定已经在社区中突出了两三年了。在某些情况下，我终于觉得我们可以满足社区成员的要求了。

阿什莉:非常好。我觉得我们今天的播客已经涵盖了很多内容，当然让我们的听众对什么是独特的和新的以及如何开始使用 Cloud 2.0 InfluxDB 有了很好的感受。我想在你的网站上，有一个非常容易开始的地方？

霍尔:是的，绝对是。我认为这是今天网站上的主要行动号召。如果你去 InfluxData.com，它会弹出来说，“立即开始使用云 2.0。”此外，您可以通过访问我们的下载页面获得开放源代码，或者在 GitHub 上找到我们。

阿什利:优秀。嗯，汤姆——蒂姆，*【笑声】*我就知道我会这么做——蒂姆，谢谢你参加今天的播客。

**霍尔:** *【笑声】*不客气，米奇。

阿什莉:好的。我欠你一次。*【笑声】*我要感谢我的嘉宾，InfluxData 公司产品副总裁蒂姆·霍尔今天参加我们的节目，当然，也感谢我们的听众朋友们。我是米奇·阿什利和 DevOps.com。你听到了另一个 *DevOps 聊天*播客。在外面要小心。

— [米切尔·阿什利](https://devops.com/author/mitchellashley/)