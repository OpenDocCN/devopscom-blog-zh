# 为什么 DevOps 需要云化的 NPM

> 原文：<https://devops.com/devops-needs-cloudified-npm/>

DevOps 大师 Gene Kim 定义 DevOps 的三种“方式”或原则之一是放大反馈循环。Ops 促成这种放大的一个关键方法是对操作条件实施丰富的监测仪器。更加自动化的配置管理和云友好型应用程序性能管理套件的兴起为提供强大的反馈回路做出了巨大贡献。然而，网络性能监控(NPM)非常需要云化来与 DevOps 相关联。

在我之前关于 DevOps.com 的一篇文章中，我写了 DevOps 对 IT 运营管理的影响，并指出基础设施管理工具在云化和 API 友好方面已经大大落后于 APM。NPM 就是一个恰当的例子。为了明确术语，网络性能监控指的是收集延迟、TCP 重新传输、无序和碎片数据包等指标的监控。这四个指标可以告诉网络工程师网络是应用程序性能问题的根本原因还是主要原因。与 NPM 高度相关的其他指标和数据点包括接口利用率百分比、流量统计，以及任何依赖互联网通信的应用或服务的 BGP 路径。这些指标和数据集有助于工程师定位网络中的根本原因，例如接口拥塞、流量峰值过大、互联网路径变化或性能问题与特定 ISP 网络中流量的相关性。听起来很棒，对吧？

问题是，这些指标的收集方式对于 DevOps 实践来说是完全错误的。在过去的二十年里，NPM 工具分为两大类:免费的手动工具，如 TCPDUMP、MRTG 和 WireShark 和整体的、孤立的商业工具。没有人会质疑免费工具的价值，但是在某一点上，用手动工具来解决问题是不合适的，所以迟早大多数网络运营组织不得不投资商业工具。

商业 NPM 工具主要是在前云时代、前 DevOps 时代设计的，当时数据中心都在广域网内，应用程序是集中式的、整体式的，所有用户都在园区或分支办公室广域网上的其他地方。设备通过连接到主要路由器的 span 接口和瓶颈处的交换机(局域网和广域网连接的接合点)来收集指标。

那个时代正在迅速消失。大多数新应用程序都是在分布式基础上构建的，利用了混合云。有了分布式应用程序组件，就有了一个更加复杂的通信网，其中大部分将跨越网络和互联网。此外，在大多数云环境中，您根本无法部署设备，甚至无法部署虚拟设备，因为在许多情况下根本没有 span 端口。

传统 NPM 的问题不仅仅是不适合现代应用程序架构。NPM 电器被设计成垂直集成的系统，GUI 是从中获取数据的唯一真正途径。因此，他们的 API 通常充其量是二等公民。这对 DevOps 来说是有问题的，因为放大反馈循环意味着能够跨不同的团队提供有意义的真实世界的数据。

NPM 的云和 DevOps 之间的差距非常明显，已经引起了主要分析公司的注意。今年 5 月，Gartner 分析师 Sanjit Ganguli 发表了一份题为“网络性能监控工具在云监控方面留下了空白”的研究报告。这是对 NPM 领域相当尖锐的批评，从本质上说，当前绝大多数 NPM 方法主要是为前云时代构建的，因为去中心化和全栈虚拟化带来了新的复杂性。结果，网络管理者在试图适应数字操作的现实时陷入困境。

需要什么来使 NPM 变得多云并对开发者友好？首先，对于分布式混合云应用程序，需要有在云服务器部署中嵌入 NPM 指标收集代理的选项，要么直接在应用服务器上，要么在 NGINX 或 HAProxy 等负载平衡器上。使用容器管理和配置自动化工具，将轻量级 NPM 代理部署到更分散的点是非常可行的。通过在应用服务器上或非常靠近应用服务器的地方收集 NPM 指标，您可以获得关于“是网络吗？”的最准确的读数出现应用程序性能问题时。

NPM 云化的另一个关键方面是分析发生的地方。设备有严格的计算和存储限制。在大数据和云计算经济时代，依靠设备进行 NPM 分析已经过时。有太多的开源大数据平台，以及越来越多的 NPM 分析的新兴商业 SaaS 选项。如今，大数据网络分析平台允许工程师对数十亿行数据集执行深度即席分析，并在几秒钟内获得答案。

DevOps 要求扩大反馈回路，加上丰富的云计算能力的可用性，这意味着没有理由不积极测量一切，包括网络性能。网络团队可以而且必须超越配置自动化，改变他们收集和共享指标给服务器和应用程序开发团队的方式和规模。云友好型 NPM 是将 Net DevOps 变为 IT 现实的必要步骤。

## 关于作者/亚历克斯·亨索恩-伊万

Alex Henthorn-Iwane 是 Kentik 的营销副总裁。他拥有 20 多年将网络、安全和软件领域的新技术推向全球市场的经验。Henthorn-Iwane 领导 Kentik 的全球营销战略，并帮助该公司将其故事和解决方案带给世界各地依赖网络的组织。在 [LinkedIn](https://www.linkedin.com/in/alexhenthorniwane) 、 [Twitter](https://twitter.com/heniwa) 或 [SlideShare](http://www.slideshare.net/AlexHenthornIwane1/followers) 上与他联系。