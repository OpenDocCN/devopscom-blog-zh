# 云中开发运维的最佳实践

> 原文:[https://devops.com/best-practices-for-devops-in-the-cloud/](https://devops.com/best-practices-for-devops-in-the-cloud/)

DevOps 通常被定义为将软件开发与 IT 运营相结合的方法。目标是缩短系统的开发生命周期，同时根据业务目标频繁地提供功能、修复和更新。对于许多组织来说，将 DevOps 付诸实践是一个正在进行的实验。

开发人员经常与持续集成(CI)或持续交付(CD)性能、测试延迟和其他瓶颈作斗争。事实上，一项调查报告称，只有 34%的项目按时完成，只有 42%的项目符合预算。安全和开发团队必须协作以跟上快速的开发生命周期，而不牺牲每次更新的安全性。

企业 SaaS 应用不像传统软件那样是分布式的，它们持续运行服务。因此，CD 就是用一组变化来更新服务。在 AWS 和 Heroku 等公共云中，这是通过管道阶段完成的(例如开发、测试、试运行和生产)。在 Salesforce 等平台中，阶段成为沙盒环境、短暂的临时组织和生产实例。

开发团队如何在不牺牲特性和更新的完整性的情况下缩短开发生命周期？在这篇文章中，您将学习关键的 DevOps 实践，以实现可预测的、可靠的发布管理。

## 高级计划确保选中所有复选框

敏捷规划现在是企业发展的必要条件。最好在以下情况下使用:

*   产品本身将从灵活性中获益最大。
*   团队成员之间需要定期面对面的互动和协作。
*   最终产品需要在整个生命周期内定期更新、监控并持续交付给客户。

对于 CD，请确保您的用户故事大小正确，并且每个故事都是代表一个独立功能的史诗。这使得您的团队能够发布可供用户使用的小块功能，并且可以追溯到您的发布计划。此外，定义用于验证阶段的验收标准，这样您就知道什么时候该做什么了。

## 管理源代码，尤其是在共享环境中工作时

有一些影响 CD 的应用程序创建实践。首先，源代码不是企业解决方案的唯一元素。模式、用户界面、访问控制权限和静态资源(如图标和图像)都是创建过程的一部分，应该像管理源代码一样认真管理。它们都应该被检查到版本控制系统(VCS)中，作为真实的单一来源。

第二，确保开发人员在隔离的环境中进行更改。在一些低代码平台中，如[Salesforce.com](https://salesforce.com/)，这成为一个挑战，但即使在一个数据库中，当在共享环境中工作时，多个数据库管理员(DBA)也可能会踩到彼此的变化。

## 功能测试

自动化质量流程很难实现，但是 essential [Selenium](https://www.seleniumhq.org/) 是测试功能的一个很好的工具，应该成为您开发运维实践的一部分。但是在开始功能测试之前，应该进行一些验证。静态代码分析工具，如 [PMD](https://pmd.github.io/) ，对于确保你的开发团队针对单一风格进行编码是必不可少的。

定义一种团队风格并强制使用。单元测试覆盖率也是必不可少的——以至少 75%的覆盖率合并它们。最后，在这些自动化测试通过之后，实现一个手工的同行评审。老手能够发现自动化工具不能发现的性能改进机会。

## 变更应该在定义好的管道中发布，并有严格的质量关

打包成 CD 是为了捕获可以增量发布到下一个阶段或环境中的变更。开发团队应该为每个阶段指定一个分支，并将增量变更捆绑到一个推广分支中，以利用您的 VCS 中的合并冲突检测。

变更应该在一个定义好的管道中发布，有严格的质量控制，确保验证步骤和发布阶段的顺序。开发人员不应该能够绕过整个开发周期中的关键阶段——例如，从开发到生产。

专注于做更小的改变，这将导致可靠的、可预测的发布。最后，一定要让促销自动化。这使您的团队能够在发布到生产环境之前，在集成、测试和试运行阶段验证推广脚本，从而降低令人不快的意外发生的可能性。

## 自动化配置，尤其是最终用户访问权限

将测试配置是否正确作为验证过程的一部分。Salesforce 等平台拥有强大的简档和权限集，使用户只能访问正确的信息。不正确的配置会暴露个人身份信息(PII)、信用卡号或医疗健康数据。

## 监控不仅仅是服务可用性和性能

大多数 SaaS 公司监控服务可用性和性能。但是，优秀的公司还会监控数据访问，以检测不适当的配置更改，并监控最终用户功能的使用情况，这使产品经理可以了解他们的使用情况。

— [大卫·布鲁克斯](https://devops.com/author/david-brooks/)