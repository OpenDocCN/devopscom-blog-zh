# DevOps 聊天:CircleCI 的 CI/CD 可扩展性课程

> 原文:[https://devo PS . com/devo PS-chat-ci-CD-scalability-lessons-with-circle ci/](https://devops.com/devops-chat-ci-cd-scalability-lessons-with-circleci/)

两到三人团队的软件开发工具需求可能与大型企业的需求有很大不同。CI/CD 是几乎所有软件团队建立的一种通用方法。但是对于一个更大的软件组织来说，你在早期采纳了什么样的需求，而这些需求仅仅是增加了复杂性而不是好处？

CircleCI 的首席技术官 Rob Zuber 开始在移动领域解决这个问题，然后转到 CircleCI，帮助创建现在已经在 SaaS 建立起来的面向各种规模软件团队的 CI/CD 产品。加入我们这一集的 DevOps 聊天，为您的组织带去一些有价值的 CI/CD 课程。

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/660651029&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/660651029&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

## 副本

米奇·阿什利:大家好。我是 DevOps.com 的米奇·阿什利，您正在收听的是另一个 DevOps 聊天播客。今天，CircleCI 的首席技术官 Rob Zuber 和我在一起，我们的主题是大规模的软件创新。罗柏，欢迎来到 DevOps 聊天室。

Rob Zuber: 非常感谢，Mitch，很高兴来到这里。谢谢你邀请我。

阿什利:你能从自我介绍开始，简单介绍一下你的职业，并告诉我们一些关于 CircleCI 的事情吗？

如你所说，我是罗伯。我是 CircleCI 的首席技术官。我已经在这家公司工作了将近五年，在我谈了一点 CircleCI 的工作之后，我会谈谈我是如何来到这里的。我想这可能是正确的顺序。

所以，CircleCI，我们的重点是帮助每个软件工程团队做得更好。因此，更好地从他们的概念和想法中获取软件，以在他们的客户手中重视交付。因此，我们实际上是交付管道，位于协作元素和生产部署元素之间。因此，我们帮助您将您的软件从您有了一个想法，开始编写，到确保它能很好地工作，确保每个人做的每件事都能很好地协调工作，并让它进入一个生产环境，在这个环境中，您可以自信地、快速地开始实现客户或业务价值，并准备好继续下一件事，为您的客户创造价值。

阿什利:这是一个相当大的空间，有很多人住在里面。我的意思是，人们可以下载 Chef 或 Puppet 或 Jenkins，你知道，我们可以继续谈论 CI/CD 管道链中的不同工具。

但是请告诉我们一些关于你在市场中独特的位置。

是的，所以，我在这里的这段时间里，市场发生了很多变化，这并不奇怪——不仅仅是在 CircleCI，而是整个市场。我们已经看到许多人来来去去，许多公司要么抢购更大的组织，但也许他们不一定专注于 CI/CD 独立，或者只是没有达到作为一个组织的临界质量。

市场也发生了变化，我们现在看到的是，许多人试图将 CI 和 CD 作为他们正在做的事情的延伸，但没有将其作为他们关注的核心业务。所以，这就是 CircleCI 与众不同的真正原因，我们将 CI 和 CD 作为我们工作的核心。每天当我们起床并开始工作时，这就是我们所关注的，而不是将您束缚于——您知道，您使用这种 CI 和 CD 功能是因为它是您可能想要或不想要的另一个包的一部分，并且真正成为这一领域的选择，如果有意义的话，让开发人员有机会在其流程的每个不同部分选择他们想要的最佳工具。

阿什莉:让我们把洋葱皮再剥开一点。我知道—我的意思是，这是一个非常复杂的过程，CI/CD 和您可能会使用的所有工具，如果我理解正确，您不会采取“让我们努力成为每个人的一切”的方式，而是更多地采用工作流的平台方法，然后您可以将各种工具作为工作流包的一部分插入，并将东西打包到 orbs 中以进行配置管理，等等。

你能给我们提供更多的细节吗？

是的，完全正确。嗯，我想，我们认为我们的客户是软件开发人员，这一点很难出错，对吗？因此，如果我们给他们工具，他们会非常乐意创造他们需要的能力。orbs 就是这样的工具之一。

所以，这基本上是关于认识到我们的许多客户非常有能力，他们正在解决非常相似的问题，并提供机会来分享，重用部件，然后构建。他们正在解决的一些问题正在与我们不一定提供的同类最佳组件建立集成，对吗？我猜，这可能是从漏洞扫描或连接到安全系统到如何与最终部署目标集成的任何事情，对吗？

**阿什利**:嗯嗯。

**Zuber:** 我们不会试图解决所有这些问题，而是说，“嗯，您需要部署”，比如，我们还将构建一个云，您可以部署到该云，或者我们还将为您系统的所有这些部分构建所有工具。我们基本上为您提供了一个真正集中且易于使用的管道，或者我们使用的术语工作流，以及插入这些功能的能力，对吗？因此，通过利用我们的合作伙伴构建的 orb 来访问他们的系统，社区成员已经构建了，我们也已经构建了，基本上是为了让您可以访问丰富的生态系统，如果您愿意，可以使用它来真正利用这些额外的系统，但所有这些的中央管理都很容易。因此，您对交付过程中发生的事情了如指掌。

阿什莉:我知道祝贺是应该的。最近，你获得了 D 轮融资，由 Owl Rock Capital 和 NextEquity Partners 领投的 5600 万美元——恭喜你。

非常感谢。是的，非常令人兴奋。

阿什莉:所以，权力越大，责任越大。你打算用那些钱做什么？*【笑声】*

朱伯:嗯，这是个很好的问题。我的意思是，老实说，很多都是在这个轨迹上继续，对不对？比如，我们相信我们正在做的事情，我们相信我们正在做正确的事情，我们已经取得了成功，但在这些领域中的每一个领域，我们都可以做得更多，对吗？因此，我们将继续投资于工程和产品开发，显然是为了增加能力。我的意思是，其中一部分实际上是围绕那些类型的集成模型构建的，如我们谈到的 orbs。

此外，以我们真正拥有的一个关键领域为例——嗯，我想只是通过我们多年来的成功，因为我们作为一家公司已经存在了大约八年——我们对软件工程师如何构建有着深刻的理解。我们有成千上万的客户在建设成千上万的项目。所以，我们看到了，对吗？我们看到流程，我们看到什么对他们有用，什么没用。

我们看到他们是否——基本上，他们能够交付软件的速度，他们使用的工具的种类，生态系统如何支持他们，以及是否能够将所有这些丰富的数据作为他们的价值返回给我们的客户，以真正帮助他们变得更好。就像，不仅仅是一个工具——我的意思是，一个伟大的工具，但实际上，一个工具不仅可以让你的代码通过，而且可以帮助你了解你如何做得更好，以及你的改进机会在哪里。或者，老实说，在另一端，它总是值得一提的，如果你做得很好，你可以把你的时间和精力投入到其他事情上，因为事情真的很稳定，运行良好，对吗？

因此，这是我们从这个角度对我们的产品进行投资的地方，然后，我想，再从我们谈到的扩展方面进行投资，我们已经在核心 CI 和 CD 方面进行了投资。我的意思是，在我在 CircleCI 工作的这段时间里，软件交付的整个过程以及我们如何包装和构建产品已经发生了根本性的变化，我希望这种情况会继续发生。我的意思是，我们在这个市场上的步伐有时有点疯狂。

因此，我们需要继续发展以支持软件开发是如何完成的，以便真正成为软件交付的最佳工具，就像我们今天一样。

**Ashley:** 我应该知道这一点，可能—您是在云中运行您看到的工作，还是在本地为客户运行大量工作？你是怎么接触到那个[相声]的？

是的，很棒的问题。所以，我们两者都提供。我们有一个云平台，也就是说，我们的大多数客户都使用这个平台，我们运行的大多数构建都是在这个平台上进行的。对于有复杂案例或特定需求的超大型客户，如果他们对部署软件并自行运行软件感兴趣，我们也有一个本地解决方案。

是的，关于这种变化，我想说的一件事是，将它与我们谈到的其他系统结合起来，我们一直在发展，以支持市场的变化，但也在发展，以拥有一个更灵活的平台，因为我们看到了这种不断的变化，不想一直追赶或试图保持领先，而是， 创建更加灵活的工具，这些工具将随着变化以及人们如何进行软件开发而不断发展，并随着我们的不断发展，让我们的用户和客户能够以他们认为合适或最能满足他们需求的方式使用平台。

**Ashley:** 这无疑是你关注 orb 战略并投资 CLI 和 API 的原因。你也关注入职吗？

当然，是的。所以，我认为对每个人来说，关键是珍惜时间，对吗？比如，CI 和 CD 可能是一个复杂的系统—

**阿什利:**嗯嗯，非常。

朱伯:这在一定程度上取决于你的组织的规模。但是，正如我所说的，当我们谈论那些小公司开始，我的意思是，他们只是想要一些工作，将摆脱他们的方式。所以，作为一个团队，这是一种逐渐的成长，在你所在的地方与你相遇。

因此，如果你有一个简单的应用程序，并且你真的专注于寻找适合市场的产品，那么它应该尽可能少地投入运行，并确保你满怀信心地交付，这样你就可以专注于早期的迭代——我总是在创业公司这样的公司中谈论它，但它可能只是一个早期项目，对吧，在一个更大的组织中。那些小的新项目是试验新能力、新工具、新过程的好地方。

因此，支持您快速起步并实现价值，但同样，当您进入大型组织时，您需要能够融入越来越多的功能。但是，快速起身，真正让你意识到“好的，这实际上改变了我的工作方式，这真的很有价值，”这需要非常简单，因此，我们不断投资，使之对许多不同类型的团队、项目、代码库、技术堆栈变得简单，同样，随着它们的变化，我们希望尽可能多地涵盖它们。

Ashley: 你谈到了创业公司和创业项目，但我知道，你也关注企业。这些可能非常不同，在客户需求、问题和您必须解决的规模方面有很大不同。在这两个不同的社区中，你们都遇到过哪些挑战，并且觉得你们已经很好地解决了这些挑战？

是的，完全正确。我是说，我喜欢把它想成一个连续体。我不知道，也许这只是让我比两个真正不同的社区更快乐，对吗？我认为你在成功的企业中看到的一件事是看到小公司采取的方法，对吗？但是，当然，你必须利用这一点，想办法让它在你的规模下发挥作用。

阿什利:嗯。

**Zuber:** 正如你所说，我们绝对拥有大量的大客户，约占福布斯财富 100 强的三分之一。所以，非常大，有影响力，但我还是要说——那个特殊的群体，技术进步公司。意思是，来自一个他们的软件开发一直是中心的背景。您之前提到了转型，因此我们也参与了许多转型。但这是一个不同的空间，对吧，对于那些试图重新想象他们如何建设的公司，相对于那些已经发展到一定规模的公司，有点总是想着软件开发。

但是许多挑战是相似的，对吗？只是纯音阶。因此，这种规模有多种不同的形式。这可能只是您正在运行的工作总量，我们的云平台多年来的增长非常显著，我们一直在努力找出下一个数量级是什么，下一个数量级是什么，我们如何继续支持这种增长，从工程的角度来看，这是非常棒的，但也是令人兴奋的。

阿什利:嗯。

**Zuber:** 所以，从工作的角度来看，这是一个纯粹的规模，但我们真正投资的更有趣的事情是，例如，工作流程的复杂性，对吗？因此，如果您有许多不同的系统，它们都需要一起进行验证，或者在 CI 和 CD 流程中需要了解它们之间的依赖关系，或者可能需要进行大量的验证，而不仅仅是测试。所以，那可能是——再次，我之前提到过安全扫描，林挺。你知道，随着公司越来越大，并且能够针对有大量贡献者的非常大的代码库独立地管理它们，所有种类的门和过程都将到位。

同样，举例来说，这可能不是工作的总数，但是这些定义的复杂性本身是成比例的，开发人员的数量也是成比例的。因此，随着我们客户的增长，围绕这些扩展点定位产品一直是我们不得不做的事情，因为我们带来了大客户，我们投入了大量时间来确保这一点，特别是在云环境中，这无疑为我们的客户带来了额外的价值，因为他们不必考虑任何管理问题，对吗？他们有非常非常大的工作流，而且容量都是可用的。当他们安静时，他们不必担心额外的机器在线或浪费或任何类似的事情，因为我们为他们管理所有这些。

阿什利:嗯。

**Zuber:** 因此，为这一大群客户做这件事，是我们真正了解的事情，其中一些客户相当大，工作量很大。

**Ashley:** 嗯，想想看，你提到了 continuum，这也是一个很好的思考方式——你为什么不与我们分享一些你看到客户学到的经验，也许你自己也学到了，运行你自己的产品开发和软件开发过程。当人们从“我刚刚开始参与 CI/CD”的连续状态中走出来，使用像您这样的产品时，很明显，有很棒的功能和东西，我们都知道，你们都有—但是当有人从“我有一个开发团队，我们刚刚实施了 CI/CD”中走出来时，他们学到了什么呢？我们会遇到的下一个规模问题是 X，以及之后会发生什么。

成熟度生命周期是什么样？

是的，我很喜欢你用的“成熟”这个词。因为我认为，很多时候，当我们思考这个问题时，我们会考虑公司的规模增长，我们会花很多时间谈论工具。当然，你知道，很容易看到 CircleCI 和我们所做的事情，并将其视为一种工具。但最终，最大的挑战将是文化的转变，对吗？因此，处理你认为如何完成工作，人们如何互动，角色和责任的定义。

我的意思是，每个人都是从一个——嗯，每个人——开始的，当你在这个领域创办一家公司时，你可能只有三个人，五个人，无论什么，角色都很松散，因为每个人都在努力完成需要完成的事情，对吗？有一天，你是数据库管理员，第二天你是咖啡师，确保每个人都有足够的咖啡来完成工作，对吗？

随着你的成长，有些部分是你真的想保留的——当然，对吗？比如，专注于任务，清楚地知道自己要去哪里。但是，对每个人来说，做任何事情都变得更具挑战性，对吗？你实际上需要有一些明确的界限和理解。

所以，文化的转变就像——我们保留了哪些部分？或者是我经常描述的一种方式，你知道，就我们自己而言，正如我所说的，从我加入时的大约 20 人到 250 人，并且还在增长。我一直在寻找的一件事是意图是什么，然后我们如何在下一个级别实现它？

阿什利:嗯。

朱伯:我认为这也适用于你的工具、流程和其他一切，对吗？所以，我们一直是一家非常透明的公司。所以，当你是 5 个人、10 个人或 20 个人时，透明度通常是为了确保每个人都知道发生了什么。但是当你有 250 个人的时候，你要真正清楚发生了什么，但是要能够定义这个信息，并且用一种不仅仅是信息的消防水管或者每个人的超载的方式来传达它，对吗？

我正试图把它转回到某种技术和你要去的地方——尽管我相信最终是这些潜在的文化元素。当我看着人们构建软件时，我看到，例如，人们向大型组织——你知道，谷歌、脸书、网飞——寻求帮助，并说，“嗯，他们像这样构建软件，所以这肯定是对的。”再说一遍，看意图很重要，对吧？

所以，是的，你可能希望有一个 CI 和 CD 管道，因为它会让你失去很多东西，但我猜当你开始时，你可能希望有一个非常简单的应用程序，因为你还不知道你的业务是什么，你是否有业务，什么是合适的。

**阿什利:** *【笑声】*

朱伯:所以，这就像是，这是为整块石头辩护，对吗？每个人，最终——不是每个人——很多人最终会说，“你知道吗？这个庞然大物与我们的组织不相称。这与我们遵循意图的能力不匹配。我们的意图可能是自主性，或者能够分别在产品的不同领域工作，诸如此类。”实际上，这在一个小尺寸的整体上非常有效，因为你们有如此多的共同理解。

**阿什利:**对，对。

**Zuber:** 在某些时候，你可能会说，“好吧，这已经行不通了，我们要开始突破服务了”——这是许多公司都经历的一种自然演变。但是，再一次，人们在开始的时候看到它，然后说，“哦，好吧，那就是我们将要结束的地方。让我们从一开始就这样做”，并带来了对他们的规模来说不必要的大量开销和复杂性，最终，我甚至可以说失败了，因为他们产生了某种技术开销或负担，这与他们的业务现状不相符。

阿什利:嗯。

**Zuber:** 因此，如果我要总结所有这些的潜在教训，就像是——找到你所做的事情的意图，然后确定适合你的规模的实施。然后，我想另一个重要的教训是，如果你以足够高的速度经历规模，认识到你在曲线上的位置，并认识到它在变化，对吗？因为很容易认为事情会保持不变，你拥有的系统将会是一个很长时间的伟大系统。

但是如果你成长很快，这适用于你的软件，适用于你的团队结构，适用于你如何管理你的组织。你需要意识到这种变化。

**Ashley:** 是的，我相信当我们谈论开发软件时，组织真正做的是学习如何创建软件，这是我们——或者团队，组织正在做的，然后是成熟度曲线上的演进。

所以，你，无论你是 QA 人员、DevOps 人员、开发人员、架构师等等，都是关于所有这些功能的，所以你可以把它想象成管理一场足球赛、一场英式足球赛或一场棒球赛。你正在学习作为一个团队来运行和操作软件。你同意，不同意？

是的，我认为这很有道理。我认为这真的很有趣的原因是，我知道这非常——说到题外话，在我真正进入软件开发之前的最初几天，我实际上是在一家工厂度过的。我是一名工艺工程师。工厂的伟大之处在于，我们每天会制造成千上万个同样的东西。因此，提炼过程就是提炼构建同样东西的过程。

但是在软件开发中，你基本上不会两次构建同一个东西，对吧？我的意思是，你可能会被另一家公司聘用，有人会说，“你能来真是太好了，因为我们需要你建立基本上和你已经建立的一样的东西。”但就是这种不断的发现，对吧？你一直处于设计阶段，试图弄清楚我们如何着手建造这个我们以前基本上从未做过的东西？当然，有现有的技术和所有这些东西，但我们必须将它们映射到我们特定的领域、特定的团队和约束条件中。

所以，很多事情正在解决——好的，我们知道我们需要做一件事，我们对此有一些基本的认识，但是我们如何将它映射到我们的过程中呢？你肯定将它描述为我们构建软件的模型，而不是仅仅考虑构建一个东西。

阿什莉:嗯，我们没时间了。罗柏，我们应该喝杯啤酒或咖啡，然后在大约三小时内结束这次谈话。

祖贝尔:我很乐意。完美。

阿什利: *【笑声】*听起来很棒。好了，谢谢你成为播客的嘉宾。这是罗伯·祖伯，CircleCI 的首席技术官。感谢你加入我们。

是的，非常感谢邀请我。非常有趣。

阿什莉:这是我的荣幸。同时，感谢你，我们的听众，加入我们。我是 DevOps.com[的米奇·阿什利](https://devops.com/)，你已经听到了另一个 DevOps 聊天。在外面要小心。

— [米切尔·阿什利](https://devops.com/author/mitchellashley/)