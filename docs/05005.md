# 面向所有人的 APM:简化云的复杂性

> 原文:[https://devo PS . com/APM-for-all-simpling-the-complexity-of-cloud/](https://devops.com/apm-for-all-simplifying-the-complexity-of-cloud/)

随着公司采用混合甚至多云计算战略，他们的 IT 部门开始使用动态技术在现有后端业务系统的基础上构建新的应用功能。现在，大多数组织都拥有混合的多云架构，其中公共云与现有的内部、私有或混合云基础架构和应用程序相集成。

这意味着，尽管云为我们提供了日常所需的敏捷性、灵活性和可扩展性，但对于需要确保应用环境的可用性和性能的技术专业人员来说，云也是复杂性增加的一个来源。这反过来又会对整体管理产生重大影响。Gartner 预测，到 2020 年，“由于基础设施和运营(I & O)技能差距，75%的企业将经历可见的业务中断。”

因此，首先了解支持整个 It 环境中应用程序可用性和性能的底层技术至关重要。接下来，您必须理解您的技术在开发和生产中如何动态地相互作用。您不仅需要了解应用程序堆栈本身的各个级别，包括所有基础架构以及服务、函数调用和代码，还需要了解各种类型的应用程序本身:整体式、面向服务的架构(SOA)和基于微服务的架构。

这就是为什么，无论是本地、混合还是云原生，无论您运行的是 AWS、Azure 还是 Google Cloud (IaaS 或 PaaS)，您都需要全面了解您的完整基础架构和应用堆栈。 [应用性能管理(APM)](http://www.solarwinds.com/apmsuite) 通过简化，更重要的是规范化应用堆栈管理，让您能够深入了解您的 IT 环境。

## **杀伤人员地雷案例**

APM 具有重要的商业价值。在当今的环境中，IT 团队通常不再是每个虚拟机只有一个应用，而是每个物理主机(无论是内部、私有还是公共云)有几十个虚拟机，每个虚拟机有数百或数千个容器化的微服务。此外，这些具有数百(或数千)个容器的业务环境不断被重新配置，并在面向客户的应用程序下投入生产。如果出现问题，数字操作可能会崩溃。由于底层资源是共享的，所以它们都需要友好合作。

与此同时，游戏发生了变化。 基础设施仪表盘的红色、黄色和绿色光芒现在与您是否真正提供高质量的用户体验没有太大关系。相反，成功指标现在基于不断发展的真实世界和最终用户体验。你 是 面向客户的，因为客户通过你的应用和网站与你互动。如果你的网站很慢，你会赔钱，而且会对商业品牌产生负面影响。

要解决这个问题，你需要细节。例如，事务处理性能缓慢是否是因为您没有足够的计算能力？还是因为应用代码不好所以慢？这些因素是相互关联的。在我们动态、共享和虚拟化的一切环境中，了解问题的真正原因是一项挑战。

当亚马逊在去年的黄金时段宕机一小时时，专家估计该公司损失了 [1 亿美元的销售额](https://www.businessinsider.com/amazon-prime-day-website-issues-cost-it-millions-in-lost-sales-2018-7) 。想象一下在 [假期](https://royal.pingdom.com/web-application-monitoring-best-practices-during-peak-online-shopping/) 期间潜在停电的影响。当然，这些都是亚马逊规模的数字。但是把这些哥斯拉的数字缩小到你的尺寸，它仍然会带来伤害——要么是收入损失，要么是品牌声誉受损。

借助 APM，您可以看到所有指标，并了解应用程序的运行情况。你可以看到它在退化，让你有时间弄清楚为什么它变慢了——在它停止准时给你原材料之前。你可以理解到代码行，或者 [数据库查询](https://www.appoptics.com/database-performance-tuning) ，到底是什么，在哪里，为什么慢。

但是，当我们谈论 APM 时，我们在谈论什么呢？ [Gartner 曾指出](https://blogs.gartner.com/jonah-kowall/2014/02/14/application-monitoring-is-not-application-performance-monitoring-apm/) 在术语上的历史混乱。APM 工具之间还存在不同功能的问题。有些是面向单片应用的；其他的用于 Java 和 web(以及其他应用程序),更多的用于微服务。除此之外，还有全栈 APM 解决方案可以测量这一切。

## **利用 APM 规范 IT 管理**

APM 策略和工具集并不完全相同。根据我的计算，APM 的实现有三次迭代。首先，APM 可以追溯到所有技术都是单片集成的时候，其中最好的例子是老式的 CA Wily Introscope。然后是第二代，涵盖了 SOA、Java 和 web 等领域——一个很好的例子是 AppDynamics 和旧的 Dynatrace。接下来是专门针对微服务和容器化应用环境的 APM 版本，比如新的 Dynatrace 和 Instana。

在某些情况下，实际的 APM 技术本身并没有跟上底层基础设施的变化。微服务更是如此。有一些传统的 APM 解决方案不支持容器化应用环境中的微服务。另一方面，APM 领域的一些新公司只在微服务领域运营。它们是基于容器的，不支持旧的单一代码。它们也不支持 n 层/SOA 应用环境。

然而，大多数客户都有混合环境。几乎没有人在由 Kubernetes 运营管理的容器中运行 100%的微服务。

根据我的估计，现代的 APM 系统应该可以监控所有的情况，因为一切都是混杂的，如果历史可以作为参考的话，这种情况可能会持续下去。公司仍然依赖大规模的专有信息数据库——业务记录数据库。他们只是在构建全新的应用程序。

如果您认为确保用户体验到的可用性和性能比以往任何时候都更重要，那么您需要跨所有这三类应用及其环境的 APM，包括 AWS 和 Azure 等公共云提供商。你需要全栈 APM。

## **入门**

在你做任何事情之前，首先记住你的尽职调查。四处询问，寻找关于 APM 解决方案供应商的第一手知识。不要只相信他们会给你客观的建议，告诉你他们有多好；APM 市场上有大量的宣传，这往往会模糊我们对某个解决方案实际功能的理解。那么，你从哪里开始呢？通常，最好从你是应用程序和基础设施的最终用户开始思考。这意味着监控、测量和了解您的基于 web 的或定制的应用程序的实际性能。您应该从客户端(面向外部)开始，然后从监控的角度通过堆栈返回。接下来，监控、测量和理解应用程序本身的性能指标。在这里，您会发现一些关键功能，如分布式事务跟踪和代码分析，对于从性能角度真正理解所有应用程序组件之间的关系至关重要。最后，虽然了解基础架构组件的性能也很重要，但在完整的应用程序性能环境中这样做也很重要。这个应用上下文 [基础设施监控](https://www.appoptics.com/infrastructure-monitoring) 必须包含性能检测以及与您的应用和相关基础设施相关的所有日志。

从小事做起，以求快速成功，并为 APM 在您的组织中取得更广泛的成功打下基础。从一个或最多几个最需要关注的应用程序开始。证明价值和成功，然后在此基础上扩大采用。

在所有情况下，请记住——除非您完全依赖无服务器计算，在容器化环境中只有基于微服务的应用程序，否则您将需要跨三种应用程序架构类型的可见性:单片、SOA 和微服务。否则，你就得不到你需要的所有信息。

在所有技术革命中，无论是大型机、分时、客户端-服务器还是分布式，无论是混合云还是完全开放的公共云，It 部门的目标都是获得单一管理平台进行运营管理。没错，全堆栈 APM 提供了这种观点。

— [戴维·瓦格纳](https://devops.com/author/david-wagner/)