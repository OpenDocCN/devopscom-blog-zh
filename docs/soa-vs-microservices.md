# SOA 与微服务

> 原文：<https://devops.com/soa-vs-microservices/>

有人说微服务架构是 SOA 仍然存在的证明。我认为微服务架构取代 SOA 是因为 SOA 的实现方式和初衷存在缺陷。

在 20 世纪 90 年代中期，实现企业应用程序以取代老化的本土遗留应用程序的投资激增。这些新应用程序管理着围绕会计、供应链、人力资源和制造的复杂活动。它们也很容易与业务的其他方面集成，包括不会消失的现有遗留应用程序以及供客户和内部使用的新兴 web 应用程序。

出于需要，点对点集成的数量有所增加。随着时间的推移，点对点集成的网络变得非常复杂，以至于即使很小的变化也会导致重大的失败。为了解决这个问题，出现了一类软件，通过简化控制平面来简化集成，这些控制平面专注于对端点进行编目、促进连接和整理数据。这些控制平面被称为企业应用集成(EAI)。早期的 EAI 产品并不检查数据或对数据采取行动。

沿着这条线的某个地方，供应商开始意识到还有另一个潜在的问题:旧系统和新系统使用不同的词汇和消息结构。最初，EAI 工具输出的消费者自己进行翻译，但后来供应商看到了增加 EAI 工具功能的机会，使其也成为数据平面。因此，EAI 工具也将处理映射和翻译。

现在，如果您的源系统从不改变，那么充当控制和数据平面的智能中间件的价值似乎既合乎逻辑又有巨大价值。然而，当源系统改变时，由从源到目标的动态路由和映射组成的中间件成为一个相当大的限制。对源代码的任何更改都需要对整个系统进行全面的回归测试，并且您必须希望您有可能作为输入提交的每条消息的每种排列的示例，以确保更改不会引入未来的问题。

作为这个时代的一名集成顾问，我可以证明，由于测试期间没有人想到的消息组合，每周都会出现故障。

那么，这些与 SOA 和微服务有什么关系呢？

我刚刚描述的上述方法是随着作为控制和数据平面的产品演变成企业服务总线(ESB)的。ESB 成为了 SOA 策略的基石，它们共同形成了使遗留系统现代化的策略。因此，最终交付的 SOA 最终成为从遗留数据结构和消息到新指定的业务语言(也称为规范表示)的昂贵映射练习。在某些情况下，这些新的 SOA 服务将通过查询和处理来自多个遗留系统的数据来派生这些新的业务数据结构，而在其他情况下，新的业务逻辑将通过总线扩展可用功能的生态系统来提供。

有了 SOA，规范消息变成了创新的产物，因此最终走向了灭亡。也许这不公平，但是，SOA 从来没有促进遗留系统的持续现代化，使之成为重新平台化和重新开发的服务。它是关于公开记录系统，包括数据和流程，以包含到业务流程中，促进对遗留系统的最小更改，所有这些都通过智能管道来处理。

虽然数字化转型可能是每个企业都在追逐的流行概念，但 SOA 的失败表明，仅仅暴露现有系统不足以成为我们努力成为的敏捷企业。事实上，早在优步和 Airbnb 出现之前，脆弱的、背负着技术债务的、以单一方式开发的记录系统就已经削弱了企业的竞争能力。这些企业的出现只是增加了解决遗留问题的紧迫性。

进入微服务架构。首先，我将重申我最喜欢的 soapbox 主题:将遗留应用放入 Docker 容器本身并不能定义微服务。微服务遵循特定的设计原则。其中一个原则——也是与本次讨论非常相关的一个原则——是智能端点和哑管道。考虑到我上面提到的关于 SOA 的内容，我发现这个设计原则非常有趣。对我来说，这显然是对 SOA 策略的反叛。

此外，我认为微服务从一个稍微不同的角度处理遗留现代化。微服务架构本质上不太关注工具(它们在设计上是多语言的)，而更关注业务领域的上下文绑定。此外，正如有人在 Twitter 上雄辩地指出的(我现在找不到了，所以在这里转述一下)，微服务应该被设计成容易删除，而不会影响系统的运行。我相信这句话说明了一个设计良好的微服务不会与其他服务交织在一起，也不会分享设计的亲密感。

有些人会争论——包括现在的公司——这是 SOA 应该交付的。不幸的是，这并没有实现。所以，这次我们缩小范围。我们交付的不是代表整个业务领域的 SOA 服务，而是代表业务领域子集的更小、更集中的实体。随后，这些服务被设计成更加独立地运行，允许它们更好地与敏捷技术的更广泛使用相结合。

在微服务中，架构敏捷性是创新的产物。最终，速度、成本和质量的提高是微服务在 SOA 失败的地方取得成功的原因。

— [摩根大通](https://devops.com/author/jpmorgenthal/)