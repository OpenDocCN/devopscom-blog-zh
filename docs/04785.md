# 多重云:数据锁定的危险

> 原文:[https://devops.com/multi-cloud-danger-data-lock/](https://devops.com/multi-cloud-danger-data-lock/)

企业在将大量数据转移到云服务提供商如[亚马逊 AWS](https://aws.amazon.com/) 、[微软 Azure](https://azure.microsoft.com/en-us/) 或[谷歌云平台](https://cloud.google.com/)之前，很少考虑云的可移植性问题。他们可能会问关于行业中其他参与者的使用情况(“羊群效应”)以及云服务的可靠性和数据的持久性等问题。企业开始意识到，随着他们将越来越多的数据存储到云上，**导入数据很容易，但导出数据却很困难**。诚然，老练的用户也许能够解决这个问题，但大多数人冒着被云提供商锁定其数据库——皇冠上的宝石——的风险。

云可移植性问题的一个常见解决方案是开发一个[抽象层](https://en.wikipedia.org/wiki/Abstraction_layer)。如果企业希望迁移到新的云服务，在应用程序和云数据服务之间建立一个抽象层有助于最大限度地减少代码重组。一个例子是亚马逊 S3 API:谷歌云框架开发了符合 S3 的 API，使企业可以轻松地迁移他们的应用程序。开源社区也在努力使其无缝化；例如，Python Boto 库在同一抽象层下支持亚马逊 S3 服务和谷歌云存储服务。

然而，虽然抽象层解决了应用程序迁移问题，但是“数据”本身呢？将大量数据从一家云服务提供商迁移到另一家有多容易？让我们就这个问题做一些简单的数学计算。例如，让我们假设您想将 10TB 的桶数据从亚马逊 S3 迁移到谷歌云存储。你认为需要多长时间？答案会让你大吃一惊——根据合理的估计，差不多一个月！一个月内管理数据传输的纯粹运营成本将使两家云提供商的存储和网络带宽费用相形见绌。将亚马逊 S3 存储桶中的内容转移到本地硬盘上，将硬盘运送给谷歌，并要求该公司将硬盘内容上传到谷歌云存储桶中，这可能更便宜。

有人会如何解决多云端数据锁定问题？你会:

*   在多个云上运行应用程序副本并保持数据同步？
*   维护一个云作为主云，其他云作为被动辅助云？
*   信任一个云用于第 0 层应用程序，另一个云用于第 2 层或第 3 层应用程序？

关键问题之一是数据传输时间。我们使用智能变更捕获技术来最大限度地减少通过连接多个云提供商的 WAN 链路发送的数据量。例如，以运行在 AWS S3 的 Apache Cassandra 数据库的版本为例，将该版本存储在谷歌云存储中，并将该版本恢复到运行在微软 Azure 中的 Apache Cassandra 数据库。这是数据保护的未来:它不仅允许您针对用户错误和逻辑损坏进行保护，还为您提供跨云保护，以防止锁定到单个云服务提供商。

## 应用程序恢复管理:多语言持久性的兴起

企业正在使用各种不同的数据存储来捕获各种应用程序及其访问模式的需求。关系型数据存储可能是多方面规范化数据的正确选择，但今天的数据存储必须满足不同程度的访问模式，例如，关系型数据库无法跟上社交媒体流的高容量，同样，NoSQL 数据存储无法在规范化数据集上高效地执行连接。这个术语被称为“多语种”持久性，其中复合应用程序分布在多个数据存储中，用于不同类型的数据和数据操作方法。在早期，数据架构师选择一个关系数据存储，比如 Oracle，然后将应用程序映射到这个数据存储。今天，情况发生了显著的变化:数据架构师首先对数据类型和预期的操作方法进行分类，然后选择合适的数据存储来满足需求。

让我们以一个企业需要识别过去一年的所有客户、他们的购买特征、客户获取方法、社交媒体对购买后体验的评论以及任何支持交互为例。请记住，在今天的信息时代，处理必须是实时的:对于一个企业来说，在负面的社交媒体参考发生几个月后做出反应是非常轻率的。可以想象，为了满足企业的这些基本需求，需要收集和分析具有不同结构程度的多个数据源。使用一种类型的数据库技术无法轻松或经济高效地解决这类问题。尽管一些基本信息是事务性的，可能存储在关系型数据存储中，但其他信息是非关系型的，需要几种不同类型的持久性引擎:静态图像和文本资料的文档存储，地理定位移动客户交互的空间存储，以及用于导出上述多方面数据之间关系的图形存储。

但是数据保护跟上了吗？请记住，数据与数据存储之间复杂的相互依赖关系高度相关。一个数据存储中的逻辑错误可能会传播到其他数据存储，因此恢复必须跨越多语言持久性的整个范围。当今的数据保护高度孤立，恢复仅限于单一类型的数据存储。这显然是不够的！！我们要做的是根据应用程序的需求同步多个数据存储的版本——这是一个应用程序一致的多语言版本。这个版本的主要优点是允许我们恢复整个应用程序，而不是它的子部分。

## 结论

是时候重新思考和重塑数据保护了。随着云成为事实上的首选基础架构，多方面的大数据成为下一代应用程序的标志，企业 IT 世界正在经历巨大的变化。数据保护必须适应这些不断变化的环境，并为企业提供下一代服务。

— [沙拉布·戈亚尔](https://devops.com/author/sgoyal/)