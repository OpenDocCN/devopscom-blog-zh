# 全天开发:大规模开发

> 原文:[https://devops.com/all-day-devops-massive-scale/](https://devops.com/all-day-devops-massive-scale/)

当你有十亿用户时，人们会注意到。这就是我们关于 DevOps 和 Yahoo！开始。对于雅虎的工程师基肖尔·贾勒达和戈帕尔·莫尔来说！，当雅虎出现问题时！佩奇，人们会注意到的。更正:很多人会注意到。

当然，雅虎！和互联网上的所有服务一样，不断改进产品。事实上，它在任何给定的时间都有 100 多次迭代和实验。一些变化带来了新的创新，而另一些则改变了用户体验。

当迭代和实验被提供给对特定用户体验感到舒适的忠实用户时，他们有时会对变化产生自然的抗拒。当变化导致或似乎导致服务中断时，反冲可能会造成严重后果。这些变化导致的频繁反弹被一些雅虎知道了。内部人士称之为“糟糕的岁月”

在最近的[全天 DevOps 会议](http://www.alldaydevops.com/)上，Kishore 和 Gopal 分享了雅虎！转向 DevOps 实践以从“糟糕的岁月”中恢复过来在他们的演示中，“[大规模推出产品:DevOps 方式](https://youtu.be/Y_EPmxYbQks)，”Kishore 说，“DevOps 是关于使用软件消除想法和执行之间的技术、流程和文化障碍。”针对其中每一项，Kishore 提出以下建议:

拥有和卓越的文化:拥有开发中的生命周期，解决根本原因，以产品为荣。

**流程:**设计或设计快速敏捷的流程。工作应该是迭代的，支持学习并提供快速的反馈周期。让机器来搬运重物。

**工具:**用软件解决运营问题。使用自助式、可重用、友好且易于使用的开源工具。

在雅虎！DevOps 实践建立在三个功能支柱之上:**将**产品快速投放市场；**防止**缺陷到达顾客；并且，**迅速修复**生产问题。

![](../Images/0ad9771f2f60641ecad5d7f299b56a8c.png)

谈到快速修复生产问题，Gopal 讨论了弹性。鉴于其用户基础，停机时间(或无停机时间)对雅虎至关重要。挑战是多方面的:

*   分布式多层体系结构
*   数百个子系统
*   复杂的请求流
*   变化是唯一不变的

虽然这可能违反直觉，但 Gopal 证明了组合系统比最弱的子系统更弱。

![](../Images/4d425adb382cdb16dc3dcbd17680d6cf.png)

为了确保最佳正常运行时间，Gopal 表示我们需要:

1.  分析各种故障类型
2.  了解它们的比率和影响程度
3.  计划涵盖所有故障类型
4.  进行消防演习——测试、测试、测试。

具体来说，雅虎如何？确保高可用性？它在服务堆栈中维护四层弹性:

![](../Images/ce4d6906c7fc41655c9bbce6fe8ba9ab.png)

**推测性重试**–在超过预定义的延迟后再次提交页面。这解决了长尾延迟和间歇性故障。

**每模块回退**–将非个性化模块缓存到前端服务器，并为故障模块提供缓存内容。您需要确保缓存经常刷新，实现缓存数据的强验证，并在 TTL 较高时检查向后兼容性。

**全页面故障保护**–缓存整个页面，不含个性化数据和广告，交互最少。当不能提供整个页面时使用。雅虎！使用自动扩展的 AWS 服务器来服务这些页面，因此其服务器不会受到负面影响。

Failwhale 页面—“我们马上回来”页面让用户知道，是的，你的互联网在工作，但我们的服务暂时没有。请再试一次。显然，这是最后的手段，但也是必要的手段。

这里有很多，你不需要像雅虎那样大规模的服务。从这次经历中获益。您可以深入 Kishore 和 Gopal 的[全天 DevOps 会议环节](https://youtu.be/Y_EPmxYbQks)(仅 30 分钟)，了解他们从 DevOps 前线学到的更多知识。来自[全天 DevOps 会议](http://www.alldaydevops.com/)的其他 56 个演示文稿也可以在网上免费下载[点击这里](http://www.sonatype.com/all-day-devops-on-demand?__hstc=31049440.fff56b041308a66b74cf93c40ea2030a.1456347809383.1485535294436.1485539851201.581&__hssc=31049440.3.1485539851201&__hsfp=1394008546)。

本博客系列回顾了 11 月全天 DevOps 会议的会议，该会议有超过 13，500 名注册与会者参加。上周我讨论了，“ [Docker，新的普通](http://blog.sonatype.com/docker-devops-new-ordinary)”下周，寻找来自 Akash Mahajan 的“使用 Ansible 进行系统强化”。

— [德里克·威克斯](https://devops.com/author/derek-e-weeks/)