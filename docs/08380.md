# 基础设施即代码安全性将提高您的云安全性

> 原文:[https://devo PS . com/shift-pipeline-security-left-and-left-again/](https://devops.com/shifting-pipeline-security-left-and-left-again/)

迁移到云创造了一个巨大的机会来获得正确的安全性并降低数据泄露的风险。大多数组织通过“向左转移安全性”来开始他们的云安全工作，从而解决 CI/CD 渠道中的问题。在将映像投入生产之前，修复已知的漏洞和有风险的配置是有意义的。但是，当您建立云基础架构时，有机会将安全性进一步左移，以降低风险。[基础设施即代码](https://devops.com/?s=infrastructure-as-code) (IaC)安全性允许您在配置云基础设施时定义安全控制。

## 开始云计算之旅

在我们深入 IaC 安全性之前，让我们来讨论一下平台团队在他们的云之旅中为什么要部署基础设施即代码。大多数组织尚未解决 IaC 问题。他们从试验云配置开始他们的旅程，直到他们定义了一个为他们的团队工作的堆栈。在这个早期阶段，应用程序团队可能会定义他们自己的云堆栈。他们手动配置基础架构或使用脚本。配置可能没有跨团队标准化。

## 基础设施的标准化节省了时间

虽然在旅程的早期进行实验是合理的，但是基础设施的标准化可以节省时间。云服务与在内部运行的应用程序没有什么不同。当您的团队使用不同版本的工具时，启动并运行应用程序可能是一场噩梦。服务之间的互操作性很有挑战性，感觉就像你在一遍又一遍地解决同一个问题的不同版本。

成熟的云平台团队通常更喜欢为开发团队创建一个带有一组基线服务的“黄金映像”。他们可能会创建一个包含一些标准选项的菜单来满足不同团队的需求。因为它们是标准化的，平台团队可以花时间来验证它们的互操作性和安全性。例如，这些黄金映像将定期进行漏洞扫描和更新，以确保它们符合内部安全标准和任何相关的法规要求。

![IaC security cloud](../Images/1ce4a7e9cdceadd2b9a4f78a1f2046fc.png)

## 自动化基础架构部署减少了错误

为每个团队手动配置云中的环境非常繁琐。一旦这些配置实现了标准化，就可以使用模板将云基础架构配置为代码。声明性方法定义了期望的最终状态，而命令性方法定义了实现最终状态的详细步骤。模板通常存储在 Git 存储库中，并受版本控制。自动化基础架构的配置不仅节省了时间，还减少了可能中断运营的错误。

## IaC 安全部门将安全部门进一步左移

一旦有了定义基础设施的模板，标准化服务即代码的权限和访问权就是合乎逻辑的下一步。安全团队通常定义访问云服务的护栏或策略。这些策略可以随基础设施配置一起定义为代码。这种 IaC 安全性是进一步的“左移”,允许将安全性嵌入到基础架构中，甚至在部署应用程序之前。实现策略即代码可以最大限度地减少在配置安全服务时出现人为错误的机会。通过共同定义这些策略和实施指南，开发运维团队和安全团队可以建立一种可信任的合作关系。

尽管一些组织可能会从实施 IaC 安全开始他们的旅程，但对于大多数组织来说，这发生在云之旅的后期。与确保您采用 DevSecOps 方法并在每个阶段嵌入安全性来管理风险相比，顺序并不重要。确保将以下领域作为您的云和容器安全计划的一部分:

### 持续检查云权限和配置

即使您有 IaC 模板，您也需要一个程序来定期盘点所有云资产，并确认权限和配置。[互联网安全中心(CIS)基准](https://www.cisecurity.org/cis-benchmarks/)通常用于检查密码和访问权限。除了在云服务上实施这些安全性最佳实践，持续检查权限更改和可疑活动也至关重要。云供应商捕获他们所有服务的日志，您的安全工具应该使用这些日志持续监控和警告。

### 扫描图像中的漏洞和危险配置

扫描漏洞并确保配置使用最佳实践允许您将安全性转移到开发管道中。扫描您拥有映像的任何地方—包括注册表、管道内，并检查为生产中运行的映像识别的新漏洞。确保扫描主机和容器。定义扫描策略并在开发过程中强制执行，为开发团队创建了防护栏，并阐明了期望。大多数法规遵从性标准也有图像扫描要求。

### 检测威胁并响应警报

预防是根本，但必须辅之以威胁检测和应对。对意外行为发出警报可以识别威胁的存在。最初，团队可能使用现成的检测规则作为开始的方式，然后随着时间的推移自定义规则。根据 dockerfile 最佳实践检查配置是一个很好的开始方式。在 Kubernetes 环境中，对容器的过度许可的访问权限很常见，应该只在需要时才允许。

随着您的团队开发更多关于容器和 Kubernetes 的专业知识，您也可以实现零信任网络安全策略来阻止 pod、服务和应用程序之间的意外通信。

一些 DevOps 团队处理警报的分类，因为他们可以快速确定问题是配置问题还是妥协的标志。团队通常将检测规则映射到 ATT & CK 框架，允许他们的安全团队在整个环境中一致地管理警报。对于任何有效响应安全警报的团队来说，捕获事件发生之前、期间和之后的详细记录是非常重要的。这种可见性对于容器来说尤其具有挑战性，但这是至关重要的，因为容器的寿命很短。2021 年 Sysdig 集装箱安全和使用报告显示，大约一半的集装箱寿命不到五分钟。

### 符合监管标准

遵守监管标准可能会很痛苦。一些标准是在考虑云计算的情况下编写的，如 NIST 800-53 和 SOC2，而另一些则不是。有了这些更广泛的标准，理解与容器和云相关的控制是很重要的。

当您考虑您的法规遵从性计划时，请积极主动—不要等到准备好投入生产时才行动。尽早开始，让您的合规团队参与进来，帮助他们跟上进度。您的角色是使用来自您的安全平台的文档随时提供合规性证据以通过审核。

## 获得正确的云和容器安全性

向云的迁移为获得正确的安全性和降低风险创造了巨大的机会。事实上，物理安全和大部分操作都委托给了云供应商，这使得安全和开发团队可以专注于共享安全模型中更狭窄的范围。通过采用安全的 DevOps 方法并将安全性融入应用生命周期的每个阶段，您的团队可以自信而安全地运行云和容器。