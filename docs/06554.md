# IaC 和 Kubernetes:天生一对

> 原文:[https://devops.com/iac-and-kubernetes-a-natural-pairing/](https://devops.com/iac-and-kubernetes-a-natural-pairing/)

***使用 IaC 和 Kubernetes 有助于标准化 Kubernetes 集群配置和管理附加组件***

基础设施即代码(IaC)是使用配置语言供应和管理基础设施的能力。它提供了可重复性、透明性和现代软件开发实践在基础设施管理中的应用，包括网络、负载平衡器、虚拟机、Kubernetes 集群和监控。

IaC 有助于减少错误和配置偏差，同时允许工程师将时间花在更高价值的任务上。IaC 定义了基础设施的最终状态应该是什么样子，而不是定义要执行的流程。

## 那么为什么不是所有的公司都使用 IaC 呢？

公司可能还没有接受 IaC 有三个主要原因。

### *许多行业和工程师尚未完全接受或适应基础设施 API 和代码的范式转变*

我们很多人认为基础设施是可以触摸的，包括物理安装和布线。直到最近几年，企业 It 行业才开始采用 API，允许在没有实体的情况下按需借用和配置基础架构。工程师擅长使用久经考验、久经沙场的流程来支撑基础设施。增量学习和将 IaC 整合到过程和文化中有助于消化一个令人生畏和具有挑战性的项目。

各行各业都在努力调整安全控制和法规，以在不损害隐私、安全和安保高标准的情况下融入云和自动化的机遇。工程师使用 IaC 来提高他们自己的效率，可以帮助在更广泛的范围内支持它的使用。这种成功的一个例子是 18F 办公室，它通过技术帮助改善政府为公众服务的方式。

### *IaC 可能感觉失去了安全感或控制力*

提高对基础架构如何配置和为什么配置的认识可能会引发问题或反馈，这些问题或反馈最初可能会让基础架构决策者感到不舒服。对于那些总是按下按钮的工程师来说，其他人可以轻易改变基础设施可能会感到危险或贬值。

IaC 为改善单点故障和知识瓶颈提供了机会，而不会危及必要的控制。访问基础架构代码和 IaC 工具仍然可以匹配组织结构、文化和批准流程。基础设施工程师仍然是其发展和成功的组成部分，他们更容易处理下一级的问题解决方案。

### *“我们动作太快，没有时间去适应 IaC，我们点击用户界面的速度也很快”*

IaC 实现的可重复性意味着不需要保留手工创建的基础架构，因为下个月可能需要它，并且可以创建并行基础架构进行测试，明天就销毁。开始使用 IaC 做一些小事情，比如启动临时虚拟机，然后创建一个受限访问服务帐户，其他人可以在需要该虚拟机时使用 IaC。您的 IaC 效率将随着您组织的 IaC 知识和代码的增加而增加。

## Kubernetes 和 IaC

将 IaC 与 Kubernetes 一起使用有助于标准化 Kubernetes 集群配置和管理附加组件。基础设施现在可以被版本化并提交给 Git 存储库，当公司需要扩展到新的区域或云时，它可以更容易地在其他地方“站立”。IaC 的优势非常广泛，包括:

*   **减少人为错误，提高可预测性**:在不影响生产的情况下创建新的测试环境，并使用代码审查流程在多个环境中进行更改。对细节的专注和关注较少受到重复性手工工作的影响。
*   **一致性**:IaC 与 Kubernetes 的可重复性允许快速创建一致的基础设施。这可以腾出时间来应对其他挑战。
*   **改进的变更跟踪和可审计性**:当基础设施在版本化的存储库中(如 Git)表示时，对 Git 存储库的提交可以反映谁、何时以及为什么进行了变更。代码记录了环境是如何建立和发展的。
*   **更快的恢复速度**:应用程序的可靠性受到转向能力和重新部署速度的影响。作为代码的基础设施可以帮助您了解恢复过程是什么样的，并更经常地实践该过程。

## 开始使用 IaC 和 Kubernetes

随着公司进入容器、云原生应用和 Kubernetes 的世界，IaC 将帮助团队提高应用的可靠性和稳定性，简化开发和运营，并支持更好的用户体验。

在 Kubernetes 环境中，使用 IaC 实现可靠性变得更加容易，因为团队正在部署标准配置。DevOps 团队可以使用 IaC 来适应容器和 Kubernetes pods 的短暂特性，并避免单点故障。