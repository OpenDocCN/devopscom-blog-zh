# 清理那些永远失败的测试

> 原文:[https://devops.com/clean-ever-fail-tests/](https://devops.com/clean-ever-fail-tests/)

DevOps 的一个要点是精简开发，专注于重要的事情。没有提升到足够高的重要性级别的事情最终会被归入 backlog 类别，它们的测试通常会被禁用，或者在 CI/CD 工具中被标记为“忽略结果”。

对于 CI/CD，这是向前迈进的良好一步，因为您有一个尚未完成的事情的列表，即使该列表目前不是验证的一部分。问题是，它会造成我们采用 CI/CD 来消除的那种弊端。许多组织将这些测试无限期地放在队列中，假设当优先级允许有时间解决手头的问题时，它们会派上用场。

## 这并不简单

当然，问题是，其中一些测试永远不会——我是说永远不会——得到解决。这些都是蹩脚的，阻碍了生产力，并使构建系统变得混乱。一个给定的 bug 修复/特性请求将永远不会被实现，这可能是一个公司的决定，但更多的情况是，优先级将永远不会被处理，因为总是有新的特性、更重要的 bug 等等。

纯粹主义者在阅读本文时已经开始冒汗了，因为目标应该是解决系统中的每一个测试，解决系统中的每一个 bug，并实现每一个变更请求，使其足够远，以便为其编写测试。但是我们并不是生活在一个纯粹的世界里。我们从来没有。在我从事高科技的时候，我和各种各样的纯粹主义者争论过，因为现实并不纯粹。它是中断的、丑陋的和优先的。

所以我们有积压。我们有一些积压的项目永远不会被解决。

## 为什么旧测试很重要

对于积压了几个 sprints 以上的测试，真正的问题当然是不断变化的代码库。举个抽象的例子，你有一个对话框要求用户输入一些信息。测试假定输入值是在编写测试时设计的。六个月后，一个更高优先级的测试通过了，它改变了对话框上可用的字段，以及收集的数据。最初的测试被标记为忽略，所以当它失败时不会影响事情。但现在测试无效。还在你体内。将这两个请求乘以数百甚至数千，您就有了 DevOps 旨在解决的相同类型的垃圾，只不过现在它是 CI/CD 系统的一部分。

## 清理、承认并继续前进

那么，一个高效的团队应该做些什么呢？坦率地讨论你的待办事项，以及哪些将会/不会被实现。业务领导可以同意一些项目永远不会提升到正确的优先级，并且您可以识别出在积压工作中已经过时的测试。

建立一个偶尔评审它们的过程，当假设改变时，与更新测试的过程并行运行——只是不要那么频繁。

然后记录那些永远不会成功的测试，并删除它们。它们不属于版本控制，甚至不属于文档，因为最终不可避免地，它们将是系统的不准确表示。这可能会造成混乱。

## 当然是 DevOps

这是 DevOps 一开始所做的一切的延伸:消除待办事项列表上的浪费活动和非生产性项目。你优先考虑一次，然后用刀切割，这是同样的过程，适用于 CI/CD。这是必要的。

一个微小的变化，另一组选择并不比你面对的其他选择更难，代码库(特别是测试库)更干净。

给你更多时间继续摇摆。

唐·麦克维蒂