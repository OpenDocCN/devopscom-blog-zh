# 影子代码的风险

> 原文：<https://devops.com/the-risks-of-shadow-code/>

在经历了过去两年的新冠肺炎疫情之后，随着经济艰难复苏，我们都已经对供应链有所了解——以及当供应链崩溃时会发生什么。但是许多人没有意识到，现代网站也有数字供应链，第三方供应链可能会受到多种方式的损害。就像物理供应链的中断会影响定价、可用性和库存等事情一样，今天网站上的数字供应链在网站性能、客户体验和整体分析等关键领域发挥着重要作用。因此，当今的企业需要意识到数字供应链如何带来巨大的风险，尤其是当第三方不遵守他们自己的一套严格的安全性和合规性标准时。

根据 [Source Defense](https://sourcedefense.com/) 最近的一项研究，收集和使用敏感数据的组织——如医疗保健、金融、旅游和在线零售商——需要加强对第三方风险管理的关注。由于 GDPR 和 PCS DSS 之类的指令，这些公司现在受到合规性要求的约束，以确保避免和/或减轻其客户端威胁。这项工作不仅意味着认识到如何保护私人数据，还意味着了解现代网站上被称为“影子代码”的恶意代码的属性，以及它如何从动态和不可预测的脚本中产生风险。如今，处理数据的公司需要了解影子代码影响其安全性的不同方式，以及其 DevOps 团队的生产力和完整性。

## 第三方脚本和影子代码

影子代码是指未经网站 IT 部门适当审查就嵌入应用程序的代码。这种恶意代码在云环境中盛行，主要是因为它允许通过 CI/CD 自动化轻松部署。

当网页调用第三方脚本时，它直接从远程服务器加载到浏览器中，这意味着防火墙和网络监控工具等一般安全控制被绕过。如果这些脚本中有一个被坏人破坏了，影子代码就会被嵌入其中。有时这些脚本包括没有经过很好测试的开源软件——或者根本没有测试过。其他时候，代码可能来自隐藏恶意代码的组织的另一层。

影子代码带来了一系列威胁机会，包括通过数字供应链合作伙伴发起攻击的能力。当这些被入侵的脚本被用于窃取数据、重定向 web 流量或任何其他恶意活动时，几乎在每个收集数据或进行数字交易的行业中，都会创建一条进入数千个不同网站的清晰路径。当带有影子代码的第三方脚本进入系统时，它能够:

*   记录击键
*   将访问者重定向到恶意网站
*   监控点击并跟踪网站活动
*   更改网站上的内容，包括图像和文本
*   窃取凭证，如个人登录和社会安全号码

正如我们所知，这些数字活动可能会导致严重后果，如数据泄露、欺诈、盗窃、违规、名誉损失和巨额罚款。尽管代码评审可以提供一些软件质量保证，但是这个过程对于影子代码是无效的，主要是因为这些脚本经常被第三方修改。当威胁被低估且无人关注时，这些恶意脚本有可能渗透到公司网络财产的每个领域。

因为使用这些类型的第三方脚本的好处是相当可观的，所以很难找到一个现代企业或机构不依赖至少几个脚本来运行 web 应用程序。事实上，如今许多企业和政府机构都在其网站的每个页面上运行第三方脚本。尽管这些组织在技术上对这种有害的代码没有责任，但监管者可以(也确实)让网络财产所有者对他们网站上的任何数字犯罪负责。

## DevOps 团队和影子代码

网站可以为访问者提供丰富的体验，这在很大程度上是因为开发人员使用客户端 JavaScript 来改善这些数字财产的外观和感觉——所有这些都不需要持续的维护。今天，DevOps 专业人员可以从许多不同的来源访问这些免费和低成本脚本的庞大库，如联合编码组、开源组织、社交媒体公司、网络分析公司、内容交付网络等。

但事实是，DevOps 团队访问的代码库并不总是安全或可信的。考虑到这些包经常包含来自第四方和第五方的代码，DevOps 人员面临着不可避免的代码被感染的可能性——很难识别，使用起来也很危险。事实上，源代码防御报告显示，平均每四个脚本中就有一个代表第四方或第五方代码。 因为开发人员倾向于关注保持他们的代码尽可能的更新和有能力，他们经常从他们的存储库中提取动态库。如果有一个 CI/CD 过程正在发生，DevOps 团队将从该点拉出他们的库。这就是影子代码为开发人员引入新漏洞的地方。

影子代码也危及 DevOps 工作的完整性。大多数开发人员对他们所做的事情感到自豪，对创建不安全或低质量的代码不感兴趣——至少不是有意的。鉴于速度、生产力和持续创新都是 DevOps 团队的业务目标，认识到影子代码对于那些从事构建安全和高质量软件的人来说是多么成问题是很重要的。