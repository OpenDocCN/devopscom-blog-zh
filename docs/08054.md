# 运行时应用程序自我保护(RASP)没有解决的问题

> 原文:[https://devo PS . com/what-runtime-application-self-protection-rasp-donts-solve/](https://devops.com/what-runtime-application-self-protection-rasp-doesnt-solve/)

RASP，即运行时应用程序自我保护，是一种现代安全技术，可以保护 web 应用程序在运行时免受攻击。该技术是对专注于外围的防御系统的重要补充，但[rasp](https://devops.com/?s=RASP)也有弱点，可以引入自己的漏洞。

RASP 在防范现代安全威胁方面的优势和劣势是什么？是否有更好的解决方案，可以更深入地洞察攻击并检测可疑行为？

## 对 RASP 的深入研究

Gartner 将 [RASP](https://www.gartner.com/en/information-technology/glossary/runtime-application-self-protection-rasp) 定义为“一种内置或链接到应用程序或应用程序运行时环境中的安全技术，能够控制应用程序的执行并检测和防止实时攻击。”许多 IT 组织已经部署了它们，通常与其他安全解决方案结合使用。

理想的锉刀承诺:

*   深入了解应用程序的代码级可见性
*   被动和主动事件响应功能，如监控/警报和阻止模式
*   记录、警告、质询或阻止恶意行为的可配置选项
*   支持多种语言和执行平台
*   无需手动调谐的自主操作
*   涵盖广泛的漏洞，包括 [OWASP 十大漏洞](https://owasp.org/www-project-top-ten/)
*   与安全软件开发生命周期(SSDLC)和监控工具集成。

RASP 填补了像 Web 应用程序防火墙(WAF)这样的外围防御模型留下的安全漏洞，它保护传统和现代应用程序。基于这些承诺，RASP 可能看起来像是您的安全堆栈中必要的缺失部分。然而，在实践中，它也有弱点。让我们深入研究 RASP，了解它的优点和缺点。

## 锉刀的优点

#### **观察而不是预测**

与 WAF 类似，运行时应用程序自我保护通过阻止恶意行为来工作，但这样做不需要大量的预设规则和调整。RASP 不是构建一个训练好的模型或预测行为，而是在运行时观察应用程序，看那些动作是否被实际执行。例如，发生了对数据库的请求调用，执行了 shell 命令，或者打开了文件。

#### **以开发运维为中心的攻击可见性，具有更好的 SSDLC 集成**

RASP 提供了应用程序如何被攻击的可见性，提供了更好的 intel，并提醒安全人员和开发人员注意确切的易受攻击代码。开发人员可以使用这些信息来修改代码库并消除安全漏洞。RASPs 还可以提供直接与应用程序开发生命周期集成的选项，根据在生产环境中观察到的攻击来查明易受攻击的代码。

#### 不需要培训

一个理想的锉刀不需要被教导什么是不良行为。这是因为它与应用程序堆栈紧密相关，所以知道应用程序应该做什么，不应该做什么。当应用程序的行为改变时，RASP 可以适应，因为安全性是基于应用程序的，而不是基于一组预定义的规则和有根据的猜测。

#### 提供修复漏洞的时间

程序员负责开发和发布新的应用程序和功能，并在随后发现漏洞和错误时开发更新和补丁。组织可能需要几个月的时间来应用补丁，这为黑客创造了可乘之机。因为 RASP 可以抵御外来攻击，所以它为工程团队提供了修复漏洞的时间，使他们在危机期间没有工作压力。它与 WAFs 的虚拟修补同义。

#### 云不可知

RASP 保护设计植根于现代软件工程技术，如工具、动态挂钩和安全 SDK。它通过在现有应用程序代码中植入传感器来实时监控关键执行点。利用这些技术，RASPs 成为应用程序的一部分，使它们不受部署环境的影响。RASPs 可能不需要网络调用，并且可以在任何部署架构中工作，包括内部部署、云以及容器。

## 锉刀缺点

#### **受限环境**

纯粹从技术角度来看，由于 RASP 位于应用程序框架内，它可能看起来是 WAF 等外围防御解决方案的更智能的替代方案。然而，实际上，没有一个应用程序是独立的；它们与大量其他服务和组件进行交互。考虑到每个应用程序模块可以部署在不同的端点，这进一步限制了 RASP 的可见性和功能。

#### 用例滥用

我们经常听说大型公司遭到现代应用程序攻击，如[破坏对象级身份验证(BOLA)](https://github.com/OWASP/API-Security/blob/master/2019/en/src/0xa1-broken-object-level-authorization.md) 。攻击者在 API 调用中用属于另一个用户的资源 ID 替换他们的资源 ID。缺少适当的授权检查使得攻击者能够访问指定的资源，从而导致 BOLA。由于输入与应用程序之前接收到的保持一致，RASP 没有理由进行检查，因此会让它通过。攻击者可以滥用类似的用例，如[中断功能级授权(BFLA)](https://github.com/OWASP/API-Security/blob/master/2019/en/src/0xa5-broken-function-level-authorization.md) ，而不会让 RASP 怀疑这种入侵。防范这种攻击需要从应用程序中构建更广泛的业务环境，而这正是 RASPs 所缺乏的。

| Robby 获取其配置文件的正常 API 请求 | BOLA 攻击:Robby 在
请求中更改了他的用户 id，并访问了艾娃的个人资料 |
| <code>
REQUEST
===============
GET /customer/
12548
/profile
Host: shop.store
Cookie: session=
5015ee5d-6133-cab4874b
Accept: application/jsonRESPONSE
===============
HTTP/1.1 200 OKContent-Type: application/json{“id”:
12548"名字":"罗比"“lName”: “Saxton”【电话】:【202-555-0128】“社会安全号码”:“987-65-4325”“地址”:“克鲁米特巷 3454 号，东北奥马哈68114"
} | <code>
REQUEST
===============
GET /customer/
12549
/profile
Host: shop.store
Cookie: session=
5015ee5d-6133-cab4874b
Accept: application/jsonRESPONSE
===============
HTTP/1.1 200 OKContent-Type: application/json{“id”:
12549“fName”: “Ava”“名字”:“玫瑰”【电话】:【340-5556-577】“社会安全号码”:“449-26-2109”【地址】:“戈登街 4702 号加利福尼亚州奇诺市街道91710"
} |

#### **分布式保护缺失**

由于 RASP 只对当前的应用程序上下文可见，所以额外的应用程序级分布式拒绝服务和 Bot 保护不能被 RASP 有效地解决。外围防御解决方案可以完全隔离流量，吸收流量，甚至在攻击攻击应用程序堆栈之前就采取防御措施。

#### 侵入式部署

RASP 需要一个侵入式的部署模型，并且高度依赖于应用程序所使用的平台和代码库。它必须与应用程序堆栈中的应用程序一起部署。一些组织可能不愿意为关键服务部署 RASP，因此需要在增加成本和维护的其他安全解决方案上投入更多。

#### 部署挑战

从概念上讲，RASP 可以在应用程序堆栈中提供更深入的保护。但是在管理和更新部署在每个端点的 RASP 组件时存在实际的挑战。RASP 不仅增加了应用程序执行的额外性能开销，还增加了部署、调优、监控自身和运行时环境所需的专门工作。为了确定保护所有资产的适当位置，RASPs 可能需要您收集有关应用程序的内部信息并跟踪数据流。

#### 意想不到的后果

虽然 RASP 的目标是崇高的，但它的部署可能会产生意想不到的后果，从而产生痛点。例如，情况可能需要在最后一刻重写软件执行，从支持/事件响应的角度引入了风险，特别是当应用程序被模块化并由分布式团队支持时。

#### 性能下降和对服务水平协议的影响

在当今的高性能环境中，可用性预计至少为四个 9，宕机可能会严重影响 SLA，导致收入损失和公司品牌受损。即使在监控模式下，RASPs 也可能影响应用程序的功能，因为它们覆盖了现有的基本库函数。由于 RASP 不了解业务上下文，它可能会预测一个完全有效的用例是恶意的。允许 RASP 在受到攻击时停止生产中的代码运行可能会为有效的(和自我施加的)拒绝服务(DoS)引擎铺平道路。

#### **过分依赖**

RASP 应该被认为是另一个控制层，但是人类的行为会导致过度依赖 RASP 来保护应用程序。这种行为会产生大量漏洞，攻击者可以结合其他技术来利用这些漏洞。对于内部开发的专有库，RASP 工具仍然不是替代品。安全软件开发生命周期需要遵循其他正式方法，如源代码审查和自动化工具，如静态应用程序安全测试和动态安全应用程序测试，以识别和修复源代码和应用程序中的漏洞。

## 你值得更好的

RASP 不是一种即插即用的技术；它需要对现有应用程序进行完整的验证周期，以确保功能和性能不会受到负面影响。RASP 弥补了某些领域的不足。

应用程序安全领域需要一种更好的解决方案，能够提供对攻击的更深入了解，并检测异常行为。Traceable 通过将分布式跟踪与智能分析相结合来提供这种混合方法，以构建您的微服务的完整画面并保护它们。不要只覆盖你申请的一部分；捍卫这一切。
‍

如果这听起来像是检测和处理现代安全威胁的聪明方法，那么我们应该谈谈。[观看可追溯产品的演示。](https://www.traceable.ai/view-traceable-demo)