# 合并机密管理和配置

> 原文：<https://devops.com/merging-secrets-management-and-configuration/>

刚刚获得 525 万美元资金的 [CloudTruth](https://cloudtruth.com/) 首席执行官 Greg Arnette 在这一集的 View With Vizard 中与 Mike Vizard 谈论为什么配置和[秘密管理需要融合](https://devops.com/?s=secrets+management)。下面是视频，后面是对话的文字记录。

[https://player.vimeo.com/video/578109256](https://player.vimeo.com/video/578109256)

播音员:这是数字无政府主义者。

迈克·维扎德:谢谢你扔过来。我们和 Greg Arnette 在一起，他是 CloudTruth 的首席执行官，他们刚刚筹集了 525 万美元来帮助我们解决这些似乎困扰我们的配置问题。格雷格，欢迎来到节目。

格雷格·阿内特:谢谢。很高兴来到这里，感谢有机会向观众介绍 CloudTruth。

Mike Vizard:那么，配置问题是什么，为什么它似乎不想消失？它已经存在了一段时间，情况似乎变得越来越糟，对此该怎么办呢？

格雷格·阿内特:没错。这与这家公司的创立历史息息相关。我和我的联合创始人都是几家基于云的 SaaS 公司的前 CTO 和 DevOps 负责人，我们看到我们的 DevOps 团队正在继续构建内部工具来解决围绕配置蔓延和复杂性的问题。这些工具在可靠的部署、良好的运行时间、良好的安全性方面往往是薄弱环节，而且基本上会降低团队的速度。

因此，这种配置蔓延的历史以及我们所看到的挑战是由一些宏观趋势推动的——首先，Kubernetes 的快速崛起；每个人都想赶上库伯内特的潮流。这给配置管理带来了新的复杂性，新的工具集还没有被开发运维团队很好地采用。另一个趋势是将单片电路分解为微服务，这增加了许多新的配置复杂性。此外，还有关于调配基础架构、配置应用程序和管理机密的传统需求，这些都是关于配置管理的遗留挑战。随着云变得越来越成熟，功能越来越多，配置不是越来越容易，而是越来越困难。

因此，CloudTruth 可以解决这些问题。在我们的产品市场适应性研究中，我采访了 500 多名云和 DevOps 领导者，了解他们在管理配置方面面临的挑战，我们听说，在如何配置系统以及为什么以某种方式配置系统方面，这种过度依赖部落知识的做法只存在于关键团队成员的头脑中，对于向前发展或加入新成员来说，这不是一个非常持久的策略。因此，CloudTruth 的一个元素提供了围绕配置设置和上下文的协作和共享，以帮助减少这种需求或认知负载的负担，从而跟踪事物是如何配置的，数据在哪里，我如何更改它，最近更改了什么—诸如此类的事情。

Mike Vizard:在这个过程中，你们还在机密管理领域收购了一家公司，那么配置和机密管理在哪里融合，我们如何看待这个问题？

格雷格·阿内特:这是个很好的问题。因此，我们收购了 Tuono，我们很高兴能够引入 Tuono 团队，包括首席技术官 Jesse St. Laurent，他将加入我们，成为我们的首席产品官。吉姆·金、迈克·希利、迈克·斯塔克都加入了我们，他们是 Tuono 的创始工程师。

我们所做的是，我们采用了 Tuono secret 管理引擎，它是云原生的，我们现在将它包含在 CloudTruth 平台中，从而完善了我们的产品。因此，虽然 CloudTruth 也是一个配置数据中心，用于同步来自所有这些多种工具的配置设置，但它本身也是一个参数存储和秘密存储，如果客户在其环境中还没有现有的参数存储或秘密存储，他们可以使用它。

Mike Vizard:在这种情况下，云原生是什么意思？因为有人会说，你知道，它在云端运行；其他人会说它只在 Kubernetes 上运行，它针对微服务和容器进行了优化。或者，是否存在某种中间立场，我们如何看待云原生——我们在什么环境下使用这个短语？

Greg Arnette:是的，当我们使用 cloud native 时，我们指的是作为亚马逊、Azure 和谷歌核心服务的一部分提供的功能。举个例子，亚马逊自己提供了一个参数商店，他们称之为 AWS 参数商店。Google 和 Azure 提供了相同的内部功能。客户也可以带来他们自己的参数存储，比如在云上运行控制台之类的东西，或者有时将 Vault 用作通用参数存储。

因此，云原生产品，如 AWS 参数存储、Secret Manager 和其他云上的等效产品，是客户可以使用的产品，它们有不同的价位。我们为存储在所有这些不同系统中的所有配置数据提供了一个管理层、可见性和可观察性。

Mike Vizard:当你谈到统一配置时，我们是在取代 Terraform 和 CloudFormation，还是只是在它们周围找到某种抽象层，使整个过程更容易管理？给我介绍一下。

格雷格·阿内特:是的，你知道，我们不会取代地形或云的形成。我们旨在与客户的现有投资及其配置工具共存。因此，无论是 Terraform、CloudFormation、Pulumi 等配置工具，还是 Ansible、Puppet、Chef、Saltstack 等应用配置工具，还是 Vault 等秘密工具或这些功能的云原生版本。我们共存并成为这些不同工具的元数据包装器。

现在，如果客户没有这些功能，我们的平台中有一些功能可以填补空白，但越来越多的客户已经有了这些系统。他们并不打算推倒重来，而是希望解决配置蔓延带来的这些问题，因为配置蔓延会导致错误配置，从而导致计划外停机或安全事故。

Mike Vizard:我们一直在谈论 DevOps 和 DevSecOps，我们的想法一直是将 IT 环境的更多责任转移给开发人员。有时他们喜欢那样，有时不喜欢。

但我想知道，我们是不是正在接近某种担忧，或者可能是一种反弹，人们会说，“嘿，你知道吗？这不是真的工作。我们有所有这些错误的配置，我们可能运行得更快，但事情不太安全，我们比以往任何时候都有更多的风险。”那么，有没有一个平衡需要打破，或者你对我们在这个旅程中的位置有什么感觉？

格雷格·阿内特:这是一个非常有趣的问题。这是我们在与客户受众的外联中经常听到的内容，即他们采用左移或 GitOps 类型的操作原则的过程是什么样子。我们在数百次采访中发现了许多模式。具体来说，大多数团队确实希望给予开发人员更多自己做事的能力，并减轻运营团队的负担，但他们仍然希望运营或开发团队有总体的判断，并强制实施由安全和法规遵从性团队以及其他决定最佳实践的团队设置的防护栏。

所以，有了 CloudTruth，我们有点有目的地为两种受众服务。您拥有 DevOps 想要的集中控制和可见性。他们想要建立和实施锁定，实施默认设置，这些设置只能通过权限或工作流中允许的覆盖来覆盖。但是，您还为核心开发人员提供了管理他们自己环境的配置的能力，并提供了可以在更大范围内被系统采用的配置更改建议。

所以，我们服务于今天存在的二元性。我们将让客户决定他们最终在何处发展左移原则并朝那个方向前进。但我们看到人们对此很感兴趣，这有助于减少开发运维专业人员的认知负荷和环境转换。因为很多时候，他们被其他人和其他开发团队所困扰，比如，“这个 Redis 集群的设置是什么？为什么我们的 Mongo 是这样配置的？我如何调整我的弹性搜索测试集群来匹配生产？”

这些信息都可以在 CloudTruth 平台上自助服务和查找。我们基于角色的访问控制许可系统允许对适当区域进行只读、只读和读/写访问，然后开发运维团队可以将生产系统与有机会更改这些设置的其他人隔离开来。

迈克·维扎德:嗯。在我们前进的过程中，安全团队的角色是什么？感觉就像，如果我们把所有事情都交给开发者，那些家伙在做什么？

格雷格·阿内特:他们仍然需要确保没有坏信息进入，没有好信息离开。因此，我们提供了许多对安全团队有帮助的配置数据视图。首先，就 SOC 2 和其他要求的合规性管理报告以及跟踪变化而言，最近发生了哪些变化。在动态环境中，这真的很难，尤其是基于云的环境，在这种环境中，微服务会左闪右闪，忽上忽下。在本地世界流行的旧的传统 CMDBs 并不真正适合我们使用云的新方式。

因此，CloudTruth 是一个自我记录的变更管理控制系统，它在幕后跟踪我们正在监控的每个配置值的所有版本设置，然后我们提供这些数据的视图，安全或合规团队可以使用这些视图来更好地了解他们的需求，而不必打扰开发运维团队。

Mike Vizard:你是否觉得坏人，也就是网络罪犯，在扫描错误配置和寻找这些漏洞方面变得更好了？最近我们听到了很多关于软件供应链的事情——在很多情况下，问题的根源似乎只是配置错误。

格雷格·阿内特:这是真的。我们在自己的研究中发现，当您最终阅读根本原因分析并进行所有内部跟踪时，75%的计划外停机时间或安全事件是由配置错误引起的。

因此，我们想要提供的是在软件开发生命周期过程中尽可能早的最佳实践，以实现良好的配置卫生。其次，一旦配置公开，就可以监控和洞察它如何影响安全漏洞或安全态势。由于目前的一切都被定义为代码形式的基础设施，所以这一切都是为了分析存储配置值的所有不同位置，确保这些位置是安全的并被锁定，然后能够使用任何类型的模式识别来了解某些区域在哪里容易被世界上的邪恶因素利用。

迈克·维扎德:你认为我们会达到可以利用自动化来摆脱困境的地步吗？我们有 API 和 CLI 以及其他任何东西——难道我们不应该在某个时候，在工作流中有足够的智能来说，“嘿，你将要部署的这个东西配置错误，所以不要这样做”？

Greg Arnette:这是我们未来目标的一部分，我们有一个非常周到的战略，我们希望推出 CloudTruth 作为一个完整的配置数据管理平台。因此，第一个目标是插入到公司的工作流中，在那里我们可以访问数据，并可以通过报告和工作流提供价值。第二个目标是，一旦我们现在代表客户管理这些数据，就应用人工智能和 ML，寻找模式，推荐优化和最佳实践，对照从不同角度看待这一问题的其他标准机构发布的最佳实践，审查我们从客户角度看到的内容。

CloudTruth 的一个目标是成为配置数据层管理系统，我们认为目前大多数使用云的公司都需要这个系统。

Mike Vizard:我们也听说了很多关于人工智能的事情——它会应用到这个领域吗？有没有这样的场景，我们只是让一堆机器学习算法跑来跑去，弄清楚发生了什么？

格雷格·阿内特:我们坚信这肯定会在几年后发生。我认为成熟度模型才刚刚起步。启动和运行的第一步是访问数据，以便对模型进行趋势分析，分析趋势结果，优化模型。因此，为了确保这些模型的准确性，这里涉及了一个完整的观察-定位-决策-行动 OODA 循环，但我们认为这将是我们未来可以提供的一个巨大优势。

迈克·维扎德:那么，你对人们最好的建议是什么？他们今天应该关注什么，才能在明天达到天堂？我应该有同样的组织方式吗，我应该用什么方式和我的开发人员交流吗？你怎么想呢?

格雷格·阿内特:我想到了几个主题。第一个是——这在今天听起来几乎是显而易见的——确保您能够在所有级别将基础架构作为代码思想来实现，这与自动化紧密相关。因此，这是持续部署、CI/CD 渠道的一大部分。一旦你开始开发这些类型的工作流，以加速开发人员在客户面前创建的东西，无论是内部应用程序还是外部 SaaS 或移动应用程序，加快团队速度确实是实现这一目标的关键因素。

另一个方面是你想实现减少复制和粘贴数量的系统。所以，这就是我们所说的不要重复你自己，作为代码管理的基础设施的干巴巴的方法。因此，这是 CloudTruth 背后的一个关键主题。事实上，我们提供了一些功能，让您可以从一个集中的功能管理您的多个环境，包括故障、继承和覆盖，但仍然允许您的环境树中的灵活性，以便根据需要以不同的方式管理某些子环境。

因此，不同的开发人员可以有他们自己的定制环境，但他们会继承架构团队或安全团队认可的默认值。然后覆盖必须得到许可基础的允许。

因此，随着我们走过 2021 年，围绕自动化、基础设施即代码、左移以及管理所有 IAC 工具的输入值的 DRY 方法，有几种主题汇集在一起。

迈克·维扎德:嘿，格雷格，谢谢你参加我们的节目。

格雷格·阿内特:非常感谢。祝你愉快。

迈克·维扎德:好的，太棒了。嘿，伙计们，我们在那里学到了很多关于安全和我们不知道的事情，嘿，未来是有希望的。回到你们的演播室。

[End of Audio]