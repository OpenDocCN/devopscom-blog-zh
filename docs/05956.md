# 如何改善您的正常运行时间策略

> 原文:[https://devops.com/how-to-improve-your-uptime-strategy/](https://devops.com/how-to-improve-your-uptime-strategy/)

停电是不可避免的。但是，计划外停机通常会带来巨大的成本，不仅在恢复和收入损失方面，而且在客户满意度、品牌声誉和员工士气方面。

虽然公司没有万无一失的方法来避免停机，但他们可以采取一些措施来帮助提高正常运行时间。开发团队应该确定什么样的正常运行时间测量值和阈值对公司来说是足够的，采取预防措施以减少平均故障间隔时间(MTBF ),并实施提供编码错误意识的工具以最大限度地减少修复或解决问题的平均时间。

## **定义和测量正常运行时间**

正常运行时间是指应用程序或服务运行的时间。服务提供商和客户之间的服务水平协议(SLA)定义了提供商必须满足的正常运行时间水平。但是“运营”对于不同的组织可能有不同的含义。例如，提供者可能有一个 SLA，规定其系统处理一个事件需要多长时间。处理太慢的事件违反了 SLA，即使系统在某种程度上仍然是可操作的。

提供数字服务和应用的公司应该与客户明确定义 SLA，然后根据这些目标衡量他们的绩效。低于商定的期望值会导致客户失望和合同终止。此外，开发团队花费在更新客户、票证和状态页面上的时间和精力会分散他们开发新服务功能的精力。

在 SLA 中，正常运行时间以“九”来衡量，每九个都很难达到，因为这意味着停机时间大大减少。下面是测量正常运行时间的常见故障:

*   **九分之一(90%正常运行时间)** 是每年 36.5 天的停机时间。
*   **两个九(99%正常运行时间)** 每年停机时间为 3.65 天。
*   **三个九(99.9%正常运行时间)** 是每年 8.77 小时的停机时间。
*   **四个九(99.99%正常运行时间)** 每年停机时间为 52.6 分钟。
*   **五个九(99.999%正常运行时间)** 每年停机时间为 5.26 分钟。

不是所有的公司都需要五个九。因为每增加 9 个都需要增加工作和成本，所以开发团队应该决定如何平衡时间和资源的投入，以最好地满足业务需求，同时集中精力在出现问题时快速解决问题。

## **防止生产中的错误**

验证代码可以防止生产中的错误，并最大限度地降低 MTBF。这种类型的测试需要在开发周期的早期阶段完成。为了达到三个、四个和五个九的正常运行时间水平，自动化测试是必要的。虽然这种测试涉及编写单元测试的前期投资，但它节省了时间并提高了效率，因为失败的单元测试意味着特定的代码块不能按预期工作。

在验证代码之后，开发人员可以采取的另一个步骤是使用 canary 部署。这是一种将新代码推送给用户子集的策略。如果出现问题，那么只有一小部分用户受到影响，开发人员可以回滚到稳定的版本。一旦开发人员对新版本的结果感到满意，他们就可以逐步将新代码部署给所有用户。

## **揭露有错误的上下文**

收到错误警报不足以实现快速补救。开发人员需要知道错误何时发生，影响是什么，以及错误在代码中的位置。拥有这种级别的意识和背景可以最大限度地减少平均修复时间，实现这一点的最佳方式是通过应用程序监控。

监控为开发人员提供了对其服务执行情况的自动化实时洞察。当出现问题时，开发人员可以使用源代码管理信息和监控洞察力来识别导致问题的变更，并将问题提交给适当的开发人员来解决。开发人员不能依赖手动流程和客户反馈来获得问题提示。这些方法不够快。接收和理解问题，然后手动回滚到早期版本或转发到新版本，可能需要几个小时。

代码可能是复杂而脆弱的。它几乎触及了商业和生活的方方面面。当代码停止工作时，它是昂贵的和破坏性的。停机时间，即使是短暂的，也会对声誉、保留率和收入产生灾难性的影响。

为了提高正常运行时间，开发团队应该采用代码验证和监控策略。通过平衡错误预防和意识，他们可以减少生产中的代码中断，减少错误发生时的解决时间，并提高服务正常运行时间。

尼尔·曼瓦尔