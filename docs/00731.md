# 如何更早“听到”OpenStack 静默故障并更快修复

> 原文:[https://devo PS . com/how-to-hear-open stack-silent-failures-early-and-remediate-faster/](https://devops.com/how-to-hear-openstack-silent-failures-earlier-and-remediate-faster/)

对于许多生产用户来说，在 OpenStack 云环境中排除"[无声故障](https://www.google.com/#q=openstack+silent+fail)"是一个很难解决的问题。易贝首席云工程师苏布·阿拉马拉朱(Subbu Allamaraju)的团队自 2015 年 3 月以来一直在基于 OpenStack 的私有云上运营 PayPal，[公开将](https://www.subbu.org/blog/2015/05/openstack-summit-keynote-video-and-slides)定义为他持续面临的挑战之一:“噪音太多，警报太多，仍在研究如何在客户发现之前发现问题。”

对于处于 OpenStack 不同推广阶段的企业和服务提供商来说，解决无声故障总是从两个问题开始:

*   无声故障发生的原因和地点？
*   我的运营团队能否更早收到警告的推送通知，并在无声故障出现之前主动修复它们？

无声的失败之所以会发生，是因为 OpenStack 运营团队通常不知道要将早期警告调整到哪个服务领域。即使有，警告也会被噪音淹没。例如，计算域的指标和日志显示虚拟机创建成功。然而，租户仍然无法使用其请求的虚拟机实例，这是一种无声的故障，而警告实际上出现在计算域之外的指标和日志中，例如 DHCP 代理故障和身份数据库查询超时。

为了抓住这种情况，OpenStack Ops 团队需要一种实时、数据驱动的方法来自动检测 DHCP 代理和身份服务中的早期警告，然后将它们与虚拟机创建相关联，最后仅推送通知相关的领域专家来协作修复“租户无法使用请求的虚拟机”所有的噪音都被去除了，相关的警告信号被自动地聚集在一起。

操作员不应该依赖编写规则来模拟无声故障。编写规则将非常耗时，并且无法涵盖所有的失败场景。服务域太多了，至少有 13 个(例如计算、身份、控制面板和存储)，再加上将它们连接在一起的服务守护程序和虚拟交换机隧道。

使用实时、数据驱动的管理来解决 OpenStack 静默故障是 OpenStack 最近取得的一项成功。例如，一个大型 OpenStack 生产车间能够通过接收来自单元域之外的早期通知来主动检测 OpenStack 单元故障——CEPH 和 JBOD I/O 故障。

通过成为数据驱动型，并将整个 OpenStack 中的所有事件和状态消息吸收到实时的机器学习算法中，OpenStack Ops 团队可以自动接收经过清理和上下文化的警报，然后使用现代社交协作技术快速解决问题，为未来捕获部落知识。这些团队的新口号应该是“干净、情境化和协作”，这是实时情况管理的三大支柱。

但是实时情况管理并不止于此。它可以扩展到 OpenStack 内部和周围的整个生态系统。数据源包括跨所有服务的无处不在的 RabbitMQ 消息总线、跨不同租户操作系统的指标和日志，以及跨所有技术和供应商的指标和日志。本质上，监控整个技术和独立于供应商的参考体系结构可以被汇总并简化为“情况管理”，而不是对许多看似不相关的“领域孤岛警报”做出反应

实时情况管理也可以位于多个 OpenStack 实例之上，用于负载共享和灾难恢复目的，以及与公共云的交互。例如，Amazon CloudWatch 可以作为数据馈送快速整合，为 OpenStack 运营团队提供跨 OpenStack 混合云的“经理的经理”视图。

实时情况管理实质上为运营团队提供了一个单一平台，通过放大信号和抑制噪声来更早地发现和解决故障。随着 OpenStack 社区继续发展其整个参考架构和生态系统，在不依赖大量规则的情况下这样做为运营团队提供了急需的灵活性，以跟上如此多的“未知的未知情况”。

***关于作者/逢蒙***T5】

逢蒙是 Moogsoft 产品营销高级总监。他的专长是 IT 服务保证，在应用性能管理(Bytemobile，已被 Citrix 收购)、网络性能管理(Cisco)、基础设施监控(VSS 监控)和服务器管理(HP)方面拥有 15 年的技术营销背景。Twitter:[@ fengmengmoog](https://www.twitter.com/fengmengmoog)T5】@ moogsoftLinkedin:[https://www.linkedin.com/in/fengmeng1970](http://s.bl-1.com/h/pKo3Rwl?url=https://www.linkedin.com/in/fengmeng1970)