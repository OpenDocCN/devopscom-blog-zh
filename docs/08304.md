# 持续交付与持续部署

> 原文:[https://devo PS . com/连续交付与连续部署/](https://devops.com/continuous-delivery-vs-continuous-deployment/)

经常有人问我，“如果我们正在使用持续集成(CI)服务器，并且采用持续交付管道，那么持续部署适合哪里？”好问题。简而言之，CloudBees 或 Blue Ocean 等持续交付引擎旨在跨开发、测试和生产环境触发 CI 工作流的执行。持续部署被称为 CI 工作流的一部分，用于将代码实际发布到端点。连续部署可以由应用程序发布自动化工具管理，也可以由一次性脚本支持。无论 CI 工作流的部署步骤有多复杂，它仍然是持续的部署。

为了理解持续交付和持续部署，我们必须回到它们的根源，持续集成。CI 是敏捷实践的关键组成部分。敏捷开发人员理解采用一种方法的重要性，这种方法可以管理较小的增量软件变更，从而更快、更便宜地向最终用户发布软件，并因此发布商业价值。从历史上看，部署到测试和生产的活动一直由测试和数据中心团队负责，与开发分开。但是在敏捷实践中，这些活动不能与开发分开。分开开发、测试和生产团队的概念是一个瀑布概念，而不是敏捷概念。在敏捷中，每个人都在同一个团队中。这意味着测试和生产团队必须成为敏捷过程的一部分。

## **掌握敏捷的最后一英里**

最终，持续交付的目标是加速发布周期，并快速将新代码投入生产。然而，对于大多数公司来说，这并没有发生。开发人员和测试人员可能已经接受了连续交付，但是当涉及到生产时，代码被移动到暂存区，在那里它被搁置，直到生产准备好执行更新。敏捷的最后一英里没有实现。我们又回到了起点:瀑布。

生产拦路虎的原因有很多。让我们回顾一下前四名。

*   **代理:**开源和商业 CI 服务器都是基于代理的。基于代理的系统对开发者来说很好，并且可以被测试所接受。然而，生产团队对在生产端点上安装另一个代理并不感兴趣。因此，生产团队使用他们自己部署代码的方法。因此，用于向开发和测试发布代码的部署脚本不会被生产使用。他们的看法是:生产部门不希望部署过程要求他们使用开发工具中的代理重新配置其数据中心环境。
*   **脚本:**制作团队想要输入和可见性。一次性脚本混淆了部署过程。出于这个原因，制作团队将编写他们自己的脚本。脚本根本不具备满足生产团队所需的审核、回滚和透明性需求所需的智能。生产团队手动执行许多步骤。这需要时间，并且不能以敏捷的步调完成。结果是:伟大的代码在准备区域中枯萎了。产品比持续测试批准的版本落后几个版本。
*   **成本，成本，成本:**开发人员在持续交付工作流中创造的大部分东西来自开源或基于消费的许可模式(想想詹金斯和吉拉)。对于一个开发团队来说，购买能够实现持续部署的工具(例如应用程序发布自动化解决方案)并将其整合到 CI 工作流中是非常昂贵的。这些类型的工具在首席信息官级别销售，价格超过 25 万美元。生产团队通常不愿意购买这些工具，因为高成本意味着高风险。“一枚戒指统治所有人”是行不通的。这种类型的操作工具获取是基于瀑布的，不适合更精简的敏捷开发运维工具。结果是:一次性脚本继续被使用、开发和测试。生产不采用敏捷。
*   **可持续性:**在瀑布过程中，产品发布一年执行两次，最多一个季度一次(被认为是激进的)。换句话说，生产人员经常支持产品发布。有了敏捷，对产品发布的需求增加了 10 倍。他们可能会被要求一个月发布四次，而不是一年最多发布四次。生产跟不上敏捷的步伐。他们为瀑布配备了人员。

## **自动化持续部署:持续交付成熟的关键**

没有[连续部署](https://www.deployhub.com/continuous-delivery-vs-continuous-deployment/)就不能成功连续交付。如果您想更快地向最终用户推出代码，部署过程本身必须现代化。使用瀑布方法中使用的一次性脚本不会实现您的 CD 目标。

持续部署自动化是由一套新的敏捷开发运维工具执行的，这套工具被称为应用发布自动化，简称 ARA。ARA 解决方案旨在支持模型驱动的软件部署，允许开发、测试和生产团队使用相同的流程，而无需一次性部署脚本。ARA 增加了支持持续交付和数据中心部署要求所需的所有特性和功能。ARA 旨在全面执行软件发布的繁重任务，包括应用程序打包、版本控制、数据库更新、服务器配置管理、日历、前滚、回滚、安全访问和审计。

ARA 解决方案由开发团队定义的模板化 CI 工作流调用。工作流在管道中向上移动，并适应不同管道阶段(系统测试、集成测试、预生产、生产等)的变化。)因为流程是由 ARA 工具而不是脚本驱动的，所以更改会在整个流程中自动处理，从而减少所有团队的工作量，并支持频繁的更改，这些更改可以轻松跟踪和审核到服务器库存级别，包括生产环境。

## **开发人员，获得部署自动化工具**

为了实现支持生产的可重复 CD 管道，开发人员必须在开发阶段就接受持续部署的自动化。然而，功能障碍是 ARA 工具惊人的高成本。开发者不买昂贵的运营方案。更多的 ARA 解决方案必须以基于消费的模式提供，或者以“开箱即用”集成到 CI/CD 中的开源方式提供。当考虑购买 ARA 解决方案时，寻找可以一次由一个项目团队实施的无代理模型。接受这种级别的企业流程变革必须一个项目一个项目地进行。运营大爆炸方法在敏捷实践中并不奏效。不是每个人都可以使用相同的解决方案。然而，如果做得正确，有很大的好处。

ARA 是一个加强持续交付渠道基础的过程，是敏捷开发运维计划的核心。它通过允许测试团队和数据中心团队获得所需的工具来促进敏捷实践，从而变得更加敏捷，并接受开发过程中推动的变更频率。最终，目标是整个管道的可重复性，将开发和运营结合在一起。

## 关于作者/特雷西·拉冈

特雷西·拉冈是 T2 部署中心的首席执行官和联合创始人。Tracy 在商业应用程序的开发和实施方面拥有丰富的经验。正是在她的咨询经历中，她认识到分布式平台缺乏构建和发布管理过程，而这在大型机和 UNIX 上一直被认为是标准的。Tracy 已经与数百个开发团队合作实现了以团队为中心的标准化构建到发布过程。在 [LinkedIn](https://www.linkedin.com/in/tracy-ragan-oms) 上与她联系。