# Docker 引擎 1.12 现已正式上市，Docker for Mac/Docker for Windows 正在生产中。

> 原文:[https://devo PS . com/docker-engine-1-12-now-ga-docker-MAC docker-windows-production/](https://devops.com/docker-engine-1-12-now-ga-docker-macdocker-windows-production/)

自从 Docker 项目开始以来，Docker 1.12 将最大和最复杂的功能集添加到单个版本中。数十名工程师，包括 Docker 员工和外部贡献者，都对 1.12 编排的每个方面做出了实质性的贡献:核心算法，集成到 Docker 引擎中，文档和测试。

1.  **Swarm Mode** **简化分布式应用定义、部署和可靠性** 借助 Docker Engine 的最新更新，开发者可以构建更复杂的应用，具备多种服务、容器定义的网络和强大的安全性。Docker 1.12 极大地简化了创建 Docker 引擎组(也称为集群)的过程。群是一组分散的、高度可用的 Docker 节点。每个节点都是一个独立的编排子系统，拥有创建公共资源池以调度服务所需的所有固有功能。群集的自我组织、自我修复能力现在得到了自动化服务发现和内置分布式数据存储的支持。因此，只需一个命令就可以添加一个 Docker 引擎并横向扩展一个群。

*   群体模式在每个引擎中都可用，以自动发现彼此并自组织成分散的群体

o 群体模式是一个打开的选项；包含电池，但可更换

*   内置的、高度一致的分布式存储
*   自我修复群处理节点故障，以恢复所需的应用程序状态
*   群体中引擎的动态角色提升和降级
*   零停机节点管理，包括维护模式和高级诊断
*   具有零 SPOF(单点故障)架构的强大架构基础设施

2.  **运行和扩展服务的服务部署 API**:新的服务部署 API 用一个命令描述了所有的资源和组件，允许运营团队运行和扩展服务。通过 API，Swarm 了解定义的应用程序，并在发生不利情况时，根据应用程序的要求不断检查和协调环境。与其他系统不同，Swarm 本身没有单点故障。所有服务的状态在一组管理器中实时复制，因此在任何节点故障后都可以重新调度容器。

*   声明式服务 API，将应用程序的期望状态协调作为容器之上的抽象。声明服务、映像、规模和端口
*   滚动更新以支持蓝/绿、淡黄色和其他部署模式
*   特定于应用程序的运行状况检查

3.  **强大的路由网格–**Docker orchestration 包括一个独特的内存缓存层，用于维护整个集群的状态，提供无阻塞架构，即使在高峰时段也能确保调度性能。此外，该系统具有内置的路由网格技术，解决了如何提供容器感知负载平衡的挑战。路由网格确保请求被发送到正确的容器，而不管它们在群中被调度到哪里。

*   开箱即用的多主机覆盖网络
*   现成可用的 DNS 自动服务发现
*   内置支持容器的负载平衡，负载平衡和全局端口定义通过服务动态地将流量重新路由到正确的容器

4.  **默认安全:**每个引擎自动分配一个密码身份，确保只有经过验证的引擎才能加入群。此外，Docker Engine 附带相互认证的 TLS，在参与群的每个节点之间提供认证、授权和端到端加密通信，而运营商无需采取任何步骤来启用它。具体功能包括:

*   开箱即用的 TLS 配置确保群中的所有节点使用相互 TLS 相互通信。
*   加密节点身份是允许可信工作负载分派的通用框架。它能够以加密方式安全地决定哪些节点可以运行敏感工作负载或访问敏感网络。
*   具有自动证书轮换的无缝 PKI
*   可配置的接受策略来配置节点如何加入群:自动、手动或需要秘密。

在这个版本中有三个非常重要的主题:

**容错应用程序部署平台** 现代应用程序越来越多地采用微服务架构模式设计，向用户提供数据的过程可能需要调用几个不同的服务。现实世界中的机器总是会发生故障，即使面对这种随机故障，这些微服务也需要继续可用。Docker 1.12 为您提供了这种能力，它提供了一种零 SPOF 设计，利用了法定数量的管理器，加上一种服务抽象，可以产生多个副本，如果它们的主机消失了，可以快速重新调度它们。

**规模和性能** Docker 1.12 的群体模式编排是在考虑规模和性能的基础上重新设计的。内部 Raft 分布式数据存储已针对从内存缓存中进行闪电般的快速读取进行了优化，集群管理设计最大限度地减少了会使该缓存失效的写入。

**安全联网** 在许多系统中，你必须通过生成 TLS 证书、在不同的端口上运行系统、计算流量以确保没有数据包不加密地通过不安全的网络来“开启”安全性。有了 Docker 1.12，所有这些都是开箱即用的。该系统是“默认安全的”，这意味着您不需要成为安全专家就可以获得安全的应用程序管理平台。

**相关链接:**

*   [**Docker 1.12 博客——深入探讨 1.12 架构**](https://blog.docker.com/2016/07/docker-built-in-orchestration-ready-for-production-docker-1-12-goes-ga/)
*   [**Docker 1.12 蜂群模式深潜第 1 部分:拓扑**](https://www.youtube.com/watch?v=dooPhkXT9yI)
*   [**Docker 1.12 蜂群模式深潜第二部分:编排**](https://www.youtube.com/watch?v=_F6PSP-qhdA)

**生产中的 Mac Docker/Windows Docker**

Docker for Mac/Docker for Windows 是一个易于部署的集成环境，用于从 Mac 或 Windows 构建、组装和发布应用程序。Docker for Mac 和 Windows 包含了对 Docker Toolbox 的许多改进。它更快更可靠——不再需要 VirtualBox！Docker 引擎运行在 Alpine Linux 发行版中，位于 Mac OS X 上的 xhyve 虚拟机或 Windows 上的 Hyper-V 虚拟机之上，该虚拟机由 Docker 应用程序管理。你不需要 docker-machine 来运行 Mac 和 Windows 的 docker。

还有工具集成，因为 Docker for Mac 是一个 Mac 应用程序，Docker for Windows 是一个 Windows 应用程序，包括本机用户界面和自动更新功能。Docker 工具集与之捆绑: [Docker 命令行](https://docs.docker.com/engine/reference/commandline/cli/)、 [Docker 编写](https://docs.docker.com/compose/reference/overview/)、 [Docker 公证命令行](https://docs.docker.com/notary/getting_started/)。

自今年年初推出以来，成千上万的用户已经测试了该解决方案，并为进一步增强提供了反馈。Mac 版 Docker/Windows 版 Docker 提供:

*   更快、更可靠的体验–使用每个操作系统内置的虚拟机管理程序的本机开发环境。(不再 VirtualBox！)
*   改进的 Docker 工具集成——您需要在本地开发的所有 Docker 工具都捆绑在应用程序中。
*   改进的开发流程——为您的代码和数据进行卷装载，并轻松访问本地主机网络上运行的容器。使用受支持的 ide 进行容器内调试也有助于您实时调试项目，并以更少的工作量更快地迭代代码。
*   企业网络支持，让 Docker for Mac 和 Windows 轻松地与 VPN 一起工作。
*   Docker 引擎 1.12 提供的所有新功能。
*   自动更新，稳定版和测试版有不同的渠道。

随着 Docker for Mac 和 Windows 的成熟和广泛采用，我们希望确保它是一个可靠和可依赖的工具。但我们也希望保持 Docker for Mac 和 Windows beta 用户在过去几个月中已经了解并喜爱的创新和进步的快速步伐。

Docker for Mac 和 Windows 有两个渠道可用——稳定版和测试版。新功能和错误修复将首先在测试版中自动更新给用户。稳定频道的更新频率要低得多，并且与 Docker 引擎的主版本和次版本同步。只有经过充分测试并准备好投入生产的特性才会添加到稳定的渠道版本中。

**相关链接:**

[Mac/Windows GA 博客 Docker](https://blog.docker.com/2016/07/docker-for-mac-and-windows-production-ready/)