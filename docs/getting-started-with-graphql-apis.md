# GraphQL APIs 入门

> 原文：<https://devops.com/getting-started-with-graphql-apis/>

GraphQL 是一种用于 API 的查询语言，也是一种用现有数据完成这些查询的运行时语言，它正变得越来越流行。根据 JavaScript 调查报告的最新[状态，44.3%的受访者表示他们在 2020 年使用过 GraphQL APIs，而 2016 年只有 5%。此外，许多财富 500 强公司现在在生产中使用 GraphQL APIs 作为他们的后端，而像脸书和 GitHub 这样的顶级技术公司使用 API 技术来改进他们的产品和提高系统性能。](https://stateofjs.com/en-us/)

随着技术环境的不断变化，您可能会对后端采用 GraphQL API 有所怀疑，并且不确定它如何改善您当前的数据需求。然而，无论您使用什么语言或架构，GraphQL APIs 都可以帮助简化数据访问，加速产品开发过程，提高应用程序性能和处理复杂的后端数据场景。

### 一个统一的后端终端

GraphQL APIs 的一个优点是，它们为您的后端提供了一个统一的端点，以满足客户端和通用 API 用例。单个 GraphQL API 可以处理所有的客户端请求，并将它们转发到正确的后端服务。

随着公司及其产品的扩展，REST 端点会变得很大，难以管理。REST 中的一个主要问题是 N+1 问题，客户端调用服务器 N+1 次以获得 N 个资源，这主要是因为单个 REST 资源没有提供足够的信息供客户端操作。

Coursera 的基础设施工程师 Brennan Saeta[将 REST API](https://medium.com/coursera-engineering/evolving-the-graph-4c587a4ad9a8#:~:text=centralizing%20all%20the%20REST%20APIs%20that%20our%20organization%20was%20creating%20for%20simple%20and%20easy%20consumption)集中化以供客户简单使用，这是 GraphQL API 吸引他们的原因之一。

GraphQL API 通过聚合来自不同来源的所需数据，并提供一个简单的接口，客户端可以通过单一资源与之通信，从而隐藏了底层后端系统的复杂性。

### 使用 GraphQL 提高应用程序性能

GraphQL API 通过减少 JSON 负载大小和来自多个 API 调用的网络开销来提高应用程序性能。通过允许客户端指定其数据需求，GraphQL APIs 消除了从后端传递不必要的通用数据的需要，并最大限度地减少了检索后端数据所需的往返次数。

随着公司产品的扩展和迭代，不同客户端和页面所需的数据会发生变化。在 REST API 设计中，当出现新的需求时，开发人员必须决定是创建一个新的端点，让客户端对该数据发出新的请求，还是向现有端点添加更多数据。第一个选项会导致更多的服务器往返，第二个选项会增加负载大小，这会影响应用程序的性能。

随着越来越多的应用程序通过脆弱的移动网络访问，应用程序速度成为留住用户的重要指标，最大限度地减少服务器往返和通过网络传输的数据至关重要。网飞和 Pulley 等公司报告称，改用 GraphQL APIs 后，页面加载时间和整体应用性能都有所提高。

使用 GraphQL APIs，客户机在一次行程中只从后端服务器接收它们指定的数据，从而节省了网络带宽和资源。

### 提高系统可靠性

GraphQL API 通过在查询执行前确保客户端查询有效并与 GraphQL 模式规范同步，提高了系统的可靠性。GraphQL 使用一个类型系统来描述可以从后端服务器查询什么类型的数据以及它以什么形式存在。强类型模式通过防止像 SQL 注入和无意的数据泄漏这样的违规行为，提供了比 REST APIs 更高的安全性，从而使应用程序更加安全可靠。

类型安全确保后端服务器的任何重大更改都会被使用数据的客户端捕获，从而减少停机时间。使用 GraphQL APIs，您可以修改和废弃 API 字段，同时仍然保持向后兼容性。更容易知道 API 中的哪些字段被哪些客户端使用，哪些字段没有被使用。使用 GraphQL，API 开发人员可以放心地对现有的 API 进行修改，而不会破坏现有的功能。

印度最大的食品交付平台 Swiggy 讨论了在后端采用 GraphQL API 如何使他们能够在不破坏消费者应用程序的情况下对现有 API 进行更改。

GraphQL 确保 API 的一致性、可靠性和安全性，从而带来更好的系统性能。

### 更好的开发者体验

采用 GraphQL APIs 改善了前端和后端开发人员的体验。后端开发人员希望构建直观、易于探索和导航的 API。GraphQL 有助于减少编写 API 文档的时间。

通过内省的概念，GraphQL APIs 允许客户端查询模式并发现模式上可用的资源。有了 GraphiQL IDE 这样的优秀工具和库，GraphQL API 端点的交互性对于开发人员来说更加直观。

API 消费者希望 API 灵活、易于集成并支持各种客户端用例(web、iOS 和 Android)。由于 REST 的不灵活性，创建一个能够满足客户所有数据需求的单一端点是一个挑战。通常，同一个客户端必须调用多个 API 来从后端获取所需的数据。此外，使用 REST APIs，前端开发人员在构建产品特性之前必须依赖后端的 API 规范，这导致开发时间变慢。

金融科技初创公司 Pipe 的工程总监彼得·唐斯(Peter Downs)表示，尽早选择 GraphQL APIs 可以将他们的开发时间缩短 90%。使用 GraphQL API，前端和 UI 开发人员只需在 graph QL API 中指定数据要求，就可以快速轻松地迭代特性，从而减少对后端开发人员进行更改的依赖。

### GraphQL APIs 入门

学习 GraphQL 的最好方法是亲自动手，用它来构建应用程序。根据您选择的语言，有许多不同语言的 GraphQL 库可以帮助您入门。

与任何新技术一样，在后端采用 GraphQL APIs 并构建高性能的 GraphQL 后端需要经验，这并不是 GraphQL 独有的。

如果您的应用程序严重依赖于互连数据，您的目标是开发一个跨多个客户端使用的 API，或者正在为您的后端寻找一个高性能的 API 解决方案，以最大限度地减少带宽使用，那么 GraphQL API 是您后端的完美数据层。