# DevOps 作为提高安全性的催化剂的神话？

> 原文：<https://devops.com/the-myth-of-devops-as-a-catalyst-to-improve-security/>

在 DevOps 讨论中，很少有话题比 DevOps 和信息安全之间的关系更能引发争议。DevOps 实践有助于提高安全性吗，还是大多数组织只是简单地自动化并将其现有的糟糕的内部流程带入 DevOps？带着这个话题，我最近和 Adam Muntner 进行了一次有趣的对话，我认为 DevOps.com 的读者也会感兴趣。

Adam Muntner 是 Mozilla 的安全工程师，也是 FuzzDB 的创建者，fuzz db 是一个开放内容的授权攻击和发现模式数据库，用于软件安全测试和研究。他在安全治理和管理、技术评估、研究和咨询方面有 20 年的经验，专注于安全软件开发。表达的意见是他的，而不是他的雇主的。

以下是我们最近关于 DevOps 和安全性的对话，为了简洁明了，我们进行了编辑。

**DevOps.com***你对开发运维有助于提高安全性的说法提出了质疑。例如，在我的文章《开发运维安全成熟》中，我写道，“企业开发运维部署几年来，我们实际上了解到，通过开发运维的努力来统一开发和运营团队并不会产生人们所担心的蛮荒西部环境”。另一个是来自 Gene Kim* *的* [*Q & A，他说高绩效人员能够更频繁地进行代码部署，从代码提交到在生产中运行，更快地完成部署，他们的变更成功率提高了一倍，停机修复速度提高了 12 倍。*](https://devops.com/2014/03/16/a-q-a-with-gene-kim-devops-and-what-separates-high-performing-enterprises/)

*我利用这些发现来支持开发运维帮助改善安全成果。你对这些陈述有异议。为什么？*

**Muntner:** 我并不反对开发运维或打包部署，相反，我支持从知情的角度全面看待收益和风险。要记住的是，应用程序环境的安全性是继承的——它是所有组件的聚合结果。

当系统架构如此复杂，以至于在应用程序环境中使用不透明的、组件化的、预构建的部分成为常态时，您如何知道其中有什么呢？继承了多少可攻击的表面积？

吉恩·金是个聪明人，在安全问题上措辞谨慎。吉恩说，

*“第一个是高绩效员工的表现远远超过了他们的非高绩效同事。三十倍的代码部署频率。他们能够以快 8，000 倍的速度完成从代码到运行生产的部署。换句话说，他们可以在几分钟或几小时内完成部署。而表现差的人则需要几周、几个月或几个季度。此外，他们实际上有更好的结果。变更成功率提高了一倍，当他们造成停机时，修复速度提高了 12 倍。有 4200 份完全回复，这表明你可以同时变得更加敏捷和可靠。我认为，如果我们只是将一些点连接起来，它们也会更安全，可能会有更快的查找修复周期时间。我们实际上并没有测试这一点，但是，如果这是真的，它将反映出我们在我之前所做的基准测试工作中发现的情况。”* 
“好、便宜、快”这一古老的工程格言并没有被 DevOps 淘汰。将代码部署速度提高 8000 倍并不能降低风险。这可能有助于更快地解决问题，但这并不能说明全部情况。

Gene 说，*当他们造成停机时，他们可以将修复速度提高 12 倍，“*但是有多少停机是由于更快的部署周期造成的呢？由于不同的开发实践，修复中断的速度比从未发生中断的速度快 12 倍，这意味着什么？快速修复中断是好的，这是我们所看到的。它没有考虑到不可见的新引入的弱点，这些弱点没有经过测试或测量。

被测量的内容中有多少是由被测量的组织的前 Devops 安全实践和结果产生的？“更好的结果”是什么意思？在不同的组织之间，甚至在同一组织的不同情况下，这种结果是否可以客观地量化？我们混淆了相关性和因果性吗？每个组织都不一样。这些指标被认为是定量的证据，但还不能确定它们是在测量它们声称的东西。

考虑这种情况:运营人员通过工资审核/奖金流程受到激励，以维持正常运行时间。尽管在测试环境中工作，但是最新的代码发布会破坏您的应用程序。DevOps 重新安装 Docker，问题仍然存在。现在怎么办？回到旧版本，运行时没有崩溃，但(可能不为您的运营团队所知)在静态编译成二进制文件的某个库中包含一个已知的漏洞？

DevOps.com: *有人认为 DevOps 有助于减少遗留环境中的代码膨胀，对减少技术和安全债务有很大帮助，这种观点如何？*

减少膨胀可能是 devops 团队众多目标之一，但是 devops 实践同样可能增加代码膨胀、不透明和易受攻击的表面。安全性不是 DevOps 实践的固有属性。例如，认为只能通过预构建的软件包安装的软件可以提高简单性的观点只会产生简单性的危险幻觉。

依赖这些不透明的组件以不可预测和未知的方式增加了代码膨胀，潜在地降低了安全性。即使有威胁模型(通常没有，它们很难制作且耗时，因此很昂贵)，那么像 Hadoop 这样的流行软件包可能不会超过威胁模型中的一个盒子，而实际上它是许多组件和 n 阶子组件的聚合，每个组件都有自己的可攻击表面，具体取决于配置。如果它是作为预构建环境的一部分安装的，那么会有许多可能的安全后果，而在已经描述的任何类型的测试或度量中，都没有解决或测量这些后果。

执行成千上万次测试听起来不错，但是如果有必要进行成千上万次测试呢？还是完全不同的测试方法和工具集？基于现有测试的局限性，假阴性会出现在哪里？最重要的是，这些指标支持这种说法吗？

这些测试无法识别许多类型的攻击:逻辑缺陷就是其中之一。系统的不同组件理解相同的(恶意的或虚假的)数据意味着不同的事情。有时问题不是 bug，而是架构缺陷。如果它深入到使用自己的非标准构建系统的系统组件中，您可能找不到它。软件测试是针对已知的、预期的代码执行路径和交互的，识别所有可能的执行路径和操作顺序要困难得多。

但是所有这些缺陷都可以在生产的后期被发现，当它们存在的时候。这并不是说那些手动测试已经被废除了。

**Muntner:** 通常，安全审计和评估是有时间限制的。通常很难在规定时间内评估整个大型应用程序，更不用说所有许多不透明的组件了。此外，还有依赖商业自动化工具的笔测试人员的问题，甚至工具正在执行的测试和包含的测试用例都是不透明的。最终，考虑到测试人员、工具、方法、时间以及组织有效使用和筛选测试结果和经验教训的能力的限制，它们是某个时间点的安全状况的快照。鉴于 Devops 和敏捷开发所隐含的快速发布周期，结果可能会很快失效。

添加未知的依赖层和库会使已经很少的审查时间变得更少。安全资源稀缺且昂贵。拥有成熟的应用程序安全保证计划的组织仅将这些资源用于最关键的应用程序。外部顾问审查一份申请可能要花费 20，000 美元或更多。

自动化是非常重要的，但是自动化测试有很大的局限性，并且经常遗漏配置管理的细节。最重要的是，并不是所有的漏洞都能被发现。如果自动化工具没有测试它，并且 pentester 没有在他们的测试窗口内找到它，它仍然存在。优秀的渗透测试人员总是能发现在之前的限时评估中没有发现的错误。恶意的演员也是如此。

**DevOps.com:** *所有这些可能的情况在现在的企业中都存在。当然，自动化不良实践可能会更快地传播混乱，或者仔细思考并自动化正确的事情可能会改善实际结果。那么为什么这不能证明产生比当前方法更有弹性的代码和架构呢？*

**Muntner:** 尽可能多地考虑安全测试和自动化将会产生结果，但是无论有没有开发运维，这都可能发生。我并不是说 devops 是无效的，而是说它本身并不对好的结果负责。认为一种方法交付的比它实际交付的多只是一种错误的安全感，可以说比意识到安全性不足还要糟糕。

安全的系统和软件开发实践，如命令安全 API、TLS 中的网络层功能、CSP 等 HTTP 层功能、应用程序和协议层防火墙的改进、开发人员学习为适当的输出上下文进行适当的编码、使用类似于 [OWASP ZAP](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project) 或适用于该类应用程序的商业等效工具进行自动化测试，这些都具有很高的影响力，但与 devops 无关。

安全应该是流程的一部分，是质量保证、安全和功能测试的 integral 的一部分。                

**Muntner:** 安全不是一种状态，而是一个过程。这是动词，不是名词。安全“什么”应该是工作流的一部分？安全活动和测试，人员，以上所有的？安全组织应该向管理层的业务管理和治理方面报告，还是向技术方面报告？为什么 DevOps 比职责分离更有利于安全成熟度？
DevOps 是我们在 Mozilla 采取的方法，但是 Mozilla 的 IT 和产品组织充满了非常有才华的人，他们会使用任何开发过程在安全方面做得很好。
**DevOps.com:** *这取决于组织，我敢肯定，但如果一个组织要迁移到 DevOps，那么 DevOps 需要成为流程的一部分。*

DevOps 可以是好的也可以是坏的，但是 DevOps 本身与安全性并没有太大的关系，除了它的一些普遍被误解的做法，而且可能并不总是以人们期望的方式。标准化是好的，除非你在可怕的事情上标准化。

**DevOps.com:** *那当然有风险。对于许多公司来说，他们正在不顾一切地实施 DevOps，因此这是一个安全工作的问题，以最佳方式集成他们自己和他们的流程。*

Muntner: 这是一项业务支持职能。安全性是一项业务风险分析功能。如果您在不了解威胁、风险和安全状况的情况下对事物进行标准化和集成，您做了什么？最终，决策是商业决策。不幸的是，它们常常是从知识不足的角度出发的。

DevOps 本身并不能解决这些问题，而且 DevOps 本身也有潜在的缺陷。 :这个问题与 DevOps 所能提供的无关。想要更好地了解软件开发生命周期中安全性成熟度的         For 组织， [OWASP OpenSAMM](http://www.opensamm.org/) 是一个很好的起点。它有助于组织了解安全成熟度对他们的意义，并逐步向他们期望的状态前进。