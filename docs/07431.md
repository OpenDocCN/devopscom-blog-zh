# 2021 年需要了解的发展趋势

> 原文:[https://devops.com/devsecops-trends-for-2021/](https://devops.com/devsecops-trends-for-2021/)

对于 DevSecOps 的领导者来说，2021 年将是开源供应链攻击的一年。事实上，已经开始了。1 月 7 日， [Sonatype](https://blog.sonatype.com/malware-removed-from-maven-central) 的安全研究人员在 Maven 中央存储库中发现了三个恶意的 Java 组件。这些组件与知名组件具有相同的名称。然后在 1 月 20 日，同一个研究小组在节点包管理器(NPM)中又发现了[三个被破坏的包](https://blog.sonatype.com/cursedgrabber-strikes-again-sonatype-spots-new-malware-campaign-against-software-supply-chains)。在所有情况下，这些恶意组件与常见的 Java 和 NPM 包具有几乎相同的名称。

这些坏包在被移除之前已经被下载了数千次，从而危及了开源软件供应链。这类事件越来越常见。有意或无意地部署未经审查的代码(我们称之为影子代码)是不可避免的。当开发人员在未经批准或充分安全验证的情况下将第三方软件代码包含在应用程序中时，就会出现影子代码。开发人员这样做的原因与他们使用库和其他组件的原因相同——这比从头开始编写功能要快。通常，这些组件会卸载计算密集型或专业功能。一些例子是购物车软件、支付系统或响应设计需求。有时，开发人员也会错误地包含虚假的影子代码，但有一个相似的名称(这被称为域名抢注)，就像我们上面描述的例子。

影子代码，加上对开源的日益依赖，放大了安全风险，吸引了更多的坏人。现代应用程序由 50%到 90%的开源代码组成，这取决于代码审计。快速的代码迭代使得安全审查不可能监管所有的代码变更和依赖。许多开源库包含数百个内部依赖项，即使是最好的自动化代码检查工具也跟不上。

**影子代码和供应链攻击如何相互影响**

影子代码和供应链攻击的复合风险是 DevOps 和 DevSecOps 团队在未来一年将面临的最紧迫的问题之一。Sonatype [的安全研究人员追踪到 2020 年针对 24，000 个开源软件组件的供应链攻击增加了 430%](https://www.sonatype.com/press-releases/2020-state-of-the-software-supply-chain)。该报告将此类攻击的增长归咎于两个因素；首先，DevOps 团队正在提高代码速度，以加快上市时间。其次，安全团队正在更快地响应传统的零日漏洞，缩短了漏洞利用的时间。这两个因素结合在一起，鼓励了更多的供应链攻击。

**攻击现代扩展软件供应链**

在现代 web 应用程序中，大多数前端和中间件应用程序代码来自第三方。有些是专有的，但出于成本考虑，大多数代码是开源的。开源组件源代码是一个巨大的攻击面，通常很少被监控、测量和编目。DevSecOps 团队应该制定计划，在 2021 年及以后减少这些攻击的影响。

因为供应链攻击经常被用作其他攻击的跳板或窃取敏感信息，这些危害带来的业务和财务风险是相当大的。在其年度“[违规成本](https://www.ibm.com/security/data-breach)”调查中，IBM 发现数据违规的平均成本为 380 万美元，并且需要 280 天才能完全控制。

由于多种因素，供应链攻击可能是代价更高的攻击子集。因为它们利用了信任关系，这些攻击可能几个月甚至几年都不会被发现。供应链攻击往往也很复杂，目标是组织最有价值的资产。

有证据显示，一些协同攻击试图同时利用供应链的弱点。多个攻击者已经将在线购物平台 Magento 的易受攻击和生命周期结束(EOL'd)版本的已知用户作为目标(也称为 Magecart 攻击)。我们怀疑高级黑客组织要么运行相同的扫描软件包来识别易受攻击的目标，要么通过暗网购买可行目标的列表。

**开源供应链风险**

使用开源软件构建 web 和移动应用程序的好处是显而易见的。开发团队、DevOps 和 DevSecOps 团队可以重用其他人维护的代码或库，以更快地交付代码并减少他们必须维护的代码量。

没有比 JavaScript 和 Node.js 更大的风险了，Node.js 作为中间件的迅速崛起极大地增加了开发者可以使用的包和库的数量。Node.js 的包管理器 NPM 是目前使用中下载频率最高的软件。

Node.js 和 JavaScript 的快速使用增长创造了一个有利于供应链攻击的混乱环境。攻击者可以通过各种方式将代码注入可信的开源包。(明确一下，Java、Python、PHP、Golang、Ruby 都有同样的潜在供应链漏洞。但到目前为止，JavaScript 是最大的目标，它主导了前端和近前端，在那里用户数据是最容易浏览的。

一些大的、公司支持的图书馆，如 React(由脸书支持)，维护得很好。但是许多其他常用的库是由资源不足的开发人员志愿者团体维护的。这些没有报酬的维护人员没有动力去做遵循严格的安全最佳实践的“单调工作”,例如建立自动化代码分析或快速响应安全问题的报告。

通过适当的代码审查运行所有广泛使用的开源 JavaScript 库的成本可能会达到数百或数千亿美元。因为这些代码的维护者很少从他们的工作中获利，他们不倾向于花钱建立自动化的审查系统。即使维护人员在大公司工作也是如此；如果没有主要的组织支持，维护一个流行的开源项目背后的大量工作可能会非常辛苦。即使是代码审查和运行代码分析工具也不是万能的。由于大量频繁的代码提交，许多流行的开源项目变化很快。因此，干净的代码审查不能保证组件在一周或一个月后仍然安全。

对于由无偿开发人员运行的项目，对核心库的提交访问通常监管不力，因为维护人员很乐意在他们的项目上获得任何帮助。对“拉”请求的审查可能是肤浅的，会遗漏模糊攻击。更糟糕的是，有时开发人员只是累了，就不再维护他们的库了。他们可能会也可能不会通知用户。他们的幽灵库可能位于 GitHub 或 NPM，仍然可以正常下载，但是没有人会关注错误报告或其他可疑活动。

废弃或过时代码的问题经常被低估。根据 Synopsys 2020 年 5 月的一项研究，91%的商业应用程序包含废弃或过时的开源组件。出于这些原因，损害已经被放弃、过时或监管不力的开源库是寻求发起供应链攻击的恶意黑客最喜欢的策略——这种威胁只会在 2021 年增长。

**学会忍受影子代码和供应链风险**

摆脱所有影子代码不是一个选项。使用的太多了。完全停止这个过程会对开发周期产生负面影响。以严厉的方式限制开发人员的行为通常不会有好结果(会有更多的影子代码)。同样，摆脱供应链风险也是不可能的。现代应用程序过于复杂，依赖于开源组件，而开源组件本身又包含许多第三方依赖项。

这并不意味着 DevSecOps 应该什么都不做。开发人员可以也应该了解影子代码和供应链攻击的风险。采取一些简单的措施来降低风险会大有帮助。例如，让开发人员为他们使用的第三方代码创建简单的清单，以确保组件符合最基本的风险标准。清单可能包括，“最近更新，回复电子邮件，下载次数超过 *X* ”对于开源代码，使用现代软件组合分析工具，如 Snyk 和 Sonatype，它们检查开源库，并可以作为持续集成过程的一部分放入 DevOps 管道中。

从另一个方向来看，DevSecOps 团队应该通过思考什么样的应用程序行为可能表明妥协来解决影子代码/供应链问题。为此，团队应该创建一个异常行为列表，并为这些行为创建过滤器或通知。例如，如果一个注册页面开始持续花费用户很长时间来完成，这可能是一个表单劫持的危险信号。作为最后一道防线，看看使用机器学习系统来发现异常的应用程序行为。这些系统可以大规模监控所有应用程序的行为，这是人类永远无法做到的。

结合起来，这些防御实践应该减少 DevOps 和 DevSecOps 团队的影子代码和供应链风险。虽然考虑这些问题并不有趣，但是积极主动地应对这种恶意组合将使您的开发过程和应用程序更加安全。