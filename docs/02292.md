# 为什么您的测试自动化失败了

> 原文：<https://devops.com/why-your-test-automation-is-failing/>

如果您一直在测试自动化上投资，但是它没有让您达到您认为它应该达到的地方，这可能是您肤浅地接近了它。

一个最常见的问题是测试自动化的测试部分很容易自动化，尤其是在今天有大量的自动化工具的情况下。但是直接进入自动化测试会给你留下一大堆自动化脚本，并且通常不是最好的 ROI。理解原因需要研究自动化过程。

当工程师构建一个自动化测试时，他们在他们(或者组织中的某个人)设置的测试环境中进行。通常，这与手工测试人员访问测试环境的方式相同。

在工程师开始自动化之前，他们有一份他们正在测试的产品的工作副本，上面有相关的数据。他们对自己想写的测试有一个很好的想法。一切看起来都很有希望。

他们编写测试并运行几次。一切看起来都很好，很稳定。现在，为了提供我们期望的 ROI，测试必须运行一百万次。或者，至少，几千次，对吧？

为了获得自动化的好处，它需要足够频繁地发生。然而，瓶颈往往是在创建了一堆测试之后才发现的。因为测试必须在与创建它们的测试环境相似的测试环境中运行，对于产品的新版本或者正在测试的任何引入的变更，您需要访问数百个环境。这个要求使得有效测试变得困难。

下面是抑制测试自动化的三种测试环境方法。

### **每次运行自动化测试时手动设置环境**

对于不需要频繁运行的测试，比如安全性测试和性能测试，通常在每次需要执行测试时都要为自动化测试建立一个环境。结果，测试人员必须等待环境准备好，也许做一些额外的配置，然后运行一套测试。而且，如果他们试图优化利用率，环境会通宵或周末运行。

这种方法的问题是它将“自动”从自动化测试中剔除。当自动化依赖于一个手动步骤时，测试只和这个手动步骤一样有效。

如果手动步骤效率不高，自动化可能一点帮助都没有。我见过一些公司花了很长时间才让一个环境运行起来，以至于从时间的角度来看，在这个环境上运行自动化测试并没有什么不同。

### **设置自动化始终运行的静态环境**

当设置一个环境需要很长时间时，很自然地认为让环境保持运行是值得的，这样测试自动化就可以在上面运行。准备工作已经完成，基础设施已经就绪，产品已经配置好，数据也准备好了，那么就让自动化派对开始吧。

虽然复杂、静态的测试环境可能看起来很理想，但是这个派对不会持续太久。首先，由于通常需要一些时间来整合环境(与前一种情况相同)，因此它通常需要大量维护。做出可能会毁了事情的改变是很可怕的，你可能最终需要有人全职管理改变。就像办公室厨房里的巧克力蛋糕一样，一个有良好数据的模拟生产环境往往会吸引每个人。很快，这些良好的环境变成了共享资产，测试开始对相同的资源产生冲突。下一步自然是建立另一个静态环境。这个循环通常以愤怒的经理说些削减资本支出的话而结束。

### **自动化环境并给我们自己松绑**

随着作为代码的基础设施( [IaC](https://en.wikipedia.org/wiki/Infrastructure_as_code) )和不可变基础设施的兴起，有更多的方法来构建测试环境。足智多谋的测试团队将尝试自动化环境创建或使用内置测试工具或 CI 系统功能在公共云实例或容器上运行测试，如果他们测试的产品允许这样做的话。这既便宜又有用——可以用于一些简单的测试。挑战通常始于这种方法没有涵盖的一切。很难使用 IaC 来启动测试环境并处理它的所有方面——从安全性和隔离到依赖性、数据、第三方集成等等。这就是这种方法经常被阻塞的地方，并且对于大部分的测试负载，将我们送回前两种方法——这再次使得测试自动化投资不那么有成效。

## **建立测试环境的正确方法:** **动态环境下的测试自动化**

测试自动化世界需要一个游戏改变者。你可以让你的车开得更快，但是如果路上满是坑坑洼洼，你就不可能开得那么快或那么远。测试自动化同样受到环境创建速度的限制，包括基础设施、应用程序、数据等等。

当采用 DevOps 和测试不再是管道中的一个阶段，而是成为一个整体管道服务时，这一挑战变得非常关键。QA 不再是开发和运营之间的门户。它是关于在产品的整个生命周期中监督产品的质量。这意味着自动化测试应该总是能够运行，并且它们运行的环境必须是动态的。

应对这一挑战的解决方案是环境即服务(EaaS)。EaaS 就是将环境(包括应用程序、基础设施和数据)打包成一个实体，作为服务提供给业务流程。一旦定义完毕，就可以根据需要为手动或自动用户提供。因为它是一个定义良好的实体，所以当流程结束使用它时，也可以将其退役。EaaS 在使基础设施水平化中扮演着重要的角色，它也是为出色的测试自动化铺平道路的关键。

如果您认为您应该从您的测试自动化计划中获得更多，那么现在可能是将 EaaS 作为您自动化策略的一部分的好时机。

— [玛雅·贝尔·勒纳](https://devops.com/author/maya-ber-lerner/)