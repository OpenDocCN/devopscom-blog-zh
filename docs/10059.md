# 2022 年最佳:测量技术债务

> 原文：<https://devops.com/measuring-technical-debt/>

随着 2022 年的临近，我们 DevOps.com 想要突出今年最受欢迎的文章。以下是我们 2022 年最佳系列的最新内容。

什么是企业技术债？ [技术债务](https://devops.com/?s=technical+debt)拖慢了组织的脚步，阻碍了他们的交付能力。研究表明，技术债务会使技术产品和服务的支持 成本增加两倍。除此之外，技术债务还会削弱公司做出快速变革的能力，而这种变革是在当今市场上竞争所必需的。这些都描述了技术债务的影响，但没有触及其定义的核心。这就是问题所在。

技术债务是一个术语，许多技术人员都很熟悉，但似乎很少有人理解。更少有人有清晰的方法来衡量它。安全漏洞是债务吗？没有迁移到标准通信平台或共享流程的团队或应用程序怎么办？如果所有这些都是债务，你如何衡量？

技术债务的范围通常过于狭窄，主要集中在软件缺陷和其他与代码相关的“债务”上。然而，大型企业获得的技术债务远远超出了代码，并产生了更加严重的后果。为了真正解决与技术债务相关的问题，我们需要理解的不仅仅是软件缺陷和积压，还有安全债务、过程债务和组织债务。一旦我们理解了范围，我们就可以利用金融工具作为我们衡量的基础。

## 技术债务的历史

术语“技术债务”最初是由敏捷宣言的原始作者之一沃德·坎宁安作为一个隐喻提出的。他引入了这个概念来证明他的团队正在进行的重构财务应用程序的工作，他说，“如果我们不能使我们的程序与我们当时理解的思考财务对象的正确方式保持一致，那么我们将继续在这种分歧上绊倒，这就像支付贷款利息一样。”在 [*对技术债务概念*](https://www.agilealliance.org/wp-content/uploads/2016/05/IntroductiontotheTechnicalDebtConcept-V-02.pdf) 的介绍中，敏捷联盟指出，“……1992 年，在 OOPSLA 会议上，Ward 提供了额外的细节(根据 Ward 的反馈，在此稍作转述):‘交付首次代码就像负债一样。一点点债务可以加速开发，只要它能通过重构迅速得到回报。如果债务得不到偿还，就会出现危险。”

因此，最初的定义提供了一个比喻，比较了基于重构需求对公司交付代码能力的影响和贷款产生的金融债务。虽然这一概念已被广泛接受，但仍然没有一个商定的定义，也没有一个量化这一概念的方法。

然而，债务的概念非常有用，因为它认识到代码缺陷会带来成本；缺陷阻碍了交付的能力。然而，在现代企业环境中，这个概念需要扩展到包括影响向客户交付价值的能力的其他元素，包括与安全相关的债务，甚至组织债务。有许多项目可以(也应该)被理解为技术债务的一部分，包括:

*   尚未修复的已知错误
*   与糟糕的代码质量或糟糕的设计相关的问题
*   缺乏代码测试覆盖，包括确保质量、安全性和性能的测试
*   不再使用时没有清理的代码或工件
*   昂贵、难以管理且无法满足数字化转型需求的过时技术
*   不完整或过期的文件或缺少注释
*   需要补救的已知安全问题
*   不符合组织标准的多样化工具集
*   不符合组织标准的技术组织结构

需要注意的是，正如金融债务一样，并非所有的技术债务都应该偿还。有一个“好债务”的概念，或者进一步用金融比喻来说，是因为投资收益的机会大于债务产生的成本率而借入的资金。例如，如果一个人可以以 3%的利率借款，并以 10%的利率获利，那么增加债务在财务上是明智的。类似地，如果一个公司通过引入一个新特性所赚的钱超过了解决一些债务的成本，那么团队应该优先考虑特性工作。这种成本计算通常也会根据产品生命周期阶段而变化。在早期产品开发期间，新功能开发提供的机会通常远远超过与法规遵从性问题的风险相关的潜在成本。然而，随着产品的成熟和获得更多的客户，风险会增加，新功能带来的好处可能会减少。这很重要，因为我们不想暗示所有的技术债务都必须解决。很多时候，正确的商业决策是投资于其他领域，而不是补救技术债务。然而，通过将经济计算应用于围绕技术债务的决策，我们可以基于数据做出更明智、更有计算力的决策。

## 技术债务风险

在不同形式的[技术债务](https://devops.com/?s=technical+debt)中，安全性和组织债务是定义中最常被忽略和排除的债务。这些通常也是影响最大的。重要的是要认识到，仍未消除的安全漏洞与未修复的软件缺陷一样，都是技术债务。当我们查看新出现的漏洞或低优先级漏洞时，这个问题变得更加有趣。

虽然大多数人都认为已知的、未解决的漏洞是一种技术债务，但新发现的漏洞是否也是技术债务，这是值得怀疑的。这里的关键是是否需要解决安全风险，对于这个答案，我们可以查看组织的漏洞管理服务级别协议(SLA)。如果一个组织设置了一个 SLA，要求在一天之内解决所有的高级漏洞，那么我们可以说，在那一天之前的高级漏洞就是债务。这并不是说不超过 SLA 的漏洞不需要解决；只有 SLA 内漏洞代表新的工作，且只有当它们超过 SLA 时才变成债务。

## 组织债务

另一种经常被排除在标准分析之外的技术债务是组织债务和工具链债务。这些类型的债务经常出现在组织没有完全整合的并购中。如果组织的一部分不遵守更广泛组织的标准流程或组织结构，这也会影响公司向客户交付价值的能力，并代表另一种形式的技术债务。在公司内部的工具链差异中经常可以看到同样的范例。如果公司的一部分使用 Slack 进行交流，而另一部分使用微软团队，缺乏标准化会导致阻碍组织交付能力的摩擦。这并不是说所有公司都必须使用相同的工具集，或者完美的组织结构对等是唯一的运营方式——但是要明白，不标准化的公司会付出持续的代价。在制定了标准的地方，它们应该提高效率。当不符合这些标准时，效率就会降低；另一种形式的技术债务。

例如，如果一家公司的标准聊天平台是 Slack，那么该公司已经选择了标准化，因为他们相信所有团队之间的标准沟通可以提高客户的价值流，并通过统一的许可证购买降低成本。如果该公司收购了另一家使用团队的公司，那么在平台统一之前，工具链的差异应该被视为技术债务。或者，如果一家公司是投资组合公司，在聊天平台上标准化可能价值有限或没有价值。该公司决定被收购公司可以自由使用他们选择的任何聊天工具可能是完全合适的，因为这种差异不会影响公司任何一部分交付价值的能力。

Mik Kersten 在他的书《从项目到产品》中讨论了这种类型的债务，他在书中引入了“意外复杂性”的概念，他说这“包括了工具堆栈中的所有不改进商业价值流的异构性”。由于合并和收购而继承的工具，或者由于缺乏集中治理而独立选择功能相似的工具，都属于这一类。”他接着说，“减少工具的意外复杂性应该是一个持续的努力，因为这是价值流债务的一种形式。”

需要注意的是，虽然许多并购会带来大量技术债务，但组织结构或工具链的不连续性并不一定等同于技术债务。这种类型的组织错位是否被解释为技术债务，在某种程度上取决于公司的并购战略。对于那些在组织结构和工具方面有标准的公司来说，合并或收购的一些好处是基于集成的假设，如果未集成的过程和工具没有在集成业务案例计划的时间框架内得到补救，那么它们应该被认为是技术债务。然而，如果一个公司是一个投资组合公司，并且采用联合方法，那么让过程和工具不集成是完全可以接受的，并且这些不应该被认为是技术债务。只有当工具和过程不符合与组织策略一致的标准时，组织技术债务才会发生。

纵观整个企业，我们认识到有许多形式的技术债务，包括软件债务、组织债务和风险相关债务。考虑所有这些形式的债务是很重要的。鉴于对技术债务的广义理解，我们可以将技术债务重新定义为:

***对技术资源的需求未得到满足，这降低了向客户交付价值的能力或增加了风险。*T3*T5***

## 计算企业技术债务

有了这种对技术债务的扩展观点，以及对它可能包括软件缺陷、组织复杂性和工具链异质性的理解，我们可以开始寻找度量技术债务的方法。

每种技术债务的量化都面临着独特的挑战。然而，术语技术债务本身为如何衡量所有这些提供了一个有用的起点。术语“技术债务”意味着一种成本，我们讨论的每种类型的债务都可以用货币来量化，从而得出一个大型组织的总债务成本。

### **技术债务利率**

从财务角度来看，当我们计算技术债务的成本时，我们关注的是债务的利率。也就是说，在给定的一段时间内，技术债务给一个组织带来了多少成本？沃德·坎宁安在他的 [关于债务隐喻的视频](https://www.youtube.com/watch?v=pqeJFYwnkjE) 中讨论了这一概念，他说，“用借来的钱，你可以比其他方式更快地做一些事情，但在你偿还这笔钱之前，你将支付利息。”组织的复杂性可能会造成新产品开发的延迟，这些延迟可以被计算为收入损失。由于安全漏洞和对品牌的相关影响，未减轻的风险可能会使软件付出代价。随着时间的推移，这些成本继续增长。

这很有用，因为还可以计算减轻债务的成本。例如，减少软件缺陷的成本就是修复缺陷的成本。值得注意的是，缓解成本可能会随着时间的推移而变化。随着对工作部分的熟悉程度降低，修复软件缺陷的成本随着离创建越远而增加。所以我们必须根据指定的时间点来计算这个成本。如果我们理解了减轻债务的成本，我们就可以考虑债务的成本，并将其与减轻债务的成本进行权衡。这有助于我们就修复技术债务的投资回报做出明智的业务决策。

### 软件债务

虽然这种衡量技术债务的经济方法为我们提供了一个处理债务的通用框架，但不同类型的债务仍然需要不同的衡量方法。软件相关债务的成本可能包括缺陷、不必要的复杂性、缺少文档以及不再使用但仍保留在应用程序中的代码。所有这些都增加了代码维护和更改的成本，还可能导致事故甚至停机。因此，我们可以通过查看与问题相关的支持活动的成本，并将其添加到对开发新代码的生产力的影响中，来相对容易地计算这种类型的债务的成本。通过查看解决问题所需的时间和资源，也可以很容易地计算出债务成本。

例如，在一家大型教育公司，代码中有一个导致负载峰值的错误。整个团队每周需要一到两次跳到事故桥上，通过按顺序重启应用服务器来修复负载问题。因为应用程序是旧的，缺陷的位置是未知的，并且很难排除故障。然而，很容易估计出解决这个问题的成本不会超过几周的工作量。作为一个估计，让我们说这项工作将花费 10，000 美元来减轻。相比之下，由于这个问题，整个团队、事件管理和运营中心每周要花一到两个小时来补救影响。让我们估计这个成本为 2000 美元/周。基于这个高层次的分析，很明显，修复这个缺陷的 ROI 将在修复 bug 后五周实现。

### 风险债务

风险相关债务的成本计算起来有些复杂，但我们可以再次使用美元价值作为计算的基础。这些种类的债务包括安全风险以及与合规性相关的风险。难以确定风险相关债务成本的原因之一是，风险并不总是会变成现实。也就是说，仅仅因为存在安全漏洞的风险，并不意味着*就会有*安全漏洞。这是一种风险，这一事实本身就意味着有可能发生某种事情；这不是必然的。然而，风险分析提供了一个非常有用的工具，以年度损失预期(ALE)的形式计算这类价值。年度损失预期是一种衡量一年期间预期财务损失的方法。计算方法是将预期损失乘以给定年份发生的概率，或者:

ALE = SLE * ARO

其中，SLE 是单次损失预期，或风险发生时的损失金额，ARO 是年发生率，或事件在一年内发生的概率百分比。因此，如果给定违规行为导致的预期损失为 100，000 美元，并且该类违规行为可能每五年发生一次(假设在任一年发生的概率为 20%)，则该风险的 ALE 将为 100，000 美元 x 20% = 20，000 美元。因为这个数字估计了风险造成的潜在损失，所以它可以作为风险形式的技术债务利息的有价值的估计。

类似于软件缺陷相关债务，风险相关债务的价值可以计算为补救风险的成本。这可能包括修补过时系统、更改软件以防止黑客攻击，甚至更改流程以补救与合规性相关的风险等活动。对于每一种情况，我们可以查看补救问题的资源成本，并将其与以 ALE 表示的持续利益进行权衡，以确定是否应该进行投资来补救风险。

### 组织技术债务

组织技术债务是由不符合组织标准的组织结构、流程和工具造成的债务，它会延迟向客户交付价值。这在两个独立的组织合并的合并和收购中很常见。除非这些组织结构和工具是一致的，就像我们在 Slack 和 Teams 的例子中一样，否则可能会有不一致的地方，这使得公司作为一个整体交付更加困难。思考这种类型的债务的一种方式是工具和工作方式缺乏一致性，这阻碍了价值的流动。Mik Kersten 描述的“意外复杂性”是组织债务的一个很好的例子。

组织债务可以用延迟向客户交付价值的成本来衡量。例如，如果团队之间的移交因为使用不同的开发平台而花费了很长时间，那么这种延迟可以被测量，然后通过延迟的成本来量化。有了这种类型的债务，也有可能看到整体生产率的成本。如果本组织的生产率因通信系统的扩散而受到负面影响，阻碍了信息的流动，那么应当计算生产率受到影响的成本；这意味着一次机会的丧失和另一种形式的技术债务。

与发展相关债务和风险相关债务一样，债务本身的成本可以通过补救组织债务的成本来估算。这提供了一个有用的机制来确定是否应该进行投资来补救债务。

### **结论**

对于大型企业来说，技术债务的范围很广。有许多类型的技术债务和不同的方法来计算债务的成本以及债务的利率。软件相关债务必须根据对客户的影响或对软件工作人员生产力的影响来计算。风险相关债务可以通过查看该债务的 ALE 来计算。组织债务可以通过查看向客户交付价值的延迟来计算。

所有这些信息都带有很多不确定性，需要考虑很多计算。可以肯定的是，技术债务会带来巨大的成本。这种债务的利息每天都在偿还，即使组织并不知道。虽然让企业真正了解其债务的全部范围或他们支付的利息额可能没有意义，甚至是不可能的，但通过查看补救成本和利息成本，我们至少可以量化影响，并根据补救企业技术债务所需工作的投资回报做出计算后的决策。