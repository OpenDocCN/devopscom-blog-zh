# 从自动化云部署到渐进式交付

> 原文：<https://devops.com/from-automated-cloud-deployment-to-progressive-delivery/>

您的团队正在进行敏捷之旅，您可以或多或少地跟踪部署，从一个故事，通过 git 提交，到自动化构建器，到工件存储库，到容器，然后到云。或者，事实上，许多有效的变体中的任何一个，使您相信您的部署在很大程度上是自动化的。你可以指出的是，一个业务请求进来，结果是一项服务或一个新的应用程序。你的权限似乎在你的用户做出反应之前就停止了。这样够好了吗？

让我们回到发布的早期想法。这是一个所有功能和修复的集合，最大的利益相关者已经说服产品所有者将它们放在故事列表的最上面。答应了一个日期，但是 QA 晚了，坚持不懈的利益相关者从故事中挤出了一点果汁。然后把它塞进一个球里，连夜送到你的服务器上，免得有人注意到。第二天，开发人员不得不处理后果，因为支持队列随着困惑的用户而增长。

虽然开发人员已经掌握了自动化部署的敏捷概念，但是发布生命周期确实随着部署的上线而结束。这提供了确定性，即已经构建并放置在工件存储库中的东西与测试人员在阶段环境中看到的东西是一样的。它也有吉拉所说的变化。

这种释放很像一份生日礼物。你叔叔在你不知情的情况下和你爸爸简单谈了一下，同意你真的会从一双新袜子中受益。然后这些当天就送来了，袋子里还有收据，以防你需要拿回去。

第一次演变伴随着发布并不完全等同于部署的概念。最后，最终用户的观点推动了公司发布策略——更新可以在不直接影响每个用户的情况下部署。如果有两个完全相同的发布环境，并且有巧妙的网络切换，这意味着只有一个是真实的，会怎么样？这种类型的触发器安排(有时称为蓝/绿部署)允许在投入使用之前在真实的环境中进行内部测试。

是广告业促成了 A/B 测试的想法。不是猜测一个活动的变体可能优于另一个，而是使用受控样本和变体的令人惊讶的科学方法被用于观众，以查看他们更喜欢哪个。在数字时代，可以将同一版本的两个变体部署到不同的服务器集。这可能意味着每个用户会话都可以使用任一版本。然后，有必要将最终的点击率，或者选择的任何成功衡量标准，与特定的发布版本联系起来。这种实验的价值取决于你问的问题，但它至少观察到了真实的用户交互。

继续前进，DevOps 环境开始使用更多的[特性标志](https://devops.com/how-product-managers-can-take-back-control-with-feature-flags/)或触发器。这些代码路径可以在实时服务器中交付特性变更，通过配置变更进行控制。这减少了为进行某些更改而重新部署的需要。有发布意识的团队正在围绕配置进行整合，而不仅仅是代码。尽管代码一旦编译和构建就被锁在不可读的工件文件中——一个更大的涉众社区可以管理配置文件，通常用英语编码。这有助于保持特性变更更接近涉众，并且不太可能退回到竖井中。

随着对交付有了更明确的理解，对用户群体也有了更明确的理解。过去，用户是数据库中的一行条目。甚至那些不挖掘用户数据的公司也明白，产品和服务有不同的用户群。

传统上，总是有内部用户或 beta 测试人员——公司内部的那些人，他们的工作是检查他们理解或负责的部分是否按预期工作。在防火墙之外，还有热衷于最新更新的技术社区。这些人报告错误，经常将你的产品与竞争对手的产品进行比较，也许两者都用。如果你给他们一个 bug，这些观众不会失去理智。更重要的是，他们会很快注意到——也许会在社交媒体上告诉所有人——你的缺点。

接下来是空闲用户，他们可能只拥有你的产品的免费版本或层级。这些人更可能致力于印象，最好不要失望。他们也不太可能热衷于更新。最后，那些支付费用、只想让事情正常运行、需要理解一条通向连续性的道路的大部分核心用户将会欣赏这个软件，并且会潜移默化地理解路线图。这些可能也包括你最大的用户。当然，如果你没有办法区分你的用户，以上所说的一切都是没有意义的。

对于像 CloudFront 这样的边缘服务一样位于公共云和 CDN 上的服务，按区域发布的能力要简单得多。出于法律原因——比如欧盟法规，这也变得越来越有必要。这允许对不同时区和不同规模的社区进行战术发布。将变更后的服务部署到一个小组中以降低风险的实践，或者“canarying”，是另一种利用智能路由的方法。这需要快速观察和回滚发布的能力。

今天，大多数软件都有某种程度的黑暗发布，这限制了发布对适当社区的可见性，直到一切正常。从这个意义上来说，渐进式交付**(James Governor 定义为“对爆炸半径进行细粒度控制的连续交付”)可以被视为您的软件或服务从您的开发团队的笔记本电脑到最终用户的病毒式传播。**

**观察服务使用只是技术领域几乎每家公司核心关注的一部分。从这个角度来看，渐进式交付改变了将您的开发团队仅仅视为构建者到用户实现专家的方式，当然，他们一直都是这样。**

**未来无疑会涉及越来越多的客户驱动的发布，这与越来越多的使用数据科学来研究用户社区和他们的排气携手并进。重要的一点是，要确保你的团队深入到产品之旅的右侧，并让用户对你所做的东西的反应成为你感官输入的更大一部分。多想想不断的小变化，少想想仪式性的发布。**

**大卫·伊斯曼**