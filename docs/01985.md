# 深入了解吉托普斯

> 原文:[https://devops.com/an-inside-look-at-gitops/](https://devops.com/an-inside-look-at-gitops/)

在 DevOps 的变体层出不穷的时候，请为最新的版本做好准备:GitOps。这个新术语承诺给混乱的操作带来一些秩序，并授权操作团队利用从他们的开发同行那里学到的最佳实践。对于 GitOps 来说还为时尚早，但是我们认为您需要了解 DevOps 的这个新方面。

## **什么是 GitOps？**

与我们交谈过的每个人对 GitOps 的看法都略有不同，但这是我们的观点:在其最基本的形式中，GitOps 是被定义为代码的基础设施和操作过程，并存在于源代码控制系统中，如 Git。Git 成为了生产(或登台，或开发)中正在运行的内容的唯一来源。

声明式系统，如 Terraform、AWS CloudFormation 和 Kubernetes 有助于实现这一实践；但是运营不仅仅是基础设施和代码。真正的运营需要一种方法来规划、审查和批准基础架构的移动、添加和更改。它还要求有良好记录的程序，或[操作手册](https://docs.gitlab.com/ee/user/project/clusters/runbooks/)，才能成功。这就是 GitOps 与众不同的地方。我们认为 GitOps 是基础设施管理的完整运营生命周期，作为代码存在于 git 存储库中。

GitOps 可用于管理应用程序部署和由所需系统组成的基础设施，而不考虑部署的应用程序(即网络、安全等)。).两者都将遵循相同的程序来计划、审查、批准和发布代码到产品中。如果做得好，GitOps 将让工程师不断地对基础设施进行更新，以连续交付的形式满足应用程序的所有需求。版本控制系统确保一切都被记录和可见，并且审计跟踪保持团队的合规性。GitOps 将使有问题的变更变得容易恢复，成为从软件开发和基础设施角度了解系统中正在发生的事情的单一来源。

## 需要什么技术？

为了启动 GitOps，您将使用基于 Git 的版本控制系统。然后你需要有能力创建一个声明性的云基础设施，使用诸如 [Terraform](Terraform) 和 [Kubernetes](https://kubernetes.io/) 之类的东西，在 [Helm](https://github.com/helm/helm) 或 [Flux](https://github.com/fluxcd/flux) 的帮助下。因为 Terraform 和 Kubernetes 都是声明式系统，它们使得以可复制和透明的方式创建和部署代码形式的基础设施变得更加简单。您还需要实现一个解决方案，比如 GitLab，它将操作过程包装在这些工具周围。GitLab 是一个端到端的 DevOps 解决方案，可以管理积压的请求，将这些请求分配给适当的主题专家，以在 Git 中创建变更，促进审查和批准流程，并使用其灵活的 CI/CD 系统启动变更的执行。

虽然可以通过使用不同的解决方案将代码合并并发送到 Kubernetes 来实现这种工作流，但 GitLab 无疑是一条通往 GitOps 的捷径。它允许开发人员和操作管理员从相同的事实来源开始工作，并使用一组通用的程序和工具。

## **有什么好处？**

在 DevOps 世界中，GitOps 可能是独一无二的，因为它可能对运营团队成员和开发人员都有好处。首先，GitOps 旨在通过从软件开发中获取所有的最佳实践，并在部署端释放它们，来解决运营有时像洞穴一样的性质(一个人在很大程度上孤立地工作)。

全面监督、架构审查、项目管理和流程的所有其他部分都集中在 GitOps 中，以努力结束 Ops 而不是其他所有人，并让所有利益相关者参与到流程中。基础不会改变，运营工程师仍将创建基础架构，但这只是一个更大流程的一部分，每个人都可以参与其中并进行协作。再也不用担心工程师创建不可复制的云基础架构；使用 GitOps，一切都可以被跟踪，使重复性变得容易。突然，回答“什么变了？”也变得简单了因为没人需要去寻找答案。底线是一个成功的 GitOps 计划将有利于实际底线，因为操作流程将大大简化。

## **可能的挑战**

对于任何协作努力来说，改变都是棘手的，GitOps 也不例外。创建一次性项目而不遵循流程通常更容易，所以关于 GitOps，首先要考虑的是它需要所有参与者的自律。对于团队来说，写下所有内容是至关重要的。

在 GitLab，由于我们的[协作](https://about.gitlab.com/handbook/values/#collaboration)文化，我们以此为生，但我们知道这不一定是任何个人或组织自然而然的事情。对于团队中的每个人来说，记录合并请求和问题的进展是至关重要的。直接在产品中编辑东西或者手动修改东西的诱惑很难抑制，但是越少“牛仔工程”GitOps 就会工作得越好。

如果 GitOps 听起来像是您的组织可能从中受益的东西，我们最好的建议是从小处着手。选择一个小领域开始，取得胜利，然后在此基础上继续发展。在 GitLab，我们称之为[迭代](https://about.gitlab.com/handbook/values/#iteration),它对我们很有效。

![](../Images/18f6881967315b5e3722002a1c9ab45b.png)

*本文由 GitLab 技术宣传主管* *Priyanka Sharma 合著。*

— [布拉德·唐尼](https://devops.com/author/brad-downey/)