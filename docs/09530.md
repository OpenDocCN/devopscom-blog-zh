# 两种类型的代码漏洞

> 原文:[https://devops.com/the-two-types-of-code-vulnerabilities/](https://devops.com/the-two-types-of-code-vulnerabilities/)

拼写检查器、语法检查器和预测键盘都有助于减少书面交流中的错误，但在一个作家需要创新新表达方式的创造性媒体中，没有什么可以消除所有错误。我们写的代码也是如此。

当然，你的代码可能是完美的，但是平均来说，*所有的*代码都有缺陷。有些错误是良性的。有些会造成意想不到的提前终止。少数会造成资源消耗失控。一些错误会导致安全漏洞，让用户做一些意想不到的事情，有时甚至是不受欢迎的事情。

这些安全漏洞是行为漏洞，因为它们依赖于代码在执行时的行为。另一种类型是智能漏洞，这是代码正确行为的一部分，但它泄露了如何利用系统的细节。这是两种主要类型的代码漏洞；两者都有风险。

## 运行时的行为漏洞

**Tl；dr:代码如何工作，攻击者如何利用它的优势。**

这涵盖了广泛的问题，但所有这些问题都是代码行为在特定环境下导致不良结果的结果。这些大多是无意的。发送到数据库的 [未转义的用户输入可能导致 SQL 注入漏洞](https://xkcd.com/327/) 或者发送到浏览器的未排序字符串可能创建跨站脚本(XSS)漏洞。有些行为是有意的，却产生了意想不到的后果；允许它输出环境变量或从外部资源读取数据的 [Log4j](https://devops.com/?s=Log4j) 字符串替换行为是故意的，但我们现在称之为 Log4Shell 的恶意使用不是故意的。在另一个最近的例子中， [行为的组合可以被利用来获得 Linux 桌面计算机](https://www.microsoft.com/security/blog/2022/04/26/microsoft-finds-new-elevation-of-privilege-linux-vulnerability-nimbuspwn/) 的根权限。

## 内容中的情报漏洞

**Tl；dr:代码的内容告诉攻击者关于系统的什么以及如何访问它。**

20 世纪 50 年代，电话公司——当时几乎只有一家——开始实施完全自动化的拨号，不需要人工接线员在交换站接通电话。这些细节首次发表在 1954 年 11 月的一份技术杂志上( [见第 1209 和 1309 页，此处](https://archive.org/details/bellsystem00technivol33amerrich/page/1208/mode/2up) )，从其中收集的信息导致了“蓝盒子”的产生，这些“蓝盒子”利用内部知识允许外部人员控制电话设备并拨打免费长途电话。

这并不是第一个利用内部知识获取外部优势的例子，但它在电脑黑客和个人电脑起源中的作用是如此传奇，以至于它需要在这里得到认可。

该电话系统的智能漏洞被公布在该公司的技术手册中——许多人认为这些手册仅供内部使用，没有人意识到不可信的读者可以获得这些手册。然而今天，我们的代码中存在智能漏洞。

代码中充满了秘密，以及这些秘密连接到哪个系统的细节。这些秘密曾经很难管理，将它们写在代码中是唯一可行的选择。举例来说，现在我们有 Hashicorp Vault 这样的工具，并且几乎在每个云中都有安全的密钥库，但是遗留代码中所有这些秘密的遗留和安全债务对于像 [Lapsus$](https://securityboulevard.com/?s=Lapsus$) 和其他专门针对代码的攻击者来说是一座金矿。

## 安全是一个过程，而不是产品

这里列出的两个类别隐藏了很多东西。我们每个人都可以说出许多类型的行为漏洞——比不同类型的智能漏洞多得多——但这两类漏洞代表的风险相对相等。最近的事件表明，攻击者如何利用从代码中收集到的内部信息，以及从中获取的密码和密钥，快速越过防火墙和其他访问控制。

识别代码中的秘密和其他情报风险相对容易，但是很少有团队这样做，因为检测是容易的部分。将检测集成到开发人员的工作流程中，以便他们可以在处理和审查代码时在上下文中采取行动，这是消除创建新的安全债务的最有效的方法。为开发人员提供所需信息的工具有助于他们了解代码中智能风险的整体情况、风险最高的领域，并为他们指出可以立即解决的问题以改善代码健康状况，这些工具对于帮助团队减轻历史风险是必要的，最好是通过轮换发现的任何秘密。

有工具可以自动化这个过程，并帮助团队消除他们代码中一半以上的风险——但是第一步是识别那一半风险在哪里。