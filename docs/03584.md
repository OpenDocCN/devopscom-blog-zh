# 黄色代码:当操作不完美时

> 原文:[https://devo PS . com/code-yellow-when-operations-not-perfect/](https://devops.com/code-yellow-when-operations-isnt-perfect/)

工程团队不时会因为各种原因陷入困境。有时候，爆发式增长会让团队措手不及。或者，随叫随到已经失去控制，每五分钟就有一次警报响起。或者，开发和运营团队已经不再意见一致。不管为什么，团队正处于困境，需要做些什么来解决它。

如果这是一个新问题，解决方法可能很简单:增加几台服务器，回滚到一个已知良好的应用程序版本，或者让所有人聚在一起吃披萨、喝啤酒来消除误会。然而，通常随着时间的推移，问题会慢慢出现在你身上，突然之间，这个洞变得如此之深，以至于你找不到出路。在 LinkedIn，已经发展到这一步的团队通常会宣布一种状态，称为“黄色代码”。

## 预备警报

有些人认为黄色代码这个名字是基于交通灯，但更准确地说——更古怪地说——它实际上来自你最喜欢的“星际迷航”系列。更准确地说，这是星舰“企业号”上的船员指示他们当前防御状态的方式。不管是哪种情况，定义都很清楚:出了问题，我们需要谨慎前行。对这两个比喻，我们也有一个红色代码。这最好被描述为一场迫在眉睫的危机，每个人都一天 24 小时工作，直到危机得到解决。黄色代码稍微轻松一些:这是每个人的主要关注点，但仅限于工作时间。黄色代码也倾向于持续几个月，而红色代码应该持续几天。

其他公司可能会使用不同于黄色代码的术语，但效果是一样的:团队正在向公司的其他人传达他们已经发现了一个严重的问题，需要优先解决，以确保团队的成功，从而确保公司的成功。做到这一点的能力是开放和诚实沟通的一个重要方面，是健康文化的一个关键价值，但往往会被忽视。谈论我们的问题与庆祝我们的成功一样重要，如果不是更重要的话。团队从解决问题中学到的比他们从完全成功中学到的更多。

## 这不是失败

启动黄色代码的第一步是理解这不是失败。承认团队有问题需要解决并不可耻。尽管我们尽了最大努力去避免，错误还是会发生。我们唯一能做的就是诊断问题并修复它。我们唯一失败的时候就是对这些问题视而不见。这适用于我们的工程团队如何相互交流，就像它适用于我们生产和运行的软件和系统一样。

然而，关键是要解决正确的问题。大多数时候，我们陷入当前的局面是因为一场缓慢的沸腾——不断增加的技术债务、许多小问题或流程中的故障——最终累积成一场危机。黄色代码的目标必须是不仅补救当前的问题(反应性组件)，而且确保它们不会在未来重复出现(前瞻性组件)。

## 为成功的黄色代码做准备

成功的“黄色代码”需要几个组成部分，以及获得组织其他成员认可的必要条件:

*   **问题陈述:**对于引发黄色代码的团队所面临的问题，必须有一个清晰且一致认可的陈述。这不仅应该包括当前的问题是什么，还应该包括当前对其根源的理解是什么。

*   **退出标准:**接下来，你需要有团队为退出黄色代码而努力的具体目标。这些应该是传统的 SMART 目标:具体、可衡量、可实现、相关且有时限。这些目标使团队有可能首先输入黄色代码，因为它覆盖了一个固定的范围，而不是开放式的。

*   **沟通:**所有关于黄色代码的信息，包括公告(包含问题陈述和退出标准)、成功结论和定期状态更新，都应发送给更大的组织。这可能是你的部门，也可能是整个工程组织。甚至可能是整个公司，这取决于问题的性质。

*   **项目管理:**和所有大型项目一样，需要有人负责组织工作和沟通信息。由于这代表了受影响团队的“全员参与”场景，因此有一个专门的项目经理(PM)来帮助这一点通常是有帮助的。这通常是一个了解团队和工作，但不直接参与执行的项目经理。这使得经理和个人贡献者可以专注于手头的工作。

一旦考虑了这些方面，并决定进入黄色代码，团队的第一个行动就是围绕退出标准重新组织他们的优先级。这通常意味着将季度目标束之高阁。还可能需要召开一次专门会议，讨论退出标准的状态。

## 呼吸的空间

对于一个团队来说，进入“黄色代码”并专注于设定好的目标是很好的，但这对团队的成功来说是不够的。为了真正的成功，团队周围的每个人都必须了解情况，并给他们工作的空间。这是健康的工程文化迎接挑战的地方。

*   **预期延迟:**切线团队受到影响的最常见方式是延迟。他们必须预料到，如果不在退出标准的范围内，受影响团队的任何请求都可能被延迟。“黄色代码”的核心是重新安排解决上述问题的优先顺序。外部团队需要考虑到这一点，并理解他们自己的项目时间表可能需要调整。

*   **最小化新请求:**其他团队也应该避免向受影响的团队提出超出已定义退出标准范围的新要求。除了接受任何现有请求的延迟之外，最小化这些请求，允许受影响的团队将他们有限的工程时间花在到达黄色代码的另一边。

*   **向其他团队寻求帮助:**黄色代码的团队可能会发现他们需要外界的帮助来实现他们的目标。例如，如果流量突然出现爆炸性增长，他们可能需要加快新硬件的配置。发现自己是这类请求的接收方，可能需要改变自己的优先顺序。永远记住，团队都是同一家公司的一部分，因此，每个人都会一起成功或失败。

工程团队很少是独立的，重要的是每个人都理解让这些团队很好地工作和一起工作的价值。为了确保这一点，暂时推迟一点目标是值得的。

## 成功之望

黄色代码代表大量的高优先级工作，完成这些工作通常会给团队带来压力。对提出合理要求的同事说“不”很难，而且范围内的工作很少涉及在有趣的新功能上花费时间。此外，如果要解决的问题包括团队之间的沟通问题，那么就需要进行一些困难的对话。然而，当团队接近工作的结尾时，就更容易看穿退出标准的另一面是什么了。

黄色代码的最终目标是让团队从一个危机接一个危机的被动模式中走出来，进入一种积极主动的状态，在这种状态下，他们能够致力于正确的大项目。达到退出标准将意味着工程师更有效率，能够更主动地工作。这是一个更强大的团队——工程师更开心，因为他们没有沉重的运营工作压力，团队工作良好，因为他们相互有效地沟通，客户也很高兴，因为请求通过自动化或在合理的时间内得到处理。

你的公司有类似于 LinkedIn 处理黄色代码的内部流程吗？

— [托德·帕利诺](https://devops.com/author/todd-palino/)