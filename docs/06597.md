# 3 种减少调试周期的可观察性策略

> 原文：<https://devops.com/3-observability-strategies-to-reduce-debugging-cycles/>

***这些观察技巧可以帮助开发人员发现阻碍性能和破坏客户体验的问题***

云服务、容器、DevOps、微服务和无服务器等现代技术和方法使组织更容易将应用程序代码部署到生产中。然而，现代技术体系中的附加层增加了复杂性，使得在客户受到影响之前发现性能问题并追溯到根本原因变得更加困难。

虽然所有这些层都可以被检测到，但是它们中的每一层都提供了不同的信息，并且用于不同的角色。如果出了问题，开发人员应该从哪里着手呢？也许他们会在支持票上被提及。或者他们最终盯着来自各种性能监控和日志工具的系统的高级可视化。但是到处都有图表。对于开发人员来说，没有一种万无一失的方法可以让他们专注于应该快速查看的内容。通过退后一步观察图表，他们显然会看到峰值。但是有这么多的信息和这么多的变量，要找出原因并不容易。

当[事件影响到](https://devops.com/performance-issues-looking-beyond-the-infrastructure/)大量客户时，他们可能会花很多天来寻找答案。如果不知道是什么导致了这个问题，开发人员会花大部分时间盲目地跟踪不同的线索，做一些像任意代码回滚这样的事情。成本很高。[研究](https://www.dej.cognanta.com/2020/05/04/the-aiops-maturity-research-study-key-findings/)显示，组织每年在事件管理上花费约 460 万美元。

## 可观察性:要考虑的策略

开发团队可以通过实现三个被忽略的可观察性策略来节省时间和降低成本，这三个策略提供了一个新的视角，并且将所学知识发扬光大。

### 比较一段时间内的变化

为了帮助减少追踪问题到特定原因所需的时间，开发人员应该随着时间的推移查看指标。找到相同活动窗口的最接近的表示，并将其与之前的时间点进行比较，以帮助发现异常值。例如，如果一个开发团队收到一个客户报告应用程序响应时间缓慢的事件，他们可以比较相似时间段的事务数据来寻找相关性。数据可能显示问题仅出在 API 调用上，尽管单个 API 调用时间不足以达到阈值并触发警报。但是，将这些 API 调用与一周前相同参数下的调用进行比较——相同的时间、相同的服务器等。—他们发现 API 调用的总执行速度慢了 20%。

查看一段时间内的性能比较有助于开发人员在性能下降开始伤害大量用户之前了解性能下降情况。

### 分析用户行为模式

开发团队还应该评估与应用程序交互的个人和 IP 地址的行为模式。这可以提供帮助区分外部(用户、浏览器)原因和内部原因(代码或公司系统的问题)的洞察力。

例如，假设一位电子商务客户在结账前试图修改购物车中的商品。应用程序对他们的点击响应缓慢(需要 2 秒钟)，所以他们重复点击。一次事件可能会被忽略，但重复的 2 秒钟延迟会产生重大影响。它甚至可能触发数据库过载或存在代码问题的警报，而实际上用户行为正在加剧潜在的问题。一些日志活动可能看起来像攻击，但调查受影响的用户可能会发现根本原因实际上是浏览器行为异常或错误配置的代理发送异常流量。

在这两种情况下，开发人员通过实施可能无法解决问题的纠正措施来结束浪费时间。但是考虑模式——查看问题发生前后触发的事件以及单个用户的行为和 IP 地址——将使开发人员能够快速跟踪性能问题的根源。

### 正确评估影响

正确评估问题的影响是另一个有用的策略，有助于确定对警报的响应。例如，如果有少于 0.5%的用户反复遇到某个 API 的错误，无法访问该功能(如在购物车示例中)，并且一直在重新尝试该 API，您将会看到错误率的峰值，这意味着更大的问题。

另一个例子可能是已经推出的新功能由于某种原因与旧帐户的组件不兼容，例如不兼容的配置文件信息或数据阈值。随着客户的探索，这一小部分用户将会遇到这个问题。看起来好像该功能被破坏了，但实际上，这是一些遗留数据的问题。

当问题只影响少数客户时，开发人员依靠监控工具来获得解决问题所需的警报和上下文，而不需要依赖支持或支持票据，这是非常有益的。

## 在发现后应用可观察性知识

对于影响许多用户或难以诊断的问题，开发团队应该考虑在进行发现后分析时添加自定义指标或监视器。无论度量标准是什么(日志中的额外一行、StatsD 度量标准或在它周围放置一个捕捉以记录跟踪),重要的是捕获学到的经验教训并使其在未来可操作，这将在再次发生时节省发现时间。如果没有这一步，随着软件复杂性的增加，解决未来问题的平均时间可能会继续恶化。

缺乏可操作的数据是公司每年花费数百万美元管理和解决事故的原因之一。当开发团队寻求扩展可观察性实践时，他们应该首先考虑如何将开发人员置于快速解决错误或性能问题的最佳位置，并最终交付卓越的客户体验。