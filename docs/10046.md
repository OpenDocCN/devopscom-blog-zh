# PingCAP 的创新 TiDB 数据库 Techstrong。电视

> 原文:[https://devo PS . com/ping caps-innovative-tid b-database-tech strong-TV/](https://devops.com/pingcaps-innovative-tidb-database-techstrong-tv/)

[PingCAP](https://www.pingcap.com/) 首席执行官 Max Liu 讨论了 PingCAP 为 [OLTP](https://devops.com/?s=OLTP) + OLAP 提供的创新 TiDB 数据库和云技术，以及 PingCAP 七年多前对开源的承诺。Max 分享了一些关于即将在湾区举行的首届 HTAP 峰会的激动人心的消息。下面是视频，后面是对话的文字记录。

[https://player.vimeo.com/video/743103846?h=4af6557c5e&badge=0&autopause=0&player_id=0&app_id=58479](https://player.vimeo.com/video/743103846?h=4af6557c5e&badge=0&autopause=0&player_id=0&app_id=58479)

米奇·阿什利:很高兴能和麦克斯·刘一起。马克斯是 PingCAP 的联合创始人兼首席执行官。欢迎麦克斯。

Max Liu: 嗨，Mitch，很高兴见到你。

阿什莉:很高兴见到你，感谢你的加入。所以，我们要谈谈数据库，这是我最喜欢的话题之一。在我们开始之前，你能自我介绍一下吗？请向我们介绍一下您和 PingCAP。

刘:嗯，谢谢你邀请我。我是 Max Liu，PingCAP 的联合创始人兼首席执行官。我们的产品是 TiDB，T-I-D-B，这是一个开源的分布式数据库。你知道，我是一名超过 15 年的软件工程师，我仍然喜欢编码。在我开始 PingCAP 之前，我花了很多时间，你知道，仔细地设计表模式，修复那些数据库伸缩问题，并试图使编码更快。既然如此，那么多工程师，没有开发人员，浪费他们的时间一次又一次地做同样的事情。

因此，我们启动了 TiDB 项目，为工程师建立一个梦想的数据库，以处理从 TB 级数据到 Pb 级数据的可伸缩性，让开发人员专注于 C 代码和 SQL，对不起，还有他们的业务逻辑。所以他们可以享受，你知道，睡觉，所以你可以得到更多的睡眠。不仅如此，你还可以留着你的头发，不像我，对不对？所以，享受或其他乐趣。

还有，很多人发现我们公司的名字很有趣。PingCAP 实际上是由 ping 和 CAP 两部分组成的。所以，CAP 就是 C-A-P 定理，你知道吗？代表一致性、可用性和传统宽容。你知道，这就像是分布式数据库的理想情况，对吗？所以，ping 只是一个缩小的注释，当你试图连接到任何你想 Ping 的东西时，对吗？所以，我太爱这个定理了。而且，我们想尽可能地接近 CAP。这就是我们使用 PingCAP 这个名字的地方。这就是这个名字的由来。

阿什莉:完全有道理。

刘:是啊，挺有触感的吧？

阿什利: *【笑】*嗯，你知道，它在乎意义，这是一个伟大的事情。我已经感觉到你的故事了，Max，很高兴能和其他企业家交谈，你知道，你会说，“这是个好主意，让我们为之开发一个产品。”当你经历过那个挑战，你经历过这个问题，你花了可能，很多小时，可能很多年，是另一回事，对吗？有点像是开发人员，但我想成为数据库管理员、开发人员、数据分析师和数据设计师。但是，你不是真的，你是一个开发者，对不对？你不想要所有其他工作的麻烦。那么，你如何让它变得更容易，你如何让它对人们更好？这听起来像是您已经解决的问题，您使用 PingCAP 和 TiDB 所做的事情。我在这条路上吗？

刘:是啊，真不容易。

*阿什利:* *【笑】*。好吧，让我们来谈谈数据库市场的总体情况，正如我前面提到的，我很久以前就开始做数据库工作了。无论如何这都不是一个新话题。当然，市场上有很多数据库产品。那么，TiCAP、TiDB、excuse me 和 PingCAP 有什么独特和不同之处帮助你脱颖而出呢？那么，为什么开发者会说，“哦，这就是我想要的。我想用 TiDB，因为它能为我做这些事情。"?

刘:那要看你给你的客户或者开发商提供什么价值了。因此，PingCAP 为我们的客户、用户和广大社区带来了许多重要价值，当然，还有开源的价值。所以，首先，我们是开源的信徒。现在，开源是 PingCAP 的核心理念，始终引领着 TiDBs 发展的车轮。所以，除了 TiDB 之外，我们也为社区做了很多贡献。

我们已经向 CNCF 应用程序捐赠了两个开源项目。一个是作为分布式键值存储的 TiPV。另一个是混沌网格，作为一个混沌测试平台。你知道，这些项目可以帮助其他软件开发人员构建一个更具伸缩性、更具弹性的系统。当你在构建一个分布式系统时，你会尝试，你知道，模拟，有点，你知道，磁盘力和网络故障和网络恢复，诸如此类的事情。所以，这就是为什么我们需要一个混沌测试平台。

第二，虽然我们知道数据库市场非常拥挤，对吗？但是，没有这样的产品可以像 TiDB 一样作为主要数据库来解决事务处理和分析处理。现在作为一个基础，TiDB 被设计成一个可伸缩的在线事务数据库。因此，它可以轻松支持数百 TB 到数 Pb 的数据，同时仍能满足每秒数百万次的请求。因此，更重要的是，您甚至可以在同一个数据库上运行实时分析，而无需将数据从 TiDB 移动到其他 OLEP 数据仓库。

让我们想象一下，如果您正在构建一个 SaaS 系统，那么总会有一个可操作的仪表板供您的客户使用，对吗？当你登录任何一个 sass 系统时，你都会得到一个摘要，对吗？那是操作仪表板。您需要在同一个数据库上实时生成该仪表板。对于开发人员来说，在相同的代码源上操作他们的数据更加自然。因此，这项技术被称为 HTAP，混合事务处理和分析处理。因此，这个概念并不新鲜，但是以云本地方式实现是新鲜的。我认为这是数据库行业的一个颠覆性趋势，让每个人的生活和工作变得更容易。

*Ashley:* 将这两者结合在一起真的很有意思，因为你经常会想到旧的数据仓库或数据湖或不同的环境来进行分析。但是，实际上，如果能够在同一环境中对事务性应用程序和数据进行分析，您必须做些什么才能处理这两种不同的工作负载呢？因为，他们可以很不一样，对吧？我们想要真正快速的事务响应。

刘:是啊。

阿什利:有时，我们会问一些非常复杂的分析问题，对吗？

刘:是的，你说得对。因此，我们基本上有两个不同的存储引擎，一个行存储和一个列行存储，但智能优化器位于行存储和列行存储之上，对吗？因此，如果发生这种情况，优化器会预测是忙 OLTP 查询还是忙 OLEP 查询。或者，更好的是，它可以是一个混合查询，我们可以查询行存储中的这一行，并对列行存储进行一些聚合。你知道，这有点技术性。

阿什利:不，不，我明白了。所以，我的意思是，我假设您的分析查询可能更倾向于按列查询，而不是按行查询。这是一个很好的概括吗？我是说，从那里开始？

刘:对，对，没错。

*阿什利:*有意思。而且，您可以将它们混合在一起，或者两者兼而有之。那么，是数据视图，还是数据冗余，以便可以处理两种类型的存储上的不同负载，或者只是相同数据的视图？

刘:基本上，我们有一个复制算法。它叫做木筏。所以，我们使用 raft 来复制数据，并将它们存储为行存储和列存储，所以，您有两个副本，对吗？那么，你可以设计一个优化器来选择哪种数据，我应该使用哪一部分，对吗？T3】

*阿什利:*以便——T3】

刘:基本上就是复制它们。

Ashley: 所有管理工作都是为了建立你的分析环境。本质上，你可以从数据库中得到，对吗？这是附带的吗？

*刘:*是啊，可是——T3】

阿什莉:你在为他们复制。

刘:是啊。从用户的角度来看，它们操作同一个数据库。没有，我不需要建立我的技能，你知道吗？比如，我需要知道如何手动调用 OLTP 数据库，并使用某种 ETL 工具将数据加载到 OLTP 数据仓库。而且，我需要学习不同种类的循环，不同种类的，你知道，查询优化，你知道，对两个数据库进行优化，对吗？而且，很多事情你需要完全不同的技能。

*Ashley:* 请介绍一下这一战略中的云部分。那么，您主要还是只在云中工作，您是否也在客户自己的数据中心工作？TiDB 住在哪里？

刘:这个问题问得好。我们对 TiDB 云投入了大量资金。TiDB cloud 是基于 TiDB 的云服务，它让我们能够更快地尝试为客户创造价值。同时减轻了维护的负担。你知道，维护一个分销系统是一种痛苦，对不对？因此，就像其他开源基础设施公司一样，如 Elastic、Confluence 等等。所以，作为背后的团队，你知道，TiDB 我们认真对待开源和云战略的关系。所以，我会说，PingCAP 将确保 TiDB 100 的核心组件开源。并且没有任何功能损失。我们实际上通过三个行动实现了这一点。

首先，我们建立一个活跃的开源社区。你知道，TiDB 由 800 多个国家和行业的贡献者支持。我们实际上在 TiDB cloud 上构建了一个名为 OSSinside.io 的演示。因此，每个人都可以轻松地检查任何开源 GitHub 仓库的统计数据、贡献、提交的详细信息，甚至可以比较不同的项目等等。而且，对于演示本身，它也是开源的。你知道，正如我提到的，你知道，我们是开源的信徒，对不对？

因此，第二，我们确保 TiDB 是环境不可知的。因此，TiDB 的目标是实现一致的用户体验和多种部署形式。所以，基本上你可以在任何地方部署 TiDB，在公共云中，在私有云中，在虚拟网络、容器和裸机中。

第三，我认为这是最重要的一条，TiDB 被设计成一个开放的系统。因此，我们继续投资与其他不同生态系统的整合，如 Kafka、Link、Spark、Snowflake、Data dog 等。因此，这种功能的开放性也适用于我们的呼叫服务。

阿什利:非常有趣。我的一个问题是，与高速交易相比，分析功能是否有不同的用户，或者他们是否倾向于同一批人？主要是开发人员同时使用这两种功能，还是不同的用户使用不同的功能？

刘:他们是不同的用户。数据库是如此通用，你知道，对于任何数字原生商业公司，他们都有一个数据库，他们有不同的用户场景。不是那些大公司，大公司，他们享受 OLTP 功能的可扩展性。因此，他们不需要担心如何扩展我的系统。那些大公司，尤其是互联网公司，他们有很大的开发团队，对吧？他们有一个数据库团队。因此，数据库团队关心数据库的可扩展性，但是大数据系统团队关心大数据的分析。

但是，对于那些中型公司和初创企业来说，他们只需要一个数据库，就可以处理所有事情。所以，我不需要，你知道，雇用更多的工程师，我没有资源，你知道，对于那些小公司，中型公司。我没有资源来雇佣、组建不同的大型团队来管理大数据的 OLTP 数据库，对吗？因此，他们希望用一种技术、一个数据库来解决所有问题。所以，不一样。

*阿什利:*有道理。您还提到了分布式数据库，因为您可以跨环境(列和行环境)进行自己的数据复制，我假设您也可以跨云提供商或云提供商的不同位置进行分发。因此，如果您希望它分布在更靠近边缘的位置，或者更靠近数据中心或不同的地理位置，这也是 TiDB 的一部分，对吗？

刘:是啊。您可以将 TiDB 部署到不同的区域。总之，这基本上是分布式数据库的默认功能。如果你没有这种能力，没有人会使用它，对吗？但是，对于边缘功能、边缘场景，目前我们没有能力支持。一切都在云上或由您自己部署。

阿什利:我想，当云越来越靠近边缘时，你就可以这样站在边缘，对吗？

刘:是啊。开源数据库 TiDB 选择了与 mass scale 协议兼容。所以，所有这些大规模用户，他们不需要，你知道，做大量的迁移，对不对？他们可以简单地，你知道，只需将数据移动到 TiDB，一切都正常工作。你知道，质量规模是一个 TCP 协议，对吧？所以，通常如果你在使用某种场景，edge 函数和他们谈论使用 HTTP 协议。因此，你需要一种代理，将请求路由到 TiDB 云。

*阿什利:*有趣的工作。告诉我一些关于开源和商业版本的比较。产品有什么区别？你是在做更新的功能，还是更具实验性的东西，你是在开源中首先尝试市场，还是在付费版本中有更多的管理功能？你怎么区分这两者？

刘:实际上有三个不同的版本。让我再解释一下。所以，第一个是 TiDB 社区版。因此，它拥有所有的核心功能，以便开发人员可以享受最新的 TiDB 功能，并能够做出贡献。所以，你甚至可以得到一个夜间版本，每天享受新的功能，对不对？

第二个，肯定是 TiDB 云。因此，新功能首先在社区版本中发布，在经过大量社区用户的验证和润色后，它们将回到 TiDB 云中。接下来是 TiDB 长期支持版本。因此，这是我们为企业用户提供的最稳定的功能和最专业的服务支持。因此，这类用户可能不会立即对新功能感兴趣。我会等，对，等到它极度稳定。也许，一年后我会在生产中使用它，对吗？

Ashley: 对金融公司、金融行业或制造业的人来说是有意义的。

刘:对，你说得对。尤其是对那些银行来说。因此，这种发布模式实际上帮助我们更快地从 TiDB 云的日常运营中以及从社区中获得反馈。而且，这也为 TiDB 的路线图创造了一个更快的回环。因此，经过验证和完善的功能将通过 LTS 发布版更快地发布给企业用户。这有点像，你知道飞轮，对吧？因此，无论 TiDB 是如何部署的，我们都可以加快社区用户和企业用户的价值实现速度。总而言之，我们有三个不同部署的版本，但是在这个过程中有一个一致的用户体验。

阿什利:优秀。好吧，我希望我们有更多的时间，喜欢听更多的关于它。希望你会回来。人们在哪里可以找到更多信息、下载开源软件或试用云版本？他们怎么能和你一起检查东西？

刘:好的，谢谢米奇。很高兴见到你，和你聊天。谢谢你。

阿什莉:没错。所以，人们可以去哪里，PingCAP.com？对吗？你的网站？

*刘:*哦，哦，哦，有一件事。因此，我非常兴奋地宣布，我们将于 11 月 1 日主办首届 HTAP 峰会。是的，你可能就在附近。你知道，这是一个非常有意义的计算机历史博物馆，在这里我享受了许多历史时刻和记忆。因此，在峰会上，你知道，许多开发行业领导者和全球开发者将加入我们。此外，还包括一些来自亚洲、欧洲和美国的重要客户，讨论颠覆和创新。当然，非常欢迎你们大家在 HTAP 峰会页面上查看 PingCAP.com。而且，我确实期待着，你知道，在 11 月与你们所有人联系起来。

阿什莉:嗯，很好。我希望你在 11 月 1 日有一个很棒的会议，人们都出去了。

刘:哦，非常感谢。

Ashley: 前往 PingCAP 并参观 TiDB。再次感谢 Max，我们很感谢你和我们在一起。刘(Max Liu)是 PingCAP 的联合创始人兼首席执行官。再次感谢麦克斯。

*刘:*谢谢米奇。