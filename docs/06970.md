# 分布式数据和应用程序:您的基础架构如何？

> 原文:[https://devo PS . com/distributed-data-and-apps-what-about-your-infra/](https://devops.com/distributed-data-and-apps-what-about-your-infra/)

***需要进行技术和运营转变，以适应向分布式数据和应用的转变***

你已经了解了现代公司如何通过追求数据驱动的文化来颠覆他们的传统同行…

1.  [福乐鸡快餐店](https://medium.com/@cfatechblog/edge-computing-at-chick-fil-a-7d67242675e2)的 edge 用例使该公司能够改造其快餐店。
2.  Rakuten Mobile 推出的行业首创的纯软件移动基础设施。
3.  特斯拉自动驾驶功能越来越接近第 5 级，几乎每两周向车辆推送一次新功能和增强功能。

有无数的，但共同的线索是:这些都是软件第一的公司在他们的类别。为什么他们是软件优先？它们是数据驱动的。

他们的秘诀是不断追求从数据中处理和提取见解，以推动他们的业务决策和运营效率。那么，如果这就是秘诀，为什么现任者不去做呢？

## 分布式数据和应用，天啊！

### 趋势

数据在企业中变得越来越分散，原因有多种，包括:

*   在任何需要的地方实现业务流程的数字化转型——分支机构、工厂、商店……甚至是汽车或飞机。
*   现代应用架构和部署趋势导致的工作负载和集群本身的分布，包括微服务、容器和多云。

因此，企业中的分布式应用和数据通常需要满足以下要求:

*   实时响应。
*   超本地化(又名 edge)。
*   接近零的停机时间。
*   智能管理和安全。

为了解决上述问题，需要进行技术和操作上的转变。这些变化可以总结如下:![](../Images/e9ee06eac63280523642625682b17561.png)

### 如果我们有现成的传统基础架构会怎么样？

总结一下:在关键业务需求的驱动下，应用程序正在发生变化。←看上面。

这些变化对在*运行*应用的企业架构以及*如何*连接、保护和操作这些应用和数据产生了重大影响。处理分布式应用和数据需求的特性正在推动以下转变:

![](../Images/fd78be97604baa2c0218ecc7eebbc797.png)

1.  其中—出于性能原因、风险降低、边缘人工智能用例等原因，多云和边缘
    数据重力。
2.  方法—混合应用程序
    应用程序和无服务器环境的容器化，以及连接/发现传统应用程序的需求正在推动新的架构、网络和安全挑战。
3.  如何——第 3 层(网络)→第 7 层(应用程序/代理/API)
    连接正从传统的网络级(IP)访问转变为使用 REST/gRPC API 的应用程序到应用程序通信，这些 API 通常通过 HTTPS (TCP/443)交付。

### 应用程序已经改变了。因此需要具备联网和保护它们的能力

*   App-2-App 联网:微服务和容器除了与最终用户通信之外，还可以在更广的范围内相互通信，这使得可靠性/性能成为更重要的考虑因素。
*   更高层的安全性:App-to-app 和微服务架构要求在 API 层实现零信任，因为这是它们通信的方式。
*   API 优先:应用程序在第一天就被编写成 API 生产者和消费者。这对于如何交付、连接和保护这些 API 具有根本性的影响。

总而言之，围绕应用程序的类型、它们的位置以及它们的交付/访问方式，有几种技术和架构趋势(由业务需求驱动)。随着它们的融合，传统的网络、安全和应用服务基础设施面临重大挑战。

## 为什么今天的基础架构对于现代应用程序来说已经过时

### 传统供应商，有限的方法=混合结果(最好)

![](../Images/25fdc323e44c09bbd148bd9df49a2f87.png)

Today’s enterprise architecture has become increasingly complex for app delivery

好吧，我把你的想法写下来:你的路由器/交换机厂商过时了。你的防火墙已经过时了。您的负载平衡器/ADC 已过时。用于大规模管理的运营工具和服务已经过时。

当谈到分布式应用和处理分布式数据的需求时，传统的网络和安全工具(及其操作)是不可持续的。

### 您的负载平衡器/ADC 已经不在堪萨斯州了…

传统应用交付控制器或 ADC(又名*“现代负载平衡器”*)旨在高效、安全地将基于 web 的整体式应用直接交付给最终用户，并尽可能实现最高性能。他们是:

*   针对最终用户直接访问的整体应用进行了优化，无论是 SaaS 和互联网应用，还是托管在公共云或私有数据中心的企业 web 应用。
*   无论是基于硬件还是基于软件，尽管最近发展到软件产品，如 NGINX 和 Avi，它们可以部署在多个集群和公共云中。
*   在分布式环境中大规模运营时，操作简单性和端到端可见性有限。它们不能集中管理(想想 SaaS)，并且不提供跨集群的端到端可观察性、端到端策略管理等。
*   API 功能有限或没有。虽然较新的软件版本(如 NGINX)可能具有有限的 API 网关功能，但大多数都没有。而且都没有 API 自动发现和控制。早期的 ADC 是硬件或软件解决方案的组合，侧重于从流量管理的角度提供 L4 到 L7 的应用。现代应用已经超越了这一点，您的应用网络和安全基础设施也必须超越这一点。

不相信我？让我给你一个真实世界的例子来帮助校准我来自哪里。

![](../Images/97836a05cfbf557ff0809fc0cfab036b.png)

Architecture for distributed HD mapping processing

上面是一家汽车制造商的架构示例，该制造商希望改造其现有和规划的电动汽车(EV)站，以收集高清地图并进行大规模处理。

让我们分析一下工作流程和需求:

1.  电动汽车(出租车、拼车和/或同意共享和处理数据的车辆)驶入，视频传感器采集品牌、型号、VIN、车牌等信息。—任何可识别的数据。
2.  查询后端数据库，通常托管在私有云中(出于安全性和合规性原因)。获取访问车辆本地 Wi-Fi 的必要凭证。
3.  将数据卸载到电动汽车站。在本地处理需要的东西；其余的发送到 AWS 进行大规模地图分析。
4.  现在，由于商业原因或法规原因，EV 所有者希望将 EV 计算机租赁给其他汽车公司、法律/政府执行机构，以安全、多租户和可审计的方式访问 EV 站。
5.  现在，25，000 个电动汽车站的需求成倍增长！

## 哦，该死！瞬间——真实世界的例子

提出了多种选择和建议，通过各种团队内包或通过系统集成商外包。以下是其中一个提案的示例:

![](../Images/0027c01dcc2067344f827b1f86971a90.png)

Traditional app networking architecture

### 我们总结一下:

*   基础架构— 1 家公共云供应商、2 家私有数据中心、5 家软件/硬件供应商(路由器/SD-WAN、防火墙、负载平衡器、API 网关)，分布在所有位置(公共、私有和边缘)。
*   应用程序管理— 1 家供应商，内置应用程序生命周期管理工具
*   运营模式—跨环境(公共、私有和边缘)的不同工具，针对每个供应商和服务的不同软件/管理系统。
*   配置模型—为服务和供应商提供不同的配置，以实现整体效果。
*   安全/审计—跨垂直软件/供应商层的安全性；以及横向可见性和管理挑战(即多个位置)。

我会让其他人来解释为什么上述是一场噩梦(或者这可以是另一篇文章的主题)，但让我们假设你找到了一个实际上对你有利的商业模式，因为你有一群律师来确保供应商(那些财大气粗的人)承担负担。但这对你的企业、员工或客户真的是一个积极的结果吗？

## 现代企业的现代应用联网+安全性

![](../Images/aef5906606a3fd7d790662fad002c789.png)

A modern enterprise infra architecture for distributed apps

新一代基础设施平台(又名“modern”)是联网和保护现代应用所需的平台，它必须比传统 ADC 更加以应用和 API 为中心。这类似于十多年前 ADC 是普通 L4 负载平衡器的演变。

当您开始研究用于应用联网和安全性的现代基础架构堆栈和服务时，以下是潜在的关注点:

*   面向第 3-7 层网络和安全性的集成堆栈—一种高性能服务，可用于提供安全的应用程序到应用程序的连接。
*   SaaS 优先运营—从部署堆栈(站点)到软件及其服务的全生命周期管理。想象一下在 10，000 个位置几分钟内配置一个负载平衡器或反向代理。或者为您的开发运维、网络运维、开发和安全运维团队提供单一平台。
*   基于意图的策略—从第 3 层→第 7 层→ API 开始，跨所有层的单一意图表达。用户可以配置(并实施)网络连接、网络防火墙、转发代理、负载平衡、服务策略、WAF、API 网关(AuthZ/AuthZ、API 服务-2-服务策略)等。
*   端到端和自下而上的可观察性——所有*团队可以通过单一平台查看来自网络、防火墙、负载平衡器、API 网关等的指标、日志和警报。*

这是另一个例子:

![](../Images/c75bf12ac009cd1cdbeb1452aaa7b085.png)

## 收尾工作

回过头来说，现代应用的网络和安全性需要一种新的思维……也就是现代(或云原生)基础设施。随着应用变得越来越分散，您的架构、基础设施和运营团队必须适应…这包括现代应用联网和安全性。

***本文是 KubeCon + CloudNativeCon 2020 北美*** 赞助商系列文章的一部分