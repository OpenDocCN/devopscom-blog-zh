# 整合可以持续到什么程度？

> 原文：<https://devops.com/continuous-can-integration/>

我的博客“DevOps 的 7 大支柱”确定了构成成功的 DevOps 的 7 个基本最佳实践领域。七大支柱之一是持续集成(CI)。博客解释说，支柱不是筒仓，而是需要保持平衡的基础。一个平衡的 CI 实施执行集成的速度足够快，能够满足端到端 DevOps 管道的时间预算。

与偶尔集成大型软件变更的旧瀑布流程相比，频繁、小型、增量集成的 DevOps CI 概念有许多优点。对频繁的集成问题的快速反馈使得由许多单独的变更组成的版本可以放心地逐步构建。当变更被增量集成时，集成问题的根本原因可以被更快地隔离。既然集成越快越好，那么集成能持续多久呢？

与名字相反，集成从来不是真正连续的。即使存在要集成的连续变更流，典型的 CI 流程步骤(如下所列)也需要非零的时间量。这些步骤在某种程度上绝对中断了持续的集成循环。

合并集成存储库中的变更
检查集成存储库进入标准
运行集成源代码的静态分析扫描
编排构建资源
创建构建
将构建工件保存到工件存储库
运行单元测试
将单元测试结果保存到工件存储库
将构建资源释放回池
编排功能性构建测试资源
运行功能性 测试
执行分析和评估
将功能测试结果保存到工件存储库
修复在上述步骤中发现的任何问题
将构建提升到交付阶段
将功能构建测试资源释放回池中。

为了使 CI 尽可能持续运行，有三类 CI 最佳实践:

1.  **模块化产品设计，支持模块化 CI 处理**

*   模块化代码设计，使用 12 因素应用程序原则，允许集成增量变化。
*   微服务架构使产品的每个部分都能够在可用时集成，而不是要求一次集成整个产品。
*   使用容器有助于优化基础设施编排。
*   重新分解构建时间表以消除模块或微服务之间任何不必要的构建依赖关系，从而消除了时间延迟。
*   所有更改都被签入一个公共主干分支。这需要能够快速、轻松地切换特性变化，以便在需要的时候发布。

1.  **优化竞争情报基础设施**

*   CI 构建资源和测试资源的纵向和横向扩展为每个 CI 阶段运行创建了一个优化的基础设施。
*   CI 基础设施的预测性编排使 CI 和测试资源及流程能够提前设置。

1.  **加快 CI 流程**

*   在集成到主干之前，对集成交付成果进行预测试和预检，以最大限度地减少代价高昂的补救延迟。
*   管道 CI 构建和测试流程，以消除流程之间的设置延迟。
*   使用 Fail fast 来尽早确定最重要的测试的优先级。
*   使用加速测试技术(如基于风险的特定测试选择)来加速 CI 测试。
*   使用能够在 CI 构建或测试流程结束之前检测阈值异常的流程内分析。
*   使用自动回滚规则或有针对性的问题报告快速修复问题。
*   建立一个策略来决定何时以及如何恢复中断 CI 流程的更改，以便在签入中断主干时管道不会被阻塞。

上述 CI 实践通常将 CI 的时间从每个构建的几个小时减少到几分钟。虽然几分钟仍然不是真正连续的，但对于大多数实际目的来说，几分钟内的 CI 处理足够快，甚至可以满足最激进的端到端 DevOps 交付管道目标。

## 摘要

你怎么看？您是否同意上述 CI 最佳实践？还有其他你推荐的吗？

虽然与所有七大支柱一起实施的 DevOps 为长期企业业务改进奠定了坚实的基础，但了解 **DevOps 不是一个孤岛**非常重要。实施 DevOps 的企业应该知道 DevOps 与其他 IT 系统和实践互操作。建议企业制定治理政策，鼓励选择工具不可知的 it 合作伙伴，这些合作伙伴的解决方案最适合每个独特企业的需求，并且可以将 DevOps 与其所有 IT 系统集成并发展。

[马克·霍恩布洛尔](https://devops.com/author/marc-hornbeek/)