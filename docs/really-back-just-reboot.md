# 我们真的回到“重启它”了吗？

> 原文：<https://devops.com/really-back-just-reboot/>

宠物与牛的服务器基础设施管理风格最初是由微软的 Bill Baker 提出的，尽管 CloudScaling 的 Randy Bias 在 2012 年进一步推广了这一风格，并在本演示文稿中进行了修改和澄清。从本质上讲，最初的“宠物”式服务器管理主要是手动构建、命名和配置服务器，这些服务器需要花费大量时间进行设置，而较新的云式“牛”式管理的服务器通常是通过自动化进行编号、创建和扩展的，一旦出现任何问题，只需将其从服务中移除即可。通俗地说，这种切除被称为“[击中头部侵犯的淋巴结](https://en.wikipedia.org/wiki/STONITH) (STONIH)”。

在过去，由于实践不佳或操作系统服务不稳定(想到 NT4)，系统管理员和开发人员往往不去找出问题的根本原因，而只是将重启作为标准操作程序的一部分。在 24/7 全球客户群和总是在宽带和智能手机上的时代，这甚至可能不是一件大事。

从表面上看，傲慢地破坏和刷新在某些方面行为不端的机器似乎与重启有着惊人的相似。这次不一样。真的。

**虚拟化**

虚拟化本身可能会导致一类您无法控制的特殊问题。[嘈杂的邻居问题](http://allthingsd.com/20130225/the-problem-with-noisy-neighbors-in-the-cloud/)、底层虚拟机基础架构/网络或其他问题通常只能通过启动新节点(可能在不同的逻辑区域)来解决。

**高可用性(HA)**

HA 在系统架构中变得更加根深蒂固。在大多数情况下，不需要过多的努力，您就可以顺利地从集群或负载均衡器中取出一个坏的服务器，而不需要或只需要很少的停机时间，这样您就不会让您的用户受苦，事实上，您将为他们提供一个更好的体验，而不是可能出现间歇性或更糟糕问题的服务器。

与简单的重启技术相比，遵循一些适当的步骤可以提供一些重要的区别和进一步研究的机会。

**自动化和配置管理**

可靠的自动配置允许您调出完全相同的机器配置，将其放在不同的网络子网中，或者根据需要调整它以获得更新的操作系统补丁或软件版本进行测试。娱乐不是二元选择。你可以选择如何去做，也有机会从中学习。

**集中监控**

监控已经从简单的 CPU/磁盘/内存和服务正常运行时间发展到今天。许多供应商通过[应用性能管理](https://en.wikipedia.org/wiki/Application_performance_management) (APM)提供对您的应用的深入了解。从历史上看，不仅可以更容易地探究 CPU 峰值的发生，还可以更容易地探究当时哪些进程占用了周期，从而找到根本原因。您可以更容易地确定问题是否出在您的应用程序或一些支持/OS 服务上，并且有了良好的自动化，简单地启动一个新服务器来测试一个理论比过度思考更容易。

**集中记录**

集中式日志记录允许在删除节点后更容易地进一步检查日志，并且具有比在机器本身的文本编辑器中打开每个文件好得多的搜索、分析和关联功能。

**再见，不是永别……**

节点通常不需要被破坏。它只是可以退出服务或停止。如果需要，可以在以后进一步检查它或它的虚拟磁盘。如果一个节点有任何自动加入集群/场的行为，或者将开始自己处理作业、发送电子邮件等，请小心再次启动该节点。拥有一个经过实践的隔离网络环境可以方便地进行进一步的分析，并可以在潜在安全漏洞分析的情况下兼作测试平台。

**蜂拥而去**

通过遵循上述准则，STONIH 将最大限度地减少任何行为不当的节点影响您的用户体验的时间。只是不要忘记跟踪根本原因，尤其是如果模式或复发开始！