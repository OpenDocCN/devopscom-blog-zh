# 信任，你必须:采用 CI/CD 的 8 个技巧

> 原文：<https://devops.com/trust-must-eight-tips-adopting-cicd/>

我们已经做了四年的持续部署(CD ),并使我们的许多客户能够做有质量保证(QA)的持续部署。我们已经帮助数以吨计的公司采用和优化他们的 CD 设置。我们发现，持续部署与信任息息相关，并通过流程和基础架构得到增强。

关于这一点，这里有一些我经常分享的关于采用持续集成(CI)/CD 的常见技巧:

### 使用 CI 工具

这听起来显而易见，但你会惊讶于有多少公司尝试推出自己的产品。不要。对你的公司来说没有任何好处，还有无限的坏处。我们喜欢 Circle，但是还有很多其他很棒的选择。当涉及到工作流时，大多数至少有些规范性，这在您开始工作时是很重要的。

### 进行单元测试

始终值得提醒大家的是，持续部署只是应用于部署的持续集成。要进行持续集成，您需要良好的单元测试覆盖率。如果你还没有单元测试和持续集成的坚实基础，你还没有为持续部署做好准备。

### 拥有可靠的生产监控

bug 和回归会被发送出去；这是必然的。通过查看生产中的数据，建立一个系统，告诉您何时出现了回归或错误。将此与自动回滚联系起来，这样，如果出现重要性能或关键性能指标(KPI)回归(即每分钟注册数)，您的 CD 系统将回滚到最新的稳定版本，同时您的团队将进行调查。

### 相信你的团队

我们讨论了基础设施需求，但是如果您没有信任，那么持续部署就不会对您起作用。信任你的团队就是给你的开发人员犯错误的自由，按照他们认为合适的方式部署，并检查彼此的代码。将持续部署与分级许可文化相结合是可能的，但是我们还没有看到真正的工作。

### 消除代码审查过程中的繁文缛节

您的团队应该审查代码变更，通常是通过一个拉请求，这与信任您的团队密切相关。应该相信开发人员会选择最有资格和最有洞察力的人来审查他们的代码。试图采用持续部署的团队中最常见的错误之一是，他们只让一两个“高级”开发人员审查团队的其余代码，从而“瓶颈”所有发布。不要犯这个错误。

### 让开发人员密切参与生产运营

我们在没有成功过渡到持续部署的公司中注意到的最常见的错误是他们的开发组织是孤立的。开发部门和运营部门应该紧密合作。让您的开发人员深入参与 CD 基础设施的设置和定义，就已经成功了一半。

### 左移:尽早并经常测试

你的团队需要不断的反馈。把你的 QA 目标想成在正确的时间从正确的人手里得到正确的反馈。就部署而言，这意味着在发生重大变化时，要知道什么是有效的，什么是无效的。创建后越早发现错误，就越容易修复。做持续部署的最好的公司有全面的单元测试和集成测试覆盖，在任何代码到达阶段服务器之前运行。

### 把舞台当作你的圣地

最终的生产前环境通常被称为“暂存”一个常见的错误是让开发人员将新代码直接交付给 staging，同时确定新代码是否准备好投入使用。这是一个可怕的想法。一旦不止一个开发人员试图发布他们的更改，你的 Slack 频道将会充满咒骂和指责。将生产前环境隔离到每个项目，并实施“准备就绪即可投入使用”的理念。通过这种方式，集成测试可以以自定义的速度进行，而不会阻碍其他人的发布。

## 关于作者/弗雷德·史蒂文斯-史密斯

Fred Stevens-Smith 是 Rainforest QA 的联合创始人兼首席执行官，这是一家由 Storm Ventures、Rincon、Andreessen 和 T3 Horowitz、Morado 和 Crosslink 支持的质量保证服务初创公司。