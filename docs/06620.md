# 自动化:软件的无人工区方法

> 原文:[https://devo PS . com/automation-the-human-free-zone-approach-to-software/](https://devops.com/automation-the-human-free-zone-approach-to-software/)

人类讨厌重复的手工任务。我们做得很差——我们会犯错、注意力不集中、感到无聊。纵观历史，人类本能地发展了自动化，以使我们远离这些任务中容易发生危险的单调工作。

在软件领域，我们使用配置管理、部署工具和工厂产生的[精益](https://en.wikipedia.org/wiki/Lean_software_development)/敏捷流程以及在那里建立的自动化原则来自动化软件工厂。利用自动化减少了软件错误，[通过允许工作扩展到数百甚至数千个系统来提高可靠性和生产力。](https://devops.com/from-automated-cloud-deployment-to-progressive-delivery/)

当我们编写脚本和函数来帮助自己时，我们不得不实施访问控制、最小特权、两人规则和其他安全原则来防范人为威胁，并防止因恶意行为者、泄露凭据或其他类型的损害而造成灾难性损失。自动化程度越高，这个问题就变得越复杂和困难。然而，如果我们利用自动化的力量来解决我们的安全风险，通过 CI/CD 管道强制执行单一生产路径，构建和部署签名工件和系统强化(包括明确消除人工/远程访问),从而从生产中消除大部分或全部人为威胁，情况会怎样？

有了这个，我们可以验证系统所有变更的监管链，同时也证明外部参与者不能进行未经授权的变更。这就是我们在讨论 DevSecOps 时要寻找的东西。

## 自动化拯救世界

为了优化软件的有效性、安全性和效率，人类应该完全或至少部分地脱离这些过程:

*   代码和管道。
*   藏物部署。
*   自动化访问。

### 代码和管道(部分人工交互)

让我们从左边开始，看看我们的代码和管道。这里的规则简单而熟悉。我们从源代码管理和两人规则开始。没有其他人的批准，任何人都不能编写和提交代码。实施两人规则以及保护生产访问可确保访问控制仅发生在管道内，并且我们完全执行两人规则。我们可以有一个完整的团队评审和静态代码分析，但是核心规则是没有人有权力编写和提交代码，确保一个人不能负责做出改变。

代码存储库由我们的管道监控，任务是测试、构建和验证版本化的工件。这个工件是我们代码中某个时刻的所有内容。当我们想到回滚场景时，我们想到的是部署以前的工件。这个工件是校验和的，所以我们可以在任何时候证明它的完整性，我们可以通过提取代码并自己构建来验证校验和。

### 工件部署

我们不仅需要开发应用程序代码的工件，还需要基于运营基础设施的工件。这是 DevSecOps 承诺的一部分:Ops 编写代码，就像开发一样被签入存储库。这允许我们将应用程序工件与操作工件配对。这些工件合在一起就是我们所部署的——某个时刻的系统和某个时刻的应用程序。因此，在这一点上，我们已经确定了两个人(至少)已经查看了源代码，并且一旦提交，我们的管道已经拾取了那些更改，对其执行静态代码分析，并且创建了签名的工件，准备好部署到测试环境。现在我们有了我们的工件，我们需要部署它们。

同样，我们的目标是不使用人类，所以在我们的工件被构建之后，我们必须测试部署。我们确保安全性的方法是让管道将工件推送到安全的工件存储区，当我们批准环境接收更新时，我们的系统从那里提取。这实现了两件重要的事情:首先，通过从我们的管道推送，我们再次维护了追溯到源代码控制的监管链。第二，我们通过让那些系统订阅适当的工件存储来限制哪些环境被更新。人类在这里做的唯一工作是执行测试和决定何时提升。自动化实际上负责实际的推广工作。现在，我们终于有能力在生产中运行我们的工件了。

### 自动化访问

持续交付管道的想法并不新鲜，今天许多团队都在实践。我们要添加的是一个没有入站访问的生产系统。

因为在这个设计中，系统从工件存储中拉出，唯一需要的规则是从生产到工件存储的出站。这意味着您可以完全禁用远程管理，完全信任管道中建立的监管链。这种信任，加上确保远程管理被禁用，建立了无人管道。我们已经将用户访问的焦点转移到了源代码库和 CI/CD 管道的管理上。我们可以看到流程的每个阶段，并且不再需要用户拥有生产系统的登录凭据。凭证管理也是管道管理的一项功能，大大降低了其复杂性。

这就是实践 DevSecOps 的意义所在——理解自动化实际上如何使安全团队能够降低我们的安全模型的复杂性，并使安全摆脱阻挡者的角色，转而支持业务。