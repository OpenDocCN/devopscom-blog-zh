# 使用 AWS CloudWatch 进行异常检测

> 原文:[https://devops.com/using-aws-cloudwatch-anomaly-detection/](https://devops.com/using-aws-cloudwatch-anomaly-detection/)

根据我对朋友不科学的民意调查，AWS 最少使用也最容易被忽视的一个功能是 CloudWatch。CloudWatch 不仅可以用来监控 AWS 服务的可用性，还可以用作异常检测工具。我提到过这些功能是免费吗？

因为 DevOps 的圣杯是将安全和操作团队聚集在一起，以自动化的方式实现相同的目标；云手表是一个完美的 DevOps 工具。事实上，一旦在您的环境中实现了它，您就离 SecDevOps 的崇高境界更近了一步。

如果你不熟悉 AWS CloudWatch，那就去 https://aws.amazon.com/cloudwatch/看看吧。作为一个快速介绍，以下是 AWS 网站对该服务的描述:

> “Amazon CloudWatch 为 AWS 云资源和客户在 AWS 上运行的应用程序提供监控。开发人员和系统管理员可以使用它来收集和跟踪指标，获得洞察力，并立即做出反应，以保持他们的应用程序和业务平稳运行。Amazon CloudWatch 监控 AWS 资源，如 Amazon EC2 和 Amazon RDS DB 实例，还可以监控由客户的应用程序和服务生成的自定义指标。借助 Amazon CloudWatch，您可以在系统范围内了解资源利用率、应用性能和运营状况。”

让我们假设安全团队和运营团队都需要知道他们的服务器和应用程序何时发生了奇怪的事情。异常之外的事件(也称为奇怪的事情)可能与安全或运营事件有关；不管怎样，它们都值得调查。这里有一个简单的 CloudWatch 监控过程，您可以使用它来提醒您注意可能表明有人试图从您的系统中泄露数据的事件。

**开场场景**

想想攻击者想要什么样的信息。他们想要你的知识产权和客户数据，因为它们可以转化为现金。接下来，考虑系统的架构以及数据存储的位置。最有可能的是，您的宝藏存储在数据库或 Git 存储库中。

你猜怎么着？攻击者知道这一点，所以这正是他们想要的。花几分钟时间，像一个致力于泄露您的数据的攻击者一样思考。显然，您应该做的第一件事是仔细监控您的出站流量，看是否有可疑活动。此外，寻找交通流量中的异常，它们还可以帮助确定是否正在发生可疑事件。亚马逊 CloudWatch 可以帮你做到这两点。(注意:此过程假设您尚未被入侵。)

**1。启用 CloudWatch**

**2。建立基线**

每天、每周和每月查看历史数据。很快您将开始看到出口带宽使用的趋势。从观察一段时间内的最小、最大和平均使用量开始。把这些放进你最喜欢的跟踪工具(文本文件，电子表格，算盘，无论什么)。

**3。配置警报**

当您对基线感到满意时，将您的第一个警报配置为在流量使用超过基线时发送电子邮件。考虑一下你希望这个活动有多“健谈”。例如，超过平均基线的警报通常会比超过最大使用量的警报生成更多的警报。这是一个微妙的平衡，您需要在遗漏的问题和响应潜在误报所花费的时间之间进行权衡。

**4。回应**

你选择如何回应取决于你自己。我建议您从在您的跟踪系统中自动打开一个票证开始，这样某人就一定会查看警报并记录他们的发现。

**5。按需调谐**

制定计划，定期查看警报和数据。体系结构和系统的其他变化将改变基线，警报可能需要重新配置。

将安全性构建并自动化到开发运维中是每个人都应该努力实现的要求。这是我将在以后的文章中再次提到的主题，因为它真的很重要。

AWS Cloudwatch 是一款免费工具，可以帮助您立即开始自动化安全，那么您还在等什么呢？