# SoulCycle 通过 DevOps 和 CI/CD 来弯曲肌肉

> 原文：<https://devops.com/soulcycle-flexes-its-muscles-with-devops-and-ci-cd/>

当 SoulCycle 希望改善应用程序的开发和部署，包括改善其在美国和加拿大的 80 多个室内自行车中心的客户服务时，该公司向马克·索斯特(Mark Sost)求助，他是一名资深开发人员和工程师，曾在多家媒体公司工作，包括赫斯特公司。

![](img/eab2fa6c383b746e5b0f7395196d7a68.png)

在过去的两年多时间里，Sost 现在担任 SoulCycle 的高级工程总监，他建立了公司的工程和 DevOps 团队，将员工人数从八九名开发人员增加到现在的大约 40 名。

第一个主要项目是改造一个用于支持应用程序的遗留的、基于 LAMP 的堆栈，使其更加专注于一个现代平台，该平台可以利用 DevOps 方法以及持续集成和持续交付实践(CI/CD)。

Sost 和他的团队称这个新平台为讲台。然而，Sost 解释说，讲台不仅仅是一个开发平台。

Sost 在一次电话采访中说:“Podium 成为了灵魂公司技术平台重建的精神和方法，以及架构和应用程序堆栈。”。“我们从单一架构转向了更加面向服务的架构。因此，我们开始在多个应用上开发功能。”

重新设计还意味着投资新的基础设施，以及其他基于云的技术。这包括多云方法。

虽然大多数遗留应用程序现在已经转移到亚马逊网络服务，但 SoulCycle 也使用谷歌云平台进行 powder 和所有新的开发。Sost 还利用 Kubernetes 和 Docker 进行容器编排，并投资于其他托管服务。

DevOps 中的其他工具包括 Jenkins 来运行单元测试；用于工作流监控和分析的 DataDog 和 StackDriver 为 CI 梳理 Travis CI、Cloud Builder、GCR；以及来自 startup [Harness](https://harness.io/) 的技术，提供 CD-as-a-service。Sost 称 Harness 为应用程序部署所需的“最后一英里”工具。

“对于马具，那就是我们的 CD，”Sost 说。“这是对我们各种领奖台环境的持续交付。我们正在利用它向我们所有的讲台环境提供服务。从代码评审周期中的 UAC(用户账户控制)到合并后的 QA，再到生产、负载测试以及中间的任何地方。”

这种改进的应用程序开发方法现在意味着 SoulCycle 工程团队在过去 24 个月中创建了大约 30 种不同的应用程序，这包括在公司环境中使用的内部应用程序，并最终提供给使用设施和设备的客户。

此外，Podium 有助于创建一个更加统一的架构，以确保整个团队(无论是开发运维团队、质量保证团队还是生产团队)能够全方位了解需要解决的问题，以及解决方案实施后对业务的影响。

这就是 Sost 和他的团队所说的“讲台原则”

Sost 说:“当我们说我们正在用讲台原则来构建东西的时候，我们是在谈论这样一个事实，即一切都是受版本控制的。“我们有全面的测试覆盖。我们把 Kubernetes 清单方面的所有东西都写下来，作为源代码的一部分，由版本控制进行检查。应用程序符合更多的 12 因素方法，我们非常非常重视开发人员的能力。

“我认为对我们来说，这确实是领奖台带来的转变；Sost 补充说:“从作为应用程序开发人员编写代码，然后将代码扔给运营人员(QA 人员)来测试代码并交付给某个地方。相反，我们为开发人员提供了工具和原则模式，让他们能够控制更多的应用程序开发生命周期，直至交付

结果有助于改善客户的整体 SoulCycle 体验，包括:

*   将部署时间减少约 80%。
*   现在，一名开发人员只需 10 到 15 分钟即可完成部署，而不是一个小时。
*   QA 验证减少了大约 80%。
*   现在，三名 QA 工程师只需一个小时即可完成验证，而以前需要三到六个小时。

与此同时，Sost 认为，讲台方法让开发人员对他们的项目有更多的控制权，并让他们专注于编写优秀的代码，创建人们想要使用的应用程序。

“更重要的是，‘现在，我知道如何把我的申请发给人们，’”Sost 说。“因为归根结底，工程师只关心写出人们想用的东西。…我们将通过这种方式让您更好地控制您正在编写的代码和应用，这样您就可以更快地看到有意义的结果，而不必等待他人。”

Sost 和他的团队在 SoulCycle 的下一步是什么？答案是:机器学习和 DevOps 过程的一点自动化。

在这里，SoulCycle 使用 Harness 工具将更多的数据和基础设施监控记录到平台中，这允许算法了解更多关于各种开发项目的信息。这可以使代码更好，并消除不断开发和部署带来的错误。

Sost 说:“随着时间的推移，我们让它变得更加智能，如何检测异常并了解我们的代码是否成功，因为有些时候会错过单元测试或集成测试，甚至有些时候会错过负载测试，99%的事情都不会成功。”

— [斯科特·弗格森](https://devops.com/author/scott-ferguson/)