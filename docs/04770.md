# “简单按钮”安装程序是如何诱惑项目的

> 原文：<https://devops.com/lure-easy-button-installer-traps-projects/>

作为这篇文章的序言，我写了关于 Unicorn 安装者挑战的文章。挑战在于用户的需求非常多样化，很难创建一个适合所有用户的垂直集成方式(也称为“简单按钮”)。问题不仅在于当前的多样性，还在于我们如何应对未来迫使用户跨配置的必要变化。

不要绝望！对于项目安装人员的共享操作，有一个实用的解决方案:可组合性。

如果项目专注于维护特定组件的安装模块，那么社区就可以协作解决与基础设施无关的界限分明的问题。即使构建多个脚本 DSL(ansi ble、Chef、Puppet、Salt 或 Bash)也是一个小得多的问题。此外，所有这些 DSL 都有模块化概念，因此将社区角色/模块/收益/行动纳入更大的自动化脚本是可行的。这种方法允许我们将雪花状基础设施和先决条件配置从项目配置中分离出来。

此时，众所周知的“简单按钮”变成了一组固执己见的项目、先决条件设置和特定于基础设施的步骤。这些按钮随后成为特定于供应商的按钮:“按此处快速安装带有 Dejour SDN 和 [L8istSh9y O/S](http://l8istsh9y.com/) 的 AWS”，正如在 Dockercon 向[展示的巨大效果。](https://blog.docker.com/2016/06/azure-aws-beta/)

也就是说，让我们看看如何试图在项目中创建一个“简单按钮”安装程序适得其反。

Cloud Foundry 选择了一个项目内安装程序 BOSH，它有一个基于生成的映像的自以为是的安装方法。为了工作，安装程序必须维护越来越多的特定于 BOSH 的集成和图像生成器。这些工作对于安装 Cloud Foundry 的其他非核心工具来说是多余的。更复杂的是 Pivotal，一个主要的 Cloud Foundry 维护者，它认为 BOSH 是一个产品差异化因素。这就造成了与其他云代工厂商的生态系统冲突。虽然 BOSH 有助于创建健壮的安装，但它也带来了许多负担，使这些改进无法被更广泛地使用。尽管 BOSH 的安装非常容易，但 Cloud Foundry 仍然被认为很难安装。

OpenStack 安装程序是一个非常混乱的故事，有多个相互竞争的项目内安装程序。从单节点 [DevStack](https://devops.com/2016/05/04/five-key-aspects-high-fidelity-devops/) 开始，它为令人困惑的云上/云下 OpenStack-On-OpenStack(又名 Triple-O)概念提供了所有的持续集成/持续交付(CI/CD)测试。这些最初的项目内尝试都没有创造出实用的、通用的安装程序。事实上，它们催生了一波又一波的其他安装程序和配置脚本。最近，OpenStack 决定在没有协调治理的情况下允许许多这样的尝试进入项目(又名“大帐篷”)，使得运营商无法确定他们应该跟踪哪些工作。让一些努力打上“社区批准”的印记只会使解决跨平台问题变得更加困难。其结果是进一步分裂，因为供应商和先进的运营商试图建立工作自动化孤岛来对抗竞争利益。

举个正面的例子，Linux 的 pre-seed 和 kickstart 选项是特定于发行版的，支持健康的生态系统。很容易想到将这些安装整合到一个系统中；然而，可能的结果是将竞争对手锁在一起，减缓创新。

我们想要的是一个围绕项目的蓬勃发展的生态系统，而不是一个被认可的安装过程。

为什么缺乏认可至关重要？它使项目得以推进，而不会因采用单一方式时产生的安装纠纷而减速。更糟糕的是，它阻碍了项目周围的生态系统活动。

第一批成功的安装程序是针对单个垂直堆栈的，比如 CoreOS 上的 Kubernetes 或 Google 上的 Salt Kube-up 版本。这些整体安装方法有助于快速启动，但是限制了社区的多样性。然而，如果他们被呈现为“正确的方式”，那么其他参与者将会被阻止创新。在一个垂直集成的过程中，只要有一个变化，整个过程就会变成异常地狱。

我们早期使用 Crowbar 的经验是，随着项目和目标的扩展，我们最初的安装想法将不再有用。重要的是，我们可以保持撬棍，并用更好的东西取代它。最基本的教训是，围绕项目的运营是一种不断发展的实践。

通过过早选择优胜者来阻碍进化实际上会减慢发展过程。

这可能有悖直觉；大多数项目希望采用“简单按钮”安装程序来降低启动成本。这些初始牵引的关键构建者实际上可能会破坏项目，因为它们通过在初始用例与持续用例之间创建[保真度差距](https://devops.com/2016/05/04/five-key-aspects-high-fidelity-devops/)而进入运营成熟阶段。

——[罗布·希施菲尔德](https://devops.com/author/rob_hirschfeld/)