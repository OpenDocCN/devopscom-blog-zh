# 管理 hhardcore 机密以缩小您的攻击面

> 原文：<https://devops.com/managing-hardcoded-secrets-to-shrink-your-attack-surface/>

将[机密](https://devops.com/?s=secrets)——比如认证凭证、密码、API 令牌和 SSH 密钥——作为未加密的纯文本硬编码到源代码或脚本中，这种做法在软件开发中已经普遍存在多年了。这是一种省时省力的简单方法，但也非常不安全。问题是，任何有权访问代码的人也有权访问这些硬编码(或嵌入)的凭证，这意味着您的代码极易受到攻击。

当然，今天面向 DevOps 的软件开发生命周期都与速度和效率有关——目标不是在几周或几个月内，而是在几天甚至几小时内推进和推出产品。任何可能减慢管道速度的东西都应该被避免，这就是为什么硬编码的秘密不会被泄露。在未来的许多年里，它们将与我们同在。

与此同时，网络安全专家有理由对日益严重的秘密蔓延问题感到担忧，这种问题发生在一个组织将秘密存储在不同位置时，包括源代码、文本文件和电子表格。在当今的多云 DevOps 环境中，这是一个简单的算术:随着用户数量的增长，您的攻击面也在增长，在许多情况下呈指数级增长。

## 管理秘密的正确工具

[根据 Gartner](https://www.britive.com/pillar-secrets-governance/) 的说法，“嵌入在源代码中的硬编码秘密分散在整个 DevOps 管道中，会带来巨大的风险。负责 DevSecOps 的技术专业人员必须引入安全存储和管理机密的工具，并在不中断自动化开发运维工作流的情况下实施访问控制。”

随着许多组织采用云基础设施、容器化和微服务架构，尤其是在软件开发生命周期(SDLC)方面，一个突出的问题是，传统的机密治理和权限管理技术在云中根本不适用。静态机密的保险库技术是一套广为人知的功能，多年来一直是网络安全最佳实践的基石。SecOps 和 DevOps 团队认识到，他们需要使保险存储适应云环境，但有效的云机密治理方面的进展受到了几个挑战的阻碍。

## 即时云

首先，如上所述，中断持续集成/持续交付(CI/CD)流程被视为不可接受的做法。DevSecOps 团队非常希望部署秘密管理功能，而不会减慢或阻碍开发过程，也不会花费额外的资源。然而，对于大多数中小型企业来说，许多独立的保险存储服务成本过高。此外，在许多情况下，传统的机密管理方法无法提供完整的治理功能，包括跨多个保管库或跨云环境的清晰可见性和证明。

好消息是，当今先进的动态许可平台整合了即时(JIT)机密供应功能和零特权(ZSP)执行机制，可以克服这些障碍。权限的自动授予和撤销或过期—JIT 权限授予—在最大限度地减少攻击面方面非常有效。这些解决方案越来越多地以云基础设施授权管理(CIEM)的名义进行分组，它们基于零信任的概念工作，这意味着任何人和任何东西都不能长期访问您的云帐户和数据。

使用 JIT，提升的权限可以在会话或任务期间、在设定的时间内或当用户手动签入配置文件时延长。任务完成后，这些提升的权限会自动撤销，完全不需要系统管理员的参与。用户以前拥有的长期访问权限可能会持续几个月或几年，转换为 JIT 授权会将攻击面压缩到每月几个小时。

更好的是，作为云原生实体，这些解决方案可以为中小型企业和企业等提供高效的机密治理计划。首席信息官、工程经理、首席信息官和其他希望更好地保护其多云 DevOps 环境的 IT 安全官应该考虑采用自动化秘密治理平台，使他们能够 实现这四个优先事项:可见性、执行、自动化和调查。

### 能见度

对所有秘密、秘密所有者和秘密使用者的跨库可见性是必须具备的。您需要在任何给定的时间了解每个能够访问秘密的人和机器用户，并且您需要能够发现和监控您的最高风险秘密或跨保险库的帐户。

### 强制执行

您需要能够在所有保管库中实施您的机密策略，这必然包括基于组织策略在所有保管库中自动轮换您的静态机密的能力。这里，JIT 权限是关键，因为它使用户能够动态地生成临时凭证，并且必然包含权限的自动授予和过期或撤销(JIT 权限授予)，这在最小化攻击面方面非常有效。

### 自动化

你需要能够管理秘密的身份生命周期——最好是通过自动化的加入者/移动者/离开者流程。例如，考虑一下，如果几个人可以访问一个共享的秘密。从安全角度来看，共享帐户不是最佳实践，但随着云资源在 DevOps 组织中的使用越来越多，这种做法很常见(而且变得越来越常见)。如果共享机密组中的其中一个人离开了组织，那么该许可/特权就变成了潜在的漏洞。由策略调用的自动共享机密轮换直接解决了这个问题。

### 调查

在任何组织中，安全事故都是不可避免的。当发生事故(数据泄露、设备丢失、勒索软件攻击)时，您需要能够将秘密与身份联系起来，以便进行主动监控和事后调查。了解哪些身份或个人被利用，以及如何被利用，对于解决漏洞或不良做法至关重要。分析和报告也是调查访问权限变化、解决策略漂移和识别危险行为的重要功能。

毫无疑问，云环境中的机密治理需要重新思考和重组现有的保险库技术和最佳实践，以保护静态机密。基于 ZSP 规则的 JIT 许可和秘密授权提供了一条有效的前进道路。考虑使用 JIT 和 ZSP，提升的特权受到限制，并且有时间限制以最小化许可和特权威胁。总之，这些功能可以提供高效的机密治理来保护您的整个组织，而不会减缓或影响您的开发运维团队。