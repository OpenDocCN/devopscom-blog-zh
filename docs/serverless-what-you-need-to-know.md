# 无服务器:您需要知道的

> 原文：<https://devops.com/serverless-what-you-need-to-know/>

无服务器架构有明显的优势，许多企业已经做出或计划做出这种改变。然而，像任何范式转变一样，向无服务器的转移既有好处也有风险。以下是你需要知道的。

AWS 在 2014 年发布了 [AWS Lambda](https://aws.amazon.com/lambda/) ，开创了无服务器领域，其他主要云提供商紧随其后:[Azure Functions](https://azure.microsoft.com/en-us/services/functions/)as a service、 [Google Functions](https://cloud.google.com/functions/) 和[IBM Cloud Functions](https://console.bluemix.net/openwhisk/)(Apache open whisk)。这一领域的后来者采取了基于容器、完全管理的无服务器框架的形式，如[kubless](https://github.com/kubeless/kubeless)。

## 好的、坏的和用例

如今，一些最常见的无服务器使用案例包括构建批处理，如图像压缩、云作业自动化、从边缘到云服务物联网设备以及构建单页面应用程序(SPA)。

一方面，云托管的无服务器功能消除了与管理实际基础架构相关的开销，并通过有效利用底层基础架构带来了显著的运营成本节约。这使得开发人员可以在自己的舒适区进行开发，使用他们选择的语言:Python、JavaScript，甚至是 Go、Java、C#、PHP 或其他语言，具体取决于平台。

另一方面，将基础设施控制权委托给提供商意味着无服务器会带来一系列新的运营盲点和可观察性挑战。与容器、虚拟机(VM)甚至裸机工作负载相比，它还使趋势科技服务器深度安全防护系统控制的放置和管理变得更加复杂。

## 无服务器并不能解决所有问题

无论是构建新的应用程序还是迁移现有的应用程序，无服务器运行时都有很大的限制。云托管的功能即服务限制了功能的运行时持续时间，需要一段“预热”时间来进行功能调用，并且不保证跨功能调用的本地状态保持。这意味着纯粹受时间限制的应用程序逻辑，包括输入到输出的短时间功能转换，并且能够处理缓慢的启动时间，将非常适合无服务器范例。

将面向状态的应用或有状态的微服务迁移到无服务器的功能中是一个不同的故事。这通常会利用数据库——无论是托管的还是作为服务的——或者利用应用程序缓存(如 Redis)或对象存储(如 S3)来跨请求存储状态。

虽然云托管的无服务器消除了修补和维护基础架构的负担，但功能的短暂性使得围绕动态和静态敏感数据建立边界和控制极具挑战性。

## 构建、交付和运行无服务器

**尽管无服务器可能还很年轻，但它非常有前途。采用选择应该围绕开发人员的平台成熟度、测试、操作以及安全性和法规要求进行平衡。**

****如果我们以 [Docker](https://www.docker.com/) 为容器打包所做的事情为例，通过它的容器映像格式，这正是 functions 和 serverless 所需要的:一种打包的公共语言。一个用于构建、交付、运行、操作和保护基于功能的工作负载的通用工具将作为现有各种平台的共同基础。

从安全角度来看，围绕秘密消费的统一、第一方和第三方之间的服务对服务认证和授权、功能工作流和访问白名单、可观察性、安全网络监控、网络访问策略和数据访问策略——所有这些都将降低采用的摩擦。****

****[云原生计算基金会](https://www.cncf.io/)最近发布了[云事件](https://github.com/cncf/wg-serverless/tree/master/proposals)的 0.1 版本，功能和事件触发的通信消息格式。这强调了无服务器离成熟和统一的标准还有多远。****

****从安全角度来看，A 型无服务器工作负载保护系统必须能够检查无服务器工作负载运行时。B 类工作负载保护系统受限于无服务器平台提供商 API 为带外面向数据的安全分析提供的内容。****

****云托管功能使 A 类保护难以实现，而完全托管的无服务器框架(例如 Kubeless)使企业能够采用无服务器，并为新的开发人员体验打开了大门。这些技术还加快了创新速度，并且借助专为微服务和现代虚拟化技术设计的安全工具，可以保持对网络和数据的全面可见性和运行时控制。****

## ****安全功能即服务:一个新的安全工具库****

****就像任何其他使用容器、虚拟机或裸机服务器实现的基于 web 的微服务一样，功能也不能从众所周知的[10 大 OWASP](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project) web 应用程序漏洞列表中摆脱出来。****

****然而，功能非常依赖于非 web 的、基于事件的通信和基于事件的网络通道。这些在公共云提供商上，防止插入安全控制来检测利用企图或数据泄漏，并执行定义良好的工作负载策略。这需要新的安全工具库，这些工具能够理解微服务、水平扩展并与现有的安全操作和安全堆栈共存。****

****基于功能的工作负载的短暂性使得它们更难被利用，并且更难持续存在威胁。然而，第三方代码漏洞或开源组件变坏可能会导致敏感数据流入坏人之手，落入错误配置的对象存储中。****

****由于无服务器在外部服务中需要持久的数据存储，在这种情况下，绕过正在运行的函数来泄漏秘密使得敏感数据离攻击者只有一步之遥并不是不现实的。****

******控制所有这些:哪些私有信息可以被处理，哪些敏感数据在传输中，通过哪些事件网格通道接收和发送，以及 API 网关如何调用函数，哪些 API 调用哪些函数对内部和外部服务进行调用。这就是风险、监管和现代化发生碰撞的地方。 **********

## ****底线****

******尽管有大量的采用和不断增长的兴趣，无服务器仍处于起步阶段。当涉及到标准、运营、测试和编排工具、工作流和安全时，大量的水必须经过云提供商的创新桥，AWS Lambda 引领着采用曲线，Azure FaaS 实现了巨大的创新飞跃，社区驱动的框架建立在 Kubernetes 之上。******

******抛开创新不谈，无服务器会产生巨大的运营和安全盲点。理解这些风险并拥有适当的自省和检查能力是决定平台的采用和选择的关键。******

******— [Gadi Naor](https://devops.com/author/gadi-naor/)******