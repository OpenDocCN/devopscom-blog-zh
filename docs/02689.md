# APM 在微服务世界中的角色变化

> 原文：<https://devops.com/the-changing-role-of-apm-in-a-microservices-world/>

微服务的使用激增。整整 91%的组织正在使用或计划使用微服务，92%的组织预计在未来一年增加对微服务的使用。这不再是如果，而是何时:86%的组织预计微服务将在五年内成为默认服务。

随着微服务和容器的使用越来越多，应用程序变得更加动态。应用程序的容器或构建块的保质期不到一周是很常见的。然而，在监控和诊断不断变化的应用程序中的性能问题时，对应用程序开发有益的东西可能会带来挑战。[应用性能监控(APM)](https://www.riverbed.com/products/steelcentral/application-performance-management.html) 如何改变以支持微服务和动态云原生应用？

## 更多移动部件

小型、专业化的微服务可能有助于缩短开发周期、持续发布和提高敏捷性，但当部署在动态云基础架构中时，移动部件的数量也会增加应用性能故障排除的难度。高度分散和短暂的集装箱化组件需要持续跟踪和测量，这要求 APM 工具采用大数据方法。为了提高效率，[监控容器和微服务](https://www.riverbed.com/forms/ebooks/ebook-guide-monitor-containers-microservices.html)需要所有事务的高清晰度可见性，机器学习以查明问题，并将焦点从服务器转移到用户。

## 高清数据

由于动态、集装箱化的环境不断变化，必须以高频率收集测量数据——考虑几秒钟而不是几分钟。以一分钟或更长的时间间隔收集基础设施性能指标会扭曲真实情况，有时会完全错过整个事件。例如，在低清晰度下，CPU 使用中反复出现但短暂的峰值模式要么被平均化，要么根本不被记录，但如果被检测到，这将是系统性配置问题的迹象。以一秒钟为间隔收集的高清晰度基础架构指标对于全面了解资源利用率和共享资源依赖性问题至关重要。

然而，仅有基础设施指标是不够的。构建操作环境的完整视图需要来自多个来源的数据，包括应用程序跟踪、系统指标、应用程序日志和网络行为。产生的数据集非常大，需要大数据收集方法和流程。内联数据压缩、NoSQL 后端、非侵入式客户端代理和云扩展是现代 APM 工具的基础技术。

## 端到端关联数据

大数据分析和可视化是将 APM 数据处理成人类模式和事件所必需的。确定性能问题的根本原因通常需要从头到尾跟踪一个事务，通过多个容器、共享资源和下游基础设施依赖关系。下一代 APM 工具通过所有中间关系动态映射每个事务的流程。机器学习和人工智能虽然仍处于早期阶段，但事实证明，它们对于发现数据中的模式和异常是至关重要的，可以提出可能的原因，并标记出来供人类调查。结合最佳的机器和人类技能，可以更快地识别、诊断和解决问题。即使在动态应用程序环境中，IT 运营团队也会受益于改进的应用程序性能、减少的修复时间和更长的正常运行时间。

## 关注最终用户

传统 APM 工具倾向于关注基础架构组件和资源，监控服务器、存储和网络的运行状况和利用率。如今，在数字竞争和客户满意度的驱动下，组织需要专注于用户的角度。这意味着监控多种类型的用户设备的健康指标，并将每个事务映射到后端系统。自动工具提供实时终端用户指标，比服务器端监控更早触发警报，并实现更有效的优先级划分。最终用户洞察还可以帮助开发人员和产品负责人跟踪功能和应用采用率，比较升级前后的性能，并将技术问题和投资与业务优先级直接关联起来。

## 监控当前和未来的应用

云、容器和微服务需要一种不同的性能监控方法，这种方法考虑了应用程序模块的速度、大小和生命周期。有效地监控这些分布式和短暂的流程需要一种大数据方法，能够在现代企业环境中处理大规模的端到端交易数据。

仅拍摄快照的传统 APM 工具会导致对应用现状的不完整了解，并延长问题解决时间。相反，现代 APM 系统收集完整的数据集，使 DevOps 能够快速解决影响业务生产力和用户满意度的间歇性复杂问题。他们通过机器学习来增强他们的技能，以快速识别异常并引导他们找到可能的原因。其结果是更好的应用程序性能，增强的竞争力，也许最重要的是，提高了用户满意度。

— [格利·莱文](https://devops.com/author/gayle-levin/)