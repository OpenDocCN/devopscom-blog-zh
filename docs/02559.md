# CI/CD 如何快速跟踪下一代媒体的推出

> 原文：<https://devops.com/how-ci-cd-can-fast-track-next-gen-media-rollouts/>

***使用 CI/CD 可以帮助数字服务提供商像顶级内容提供商一样快速移动***

随着消费者期望在各种数字设备上获得无缝观看体验的快速变化，在线视频消费一直在大幅增长。为了抓住这一不断增长的需求，数字服务提供商(DSP)必须快速推出下一代媒体服务。此外，为了应对越来越多的顶级内容提供商(ott)的影响，DSP 必须提供高质量、一次到位且一致的媒体服务，同时通过加快上市速度创造竞争优势。然而，与 OTT 玩家不同，DSP 面临着新服务和 oﬀerings 的开发和部署时间极其漫长的挑战，这主要是因为供应商特定的硬件和软件应用不支持快速变化。

![](img/ca7e506d9603fbdefc565293c59f858b.png)

Figure 1: Rapidly changing landscape of consumer video consumption.

采用 eﬀective 持续集成和部署(CI/CD)设置可以使 DSP 实现与 that ott 提供商相同的服务创新和交付灵活性有效的 CI/CD 设置的一个重要特征是创建易于操作和可视化的全自动部署。该设置还应该具有远程可访问性，以方便在多个地理位置的并行部署，并具有强大的监控工具链来监控部署过程中的每个步骤。

然而，为下一代媒体环境实施具有这些特征的 CI/CD 设置也有其自身的挑战；它需要端到端的 CI/CD 协调，这在操作上非常复杂。这包括将不同类型的视频服务缝合在一起，例如直播电视流、VoD、电子节目指南(EPG)、4K/HDR、用户个性化和配置文件。这些服务需要在多地理位置和多租户环境中推出，以迎合多个供应商的需求。该服务必须提供跨越所有数字平台的无缝观看体验，包括电视、手机、平板电脑和桌面。

在设置如此复杂的流程时，跨职能和跨地理位置的团队拥有流程的 diﬀerent 部分，这可能会在设计、基础架构设置、配置和最终部署方面造成差距。创建的 CI/CD 渠道可能成本高昂且效率低下。

## 设置 Eﬀective CI/CD

### 一键式自动化交付管道工具，用于可预测的推出/回滚

创建一键式自动化交付管道工具，该工具可以方便自动化变更请求(CRQ)启动 CI/CD 作业。该工具触发了跨多个地理区域的各个租户中所有应用组件的整个部署。

#### 设置一键式自动化交付渠道的关键考虑因素:

*   通过 JIRA 等系统跟踪 CRQ 批准，以触发自动化交付渠道。
*   使用诸如 Jenkins 之类的开源工具，通过中间 CI/CD 阶段将管道构建为代码。
*   设计一个主作业来接受组件和配置细节。这将执行多任务配置，并跨租户同时触发上下文部署/回滚。
*   互连网络、基础设施、组件和应用程序的 diﬀerent 方面，以平稳运行整个流程。

通过减少人为错误因素，建立自动化交付渠道可以提供更高的准确性和可预测性。

### 自动化快照、验证前和验证后脚本，以确保一致性

创建完全自动化的快照管理流程，包括跨各个租户的自动化快照创建、回滚和删除。如果出现任何故障，在部署新版本的应用程序之前自动创建快照有助于回滚到以前的一致版本，并且不会停机。

确保在每个部署阶段自动进行多重验证检查，以确保一致性。这些检查包括验证网络连接、内存使用、CPU 利用率、运行的应用程序、错误和调试日志文件、许可证文件、二进制文件大小和配置文件。这些验证可以通过 groovy、ansible、Jenkins、python 或 shell 脚本等工具完成，这些工具带有符合行业标准的适当库。

### 优化资源使用的自动扩展工具

确保应用程序始终有适当的容量来处理 traﬃc 需求。这需要将自动扩展工具与预测机器学习(ML)模型和变更请求流程相集成，以动态扩展/缩减基础架构。

#### 设置自动缩放工具的主要考虑事项:

*   识别外部和内部影响因素以分析系统吞吐量。
*   利用从监控仪表板中获得的见解来管理当前有效负载的变化。
*   利用 ML 模型中的触发器来规划未来的预期系统吞吐量。
*   创建自动化的可配置脚本，以支持基于从变更请求和 ML 模型接收的输入的动态缩放。

创建这样的工具可以实现更好的基础设施可用性和高效的成本管理。

### 构建在开源基础上的与工具无关的按需环境创建框架

利用开源工具提供了对整个 exchange 到 exchange 部署流程的灵活性和控制。使用带有分层方法的定制框架使得交付管道与工具无关。它提供了灵活性，可以轻松替换/插入 DevOps 链中的任何工具，而没有太多依赖性。

这确保了增加的可重用性，因为相同的工具链可以用于多个环境设置。此外，定制的框架动态地处理资源并利用基础设施 eﬀectively.

### 服务保证控制面板，支持端到端流程的稳定性和监控

服务保证控制面板可以在单个窗口中提供端到端 CI/CD 性能的一瞥。它提供了对管道中故障/堵塞的实时图形洞察，在整体流量的背景下突出显示。仪表板应该从各个组件的部署管道中动态获取数据，并监控升级/部署的处理方式。它应该提供对资源使用情况的深入了解，这可以触发动态自动缩放，并直观地比较新旧软件。

实施这样的服务保证仪表板可以提供更大的可见性，并有助于轻松诊断和防止错误。

## **好处** 

*   通过跨多个租户的并行部署，缩短了上市时间，等待时间减少了近 60%。
*   提高可预测性，显著降低延期和停机/故障率。
*   优化成本，IT 在部署流程和资源使用方面的支出降低约 50%。

*本文由 Prodapt 战略洞察经理 Sumit Thakur 合著。Prodapt 的高级项目经理 Vijay Ramachandran。*

— [拉克什米普拉萨德 A](https://devops.com/author/lakshmiprasad-a/)