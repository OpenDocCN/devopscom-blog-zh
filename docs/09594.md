# 源代码管理最佳实践

> 原文:[https://devops.com/source-code-management-best-practices/](https://devops.com/source-code-management-best-practices/)

当然，源代码是任何软件开发实践的基础。管理源代码是现代软件开发管道处理的第一项任务，管道的所有后续阶段的成功和功能都依赖于源代码。因此，正确管理源代码而不在交付管道中引入瓶颈或缺陷是至关重要的。为了做到这一点，在与源代码交互时，有一些最佳实践可以遵循。

## 定期提交更改

虽然这看起来很明显，但是 [提交通常很少进行](https://medium.com/wearehumblebee/devops-commit-build-and-deploy-your-code-1d30c8f20a13) ，因为大多数开发人员倾向于只在重大变更后提交。提交频率取决于工作流，如果提交触发了另一个任务，则仅在重大修改后提交是可以接受的。

然而，最好定期提交更改——即使是很小的更改。它不仅保留了可审计的变更历史，还支持在提交之间进行简单的比较以进行故障排除，并确保代码与版本控制系统(VCS)保持同步。然而，这并不意味着用户应该对每一个小的变化都进行提交；相反，采用一种开发风格，将频繁提交作为工作流的一部分。即使有许多提交，大多数 VSCs 也为用户提供了使用 rebase 将多个提交合并为一个提交的选项，以实现更好的管理。

## 始终确保存储库是最新的

大多数时候，开发是团队工作，多个开发人员在一个代码库上工作。因此，源代码会经常更新。因此，在进行任何更改之前，最好使用 git pull 或 fetch 来获取代码的更新副本。这种做法不仅减轻了合并冲突，还帮助用户避免了推送代码时的错误，例如“ [未能将一些引用推送至](https://komodor.com/learn/how-to-fix-failed-to-push-some-refs-to-git-errors/) ”错误，这种错误在存储库的本地副本位于远程副本之后时发生。

## 创建详细的提交消息

提交消息应该是有意义的，包括让任何阅读消息的人能够快速理解提交背后的原因。这并不意味着用户应该创建冗长的提交消息；相反，他们应该以简洁但有意义的方式描述提交。提交消息应该包括提交代码的原因，而不是如何通过比较文件来识别代码。

一条 [良好的提交消息](https://www.freecodecamp.org/news/writing-good-commit-messages-a-practical-guide/) 可以包括诸如 bug 修复 ID 或需求 ID 之类的细节，这些细节引用了项目管理平台(如吉拉和 Azure Boards)中代码变更的规范。

## 提交前检查更改

在提交之前一定要检查代码——如果您提交一个共享的存储库，这是必须的。通常，在通过审查系统或拉请求将代码与主分支或特定存储库合并之前，代码审查是交付管道的一部分。

代码评审为代码修改提供了第二双眼睛，有助于发现代码中的任何问题。它还作为一种[质量控制](https://devops.com/?s=QA)机制，帮助有机地提高整体代码质量，同时帮助提高对每个代码变更的意识。

## 实施适当的工作流程

即使在使用源代码管理(SCM)工具时，也必须在整个开发团队中实现具有标准化实践的适当工作流程。标准化工作流程的一些注意事项:

*   决定分支策略和分支最佳实践，比如特定开发类型的命名约定。例如，使用前缀来指示开发功能或错误修复的类型
*   确保正确使用范围来决定谁有权访问每个存储库
*   确保审阅工作流包括哪些用户在审阅过程中有最终发言权，以及合并更改的适当授权。

一个正确定义的工作流描述了完整的源代码管理周期，从创建新的分支到进行更改，最后，在审查后将代码合并到主分支。这个过程通过推动用户遵循特定的工作流程，帮助组织简化整体代码管理。这也有助于新开发人员的加入。

## 实施适当的安全措施

这种实践与适当的工作流密切相关，因为安全性将是定义工作流时的主要考虑因素之一。应该从开发者 [认证授权](https://auth0.com/docs/get-started/authentication-and-authorization) 开始，控制谁有权限，他们可以访问源代码的哪些区域。此外，安全实践应该提供对所有用户活动的可见性和可审计的跟踪，以查明源代码中任何不寻常的活动。

安全实践加上一个 [良好的备份和灾难恢复策略](https://www.itproportal.com/features/disaster-recovery-vs-cloud-backup-what-is-the-difference/) 对于开发管道的持续运行至关重要。

这些最佳实践可以帮助开发人员安全有效地管理他们的源代码。一个正确实施的源代码管理系统将减少管道前面阶段的问题，并确保长期更平稳的运行。