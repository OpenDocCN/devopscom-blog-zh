# 解决“自动”应用程序自动化问题

> 原文:[https://devo PS . com/solving-the-automagic-apps-automation-problem/](https://devops.com/solving-the-automagical-apps-automation-problem/)

DevOps 革命始于一些简单的原则。一个关键的问题是，系统应该由代码管理，而不是由人来管理，以消除复杂性并确保更好的安全性、合规性和可伸缩性。要管理任何规模的计算基础架构，该流程应通过代码中捕获的逻辑实现自动化。而且，理想情况下，当您向上移动到中间件和应用层的堆栈时，自动化也将适用。

可惜没那么简单。事实上，自动化应用程序比自动化服务器部署要复杂得多。因此，我们需要一种新的方法来管理应用程序和基础架构。管理服务器和低级环境可能更简单，但是现有的自底向上的方法工作得很好。然而，管理应用程序必须自上而下。也就是说，应用程序应该具备成功所需的一切:配置、打包、发现、扩展需求等等。这并不是我们历史上构建软件的方式。应用程序建立在一层又一层的依赖关系之上，这些依赖关系一直连接到系统级。那么，我们如何打破这种模式，使应用程序“自包含”呢？

## **数以千计的应用，有数百万种依赖关系排列**

通过自动化 Linux 和 Windows 服务器生态系统以及少量衍生操作系统，我们可以覆盖大约 95%的操作系统，以及它们之间通用的一系列功能。当我们试图将这个矩阵放在部署和生产的真实世界中存在的一系列应用程序上时，复杂性就出现了。在小公司里，你通常至少有十几个应用程序，甚至更多。在较大的公司中，您要处理成百上千的应用程序。

这一大杂烩涵盖了使用传统语言运行的定制应用、专有第三方软件和更现代的开源软件。实际上，有数百万种排列必须跨依赖关系以及安全性和法规遵从性机制实现自动化。例如，在 Kubernetes 的世界中，每个容器都需要自己的包含配置和管理信息的侧柜。然而，Kubernetes Sidecars 没有强大的自动化功能，并且很快扩展成大量人工定义的管理指令，在压力下很容易发生冲突或崩溃。

这个的结果是什么？今天，我们可以编写少量代码来有效地管理脸书成千上万的服务器。这对于基本上无限的规模是真实的。但是，自动化管理脸书的软件增加了几个数量级的复杂性。

## **对应用复杂性扼杀云迁移的担忧**

这种二分法导致基础设施自动化走向了另一边；组织已经采用了不真实的自动化，并且背离了 DevOps 和敏捷方法的真正理想。许多公司没有意识到基础设施自动化的真正好处，因为他们正在做一些不必要的复杂工作，这些工作可能具有自动化的特征，但实际上甚至更复杂。因此，他们失去了这个词的价值，仅仅是把一种复杂性换成了另一种复杂性。

类似地，许多应用程序开发团队正在做他们称之为“特别的”基础设施自动化，而 DevOps 团队转移他们的目光并祈祷。翻译？一个由您自己开发的工具大杂烩，用于管理容器或虚拟机、应用程序以及从应用程序运行时环境的顶部到底部的所有依赖关系。这实际上就是一个人对一个单独的服务器执行一组不断变化的狭窄路径——这是造成混乱的一个原因。这种混乱是为什么我们的大多数客户认为基础架构自动化是实现敏捷性的关键步骤，但一小部分客户完全接受了它。

这也是为什么许多希望迁移到云的公司还没有这样做的主要原因。管理他们所有应用程序的重新打包和移动(即“提升和转移”)是一个令人生畏的前景，他们有理由相信，这比简单地从裸机或虚拟机切换到 AWS、Azure 或谷歌计算引擎中的实例要困难得多。

现在，我们不需要把孩子和洗澡水一起倒掉。操作系统、虚拟机和容器的自动化运行良好，实际上是对过去工作的巨大改进。事实上，我们可以用比目前更少的特性和功能轻松地在那里运行。但是应用程序必须自顶向下管理，以适应管理如此多的移动部分的固有复杂性。

## **进入新模式:自上而下的应用管理**

自上而下的应用程序管理以一种完全不同的方式工作，而不是对应用程序应该做什么进行严格的配置和选择，面向开发运维团队的现代应用程序管理工具应该询问应用程序需要什么才能在整个生命周期(从开发到生产再到淘汰)中取得成功并做好工作。这些工具应该能够自动发现应用程序堆栈依赖性的变化，从前端到中间件，再到数据库、负载平衡和安全性。

如果这些依赖关系或其他关键因素发生变化，那么这些工具需要自动重新构建和测试应用程序，并准备好将它们作为金丝雀部署或直接部署到生产中(如果变化很小)。例如，如果发布了一个新的 SSL 补丁，DevOps 团队更新了它的底层基础设施，那么应用程序管理工具链应该认识到哪些应用程序需要进行哪些更改，以及这会如何影响上游和下游的依赖关系。最终，工具链应该悄悄地、无缝地用补丁修复所有受影响的应用程序，但避免服务中断。

一旦开发人员定义了应用程序的成功标准，那么应用程序配置和管理工具的工作就是确保始终符合标准。总的来说，这是一种新的打包类型，它囊括了所有可能的世界的精华，将配置和打包合并到智能应用程序管理中，可以根据需要进行扩展和调整。

通过捕捉配置的依赖性和传统打包的限制，自上而下的应用程序管理方法和工具允许首席信息官将陈旧的 C 或 C++后台应用程序迁移到云原生环境中，就像一批 Node.js 微服务支持移动应用程序一样简单，并使它们以相同的连续性和灵活性水平运行。这才是每个人真正想要的——一种更安全、更简单、更好的运行应用程序的方式，而不必担心底层基础架构。

## **结论**

从某种意义上说，DevOps 革命正在进入一个新的阶段。随着微服务继续将单一应用程序的旧功能分割成众多更小的应用程序，管理这种应用程序激增的挑战只会增加，并变得更加复杂。

在云计算相对年轻的时候，我们对 DevOps 工具的想法是可以理解的天真，并且尚未了解我们在随后几年将面临的巨大应用聚宝盆，这一现实放大了几十年前的遗留应用程序将继续在企业数据中心运行，直到它们的代码崩溃。现在，我们知道并且能够设计一种符合我们现代现实的自动化方法和实践。我们可以通过为基础设施提供所需的简单规则和工具来做到这一点，同时为应用程序提供更大的回旋余地，无论在堆栈的较低级别发生什么，都可以保持自我并取得成功。

科里·斯科比