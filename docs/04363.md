# 测试驱动开发、持续测试和代码质量

> 原文:[https://devo PS . com/测试驱动开发连续测试代码质量/](https://devops.com/test-driven-development-continuous-test-code-quality/)

我们从敏捷开发方法中获得了很多好处。我从来不是那种“一种正确的方式”的人，但是敏捷有很多开发需要的好处(而且运营也越来越需要)。将这一点扩展到 DevOps 的开发端是没有痛苦的，因为现在很多敏捷都被包装在 DevOps 的衣服里了。

在我看来，敏捷带来的最大影响是测试驱动开发。通过编写满足需求的测试，然后编写通过测试的代码，我们的小团队(我所在的开发团队没有运营人员支持我们——或者更准确地说，当我第一次使用 TDD 时，我们是运营团队)需要它提供的帮助。在没有专门的 QA 人员的情况下，我们能够简单地通过运行我们用于开发的测试来执行我们的变更所保证的严格的测试套件。

当然，对你们中的一些人来说，这已经是旧闻了，TDD 已经在更大的敏捷/DevOps 运动中被消耗掉了，而且你们每天都在使用它。但是老实说，让开发人员自己做更多测试的转变是我仍然很怀疑的。

## 开发人员不一定是测试人员

虽然它可以工作，但是开发人员肯定能够理解他们代码中的弱点，我认为编写代码的人并不是为代码编写测试的正确人选。特别是当你进入测试的集成阶段，代码之间的关系变得越来越复杂。一些开发者会做得很好。我的经验是，很多人不会。为什么？因为如果他们在写解决方案时不知道他们解决方案中的弱点，他们在写测试用例时也不会知道这个弱点。这是一个真正罕见的拥有 100%测试代码覆盖率的商店，所以那些弱点可能会成为定时炸弹。

简单地说，QA 需要和 dev 一起编写测试。在寻找解决方案设计的缺点时，两个人确实比一个人好。但是发展的现实往往不允许这种类型的合作。当你在一个冲刺阶段，这一点被安排了半天，留出时间聚在一起对于一个开发人员已经写好测试并在头脑中解决的问题来说可能是困难的。毕竟，敏捷和 DevOps 的全部意义在于加速交付，让简单变得更复杂通常不是这个等式的一部分。

## 有一个计划，并使用它

我知道一些商店，在那里集成测试几乎是事后才想到的。一个是 QA 团队，他们努力确保完成并做得很好(尽管仍然是事后的想法)，而不是像 PoC 一样拼凑(我想的是概念证明；采用缩写词中任何一种，两者都是准确的)。其他人应付过去，弄清楚什么是断断续续不起作用的(在生产中经常发生)，而不是跟随潮流。结果是，不出所料，错过最后期限和不断延长的冲刺。

尽管 DevOps 总体上给我们带来了好处，尤其是 CI/CD，但在一些领域——其中之一是测试——速度和/或数量已经取代了质量。我们做了很多测试。但是它们是正确的测试吗？对于 TDD 环境中的单元测试，是的——对于有测试覆盖的行。在这个狭窄的空间之外，我认为答案更加不确定，这取决于很多事情。

最好的办法是让 QA 参与编写 TDD 环境的测试，即使是很小的测试。如果它缩短了交付的总时间线，它就不是开销；即使它在这里或那里拖慢了一个片段，真正重要的是成品的时间线，而不是给定片段的时间线。

如果你没有 QA 团队——很多商店都没有——我建议开发人员互相帮忙。这并不是说不需要 QA，但它确实利用了“三个臭皮匠胜过一个诸葛亮”的原则，并保持想法的流动。除此之外，DevOps 团队的运营成员非常适合。从历史上看，生产困境会降临到他们头上，所以毫无疑问，他们已经磨练了发现问题领域的技能。

## 不要成为那个人

不管你怎么做，都不要忽视测试。做 TDD，坚持下去。让每个变更请求从测试修改开始，然后修复失败的部分。记录测试，因为它们也是代码，强调测试的内容和原因与代码谈论它在做什么和为什么一样重要。

毕竟，你不想以' == '和' > = '之间的差异结束，让你在[头条](https://gizmodo.com/everything-you-need-to-know-about-cloudbleed-the-lates-1792710616)上停留一周，主要是坏消息。这种差异是一个明显的 TDD 测试用例，如果曾经编写过的话；不要成为那样的人。

持续测试工作，测试驱动开发工作。你只需要在实现它们的时候考虑一下，并且坚持一个从头到尾测试的计划。这是关于*质量*代码更快，而不是关于*任何*代码更快。请注意，我一直关注测试的过程端，而不是冒烟/负载/回归端。这些也很重要，但是它们的问题不同，所以我选择把它们放在一个单独的博客里。

所以继续前进，快速迭代，但是要彻底测试。我怀疑我们中的大多数人会很快达到 100%的代码覆盖率，更不用说 100%的集成嵌套覆盖率了…但是测试什么是重要的，并且把重要的东西带到测试中来。

唐·麦克维蒂