# 关于债务和交付风险，甜甜圈教会了我们什么

> 原文：<https://devops.com/what-donuts-teach-us-about-devops-and-delivery-risk/>

今天，大多数 DevOps 团队不会过多考虑他们的风险方法。通常，典型的态度是关注添加什么来进一步降低风险。换句话说，“我们可以添加更多的测试吗？我们能不能部署得更仔细一点？”更多的测试，更多的过程和更少的风险显然都是好事。或者他们是？

作为一名程序员，我见过很多项目，那里有如此多的测试和过程，以至于它们实际上变得适得其反。那些“管理费用”可能确实降低了 T2 的风险，但是没人知道降低了多少。我把这种态度称为“盲目规避风险”。当我们对失败做出反应时，这种回避型思维通常会随着时间的推移而建立起来。这是非常自然的反应。

但是当规避风险成为你的标准*工作方式*时，你的交付周期会随着时间的推移越来越慢。你的团队开始觉得他们被困在糖蜜中，但是随着时间的推移，他们不仅逐渐训练自己容忍这一点，而且积极证明这是一件*好*的事情。与此同时，没有人会注意到这样一个事实，即你的软件正在失去竞争优势，你的创新和执行能力正在被别人超越。没有人足够重视工程团队的流失；随着他们的离开，一个接一个地流失到更现代的软件开发团队，包袱更少。终极难题就在这里:如果你走得太快，你会弄坏东西。但是如果你动作太慢，你的企业和团队就完了。

那么，当涉及到风险时，DevOps 团队采取的最佳方法是什么？事实是，两个极端都不可取。盲目规避风险导致价值传递失败。另一方面，盲目忽视风险意味着崩溃和燃烧。

理想的平衡在于不完全回避风险或忽视风险的现实。相反，在驯服风险中可以找到一个明智的中间立场。

展望未来，DevOps 团队和开发人员必须专注于控制风险，以数据驱动的行动、速度和质量自信地交付软件。

## 自动化可以降低运营开销

驯服风险应该成为 [DevOps 文化](https://devops.com/?s=devops+culture)的更大一部分。这种方法最著名的一种方式是由 [谷歌的网站可靠性工程](https://sre.google/)【SRE】团队采用的。

当谈到驯服风险时，谷歌的 SRE 团队信奉两个关键原则:自动化以减少运营开销，结构化和理性的决策以获得更好的数据驱动的选择。

为了探索谷歌这种控制风险的心态，让我们深入了解一下战略工程师如何利用自动化来削减浪费、节省时间和减少重复的、低价值的任务和测试。

在谷歌，sre 是软件工程师，他们对重复性、反应性工作的容忍度极低。(我们不都是吗？)但谷歌的不同之处在于:得益于一种 *驯服* 风险的职场文化，那些不会给服务增加价值的业务会被避免或自动化掉。

绝大多数 DevOps 团队与谷歌持有相同的信念:自动化减少了浪费，节省了每个人的时间。

我们都知道自动化可以降低运营开销，让软件工程师能够主动评估和改进他们支持的服务，并提升团队士气。没有人愿意把时间或精力花在重复的、低价值的任务上。自动化解放了 DevOps 团队，让他们将精力花费在最重要的事情上: [持续质量](https://dzone.com/articles/ensuring-quality-code-without-sacrificing-developm) 。

底线？自动化是驯服风险理念的一部分。重复、低价值任务的自动化是接受驯服心态的最佳方式，而不是完全避免或忽略风险。

## 数据驱动的决策

谷歌 SRE 团队驯服风险的另一种方式是通过基于数据的结构化和理性的决策。

数据驱动的决策对于任何软件工程团队、项目或任务的成功都至关重要。没有适当的数据和反馈，软件工程师就没有办法做出最好的、最精确的决策并降低风险。

数据驱动的决策方法可以——也应该——应用于开发运维测试周期。

数据驱动决策的另一个关键方面是什么，它直接体现了驯服风险的概念？服务水平目标(SLO)。

服务水平目标是衡量服务提供商绩效的服务水平协议的一个要素。SLO 是服务提供商和客户之间创建(并达成一致)的，有助于减少提供商和客户之间的纠纷。

现在，让我们将 SLO 的概念应用于工程和 [QA](https://devops.com/?s=QA) 团队。

在传统的组织中，工程和质量保证被迫在适度的压力下有意识地互动。一个团队生产软件，另一个团队拆卸软件。虽然团队之间的这种必要和健康的冲突可以带来更好的结果，但工程和 QA 之间固有的推和拉可能会造成过度的组织间内讧。

工程团队总是主张更高的速度或对风险的盲目忽视，这高于一切。另一方面，质量保证将始终倡导质量，或盲目规避风险，高于一切。

当然，任何一方都不是完全正确的。

相反，这种紧张局势的解决方案就在中间:驯服风险，而不是忽视或回避风险。这就是 SLO，或代表“中间某处”的数字目标发挥作用的地方。对于专注于速度的工程团队和专注于质量的 QA 团队来说，创造一个 SLO——一个关于风险的快乐的媒介——将创造一个更加平衡的工作场所文化。简而言之，这种方法可以被认为是对风险的驯服。

## 甜甜圈的慢速度

现在，我们终于要吃甜甜圈了。为了证明拥抱驯服而不是回避风险的心态如何能够创造更好、更快乐和更快的开发团队，让我们来看看 Krispy Kreme 甜甜圈。

每天，Krispy Kreme 都会做出数百万个美味、热腾腾、有光泽的甜甜圈。然而，在生产过程中，不可避免的是一个或多个甜甜圈会有缺陷。(我知道，你在问，“真的有有缺陷的甜甜圈这种东西吗？!"为了这个类比的目的，让我们说是的，有。)

一种常见的油炸圈饼缺陷发生在油炸圈饼聚集在生产线上并堵塞生产线的时候。现在，让我们假设这个常见错误是由线路速度引起的。如果 Krispy Kreme 团队试图通过加快生产线来解决这一问题，则公差会变小，出现更多破碎、有缺陷甜甜圈的风险只会上升。那当然不是解决这个问题的方法。

另一方面，如果 Krispy Kreme 团队降低甜甜圈生产线的速度，将会有一个更平稳——尽管更慢——的操作。

降低整个生产线的速度，牺牲速度来消除潜在的缺陷甜甜圈的风险，会更好地服务于 Krispy Kreme 吗？当然不是！

如果这不是真的，那么 Krispy Kreme 是不是应该不顾甜甜圈有缺陷的风险，尽可能快地提高生产线的速度？还是那句话，当然不是！

为了甜蜜的成功，Krispy Kreme 必须抱着驯服风险的心态。通过在甜甜圈生产过程中进行仔细测量和迭代反馈，Krispy Kreme 能够以最佳速度更好地制作美味、高质量的甜甜圈，生产出 **一些** 有缺陷的甜甜圈。这种速度与质量的平衡创造了最佳的经济结果，思维模式和度量允许在未来不断进化以控制风险。随着生产线的变化，最佳速度也需要发展。

DevOps 团队应该采用同样的方法。在不牺牲速度和质量的情况下控制风险。 *甜甜圈’*速度慢修复几个小问题！

如果你仍然不相信，这里有另一种方法来考虑驯服风险，这种方法显然没有热乎乎的、涂了糖浆的甜甜圈好吃:税收。

美国国税局在处理数百万份税务审查时，在纳税季平衡速度和准确性。虽然可疑的报税单被标记出来进行审计，但国税局根本无法发现每一份有问题的报税单。每年对每一份有问题的纳税申报表进行详细的审计是不经济的，甚至是不可能的。

因此，美国国税局通过自动化和数据驱动的决策来降低风险。IRS 专注于创建和使用方法来检测与有缺陷的纳税申报相关的模式。然后，一旦自动化检测到这些数据驱动的问题退货，专家就可以投入宝贵的时间和精力来处理最大的问题退货。

同样，这种控制风险的方法在质量和速度之间创造了一种内在的平衡，并允许随着经济活动和法律的发展而对流程进行改进。

无论你是喜欢吃甜甜圈还是喜欢报税，底线都很清楚。大多数组织需要在保持速度、质量和团队士气之间平衡潜在的风险。DevOps 团队也不例外。

## 如何驯服开发团队中的风险

那么，作为开发团队，我们该如何控制风险呢？

这里的基本思想是进行更智能的测试，而不仅仅是更多的测试。好消息是，如果您有一个合理的自动化水平，来自现有自动化的数据可以使您的测试更加智能。像 [预测测试选择](https://www.launchableinc.com/predictive-test-selection) 这样的方法可以让你更有意义地度过你的电脑时间，让你同时提高速度和质量。像 [这样的方法可以让你宝贵的工程资源集中于最有效的努力来提高测试质量。](https://www.launchableinc.com/flaky-tests-insights)

## 驯服风险的力量

什么是速度和质量的恰当平衡？这是 DevOps 团队经常面临的问题。但是，我是这样回答这个谜语的:在工作场所，承担适当的风险是最合理的方法。

规避风险很容易。任何人都可以通过避免新的解决方案和坚持同样的旧方法来避开潜在的陷阱。但是，冒一次经过计算的风险比完全忽视或回避风险更令人满意。

如果你想提高开发团队的速度和快乐，是时候接受一个新的思维模式了:驯服风险，获得控制。