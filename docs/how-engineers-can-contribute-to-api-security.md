# 工程师如何为 API 安全做出贡献

> 原文：<https://devops.com/how-engineers-can-contribute-to-api-security/>

我是工程师，不是安全专家。这些年来，我在几家初创公司工作过，并发现了一些方法来改变我的工程思维模式，将安全作为重点，并将安全融入到我的编码实践中。

我发现当你和其他人一起工作时，一个工程组织可以对 API 安全做出显著的贡献。但是我们对软件的看法让入门变得很难。在保护终端免受威胁方攻击时，必须考虑另一个角度——一条未选择的道路。

## 未选择的道路

工程师创建并优化应用程序，为真实用户解决问题。工程时间经常短缺，因此我们优化了编写这些应用程序的速度。为了加速我们的过程，我们简化问题并找到可重用的模式或技术。加一点胶水，你就有了软件。

这种观点是建设性的。思想第一，软件第二。当重构软件的现有代码时，我们需要这样思考。但是这个工具是有代价的:如果软件工作，我们只能看到它应该做什么。幕后的真实故事可能要复杂得多。

几年前，我和一名工程师一起为一个授权 API 开发新的端点。我们正在解决实现中的一个问题，我可以乱序调用端点并绕过质询。我们完成了这个例子，他说，“但是它们应该以 1-2-3 的顺序被调用。”

攻击者不同意这种观点。相反，他们想操纵软件按照自己的利益行事。他们问，“什么是可能的？”而不是“它应该做什么？”找出系统失败的原因。对于攻击者来说，胶水比设计更有趣。

在探测时，攻击者可能会考虑以下一些问题:

“密码重置端点在 v2 上？v1 还在运行吗？”

"如果我跳过验证端点会发生什么？"

“当我在挑战中传递 null 时会发生什么？空字符串？SQL 注入？”

作为创作者，我们都认同这种建设性的观点。为了[构建安全的软件](https://devops.com/?s=secure+software)，我们需要考虑未选择的道路，并在我们的应用程序中加入更高的安全性。

## 防守

当你在为软件辩护的时候，你有限的时间是一个劣势。有很多工程师——有些已经写了很多年的软件——这意味着你有很多代码要维护。每个应用程序都依赖于成百上千个开源项目，从库到部署工具到服务器操作系统。

[安全工具](https://securityboulevard.com)可以帮助您从两个角度思考，尤其是那些自动发现端点和跟踪响应统计的工具。您可以使用这些数据来理解代码如何映射到您的公共 API 表面。

除了工具之外，这里还有几个建议供你尝试。

### 阅读代码

选择一个应用程序，找出认证和授权代码并读取它。即使你不是一个优秀的程序员，你也可以学到一些有趣的东西。更好的是，试着站在攻击者的角度，寻找可以利用代码的方法，并让它为您服务。例如，您可能会看到以下内容:

“SQL 注入也许有可能在这一带。我也许可以提取其他账户的信息。”

“在这方面，授权是复杂和令人困惑的。我也许可以使用我的标准用户帐户对其他帐户执行操作。”

“在这个敏感地区，伐木业非常薄弱。我也许可以在不被注意的情况下敲打这个端点。”

代码或注释表明开发人员出于某种原因假设应用程序是安全的。我能通过外部请求打破这些假设吗？”

在进行这样的练习中获得的知识是无价的。您可以使用它来指导其余的 API/AppSec 工作(测试、扫描修复等)。).此外，您经常会发现扫描无法检测到的逻辑漏洞。

### 阅读代码评审

工程师在拉式请求(PRs)中做出决策。过去的 PRs 和评审意见中的内容有大量的上下文，可用于帮助您制定决策。浏览历史记录，然后思考一些以安全为重点的复习问题:

"如果代码试图实施安全约束，我能想出一个办法来绕过它们吗？"

"有没有明显的安全机制应该是这种变化的一部分，但却缺失了？"

"异常的攻击者行为会出现在日志中吗？"

检查这些评论并了解更广泛的背景可以为您提供有价值的信息。您可能会发现没有任何授权逻辑的敏感操作，用户帐户可以访问其他用户拥有的数据的方式，或者没有有效质询令牌的密码重置流程的路径。

### 与工程师一起工作

如果你的工程师正在开发与安全相关的代码，要求一些时间来谈谈。找出他们在做什么(以及为什么)。帮助他们像攻击者一样思考，并解释攻击者可能用来破坏他们的应用程序的一些技术。请记住，要走您工作时没有走过的路，以确保您的应用程序的安全性。