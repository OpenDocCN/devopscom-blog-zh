# 微服务与单片:哪一个适合您的企业？

> 原文:[https://devo PS . com/micro services-vs-monoliths-哪一个最适合您的企业/](https://devops.com/microservices-vs-monoliths-which-is-right-for-your-enterprise/)

随着微服务预计在 2019 年至 2025 年期间以 22.5%的速度在全球范围内增长，需要仔细考虑单片和微服务架构之间的选择。如果您想知道什么是最适合的微服务，或者您的企业应该坚持使用单片还是转向微服务，这里有几个基本要点需要考虑。

## 什么是整体架构？

一个[单片](https://en.wikipedia.org/wiki/Monolithic_system)应用程序建立在一个单一的代码基础上，具有可变数量的模块。模块的数量取决于业务的复杂性及其技术特征。整个应用程序和依赖项(如果适用)都构建在一个系统上，只有一个可执行的二进制文件可供部署。

在为应用选择最佳架构类型时，单芯片架构具有独特的优势和劣势，应该加以评估。

**单片架构优点:**

*   更少的横切关注点:大多数应用程序通常都有大量横切关注点。在一个整体架构上运行它们有助于连接组件。
*   运营开销更少:避免了微服务带来的额外成本，例如服务间通信、服务发现和注册、负载平衡、分散数据管理或分布式日志记录。
*   复杂测试:微服务测试比整体测试复杂得多。
*   更好的性能:由于共享内存访问比进程间通信更快，单片架构通常具有更好的吞吐量性能。

**单片架构缺点:**

*   过于紧密的耦合:当应用程序发展时，纠缠增加了隔离服务以进行升级或独立扩展的难度。
*   更难理解:随着应用程序的增长，层次和依赖关系的数量增加，理解系统变得越来越困难。
*   缓慢的构建和测试创建版本:升级意味着重新编码整个应用程序以考虑依赖性和副作用。
*   难以分布式开发:紧密集成的应用程序很难分成块，这使得分布式团队工作的创建变得复杂。
*   通常需要选择单一的编程语言:在一个单一的应用程序中集成多种语言充满了挑战，通常会阻止用不同语言编写的组件的集成，这可能会限制添加最适合外部语言的功能的灵活性。
*   第三方工具的采用变得复杂:将自包含的第三方组件(例如，云原生组件)添加到具有多个依赖项的单个代码库需要复杂地连接到单一应用程序的不同层。

## 什么是微服务架构？

微服务架构旨在通过提供一套[模块化组件和服务](https://en.wikipedia.org/wiki/Microservices)来满足大型应用程序开发的需求。

当考虑微服务特别适合什么时，应考虑以下优点和缺点:

**微服务优点:**

*   更好的组织:微服务是围绕业务和技术能力组织的，以可独立部署的单元为单位。
*   解耦:每个单元都可以独立升级，而不需要对应用程序进行全面检查。
*   性能:根据需要灵活选择性能或灵活性，包括通过将大量使用的服务与应用程序的其余部分隔离开来，独立扩展这些服务。
*   更少的错误:微服务单元之间难以跨越的界限限制了产生错误的技术可能性，特别是级联错误。
*   新开发人员更容易入职:他们只需要掌握他们将要工作的微服务单元，而不是整个应用程序架构。
*   可扩展性:每个微服务都可以独立扩展，同时还可以添加新的组件。
*   改进的故障隔离:由于模块彼此独立工作，一个模块的故障不会影响另一个模块。
*   消除供应商或技术锁定:由于每个微服务模块都可以独立运行，用来自替代供应商的更好的模块替换表现不佳的模块相对容易。
*   易于理解:由于服务被分解成模块，开发人员很容易理解模块的功能。
*   更小更快的部署:每个服务都可以根据需要独立扩展，而不是扩展整个应用程序。这可以节省成本。

**微服务缺点:**

*   横切关注点:微服务需要处理横切关注点，例如外部化配置、日志记录、健康检查、度量、服务注册和发现以及断路器，以及那些特定于微服务所使用的技术的关注点。
*   更高的运营开销:微服务部署通常会导致单元和容器数量的增加，从而增加管理和运营成本开销。
*   安全威胁:微服务架构呈现扩大的攻击面。保护容器化的应用程序需要在映像、容器、节点、pod 和命名空间级别管理特权访问，确保从入口到出口的加密隧道以及需要从一开始就进行安全烘焙的其他元素。
*   需要管理的多重复杂性:
    *   技术层面上的服务之间的通信，以及操作层面上的团队之间的通信。
    *   从几个可用的微服务模式中选择最佳模式。
    *   调配足够的 IP。
    *   调配资源(内存、CPU、磁盘)以满足每个群集的要求。
    *   维护多种编程语言和框架。
    *   处理现有工具和新服务依赖之间的不兼容性。
    *   为每个需要个性化测试和监控的服务提供自动化工具。
    *   实现每个服务的单独数据库和事务管理系统之间的数据一致性。
    *   当考虑负载平衡和消息中间件时，处理的流程数量会呈指数级增长。
    *   由于需要使模式和接口文档保持最新，导致文档开销增加，为此进行了准备。
    *   对于大型企业应用程序来说，重构构建在 monolith 架构上的应用程序是一项艰巨的任务。
*   复杂的全局测试:全局测试要求首先测试每个依赖的服务。这可以通过自动化测试得到部分缓解。
*   [调试困难问题](https://devops.com/observability-knowing-what-your-microservices-doing/):调试需要独立检查每个服务日志，增加了工作量。
*   部署挑战:微服务是用各种框架和语言编写的，需要不同的资源、扩展和监控，使得协调部署具有挑战性。
*   大型与小型产品公司:尽管微服务的优势对大型公司来说是无价的，但采用微服务架构会带来巨大的复杂性，导致小型公司的实施速度变慢，成本增加。
*   更高的成本:如果没有仔细的战略规划，云服务账单可能会激增，原因是服务内呼叫产生的数据增加，以及考虑到可扩展性和无摩擦性的资源请求增加。
*   文化变革:微服务要求公司拥有敏捷的 DevOps 文化。

由于微服务架构提供了一种更好的方式来管理不断增长的数据集，利用云存储和自动化，并快速部署解决方案，微服务通常比单片更受欢迎。然而，它们可能并不总是组织的最佳选择。在选择微服务之前，仔细检查你的公司文化和业务目标是必要的。