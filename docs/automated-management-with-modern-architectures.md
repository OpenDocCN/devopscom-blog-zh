# 现代化架构的自动化管理

> 原文：<https://devops.com/automated-management-with-modern-architectures/>

我们已经走了很长一段路。就在五年前，有了虚拟机(VM)和像样的监控，我绝不会考虑对一般组织进行主动自动化系统修复。

这有许多原因。监控是分散的，需要大量的工作来整合。一旦整合了日志记录，来自监控的日志量通常会很大，这是自动恢复信息的最佳来源。启动虚拟机所需的时间和完全安装的虚拟机在磁盘上占用的空间都不利于自动响应。

但那是过去，这是现在。世界已经变了。很多。

大多数使用基于云或容器的架构和 DevOps 的公司都在进行监控。它们之间的工具如 [DataDog](https://www.datadoghq.com/) 和 [ExtraHop](https://www.extrahop.com/) 监控应用程序端的性能和应用程序基础架构的网络响应能力。大多数基于容器的体系结构使用一个或两个警报来跟踪系统和实例的性能。再加上容器管理系统，支持全系统自动化的基础设施开始看起来非常完整。

# 超越监控

最先进的开发运维团队和自动化团队更进一步，使用这些工具在监控的基础上进行自动化管理。虽然工具各不相同——我并不打算将以上两种作为唯一的解决方案——但它们很好地展示了监控的两个方面:应用程序和环境(在 ExtraHop 的情况下，是网络)。大多数组织有更广泛的选择，包括源代码工具和其他监控系统。但是有几个已经开始基于这些工具来决定自动修正。如果 ExtraHop 显示一个实例的响应时间非常长，而其他实例的响应却很好，那么这种情况可能会触发一个新实例的启动并关闭旧实例。如果 DataDog 显示一个实例处理请求的时间太长，而其他实例执行得非常好，情况也是如此。如果整个系统的响应时间滞后，可以自动添加新的实例，要么直接启动它们，要么调用容器管理系统来这样做。

对于出现故障的机器，已经这样做了很长时间的公司会很高兴地告诉你让实例离线，这样你就有了出错的记录并可以修复它。如果遵循这一点，Heartbleed 将是一个不同的野兽，其他人会给你同样的故事，“当证据被销毁时，很难排除故障。”因此，尽管许多公司倾向于按照“如果我们拆掉它并替换它，我们就不再需要它了”的思路思考，但应该做的是，从一开始就设置好保存容器，并花时间查看它，以帮助确定在它在不同的实例上再次出错之前出现了什么问题。

# 不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不，不

“自我修复网络”的想法当然不是什么新鲜事。不同的是，机器速度、监控工具、管理工具和平台都已经发展到我们所有人都可以实现它的程度。这并没有消除响应性问题，但它确实提供了一个权宜之计，可以让许多应用程序保持运行和响应，同时您可以找出它们出现问题的原因。

一个关键是要有一个警报系统，让负责的团队知道发生了什么。如果自动化替换了一个实例，团队需要知道它关闭了哪个实例，这样它就可以获取文件并找出发生了什么。如果在 10 或 15 分钟内，有三个这样的通知出现，你就有一个明确的问题，需要更主动的互动。

为了清楚起见:每次我说“这行得通”时，我的警告都很简单——网络问题(网络内部或外部)可能会导致可察觉的性能问题，而这些系统对此无能为力。硬件故障不能通过删除一个实例并启动一个新的实例来解决，等等。但是，在监控和管理警报达到令人担忧的程度之前，应用程序可能会一直嗡嗡作响。团队可以专注于增强，而不是制造替换实例。服务器基数越大，这一点就越重要。

新产品、现有产品的增强、已修复的缺陷、改进的架构——专注于这些问题而不是保持系统运行总是成功的。

因此，如果您没有使用自动化管理，它当然值得一看。你的环境是独特的，有些环境比其他环境更适合你。因此，我将让您根据您的架构进行评估。但是如果你能腾出时间，我强烈建议你这么做。

唐·麦克维蒂