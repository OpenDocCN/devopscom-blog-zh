# 特征标记的 5 个最佳实践

> 原文：<https://devops.com/5-best-practices-for-feature-flagging/>

特征标志，也称为特征切换，是 DevOps 领域中的重要概念。它们已经存在了很长一段时间，并且为了方便起见，一直被开发人员使用。随着[软件开发服务](https://www.goodcore.co.uk/services)提供商努力追求更高的敏捷性，特性标记等实践变得越来越重要。如果您不熟悉功能标志的概念，让我们从了解什么是功能标志开始。

## 什么是特征标记？

特性标志用于分支代码的过程，这意味着打开和关闭某些代码路径，以将新特性的发布与我们代码的实际部署分开。DevOps 开发者为什么要通过特性标志分支他们的代码？因为两个原因，特性标记是一个很好的软件开发实践。首先，对于正在开发的特性，开发人员可以使用一个特性标志来保持他们的发布，直到他们准备好。这确保了已经准备好的其他特性的发布不会因为一个特性没有发布而被延迟。第二，正在处理的功能可以使用功能标志关闭，只有当它准备好了才可以打开。这允许开发人员在不改变主代码的情况下直接处理特性，也称为主干或主分支。当一切都正常工作并准备好被释放时，打开特性开关释放特性，就像开关一样。

用最简单的术语来理解特性标志，特性标志是“if/else”语句，用于在代码中开发条件分支或路径。例如，您可以使用功能标志来声明“如果启用了某某功能，则运行新算法；否则，运行旧算法。”这允许开发者控制功能性——如果特征标志被启用，则新算法被执行；否则跳过。这是特性标志的最基本形式，然而，它们可以更复杂。

特性标志是软件团队维护特性交付和发布的一种实用方法，使用它有很多好处。然而，太多的特性标志会使您的代码更加复杂和难以管理。

以下是特性标记的最佳实践，可以避免您的项目成为特性标记的地狱。

## 更多的特征标志等于复杂的代码

特性标记是一个很好的实践，可以帮助您维护不同特性的交付和发布，但是，使用太多的特性标记会很快将您的代码变成特性标记地狱。创建的特性标志越多，就要创建越多的代码路径，这会增加代码的复杂性，使测试过程更加困难。更多的代码路径会导致混乱，并危及代码的功能。因此，最好只在有意义的时候创建特性标志，并且总是检查先前创建的特性标志是否可以重新使用。

## 命名您的功能标志

为了有效地管理特征标志，拥有适当的标志命名系统是至关重要的。如果没有它，就有可能混淆这些标志，忘记为什么创建它们，或者创建同名的标志，所有这些都可能导致混乱。当与一组开发人员一起工作时，确保每个人都遵循相同的标记方法是很重要的，这样他们就可以通过查看名称来获得有关旗帜的信息。否则，团队成员可能会错误地触发这些标志，扰乱您的代码。

## 记录并清理旧标志

随着时间的推移，跟踪对功能标志所做的更改会变得很困难。因此，通过日志记录来跟踪变化是很重要的，尤其是在团队中工作时。使用日志记录，您可以跟踪谁创建了功能标志，谁在什么时间做了更改。这可以避免你浪费时间去搞清楚谁对什么变化负责。日志将直接记录每个特性标志引入的每个更改。

知道现在哪些标志和代码路径是过时的和多余的也是很棒的。当您知道哪些标志是未使用的，您可以从代码中清除它们，以避免任何冲突或混乱。

## 使用功能标志管理工具

为了更好地管理、控制和显示您的功能标志，您可以使用可用的功能标志管理工具。与其他管理工具一样，功能标志管理工具是管理功能标志的企业级软件。一些最受欢迎的工具包括[黑暗发射](https://launchdarkly.com)、[首次展示](https://rollout.io)和[子弹头列车](https://bullet-train.io)。像这样的工具可以使特性标志的管理更容易，并提高开发速度。

## 使用功能标志收集数据

当涉及到扩展你的产品时，特性标志对于从用户那里收集数据有很大的帮助。例如，如果你想引入一个新的特性，你可以先慢慢地向一些用户推出这个变化。使用特性标志，您可以使新特性或更新只对一小部分用户可用，并收集关于他们对发布的响应程度的数据。然后，您可以使用他们的反馈来改进或更改您的功能，以提供更好的用户体验。脸书和网飞等公司以这种方式使用功能标志，在向整个用户群发布新功能之前对其进行测试。

艾米莉·威廉姆森