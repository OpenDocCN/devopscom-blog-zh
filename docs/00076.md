# 黑掉你的审计员

> 原文：<https://devops.com/hacking-your-auditor/>

不，不是那种黑客攻击，给我一点信任…

最近，我与一位咨询朋友就 DevOps 进行了一次对话，他发现自己的处境有点艰难。他所在的组织是一个纯粹的云计算/开发运维团队，但它正在逐步履行合规性义务。不用说，审计员的情况不太好。

对于那些没有经历过审计的人来说，几乎任何法规/合同/协议都有一个最强的要求，那就是强有力的变更管理。尤其是在那些安然公司的家伙把我们其他人的一切都搞砸了之后。

从运营和法规遵从性的角度来看，变更管理非常有意义。我，我自己，在生产中搞砸了一些事情，但是对于我的变更管理却不够聪明。对于合规性来说，这是绝对必要的。如果您正在处理任何涉及财务或隐私的事情，您肯定希望让它进入一个稳定、安全、合规的状态，并确保这种状态保持一段时间。

有一个很大的误解是 DevOps 类型的组织没有变更管理。当您将每个开发人员每天的多个变更推入生产时，就没有责任或控制了。现在，虽然你肯定可以这样做，但我认为成功的团队肯定不会这样做。差远了。

问题不在于 DevOps 必然跳过变更管理，而在于它看起来不同。许多变更管理变得自动化，变更本身的基本性质也不同了。但是想想你如何向你传统的关注 IT 的朋友描述 DevOps。现在想象一下，试图向一名正在制定标准的审计员解释这一点，该审计员仍在判断云是否包括一个绑在机架上的共同托管的 Mac 迷你管道。

这里有一些关于如何调整你的过程，并向审计人员解释的提示:

*   首先，弄清楚您的应用程序和操作的哪些部分在监管范围内。只有与财务和隐私相关的数据才是，如果需要，您可以对这些数据应用更细粒度的控制或日志记录。
*   确保您的持续集成工具(如果有)包括一些安全检查，并记录所有更新/更改。如果您直接从代码库进入生产，请使用 CI 工具。
*   记录从开发到测试再到生产(或者你使用的任何东西)的所有变更。同样，这对于自动化和将记录转储到某个安全的日志存储库来说应该是微不足道的。
*   除非你的云提供商跟踪所有的 API 调用(就像 CloudTrail 在 AWS 上做的那样，尽管只对某些服务和地区有效),否则就使用 API 或 web UI 代理，比如网飞的 Asgaard。无论如何，这确实是一个很好的安全实践，并且实际上可以加速基础设施和平台管理过程。保留日志以使审计员满意。
*   如果您 SSH 到实例，您需要记录该活动并将日志转储到中央存储库。
*   确保您保留所有代码变更和基础设施自动化变更的修订版(例如，您的 CloudFormation 模板、Chef/Puppet 脚本等。).这通常是内置的，但是要确保配置正确。
*   这些建议现在为您提供了所有应用程序更改、基础架构更改的日志，以及对实例的直接访问。这些是审计人员想知道存在的东西。
*   根据您的范围内合规性要求对它们进行筛选。例如仅支付系统组件。
*   向您的审核员解释所有的变更都要通过一个自动的批准系统，该系统检查代码，测试代码(详细说明测试)，跟踪变更，然后将其投入生产。记录所有服务器登录和基础架构更改，以及整个环境结构的完整历史记录。并且您可以提供所有的文档，在符合性范围内进行筛选。

这可能看起来很多，但是很有可能你已经完成了这的大部分工作。您保留代码修订，在测试套件投入生产之前运行变更，并跟踪所有基础设施变更。您可能没有自己的运营门户/代理，但出于许多与合规性无关的原因，您确实应该有。

诀窍是用他们的术语向你的审计师解释这一点。他们期望人工检查和记录。你需要*向他们展示你仍然有这些制衡，但是它们是自动的*。您可能还需要添加一些片段，例如，如果代码的某些部分发生了更改(例如，带有支付处理或帐户对帐的文件)，则需要添加一个警报，但是希望这些片段是最少的。

一个好的 DevOps 环境实际上拥有比传统基础设施更好的法规遵从性基础设施。与手动修复一切相比，自动化和模板驱动的模型给了我们更好的控制和洞察力，即使当我们推动更多的日常变化时。诀窍是记录这一点，如果需要的话添加几个片段，然后向不太懂技术的人解释这一切。