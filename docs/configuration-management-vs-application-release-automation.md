# 配置管理与应用发布自动化

> 原文：<https://devops.com/configuration-management-vs-application-release-automation/>

开发和运营工具链的许多领域都很容易理解和划分。CI/bBuild、源代码控制、工件库、日志管理、APM 和其他每个都相对容易理解它们做什么以及在每个领域中有什么工具可用。可能会有关于 Git 到底比 Subversion，AppDynamics，New Relic 好，还是选择 Splunk vs Elastic Stack 等的争论。，但工具的用途是毫无疑问的。

我认为这对于配置管理和应用程序发布自动化领域来说并不清楚。这两个领域在多个方面存在重叠，它们都从根本上提供自动化功能，它们共享共同的分类，如“期望状态”和“声明性/命令性”，它们都希望实现系统和应用程序更新的简化，它们都关注包括可靠性、审计和加速发布周期在内的问题。

那么它们之间的区别是什么呢？这就是我打算在这篇文章中强调的。

## 配置管理工具最适合用于什么？

所以非常简短的回答是配置管理工具——例如，Puppet、Chef、Ansible 和 Salt——是服务器配置管理工具。它们主要用于**服务器**的供应和持续配置管理。他们使用“基础架构即代码”方法对基础架构进行更改，在这种方法中，基础架构的“期望状态”存储在存储库中(通常是源代码控制系统)，更新应用到托管系统，以确保它们符合基础架构的“期望状态”

应该使用配置管理工具接口/语言对这些系统进行更改，自动化例程通常用 Ruby 或 Python 编写，配置在 JSon 或 YAML 中作为属性公开。当代理或系统下一次与主服务器同步时，直接在目标服务器上进行的任何更改都可能恢复到“所需状态”定义。

它们还可以用来非常有效地部署和管理某些类型的应用程序。我认为这是造成许多混乱的原因，因为一些组织/应用程序使用配置管理系统进行配置、基础架构配置*和*应用程序部署。他们通常以完全相同的方式部署系统和应用程序变更来实现这一点。

## 那么，什么是应用发布自动化呢？

因此，在我看来，最主要的区别是**应用程序发布自动化**没有将“应用程序”和“服务器”视为同一事物。核心结构是应用程序，而不是服务器。一个应用程序通常由许多组件组成，每个组件可能运行在相同或不同的服务器上；它们可能彼此有关系，或者它们可能依赖于其他组件的版本。

应用程序发布自动化工具允许组织在部署工具中定义应用程序的组件和结构，通常允许组件一起发布—在许多情况下，以特定的顺序编排。

## 为什么使用配置管理工具来管理应用程序？

配置管理工具可以非常有效地用于管理某些类型的应用程序运行时，主要是那些服务器和应用程序同义的运行时。因此，举例来说，如果您有一个 Ubuntu 服务器，它运行一个无状态的应用程序或微服务，并且不依赖于版本或与您环境中的其他应用程序组件紧密耦合，那么为应用程序使用一个配置管理工具可能也是正确的。从这个意义上说，服务器和应用程序是一体的——就像容器和应用程序通常被视为一体一样。很多云原生应用都是这样设计的。

## 企业发布自动化有何不同？

简而言之，今天大多数企业组织的基础设施组件可能是基于云本地运行时松散耦合的，但大多数都不是这样设计的。组织内的某些中心可能正在架构和设计不需要流程编排的更现代的云原生架构，但许多服务和核心系统都是在此之前实施的。

在这些组织中，服务器和应用程序是不同的东西。它们不是同义词。服务器将具有:

*   上面安装了 JBoss 或者 WebSphere
*   将它连接到一个集群或小区或域的一些配置；
*   使用 REST API、JMX 或一些专有 API(不仅仅是通过连接到底层操作系统并复制一些东西到其上)，通过一些外部控制器部署到 it 的应用程序；和
*   与其他组件的一些关系使得它不是松散耦合的(web 服务器、数据库等)。).

这些类型的应用程序部署需要一定量的协调和编排，而服务器配置管理工具并不是设计用来做这些事情的，通常也不是最适合做这些事情的。

ARA 工具通常允许设计和编排应用程序发布流程，将依赖关系和流程构建到工作流中，以支持更复杂的(或更复杂的！)应用程序部署。他们更擅长的不是企业版的自动化，而是他们提供的协调、编排和流程。

这就触及到了我对工具的不成熟理解的核心:一类自动化工具并不适用于所有用例。我不认为任何 ARA 工具比 Ansible、Puppet 或 Chef 更好；我是说一个是卡车，一个是汽车:他们擅长不同的事情。ARA tools 无法像脸书使用 Chef 那样有效地提供 25，000 节点的集群，Chef 也无法有效地用于管理大多数不是基于松散耦合的云原生应用程序的企业发布自动化需求。

## 还有其他区别吗？

显然，答案是肯定的。配置管理工具本身之间存在许多差异，更不用说服务器配置管理和应用程序发布自动化工具之间的差异了。然而，我经常指出的一个显著区别是，在大多数 ARA 工具中，用户在图形用户界面中创建他们的自动化过程，而不是使用脚本框架。

服务器配置管理工具通常有一个脚本框架，使用 Python、Ruby、YAML 等格式的文本编辑器进行配置。如果要有效地实现它们，它们需要用户有丰富的经验和技能。

大多数 ARA 工具使用图形编辑器来执行这些活动。因此，用户不用在 shell 中编写带有 if、for 和 while 循环的脚本，也不用在 Python 脚本中调用配方来安装产品，而是使用可视化编辑器来实现大部分功能。现在，在 DevOps 世界中，一提到 UI，人们就会跑起来——许多 DevOps 或自动化工程师喜欢脚本，他们熟悉它，并喜欢学习新的语言。尽管他们可能喜欢使用 vi 作为文本编辑器。但是要知道“ESC，:，wq”是你在 vi 中保存和关闭文档的方式，这并不适合每个人。归档、保存或归档、关闭为其他人工作。

我最近开始超越野跑，有很多关于路线没有被标记和 GPS 没有被使用的大男子主义。吸引人的一部分是你使用地图和指南针。嗯，就我个人而言，我宁愿有一个 GPS，专注于跑步。就像如果我不需要的话，我更喜欢自动化的东西，而不需要编写脚本。ARA 工具中通常提供 Power 功能，供人们调用 Shell、Python、Ruby、PowerShell 等中的脚本。，但是它们试图涵盖最常见的任务，而不需要编写脚本。

## 让您的需求决定您的工具

如果我正在使用 Docker 和 Kubernetes 构建下一代平台即服务(PaaS ),我会招募少量高技能和高薪的个人来做这件事，并让他们在他们选择的工具上发挥领导作用——接受 Ansible、Stackstorm 或类似的东西最有可能符合要求。

然而，如果我在一个企业组织中工作，有 20 或 200 个不同的应用程序需要管理，操作人员不是程序员，那么应用程序发布自动化工具可能更适合这个组织。ARA 工具就是为这些组织设计的。

扩展 DevOps 项目并为其提供资源对于当今的组织来说也变得越来越成问题——其中一个原因是，最常用的配置管理工具是由一个非常聪明的开源社区设计的，该社区试图解决技术初创公司的问题，这些公司希望将现代相对同质的技术堆栈扩展到通常的大规模。

然而，这不是大多数企业的问题。花旗银行、巴克莱银行、葛兰素史克或其他此类公司没有部署大量相同类型的服务器。他们正在部署大量不同的应用程序，每个应用程序都有许多不同的开发和测试实例，规模相对较小(对于生产中的特定类型，可能有数百个)。

服务器配置管理工具可能适合于管理这些组织中成百上千的服务器的操作系统和基本配置，但是它们并不是为管理位于它们之上的应用程序而设计的——根据我的经验，也没有被实现。

## 摘要

服务器配置管理工具是为管理大型同构基础设施而设计的，并且最有效。如果您现在正在设计一个新的应用程序基础设施，那么在少量的通用运行时上实现标准化绝对是有意义的，因为松散耦合的应用程序可以独立发布、扩展和管理。如果您的环境看起来像这样，并且您已经或愿意招聘一批在技术上能够胜任配置管理工具的开发运维工程师，那么开源配置管理工具可能既适合您的基础设施，也适合您的应用*。*

应用程序发布自动化工具旨在应对大多数企业组织中存在的发布自动化挑战，即那些在技术服务方面有长期投资，但不能够或不愿意迁移到最现代的应用程序和基础设施设计模式的组织。这里的问题陈述不是大规模地管理少量的运行时，而是他们有大量不同的应用程序，每个应用程序的规模都相对较小。这些异构环境通常有相对复杂的发布过程，需要编排和协调，这是 ARA 工具最适合的。

然而，即使是拥有最多种类应用程序运行时的组织，通常也会对配置、操作系统、存储、安全性和其他方面进行标准化，因此底层基础架构相对来说是同质的。在这种情况下，服务器配置管理工具很可能是管理基础设施的最佳选择，结合应用发布自动化工具来管理位于基础设施之上的应用。

## 关于作者/戴夫·塞耶斯

戴夫·塞耶斯是发布自动化和持续交付软件提供商 [MidVision](http://www.midvision.com/) 的联合创始人和技术服务总监。他与欧洲和北美的客户和合作伙伴在开发运维及自动化倡议方面密切合作，并负责设计和管理合作伙伴和渠道战略。在 [LinkedIn](https://www.linkedin.com/in/sayersdavid) 上与他联系。