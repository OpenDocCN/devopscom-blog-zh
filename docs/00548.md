# 服务虚拟化——方法和原因。

> 原文:[https://devops.com/service-virtualization-hows-whys/](https://devops.com/service-virtualization-hows-whys/)

闭上眼睛，深呼吸。你在一个岛上，闻着来自大海的碘，阳光温柔地抚摸着你的脸颊，你在午后啜饮着鸡尾酒。你的手机关机了，在一个你忘记的地方，而且你不能直接上网。你是一名系统管理员，这是你职业生涯开始以来的第一次，你需要休息，真正的休息来重新充电，你甚至不去想工作，因为你知道。你知道一切都会好起来的，因为自从你以真正面向 DevOps 的方式实施了服务虚拟化之后，一切都会好起来的。

**什么是服务虚拟化？**

首先，我要说的是，服务虚拟化并不是什么新事物，但许多人仍然不知道它到底是什么，只有少数好产品可用。

你可以在 Chris Riley 的这篇文章中找到一个很好的解释:[https://devo PS . com/blogs/service-virtual ization-window-advanced-devo PS/](https://devops.com/blogs/service-virtualization-window-advanced-devops/)但我会尝试总结一下。

为了避免混淆，简要解释一下 mocks 和 stubs 也是必要的。模拟通常是程序员编写的测试，用于检查特定代码的行为，如调用了哪些方法、调用的顺序以及是否创建了子流程。另一方面，存根检查对于任何给定的输入，是否输出了预期的结果。我经常把它们称为逻辑测试和 I/O 测试。

服务虚拟化与 mocks 或 stubs 无关。它模仿一个应用程序的整个行为，就好像它是一个部署在服务器上并连接到数据库、后端等的实际应用程序。为了实现这一点，数据将被记录从质量保证(和匿名)和整个行为的应用程序将被记录。通过安全层，调用数据库，更新一些值，甚至计时都可以被记录下来进行性能测试。绝对每一个操作都被存储，如果在记录的时候测试数据被很好的选择，所有的情况都可以被覆盖。

对于那些对游戏感兴趣的人来说，可以把它想象成一个模拟器。你不需要一个 SNES，创世纪或近地轨道来播放你最喜欢的老歌，相反，你需要的只是一个模拟器软件和 ROMS。模拟器的行为就像计算机上的游戏控制台，高保真地再现输入和输出，并将 CPU 指令翻译成计算机可以理解的不同指令。

如果你对游戏不感兴趣，如果你问我，我会觉得很遗憾，那就想想虚拟机吧。当你在一个封闭的环境中，在你最喜欢的 Windows(或 Mac OS)版本上安装一个 Fedora 时，你所做的也非常类似于服务虚拟化。您的客户操作系统将向您计算机的不同组件发送指令，虚拟机将捕捉这些指令，并将其翻译成您的主机操作系统可以理解的命令，然后发送到相关组件。这听起来很复杂，但它非常有效。

**它能为你做什么。**

因为它在本地服务器上运行，或者更好的是在容器上运行(如果您还没有这样做的话，请查看 Docker)，所以它实际上是始终在线的。停机是过去的事情，可以在人们不工作的时候安排和执行更新。你想覆盖多少项目取决于你和你的需求，但是一旦你开始了这个过程，为什么不走自动化的道路呢？如果您这样做了，这意味着您的程序员将有 100%的时间访问启动、运行并反映实际服务的环境。

你可能会问，拥有测试环境有什么意义。你可以给利益相关者的答案是:没有。通过服务虚拟化，您可以获得良好的环境弹性、实际数据测试和前所未有的响应时间。如果应用得好，我真的想强调这一点，服务虚拟化会让好的测试环境过时。

在这里，Chris Riley 提到的优势将再次不言自明:[https://devo PS . com/blogs/service-virtual ization-window-advanced-devo PS/](https://devops.com/blogs/service-virtualization-window-advanced-devops/)

**让 DevOps 更进一步。**

像所有伟大的事情一样，服务虚拟化也是有代价的。为了根据您的要求对其进行微调，需要付出巨大的努力。你必须决定向你的程序员提供哪些服务，最好是所有的服务，哪些数据集是功能应用程序的代表，当然，还要安装和配置所有的服务。你可以在这里发现的最大好处是，开发人员、测试人员和操作人员必须参与进来，并且紧密合作。这是你让不同的团队理解其他人做什么的机会。把他们召集在一起，让他们以一种他们不一定熟悉的方式一起工作:跨团队头脑风暴。

头脑风暴，如果做得好，可以成为一个非常强大的工具，为事先没有确定的问题提出创造性的解决方案。不过，这需要有人指导。头脑风暴并不意味着谈论与主题无关的事情。在房间里有一个中立的人，围绕几个预先确定的点集中讨论，并记录时间，这是一个好办法。Scrum 大师通常擅长于此，因为他们对项目及其问题有一个总体的了解，并能迅速确定任务的合适人选。

让开发人员用来自 QA 的最新数据更新他们自己的服务虚拟化服务器意味着更好地与测试人员交流。运营在这里也起着至关重要的作用，因为他们为不同的团队设置环境并提供操作方法。

先生，再来一杯吗？

一旦你的团队在一个几乎 24/7 可用的服务器上一起工作，并了解它是如何工作的，作为一个系统管理员，你所要做的就是放松一下，将你的大脑和时间集中在如何进一步改进流程，提高可交付成果的质量，以及加强与同事之间现有的联系上。哦，对了，如果你在度假，不要担心那些潜在的灾难性电话，只担心你和你自己。