# 可观察性如何改善游戏

> 原文:[https://devops.com/how-observability-can-improve-gaming/](https://devops.com/how-observability-can-improve-gaming/)

游戏行业的竞争变得越来越昂贵。为了吸引新玩家，数百万美元花费在 [用户获取](https://martechseries.com/sales-marketing/b2b-commerce/customer-acquisition/appsflyer-report-finds-gaming-apps-spent-14-5-billion-on-user-acquisition-in-2021-as-10-of-budgets-shifted-from-ios-to-android/) (UA)、开发和云基础设施上。随着空间变得越来越昂贵，收入和成本优化可能成为生死存亡的问题。

由于服务器中断、游戏响应滞后或普遍表现不佳而给企业带来的成本，可能相当于游戏公司市值的[](https://www.marketwatch.com/story/roblox-sheds-more-than-1-billion-in-market-cap-after-outage-that-could-have-cost-millions-11635792411)数十亿美元。现代游戏中[可观察性](https://devops.com/?s=observability)的价值在于确保在高成本的运营环境中不会错过创收机会。可观察性确保了在用户获取上的所有投资都得到保护，并且游戏用户体验(UX)得到最大化。用户体验不仅取决于游戏 UI 的表现，还取决于整个游戏环境的性能和可靠性。

现代游戏环境通常是高度分布式的——许多部分必须集合在一起。工程团队为游戏应用程序开发代码，游戏应用程序可以由许多微服务、容器、托管云服务、第三方 API 和无服务器功能组成。游戏设计师创建游戏关卡，美术团队制作视觉效果和动画，音频部门创建游戏音频。一旦这些移动的部分被打包在一起，游戏服务就必须部署在云基础设施上，游戏本身作为可执行文件在游戏机、移动设备和笔记本电脑上发布。

![gaming observability](../Images/e6721ecfeca77703687270af27216851.png)T2】

所有这些元素都会产生大量的可观察性数据，特别是如果一个游戏很受欢迎并且有数百万用户玩的话。因此，确保所有游戏元素都按预期工作意味着游戏公司必须实施有效的方法来收集和分析大量数据。这些数据来自游戏服务、游戏机和其他实时来源。例如，每天处理数百 TB 的日志数据并不少见。因此，对于大规模运营的游戏公司来说，改善游戏体验是一项相当具有挑战性的工作。这些公司的成功取决于他们如何有效地利用游戏环境产生的所有数据。

这就是可观察性的来源。可观察性提供了对游戏、其所有活动部分和用户体验的错误或可能错误的关键见解。强大的观察能力是必不可少的，包括处理大量数据(日志、指标、跟踪等。)实时管理来自可变用户负载的波动可观测性数据，并大规模运行并发实时查询。

那么，要获得出色的游戏用户体验，到底需要衡量什么呢？

## 衡量游戏用户体验

游戏公司面临持续的财务压力，需要提供吸引和留住新用户的新功能，以抵消不断增加的运营支出。从游戏公司的角度来看，吸引新用户是一种平衡行为。如果他们动作太慢，就会失去游戏玩家。如果他们动作太快，游戏用户体验会因为新引入的错误而恶化。游戏玩家可以在社交网络上畅所欲言，尤其是如果他们的目的是表达他们对游戏质量下降的不满。结果，公司被迫在功能引入率和用户满意度之间取得平衡。这就是为什么他们需要持续测量用户体验。

为了改善游戏用户体验，游戏组织必须建立可衡量的关键绩效指标(KPI ),以推动改进和整体质量。关键绩效指标包括但不限于:

*   用户视频质量(每秒帧数)
*   内存使用
*   崩溃报告计数
*   数据库性能测量
*   服务延迟
*   用户请求计数
*   特定于游戏的错误和警告也算在内
*   代码质量度量，例如自动化测试覆盖成功标准(CI/CD 管道的一部分)

### 监控服务延迟以获得高质量的游戏体验

当涉及到用户负载时，游戏应用程序通常是突发性的，尤其是在引入新游戏或新功能时。要监控的一个关键指标是服务延迟，以管理这些时间内波动的用户需求。

DevOps 团队和 sre 需要收集大规模日志，以分析服务、基础架构和单个主机利用率指标(如高 CPU 利用率)的性能。这些信息为工程师提供了与服务延迟相关的瓶颈和潜在恶化来源的线索。日志工具也需要能够处理这种波动的需求。这种对游戏应用状态的深入了解有助于工程师在游戏玩家面临可能影响其游戏体验的服务延迟增加之前解决问题。

### 分析特定游戏的可观察性数据

游戏开发人员可以创建自定义日志和指标，并将它们与来自游戏引擎的可观察性数据相结合。必须对两者进行分析，以确保高质量的用户体验。可用于分析的一些常见游戏数据参数是:

*   指示玩家何时加入和离开游戏的日志数据(与玩家的名字相关联)
*   在特定时间报告玩家的位置
*   与每个玩家相关联的重大游戏事件相关的日志(例如实现的目标或执行的动作)
*   与玩家之间的聊天消息、玩家位置、消息生成的时间和消息上下文相关的日志

收集的数据越多，就越有机会了解可能让玩家远离游戏的任何问题。可观察性数据管理应该与游戏开发同步发展。随着新特性的增加，代码应该使用 KPI 来保证新引入代码的长期质量。

### **数据库性能监控对于游戏用户体验至关重要**

为了存储对时间敏感的游戏数据，DevOps 团队必须使用快速数据库。数据库性能和从数据库中检索游戏属性的速度直接影响用户满意度。缓慢的数据库性能会对游戏用户体验产生负面影响。为了让 DevOps 团队避免任何服务问题，必须测量关键的数据库性能指标，如响应时间度量、内存不足错误日志等。

在竞争极其激烈的市场中，快速数据库可能非常昂贵，游戏公司总是在寻求成本优化以在业务中生存。对于 DevOps 团队来说，监控与数据库性能相关的用户体验，同时寻找优化 fast 数据库成本的方法是一件非常重要的事情。

### 建立管道和交付监控

对于一个大规模的视频游戏来说，新代码通常每天会被推送很多次。构建可能非常重要，并且部署在许多游戏控制台和终端设备上。连续的构建管道和交付监控对于频繁的大型软件部署是至关重要的。

随着每天通过网络向数以千计的游戏平台部署大型构建(其中每个平台接收大量数据)，对构建部署的监控应该是自动化的。日志数据中的错误应该会触发警报并推动重新部署。QA 自动化对于减少 QA 工作的负担并使构建交付更少的错误和更少的乏味是必要的。

## 更好的可观察性提高了游戏中的商业

洞察用户行为与监控可能影响用户体验的问题同样重要。可观察性工具可以提供对所有游戏用户整体参与度的关键洞察。高参与度会带来更多兴奋。更高的用户兴奋度可能会增加广告活动的成功率，并加速游戏内的购买。

## **管理游戏体验的观察工具**

当考虑有助于推动游戏行业用户体验持续改善的可观察性工具时，以下功能非常重要:

*   能够实时接收和分析 Pb 级或更高级别的日志数据，以避免游戏体验恶化。
*   零模式和从各种游戏平台、云服务器、游戏控制台和移动设备接受各种格式的可观测性数据的能力。因为游戏环境使用不同的第三方软件包，日志可能有多种格式。
*   能够根据收集的可观察性数据创建警报。警报可以通过监控属性(如遇到客户端错误的活动用户数量)来改善用户体验。
*   关键问题发生时处理背压的能力至关重要。警报风暴可能会堵塞数据管道，而可观测性工具可能会处于黑暗中几个小时，除非它被设计为应对背压。
*   能够从构建管道中收集数据，以监控每天通过网络部署到众多游戏平台的频繁且常见的大型软件构建。
*   从云环境中收集数据的能力，例如云基础架构监控。

可观察性是保护游戏收入机会和确保视频游戏成功的关键，只要你知道在用于从游戏环境中收集数据的可观察性工具中寻找什么。