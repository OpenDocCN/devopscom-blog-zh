# 问与答:与《威胁建模:为安全而设计》一书的作者讨论 DevOps 和威胁建模

> 原文：<https://devops.com/qa-speaking-devops-threat-modeling-author-threat-modeling-designing-security/>

如果您想了解如何在几乎任何环境中对系统和应用程序进行威胁建模，您可以向已经这样做的人求助。这就是为什么我们花了 30 分钟与亚当·肖斯塔克交谈。Adam 在微软负责安全开发生命周期威胁建模，他是世界上为数不多的威胁建模专家之一。我们认为，随着越来越多的组织转向 DevOps 和持续部署，这将是讨论这如何影响安全软件设计的大好时机。今年早些时候，亚当出版了他的书，*威胁建模:安全设计*，这里[有售](https://devops.com/wp-admin/post.php?post=1538&action=edit&message=10)。这本书就如何从一开始就使安全性成为系统、软件或服务的一个组成部分提供了实用的、可操作的建议。

这个建议适用于大大小小的系统和开发团队，并且随着应用程序部署时间的加快，这个建议尤其重要。

**DevOps.com:为什么要进行威胁建模？它为业务以及应用程序开发和运营团队带来了什么好处？**

**Adam Shostack:** 对于企业和高管来说，他们不想在问题出现时处理单个问题，他们希望将问题作为一个类别来解决。他们希望管理一类能够以一致、可重复或可预测的方式完成的事情。在管理应用程序风险时，威胁建模为您提供了一个机会来回答您是否正在处理所有应用程序中的某些漏洞的问题，而不是一次性解决它们。这是一种建模和抽象掉许多细节，以更具战略性的方式看待事物的方式。

威胁建模提供的另一个价值是当您开发事物时的可预测性程度，而不是快速前进并构建事物，然后在最后运行笔测试，然后才知道您有严重的安全问题。在这种情况下，一旦您修复了这些问题，您就会运行另一个 pen 测试，并了解更多或新的安全问题，您会在很长一段时间内陷入这种非常低效的循环。

因此，威胁建模有助于您在开始构建之前考虑安全性。这样你就可以把安全感融入到你正在做的事情中。我的书有助于使这两个价值主张变得具体和可接近。你可以从书中吸取这些经验教训，把它们传授给人们，然后说去做这些事情，你真的会通过你的设计和交付获得更高程度的控制和可预测性。

此外，当您进行威胁建模时，您会对可能出错的地方有所了解。许多威胁建模实践可能需要大量的流程。这就是为什么有很多非常重过程的文档的原因。但是实际上威胁建模很好地集成在软件开发的测试驱动设计方法中。为什么？因为威胁建模告诉您需要将安全测试集中在哪里。如果你在寻找 bug 类，不要看随机的东西或者相对随机的东西，你不会得到几乎一样多的测试覆盖率。

**DevOps.com:因此，他们可以在流程中实施安全开发，这就是安全倡导者常说的安全与应用程序开发和运营关系的最佳状态，而不是成为开发流程结束时的障碍。**

Adam Shostack: 整个障碍迷因来自于你晚做安全活动的想法。很多人通过黑客进入安全领域。你总是听到黑客的比喻。它们是迷因，就像“如果你不知道如何打破它，你就无法保护它。”现在，知道如何打破东西是伟大的。这是个有趣的技能。这是一项重要的技能。但是，当您询问如何使其可操作时，您会注意到安全人员喜欢说的一句话是，您从未做过威胁建模。现在，如果你去找开发副总裁或运营副总裁或开发副总裁，并说，“我希望你做这件事，它永远不会完成，但它会适合我们的四周冲刺……”你会得到一个大大的“啊？”从那以后，谈话不会有任何进展。

为了工作，它必须是可完成的。它必须是有重点的，它必须是带有清单的指令性的。它必须有退出标准，它必须有能够回答“我们做得好吗？”

DevOps.com:我觉得这种想法非常符合 DevOps 的持续改进目标。

亚当·肖斯塔克:绝对是。整整 20 年来，我一直在以各种方式进行威胁建模。当我加入微软时，我遇到了开发和运营部门的一些人，他们对安全充满热情，知道他们必须要做安全工作，而且他们想把事情做好。但他们也想关注可靠性、可访问性、国际化和性能。他们想关注所有这些其他的事情，每一件都是你正在开发的系统的重要属性。我必须学会简化威胁建模。我必须学会关注最高价值的可交付成果，并确保这些可交付成果是可访问的和有能力的。即使你没有培训安全专家，也必须如此，因为人们不明白他们的决定有安全隐患。他们会在没有安保人员在场的情况下做出决定。如果你让安全目标变得可及和可理解，他们更可能理解他们正在做的事情有安全含义，他们更可能做得好。

让我给你举个例子。系统设计中最容易出错的地方之一是人们没有划定他们的信任边界。他们不知道不同的原则会在哪里相互作用。并且具有不同授权级别的应用程序帐户交互是出现安全问题的自然场所。

所以你能做的就是在白板上画出这些信任的界限。它不一定是一个奇特的图表。在白板上乱写，并说，这是在管理中发生的事情。这是数据库中发生事情的地方。这是作为 web 用户的事情发生的地方，这是 web 会话被认证的地方，你在它们之间设置边界。开发人员明白他们编写的这些东西是在不同的权限级别上运行的。

然后他们说，好吧，这段代码运行在 web 用户上下文中，这段代码运行在数据库上下文中。这很好，因为一旦你这样做了，你就可以看到你的威胁将要出现的地方，并寻找可以利用的地方。威胁建模中有许多元素可以整合，但基本原理实际上很容易教，很容易学，也很容易应用。

**DevOps.com:我们首先从高层次讨论了威胁建模对组织中不同群体的意义。更具体地说，威胁建模对开发人员的回报是什么？是更有弹性的应用程序，更少的事后必须处理的问题，以及更好的结果？**

Adam Shostack: 这些都是很棒的价值。对开发人员来说，最大的“好处”是威胁建模获取了他们想要处理的所有这些关于安全的细节，并提供了一个模型，一种抽象的方法来构建它们。因此，不要总是担心“天哪，我可能有另一个安全问题”，你可以感觉到你为解决风险做了多少，还有多少风险。你知道你想在哪里优先处理这项工作。

我认为一个很大的误解是，人们认为只有专家才能进行威胁建模。我对这本书的一个愿望是展示威胁建模应该像版本控制一样。每个开发人员、每个运营人员都应该了解一点威胁建模。而且不一定是安全专家。也许是管理你的源码树的人。或者，如果您在小型组织中工作，威胁建模将是某人的副业，这也没关系。重要的是让它成为你工作的一部分。