# DevOps 不会止步于数据库

> 原文:[https://devops.com/devops-doesnt-stop-database/](https://devops.com/devops-doesnt-stop-database/)

DevOps 已经成为主流，诸如持续交付的实践现在正被广泛采用。但是数据库呢？应用程序通常有一个需要同时开发和维护的后端数据库。

乍一看，似乎没有问题。最近来自 Redgate 的"[State of Database devo PS Survey](https://www.red-gate.com/solutions/database-devops/report)"显示，75%的公司在他们的团队中有跨应用程序和数据库工作的开发人员。

然而，稍微深入调查一下，裂缝就开始出现了。调查还显示，虽然 81%的应用程序开发人员使用版本控制，但对于数据库，这一比例降至 58%。持续集成和自动化部署也是如此，应用程序分别占 39%和 33%，数据库分别占 20%和 21%。

这是怎么回事？如果开发人员越来越多地对数据库和应用程序负责，为什么 DevOps 的原则不能应用于这两个领域呢？通过这种方式，数据库不再是管道末端的问题，而是成为管道的一部分。

尤其是当您考虑到传统孤岛式数据库开发的最大缺点是引入变更时经常会经历停机时间。更不用说减缓发布速度和阻止公司快速响应不断变化的业务需求了。

典型的 DevOps 工作流如下所示:

![](../Images/6a8a336a3fb98a3ce67df9c2e582d1c8.png)

代码是受版本控制的，因此不同的开发人员可以同时在多个分支上工作。当它被检入版本控制系统(VCS)时，通常在每天结束时，它触发一个持续的集成过程，构建并验证变更。变更完成后，发布管理工具会推动它们通过测试、QA 和试运行环境，在将变更部署到生产环境之前会进行最终审查。

不是每个公司都这样做，但是许多公司做了不同的部分，并计划将 DevOps 实践扩展到其他领域。例如，他们可能从版本控制开始，让团队习惯于签入变更，然后转移到持续集成。

它也能工作。Puppet 的“ [2016 年开发运维状况报告](https://puppet.com/resources/whitepaper/2016-state-of-devops-report)”发现，实施开发运维的组织部署频率提高了 200 倍，从故障中恢复的速度提高了 24 倍，变更失败率降低了 3 倍。DevOps 已经从开发者主导的方法转变为企业积极鼓励的方法。

事实是，数据库开发可以作为应用程序开发的一部分。让我们再来看看 DevOps 工作流:

![](../Images/895e89fdcc1eb4c2e275398de9976d06.png)

相同的工作流程，但是这次包括了数据库开发。请注意，这里没有多余的框或箭头，也没有带警告的星号，唯一的区别是数据库开发已经添加到应用程序开发中，并且 DBA 已经介入该框架。

但是，当数据库开发需要新的工具、独立的流程和不同的思维模式时，如何将数据库开发添加到 DevOps 组合中呢？答案是考虑集成而不是分离，扩展当前的基础架构而不是替换它。

例如，应用程序开发团队将使用像 Team Foundation Server (TFS)或 Git 这样的 VCS，像 TeamCity 或 Jenkins 这样的持续集成系统，以及像 Octopus Deploy 这样的部署自动化工具。他们也将有一个应用程序开发的首选 IDE，可能是 Visual Studio，如果他们进行数据库开发，他们也可以在 SQL Server Management Studio 中工作。

让他们使用不熟悉的工具和开发环境，或者强制执行的策略和流程来增加他们的工作量，DevOps 的光芒开始失去光泽。曾经让他们表现更好的东西，现在却把他们束缚在一种不受欢迎的工作方式上。

另一方面，要求他们使用相同的工具和过程，但是将他们的能力扩展到数据库开发，这是一个不同的故事。例如，如果他们已经使用 TFS 对应用程序代码进行了版本控制，那么就会有数据库版本控制工具插入其中，从而使数据库开发成为该过程的一个附加部分，而不是一个额外的过程。

持续集成、发布管理和部署也是如此。在 DevOps 工作流的每一步，数据库开发都可以加入应用程序开发，这样它就成了一个天然的合作伙伴，而不是一个不受欢迎的客人。

但是这种方法有多现实呢？当开发团队已经面临着引入 DevOps 的挑战时，认为数据库甚至会被认为是画面的一部分是白日梦吗？

根据微软的说法，没有。当 Visual Studio 2017 在 3 月份推出时，企业版在安装程序中包括了 Redgate 数据工具，以便用户在构建、部署和维护他们的 SQL Server 数据库时更容易实施 DevOps 实践。

正如微软云应用开发和数据产品营销高级总监 Shawn Nandi 当时所说:“我们认为这是帮助公司将 DevOps 实践扩展到应用程序所有部分的重要一步。”

因此，如果您正在考虑采用 DevOps，请记住数据库也可以是其中的一部分。

## **关于作者/马特·希尔伯特**

Matt Hilbert 是 Redgate Software 的科技作家，拥有 20 年的工作经验，曾为许多世界上最大的科技公司工作过，也为许多最小的公司工作过。他对新兴技术有着特殊的魅力，并一直致力于向更广泛的受众反编译、解开和解释 techspeak，并激发人们对技术提供的无限可能性的兴趣。