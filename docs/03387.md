# 借助云实现转型:如果不是现在，那是什么时候？

> 原文：<https://devops.com/transforming-with-the-cloud-if-not-now-when/>

对于大多数组织来说，是否迁移到云的问题已经不再重要。将工作负载迁移到云已经成为绝大多数公司(无论其规模大小)不可避免的要求，如果您的组织还没有这样做，那么这只是您何时以及如何考虑这样做的问题。

与扩展计算资源相关的敏捷性、冗余性和弹性提出了尽快迁移到云的迫切需求，更不用说其他因素了，例如与管理强大的内部基础架构相关的总体资本支出的降低。财务部门通常在接受 IT 运营中的重大变化方面有点落后，因为他们有严格的法规遵从性要求，而且由于几次合并和收购，他们的应用程序组合非常复杂。这些限制非常普遍，尤其是对保险公司而言，但令人惊讶的是，有几家主要的保险公司出于效率、灵活性和成本的原因，已经进行了大量投资来实现其传统应用程序的现代化并将其迁移到云。

为了有效地支持不断努力提高竞争力和缩短上市时间的业务，大多数应用程序开发工作都是以敏捷的方式进行规划的，在几周内就可以产生可用的交付成果。当开发团队变得敏捷时，所有其他相关的服务以类似的方式运行是很重要的。没有基础设施供应和其他支持服务的灵活性，开发团队根本不可能成功地以高速度生产可交付产品。大多数应用程序开发团队经常听到的抱怨是关于基础设施团队在供应服务器上的延迟。在许多公司，甚至在今天，配置虚拟机(VM)都需要三周以上的时间。这是由各种因素造成的，如工作积压、审批流程的复杂性、合规性要求、缺乏自动化以及其他一些特定于组织的因素。微软 Azure 和 AWS 等云领导者提供的 IaaS 和 PaaS 产品在很大程度上解决了这些问题。即使公司还没有准备好将他们现有的应用程序迁移到云中，他们也应该认真考虑来自成熟的云提供商的 IaaS 和 PaaS，用于正在开发的新应用程序。

有几个因素可能会影响 IT 领导者关于云战略的决策，这里讨论了一些不容忽视的领域。本文的目的是提供一个总体概述，特别是对于那些一直在犹豫是否将工作负载迁移到云的公司。应该注意的是，在这次讨论中，我们仅仅触及了冰山一角。

## **应用堆栈和基础设施的复杂性**

组织经常会被当前基础架构设置的复杂性和问题淹没，并在应对日常运营挑战时陷入困境。由于这些持续的问题，人们可能会对迁移到云所涉及的实际工作产生错误的想法，甚至怀疑这是否是一个可实现的目标状态。规划出支持业务应用程序的当前基础架构，并清楚地了解其中的复杂性、依赖性和许可非常重要。需要考虑应用服务器、数据库服务器、存储阵列、企业消息总线、文档管理系统和其他几个关键组件，它们共同为您的关键业务应用提供动力。这不仅有助于决定适合云的应用程序，还有助于选择合适的云提供商来满足您的需求。您可以注意到 IaaS 和 PaaS 的融合，因为很难区分它们。大多数领先的提供商将这些服务打包提供。

最好根据应用程序的复杂程度对其进行分类，并相应地制定云策略。只需要一个 web 服务器、应用服务器和数据库服务器的独立应用程序是您第一阶段迁移工作的理想选择。您可以确保使用正确的云架构，您的独立应用程序将获得更好的可用性、负载平衡和性能，并减少维护开销。

亚马逊弹性计算云(EC2)提供 99.99%的可用性，其自动扩展功能允许根据需求自动扩展或缩减设备群，以最大限度地提高性能和降低成本。类似地，Microsoft Azure 提供了 VM 规模集，可以为您的应用程序配置这些规模集以自动扩展。如果需求是为云开发全新的应用程序，那么选择是无穷无尽的。举个例子。基于. net 的 web 应用程序托管在 Azure 上，可以开发成 Docker 容器来运行。

自诞生以来，容器和容器节点集群的管理已经走过了漫长的道路。Docker Swarm 和 Kubernetes 极大地简化了容器化应用的管理、负载平衡和扩展。容器不仅仅是为了你的新应用；它们也是将您的遗留/传统应用程序现代化并将其迁移到云的绝佳解决方案。

## **存储**

身份和访问控制在过去是普遍的挑战，但云提供商通过提供丰富的功能来支持组织的信息安全和合规性要求，大大简化了身份管理服务，如应用程序身份验证、用户管理和单点登录。微软 Azure 提供 Azure Active Directory，并提供一些不同的协议，如 WS-Federation、SAML-P 和 OpenID Connect 来验证用户。它还支持多因素身份验证。对于使用 Visual Studio 2017 开发的全新应用程序，使用上述协议在 Azure AD 上集成用于身份验证和授权工作流的应用程序极其简单。

在迁移到云的决策过程中，数据库扮演着至关重要的角色。高级 IT 经理通常高度关注数据的安全性，而技术人员则担心如何确保存储、性能、可恢复性和可用性。应用程序开发人员和数据库管理员最终会花费大量时间来修改代码或其他应用程序配置参数，即使数据库只是在同一个数据中心内从一台服务器迁移到另一台服务器。云解决方案解决了这些问题。例如，Microsoft Azure 通过提供本地虚拟网络(VNET)支持，允许您将本地 SQL 数据库迁移到 Azure SQL 数据库管理的实例。您不必因为迁移而改变您的应用程序。Azure 提供的托管实例非常有前途，对于将大量内部 SQL Server 数据库迁移到 Azure 来说，这无疑是一个很好的解决方案。类似地，AWS 为关系(RDS)和 NoSQL (DynamoDB)数据库提供托管数据库服务。亚马逊 EC2 服务与亚马逊 RDS 和亚马逊 VPC 集成，为计算、查询处理和云存储提供完整、安全的解决方案，包括但不限于广泛的高性能 web 应用程序、数据库服务器和批处理需求。

## **灾难恢复**

云提供商在全球多个地区提供数据中心。任何组织都需要在财务和运营方面进行大量投资，以匹配主要云提供商提供的冗余和可恢复性。即使是拥有高度虚拟化基础架构设置的组织，其一些任务关键型应用程序也拥有物理基础架构。有这样一个设置的理由是有争议的，但是为这样的基础设施设置一个灾难恢复环境的相关成本将是巨大的。为了确保可比的性能和容量，灾难恢复环境通常是生产环境的副本，而生产环境在大多数时间都没有得到充分利用，消耗了大量投资。

规划建立灾难恢复站点需要考虑几个因素，例如，确保计算能力和可扩展性(服务器和存储)、网络(带宽、负载平衡器、交换机、路由器)、身份管理(目录服务、身份验证、授权)、托管灾难恢复站点的设施(位置、占地面积、电力、空调)以及操作方面(人员、监控、警报、故障修复、热手支持)。云提供商让您可以选择灾难恢复站点在世界任何地方的位置。根据您与云提供商签订的合同，您可以在云灾难恢复站点上快速部署计算资源，或者利用必要的自动化流程切换到云灾难恢复站点上已经运行的应用环境副本。

AWS 提供了许多功能来解决设置灾难恢复站点时需要考虑的上述各个方面。例如，Amazon 机器映像(AMIs)允许您在操作系统和应用程序堆栈中预先配置映像。还可以配置您自己的 ami，以允许恢复过程在发生灾难时自动启动这些映像，从而节省大量时间。

微软还在 Azure 上提供高度可靠的灾难恢复替代方案。您可以使用 Azure 作为灾难恢复的辅助站点，或者通过选择不同的 Azure 区域作为主站点和辅助站点来完全消除对数据中心的需求。Azure 提供主动-被动和主动-主动拓扑。在主动-被动拓扑中，所有用户流量都流向主区域，同时让辅助区域做好随时接管的准备，因为数据库在两个区域中运行，并且在两个区域之间实现了同步机制。主动-主动拓扑确保云服务和数据库在主区域和辅助区域上运行，并且用户流量流向这两个区域。如果主节点出现故障，只需在主节点区域禁用 DNS，所有用户流量都将被定向到辅助节点。Azure 的自动扩展特性将允许根据需要扩展辅助区域中的计算资源。

## **债务** **到期**

如果不强调坚实的 DevOps 实践对于补充云战略的重要性，任何关于迁移到云的讨论都是不完整的。从技术角度来看，采用 Linux 环境的公司过去比那些采用微软路线的公司稍有优势，特别是在实现支持开发运维及云计划的开源解决方案和技术方面。这一点现在很有争议，因为微软不仅为几个主要的开源工具敞开了大门，还允许几个领先的开源产品(如 Docker、Jenkins 和 Puppet)与 ALM 工具(如微软 TFS 2017)更好地集成。

根据组织在云战略方面的目标，需要从 DevOps 的角度分析成熟度级别。可以从基础设施和应用程序开发的角度来看待 DevOps。如果您的目标是将云服务仅用于 IaaS，那么开发强大的、以基础设施为中心的 DevOps 功能、实践、流程、工具和自动化将会非常有价值。通过适当的脚本和与 IT 服务管理(ITSM)工具(如 Service Now)的集成，整个流程—从请求基础架构到为其提供所有补丁程序、强化等。—可以通过利用工具(如 Chef)或通过 PowerShell 编写脚本来实现完全自动化。云提供商已经提供的计量计费和配额等功能可以利用并与组织单位的预算、审批和其他流程集成，以建立一个管理完善、完全自动化的基础架构配置流程。

与考虑内部开发的组织相比，考虑利用云进行应用程序开发的组织无疑具有优势。例如，微软以极具竞争力的价格提供 IaaS，并在 Azure 上提供 Visual Studio Team Services (VSTS)，即 Team Foundation Services (TFS)的云版本。Azure 提供的 PaaS 服务也非常广泛，并且集成了各种开源工具。有了这种组合，开发人员就有了一个完整的端到端解决方案来满足他们的所有需求，而不必浪费时间等待环境的建立。DevOps 在这里可以发挥重要作用。通过完全集成的持续集成(CI)框架，开发人员可以将代码提交到云上的托管 Git 存储库，自动化持续集成可以通过 VSTS 启动，它处理构建、自动化测试、代码质量控制、构建容器映像、环境所需基础设施的自动启动，以及按照完全集成的变更控制流程和质量关在环境上部署代码或容器。开发人员可以将全部精力放在开发代码上，并享受在瞬态环境中动态部署代码的自由，以便在代码进入其他测试阶段之前对其进行测试。在竞争激烈的业务环境中，这提供了在需要时在一天内执行多个生产部署的能力。

开发运维成熟度高的组织最有可能充分利用云的潜力。类似地，那些努力达到这个成熟度级别的人可能会通过迁移到云更快地达到这个级别。开发专业知识、构建流程框架和实施正确的 DevOps 工具将使巩固您的云战略变得更加容易。

## **合规&安全**

一些组织已经放弃了向云的迁移，主要是因为行业规定了严格的合规性和安全性要求。仍在犹豫是否接受云的公司是那些对他们在云上的数据的安全性持怀疑态度的公司。无论云提供商或您可能与他们签订的严格的 SLA 和合同条款如何，您仍然需要对您拥有的数据负责。因此，了解更多关于云提供商提供的安全设置和功能以保护您在云上的宝贵数据是非常重要的。

作为贵组织数据的所有者，您必须知道您的数据将物理驻留在何处，静态和传输中的数据将应用何种加密，谁将物理访问您的数据，在多租户环境中您的数据将如何与其他租户的数据隔离，存在哪些恢复流程，提供商获得了哪些法规遵从性认证，以及许多其他问题的答案。安全专家强烈建议根据风险级别对您的数据进行分类，并制定相应的策略。您可以决定在本地托管最重要的数据，而将云用于其他类型的数据。

微软提供了非常全面的清单和报告来帮助您评估您的组织迁移到云的风险。在数据安全性和合规性方面，AWS 和微软都通过了几乎所有主要监管机构的认证。但是，如前所述，虽然您的提供商可以负责以最安全的方式托管您的数据，但作为数据的所有者，您仍然要对数据的完整性和安全性负责。因此，在您决定需要迁移到云的工作负载之前，这是一个需要全面分析的领域。

## **长话短说……**

虽然节省资本支出是必然的，但这并不是大多数组织迁移到云的主要动机。正如 [Gartner 报告](https://www.gartner.com/doc/3846063?srcId=1-7251599992&cm_sp=swg-_-gi-_-dynamic)“2018 年云计算入门”中所述，云在这十年中扮演的角色远远超出了简单地设定预期和为更好的经济模式提供平台。人工智能(AI)、物联网(IoT)和其他一些技术创新和破坏等数字计划都是由云提供的数字平台推动的。另一方面，敏捷性、可伸缩性和灵活性无疑是鼓励公司迁移到云的一些关键驱动因素。此外，通过将开发工作负载转移到云中，可以更好地缩短上市时间。IaaS、PaaS 和可靠的 DevOps 实践相结合来自动部署基础架构和应用程序堆栈，使云远远优于在内部运行应用程序开发。没有在 DevOps 上投入太多的公司应该认真考虑这样做，否则就太晚了。

容器，协调、负载平衡和扩展微服务的工具和实践，为如何进一步利用云服务添加了一个完全不同的维度。它们有助于确保无缝、无缺陷、可重复的部署，并且通过必要的自动化来启动瞬态环境，很难与在内部设置的全自动化 IaaS 上使用容器的优势相媲美。

与内部托管相比，云提供商提供的自动扩展功能使云成为更好的替代方案。云提供的灵活性有助于根据需要扩展计算能力、存储、负载平衡和其他一些基础设施服务，而不必进行大量的硬件投资。

云提供商提供可靠的灾难恢复选项和支持。在 AWS 或 Azure 上实现主动-被动或主动-主动主站点和辅助站点要比在内部实现简单得多。

合规性和安全性也是推动云战略的重要因素。对于决策者来说，重要的是评估风险因素，然后决定哪些类型的数据可以驻留在云上，而不是留在内部。

网络计算在他们的文章“IaaS 云采用趋势”中提供了关于公共、私有和混合 IaaS 采用的有趣统计数据这篇文章还提到了 Interop ITX 和 InformationWeek 关于组织如何将工作负载迁移和管理到云的研究。根据他们的调查结果，有几家公司预计将在下一年通过云交付超过一半(67%)的 IT 和业务服务。在他们调查的所有公司中，31%的公司计划将超过 50%的预算用于云计划。

有了清晰的战略、预算、应用程序分类、优先顺序和具备适当专业知识的员工，您可以确信您将工作负载迁移到云的旅程将是愉快的。

— [斯里达尔·阿斯瓦特纳·拉亚南](https://devops.com/author/sridhar-asvathanarayanan/)