# 了解 Mesos 及其在 DevOps 中的位置

> 原文：<https://devops.com/what-is-mesos/>

[![Finish carpenters](img/04e760294f991cee1265a56e29ddd1a5.png)](http://www.networx.com/article/finish-carpentry) 盖房子时，工作是成队进行的。这项工作由工头、主管或总承包商管理，但让我们把自己限制在完成工作的团队和工头。工头是老式的，但总承包商有很长的时间一遍又一遍地打字。假设有一个足够大的房子，允许几个团队放入橱柜和装饰物、吊门等。一个两人小组告诉工头“我们已经完成了主卧室”，他看着他的清单说:“好，去主浴室安装装饰。”两人出发去做这件事。大约进行到一半时，其中一名安装人员不幸遭遇射钉枪事故，将手钉在地板上。两个人都告诉领班他们必须离开——一个去医院，另一个开车。

当另一个装修团队空闲时，工头说“主浴室的装饰还没完成，去帮我处理一下。”并不断更新他的清单。

最终，整个房子都完成了收尾工作，工头只需派几个小组去做不同部分的工作，直到所有部分都完成。

本质上，那是 Mesos。

简单地说，在这个例子中，工头就是 [Mesos](https://mesos.apache.org) 。

Mesos 是一个调度器，它知道必须完成哪些任务，以及有哪些资源可以完成这些任务。完成工作的细节不是 Mesos 关心的，但是如果工作没有完成，Mesos 将发送其他资源以便完成工作。

当然，这里涉及到更多的东西，但是这个类比非常恰当。

Mesos 将一组机器转变为一个集群，只需在每台机器上放置代理，这些代理知道如何(a)报告哪些资源可供 Mesos 分配，以及(b)为给定的环境执行应用程序(在 Mesos 中称为框架)。因此，一旦 Mesos 分布在您的服务器上，它就可以有效地将这些服务器视为一个主服务器，并将自己视为调度算法。

从来都不简单。因为它不是 **那么简单。**

不过，我有一句格言:除非现实世界把简单的事情复杂化，否则没有一个好主意是完整的。

为了使 Mesos 容错，可以有多个主设备，并且可以使用 [zookeeper](https://zookeeper.apache.org) 来确保如果当前主设备失败，有一个替代设备准备好接手并保持事情移动(处理)。

为了让 Mesos 专注于调度，它没有内置复杂的资源调度。相反，它依赖于框架请求资源，然后提供符合需求的资源。所以我们假设 [Hadoop](https://hadoop.apache.org) 要求五个 CPU。梅索斯可能会说“这里有三个”，然后几分钟后说“再来两个！”Hadoop 可以告诉这些服务器上的执行器启动任务。框架还可以告诉 Mesos 他们*不想要什么*(过滤)，并拒绝 Mesos 提供的计算资源(在这种情况下，这些资源会提供给任何其他框架)。

当然，那些既知道如何调度作业又知道如何将作业发送给代理的框架是关键。[马拉松](https://mesosphere.github.io/marathon/)可以处理大多数长时间运行的任务，Hadoop 有自己的框架。因此，在很大程度上，“分包商”已经准备好完成工作。

那么好处是什么呢？Mesos 不太在乎你把它安装在哪里。将其放在硬件上，放在虚拟机上，放在 VPC 中。使用马拉松，您可以在容器中部署您的应用程序，这意味着您真的不必关心底层基础设施是什么。

有什么坏处？嗯，有很多工具可以用来学习使生产环境变得稳定和可维护，而且还有其他的替代方法，我们将在接下来的几周里关注这些方法。老实说，大多数“其他选择”都是基于 Mesos 的扩展(通常是马拉松式的)，因此这是一个很好的起点，可以让您了解如何考虑 Mesos 是否适合您的环境。如果您想开始运行应用程序并将硬件/虚拟机视为一个可用资源池，Mesos 是一个很好的起点，尽管我们将在未来几周讨论的包更有趣，主要是因为它们采用了 Mesos 的简单调度程序概念，并在此基础上进行扩展，以提供更完整的解决方案。

如果你想了解更多关于 Mesos 的知识，阿帕奇基金会、T2、数字海洋和 T4 都有教程。我用过 Mesosphere one，它非常好，尽管在 OSX 上它失败了，但在 Windows 10 上它工作得非常好。

唐·麦克维蒂