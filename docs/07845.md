# 重新架构应用时考虑遥测技术

> 原文：<https://devops.com/consider-telemetry-when-rearchitecting-applications/>

F5 ANZ 开发运维及现代应用解决方案架构师 Scott van Kalken 表示:“澳大利亚和新西兰已经经历了向公共云的巨大转变，而且“……当我与客户交谈时，我发现他们对重新架构应用的兴趣非常浓厚，而不是直接搬入公共云。

向公共云的迁移引发了人们对遥测技术的极大兴趣。当你从一个单一的应用程序到一个分布式应用程序时，可能会涉及到 100 甚至 1000 个 API。没有遥测技术，你就不知道那些 API 是怎么回事。但是遥测需要一致。

F5 的 [2021 年应用战略状态](https://www.f5.com/state-of-application-strategy-report)报告发现，75%的受访者认为遥测技术，尤其是关于应用安全和交付的遥测技术，对于实现业务成果非常重要，95%的受访者表示他们缺乏对现有监控和分析解决方案的洞察力。

范·卡尔肯举了一个例子，他与一位从业者进行了一次对话。当他所管理的应用程序所使用的合作伙伴 API 出现问题时，这个从业者会被呵斥。因此，即使这些 API 在技术上不是他的职责，他也需要了解它们的状态。只有将内部遥测与来自这些合作伙伴 API 的遥测相结合，他才能理解应用生态系统中正在发生的事情。

这不仅仅是一个 API 是否可用的问题。当它响应缓慢时，可能会出现问题。“‘这正常吗？“这在一天的这个时候正常吗，”范·卡尔肯说:“我必须有某种遥测数据可供我做决定。

## 利用遥测技术实现安全自动化

他特别感兴趣的一个方面是基于安全遥测数据自动执行或采取行动的能力。

一个简单的例子是揭示某种系统滥用的安全事件。自动化可以添加防火墙规则来阻止相关的流量。

随着组织越来越多地采用事件驱动的架构，事件和响应发生在应用程序、网络、基础架构和其他级别。“一旦您实现了这些事件驱动型体系结构的自动化和安全性，就开启了一个无限可能的世界。”

这不仅仅是自动化安全。想象一下，一个 API 网关为客户提供各种 API。遥测可能会显示两个 API 开始变慢；在这种情况下，“我可能会启动一个工作流，只部署更多这样我们就可以处理负载。但是如果你没有遥测技术，你就不能这么做，”他说。

在实践中，这涉及遥测、分析和自动化。

“当我们向(客户)展示如何以一种真正简单的方式利用分析时，他们的眼睛亮了起来，”范·卡尔肯说。

## 多云迁移

更进一步的考虑是，重新架构应用不仅仅是将整体分割成更小的部分，然后将它们作为微服务重新部署。他们还希望在多个公共云中运行应用程序以降低风险，并在离用户更近的边缘部署应用程序。

《2021 年应用状态战略》报告称，超过四分之三的受访者已经使用或计划使用 edge 来获取与应用部署、性能和数据可用性相关的优势。

“这真的很重要，因为作为一名应用程序开发人员，我想部署一次我的应用程序，我想说，‘我想把它分发到全球各地’”，van Kalken 说。

但是，如果应用部署在五个位置，那么从遥测的角度来看，它是五个应用，而不是一个。

“我有五套遥测系统，因为我有效地部署了五种不同的应用程序。同样是 app，但是在五个地点，每个地点的消费者都不一样；它们相互作用的方式不同，我得到的遥测数据也将不同，”他说。“所以，我需要真正吸收所有的遥测数据，并以某种方式让它变得有意义，”他解释道。

## 遥测技术使视觉更加清晰

“分布式云架构非常适合这些现代应用。他说:“我们最近收购了一家名为 Volterra 的公司，这是他们涉足的领域之一——分布式应用，具体来说，就是抽象多云和多集群 Kubernetes 应用部署。范·卡尔肯说，这一重点领域在未来将至关重要。

他预测，随着组织转向 5G，应用程序将变得越来越分散。如果发生这种情况，作为分布式应用部署的一部分，从应用的所有组件接收遥测数据非常重要，这样就可以对其进行分析并用于支持智能决策。