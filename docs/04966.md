# Broadridge 的 Annie Michelia 讲述了为什么 DevOps 和云携手并进

> 原文:[https://devo PS . com/broad ridges-Annie-Michelia-on-why-devo PS-and-the-cloud-go-hand-in-hand/](https://devops.com/broadridges-annie-michelia-on-why-devops-and-the-cloud-go-hand-in-hand/)

布莱恩·道森:你好。欢迎来到 DevOps 电台，现场直播 DevOps World | Jenkins World 2019。我很荣幸有机会采访安妮·含笑。她是 Broadridge 的数据库架构师，而且不仅仅是数据库架构师。根据我们的谈话和我对你简历的理解，你实际上拥有广泛的技能，而且看起来你在 Broadridge 做了很多工作。你能先告诉我们你是做什么的，以及你是如何到达那里的吗？

[//html5-player.libsyn.com/embed/episode/id/12598325/height/90/theme/custom/thumbnail/yes/direction/backward/render-playlist/no/custom-color/006096/](//html5-player.libsyn.com/embed/episode/id/12598325/height/90/theme/custom/thumbnail/yes/direction/backward/render-playlist/no/custom-color/006096/)

安妮·米歇尔:是的。首先，我是一名 Oracle 数据库管理员。因此，在我职业生涯的大部分时间里，我一直是一名数据库管理员。现在在 Broadridge，我是一名架构师，在某种意义上，我从事本地数据库技术和 AWS 云技术的工作。因此，我在电梯和班次的云计划项目中发挥了重要作用。所以那时候 DevOps 就开始了。

布莱恩:好的。当你在那里的时候，你能告诉我一些关于布罗德里奇的事情吗？你提到德沃普斯被踢了。我很想知道你们在布罗德里奇的 DevOps 之旅中处于什么位置，以及你们为什么要追求它？

安妮:这是个好问题。因此，我们在 Broadridge 已经使用 DevOps 实践五年多了，成功地无缝完成了所有应用程序部署和基础架构部署。所以数据库总是被放在后座，因为它的复杂性，而不仅仅是复杂性。此外，我们处理的是任务关键型业务数据，这是持久数据，我们不能接触和摆弄。

布莱恩:你需要维护的记录系统不能被破坏，对吗？

安妮:没错。我们是一家金融解决方案公司。因此，对于金融服务来说，关键程度起着非常重要的作用。所以这就是它被搁置的原因。因此，当我们启动云计划时，管理层的决定是，他们说一切都必须通过自动化进行，所以没有手动部署，没有手动安装。因此，我们开始这项计划只是为了云，也是为了数据库。

布莱恩:好的。

Annie:我们认为，无论我们过去对数据库做了什么，都需要实现自动化，不仅仅是基础架构，还包括持续的部署。

布莱恩:它的交付和部署部分。

安妮:没错。因此，所有的模式更改、代码更改和数据更改都必须在无接触的环境中进行。于是我们就开始练习数据库的 DevOps。

布莱恩:所以 DevOps 和 cloud 携手合作开发 Broadridge。

安妮:没错，是的。

布莱恩:好的。是什么促使我们决定采用云技术？你知道吗？是成本还是速度？

安妮:这也是原因之一，还有技术。所以我们进化了。我们不想使用旧技术。另一个原因可能是成本，因为传统企业 DMS 的许可。这就是该组织决定将大部分应用程序提升并转移到云的原因。因此，当我们迁移到云时，我们决定环境应该是零接触的。

布莱恩:好的。过一会儿，我将深入探讨 lift 和 shift，人们对此有不同的看法，它有不同的含义，此外，将数据和传统关系数据库真正集成到 CI 管道中的一些挑战。但在此之前，我想问一下，到目前为止，您看到 DevOps 的好处了吗？布罗德里奇受益了吗？客户受益了吗？如果有，如何实现？

Annie:当我们想到这种数据库自动化时，真的非常非常可怕，因为我们正在处理关键数据。因此，实际上，理解和说服客户使用自动化产品需要相当长的时间。但重点是，如果你看看流程本身，手动流程花费了大量时间，但不仅仅是时间。当你在手册中看到这个过程时，它实际上涉及到了多团队的参与。因此，不仅仅是时间，不仅仅是人为错误或诸如此类的事情，需要来自不同团队的多名技术人员来完成一个简单的部署过程。

通常，数据库管理员在做——大部分时间，产品——对不起。大多数时候，被雇佣来提供生产支持的生产支持数据库管理员最终会一直进行部署。我们是一家相当大的公司，所以我们有许多应用程序要支持。因此，数据库管理员没有做真正的生产支持工作，而是整天和周末都在做部署。

Brian:这是以数据库管理员和潜在的生产支持为代价的，现在可能缺少生产支持，响应速度可能不够快，对吗？

安妮:没错，是的。谈到自动化，一个真正的大缺点是手动设置部署。对于我们部署了什么以及部署在哪里，没有可追溯性。我们是在测试环境中做的吗？成功了吗？我们准备好投入生产了吗？我们能往前走吗？所以没有可追溯性，这就造成了大混乱。

因此，当您将所有这些东西分解到 DevOps 自动化中时，您就有了一个版本控制的部署。所以有一个很大的可追溯性，你知道你在测试中做了什么，可以推广到生产，也可以不推广。因此，这是我作为一名 DBA 看到的相对于其他约束(如时间和其他事情)的最大优势。

布莱恩:好的。你获得了效率。

安妮:效率，可靠性。

布莱恩:可见性，可追溯性，这是巨大的。现在，我不能声称自己是数据库专家。我将分享，我作为一名软件工程师/编程人员在游戏行业呆了几年，我不太明白数据库的重要性，它背后的科学和复杂性。当我进入职业生涯的另一个阶段，更加专注于企业开发，并开始在传统数据库上花费更多时间时，我意识到这可能是多么复杂。我了解到，在那个领域确实有很多手动控制。

安妮:没错，是的。

Brian:很多责任都放在了专家的手里，因为数据库更新和迁移过程中并没有真正建立可追溯性。

安妮:那有点不一样。对于一个简单的部署，多个团队都依赖于它，每个人都应该在现场进行安装、确认，然后进行验证。因此，在这个自动化过程中，只需在 Jenkins 中按下一个按钮，我们就可以将它组装起来。任何非技术人员都可以运行它。所以没有 DB 的参与。没有任何人的参与，没有开发或服务交付团队的参与。任何非技术人员都可以按下 Jenkins 的一个按钮，它可以完成所有的魔法。

布莱恩:好的。

Annie:它从源代码控制中检索工件，提取，建立 SQL 连接，执行。在执行之前，如果有数据库备份、部署前备份的要求，则进入 it 部门，进行备份并运行部署，创建日志文件，将日志发布给所有相关方。

布莱恩:太棒了。

安妮:只需按一下按钮。所以詹金斯变了所有的魔术。

布莱恩:我总是喜欢听詹金斯表演所有的魔术。

安妮:是啊。这是我们用于自动化的唯一工具。

布莱恩:我想深入了解你是如何做到这一点的。再说一次，在我们转移话题之前，我有一个先决问题。您是否看到客户或企业从这一过程中受益？我认为内部利益是巨大的。我们讨论了生产力、可见性、可追溯性。有误差减少吗？是否降低了故障率，从而改善了客户服务？

安妮:没错。当我们手动做同样的事情时，错误可能不会很大或可以量化，但即使一个错误的影响也是巨大的，因为我们是在金融行业。

布莱恩:是的，没错。这可能是数百万，数十亿美元的错误，一个数据错误。

安妮:没错。所以我们被罚款，所以我们会被罚款或处罚。对于一年中的一次失误来说，惩罚是巨大的。所以我们彻底根除了这些事件。这是我能看到的更大的成就。

Brian:所以 DevOps 自动化为您的客户提供了更高的可靠性、安全性和安全性。

安妮:是的。

Brian:我敢打赌，如果我们测量血压，它可能也会降低 DBA 和团队成员的血压。

安妮:没错。

Brian:让我们来谈谈技术实现。听着，我承认，当我们谈论 DevOps 以及如何实现 DevOps 时，经常会有一些粗糙的边缘和一些困难的领域，这些领域经常会被杰出人士、福音传播者和演讲者所掩盖。安全性是没有完全集成的因素之一。很多时候，这很难。环境管理有了很大改善。但我认为数据是人们仍在纠结的一个问题。

现在，你们选择了举起和移动。我看到许多绿地团队的做法是直接转向云技术，直接转向 NoSQL 数据库，可能会进行某种程度的 ETL，但主要是说，“我们将采用传统的数据存储，并将其抛弃，因为这太难了。”你们选择提升和转移并带来你们投资的数据库中的数据，对吗？

安妮:没错。

布莱恩:听起来很有挑战性。

Annie:这是一个挑战，但是从组织的角度来看，基础架构的总维护成本已经完全消除。因此技术人员可以把更多的时间花在设计上，而不是像传统的工作那样坐着支持。所以我们只是失去了工作，但是工作的性质已经提升了。

布莱恩:好的。你可以专注于重要的事情。

安妮:是啊。

布莱恩:你能和我分享一下吗？我们谈了一些技术上的困难。也许你可以带我去旅行。请告诉我 Broadridge 的解决方案是什么样的，它首先将您的传统关系数据库集成到 CI/CD 中。又有哪些解决方法？你遇到了什么挑战？你是怎么实现的？我们很想了解更多的细节。

安妮:好的。我们只是使用两个工具来做这件事。一个是源码控制，GitLab。所以我们只是告诉开发人员在 GitLab 中签入他们的代码。当它为部署做好准备，并且当它转换为工件时，流程就可以开始了。所以一个非技术人员将从 Jenkins 运行这个构建。所以这才是重点。

我认为，第一个也是非常困难的是理解。整个 Jenkins 与其他工具集成在一起，如 GitLab 或 Nexus 或任何其他工具。所以这对我来说是一件具有挑战性的事情。

我们真的需要了解他们如何彼此交谈，用什么凭证。这就是起点。所以，幸运的是，我们的 DevOps 团队有一个非常好的标准化流程。因此，他们为每项技术、每种构建创建了服务帐户。所以这些不能共享。密码不能给个人。

因此，服务帐户可以与其他工具、其他 DevOps 工具进行对话。可能是 GitLab 或者 Nexus 什么的。这是我面临的第一个挑战。

Brian:你们在 Jenkins 中使用凭证管理来做这个吗？

安妮:是啊。我们有在 Jenkins 创建的凭证，它是高度加密的。因此，Jenkins 使用凭证文件与其他工具进行对话。

Brian:谈论并执行自动化或编排。

安妮:没错。这同样适用于数据库凭证。在我们的设置中，正如我之前所说的，当您单击按钮时，系统下载工件，建立 SQL 连接。这是如何建立联系的。所以它需要凭证。

因此，我们指示开发人员为我们提交一个配置文件，其中只有连接信息，仅此而已。那么，您的目标服务器名称是什么，目标数据库名称是什么？您要备份哪个对象，还是要跳过备份？这就像一个十行的配置文件。他们只需要说是或不是，或者他们需要填写右手边。

所以我们只给他们模板。所以它们只是填充配置文件的右边。因此，他们为我们提供了所有的连接信息，但是凭据是由 DBA 管理的。因此，我们在凭证文件中创建用户名和密码来建立连接。

布莱恩:好的。然后他们提交-停留在技术实现层面一会儿，开发人员，一，我注意到你在左移。他们能够以他们需要的速度交付，而不是填写一张票、打一个电话、写一封电子邮件。作为 DBA 或数据库团队，你们可以专注于更高级别的问题。所以这有很多好处。

现在，我很好奇。这是开发商的转变吗？开发者是直接提交 SQL 还是 DDL？

安妮:不。他们不被允许。Jenkins 的设置类似于我们的非生产和生产服务器设置。在非 prod 中，开发人员可以像在开发环境中一样使用它。所以他们可以提交一个样本工件，他们可以试着运行代码——对不起——Jenkins job 来理解它是如何工作的。这是他们唯一能做的。然后当神器准备好被提升到更高的环境时，他们不能碰任何东西。因此，DevOps 团队有一个不同的晋升流程。

布莱恩:好的。我对此很好奇。没错。

安妮:DevOps 团队实际上有一个流程。他们称之为提升工件过程。所以连他们也无能为力。一旦他们说代码在开发中被测试，过程就开始了，将工件提升到不同的源存储库。所以在那之后，他们就没有机会去修改代码了。就这么定了。因此，当你在开发中测试某样东西时，它将进入生产阶段。所以这就是我用的词，可追溯性，对。

Brian:对，这类似于检索应用程序工件和二进制存储库的值，这是一次构建和提升。

安妮:对，就是这样。我不会说这是持续交付，但我们的目标是持续交付。我的理解是，当你按下开发按钮时，当它完成时，它会进入 QA 生产。这就是连续交货，我目前所理解的。所以这实际上并不存在，因为这实际上是在团队内部处理和协调的，因为有不同的变更控制过程。

布莱恩:好的。所以有人工干预。您正在自动化，但是您的自动化必须与现有的变更控制过程一起工作。

安妮:没错，是的。

Brian:实际上，当我们在金融机构中处理数据时，这些变更控制或变更管理流程可能会保留下来。

安妮:没错。

布莱恩:这不实际或者不-

安妮:是啊。我们有一个治理团队来批准生产变更。所以这时候就有干预了。但是即使有手册…那也像一个发布管理流程。所以那是自动流动的。然后，当它准备好了，按钮可以推动生产。CI 到位，CD 即将推出。

布莱恩:好的。CI 到位，带手动闸门的 CD 到位。

安妮:没错。这是正确的词。

布莱恩:人们靠自己。我对许多组织说，“嗯，我们还没有实现连续交付。”我坚持认为，在一天结束的时候，我们的目标是提高质量、优化工作和提高速度。如果你能做到这一点，同时仍然保持你的手动检查，那么，你已经实现了你的目标。它可能不是纯粹的连续交付。也许你们有一天会到达那里，但是——

安妮:没错。我不相信这个 CI/CD。

布莱恩:今天在布罗德里奇有它的位置。但这正是德沃普家族的切入点。我很好奇。对齐总是一场斗争，对吧。所以，是的，你仍然有治理。这些不断变化的系统、云、DevOps 和自动化肯定改变了你的工作方式，并产生了一些文化影响。

Broadridge 做了什么来让团队团结一致，让每个人都转变到这种新的工作方式？

安妮:现在在布罗德里奇，每周都有实践中心会议，我们在那里教育人们了解现有的模式。然后我们告诉他们如何参与这个过程。所以我们教育他们。

我们为他们创建了合流页面。所以我们定期出版。然后，在 DevOps 团队主持的每次 COP 和 COE 会议上，他们邀请我们作为嘉宾和发言人，告诉他们任何团队都可以如何进入这一流程。所以每天我们都有顾客。我会这么说。

所以我们有多个应用团队。每次会议结束后，我们都会收到五到十封电子邮件，内容是:“嘿，我想加入这个过程。”就在今天早上，我收到了一封电子邮件。我不在办公室。我收到一封电子邮件说，“嘿，我想加入这个过程。”我说:“下周我会给你一个演示。”原来如此。

所以人们有兴趣来。尽管他们知道关键程度，但他们喜欢这个过程，因为它完全消除了手动时间和错误。所以这是他们关注的一件大事。

Brian:你认为是市场营销吗——所以你通过服务的方式让人们团结起来。我听到你说，“我们每天都有顾客。”

安妮:是啊，我也是这么觉得的。我属于技术解决方案团队的共享服务团队。所以我们为团队提供解决方案。这是我们的目标，所以我将他们视为客户。

布莱恩:好的。就像一个面向客户的企业，听起来需要教育和意识。有培训和营销。

安妮:是的。这就是我们每周做的事情。

Brian:持续的培训和营销有助于调整和采用。你展示成功有多重要？我还收集到，作为这一过程的一部分，您正在定位采用您的服务的好处。对吗？

安妮:嗯。

布莱恩:我想我会问，你们透明地分享你们的成功，甚至可能分享一些你们的挣扎和失败，这对成长有多重要？

Annie:通常，在我们提出第一个框架后，我们会从应用团队那里得到很多建议。所以我非常积极地看待这件事。他们告诉我，“嘿，你的界面可以是这样的，伙计。它可以看起来更漂亮。”我同意了，因为我只关注实现的逻辑，而不是界面外观本身。但是当它来自开发团队时，他们已经精通编程。

所以他们告诉我，“你可以改变这个。你可以修改这个。你可以输入更少的参数。”所以我采用了那些东西。所以这不仅仅是单向的知识分享。就像是双向理解，是的。

布莱恩:太棒了。我想对我们的听众和你说，当我听到你谈论创建基线，交流基线并从开发人员那里获得反馈时，这与你今天在 CloudBees 的主题演讲中听到的软件交付管理信息非常一致，这不仅仅是自动化，而是持续改进的概念，所以你可以在那里获得东西，获得反馈，并使它变得更好。

安妮:是的，好多了。

布莱恩:所以，看看 SDM。我听说你有一些类似的经历。也就是说，这不仅仅是对客户的业务。这也是内部的关键系统，在这里你可以发挥这些作用。

您能否告诉我，在安全性和法规遵从性方面，您在数据方面已经提到了一些，但是安全性和法规遵从性，正如您所说，在金融机构中是至关重要的。你们如何利用 DevOps 来帮助确保审计和合规性，并帮助确保在 Broadridge 实现安全和合规性目标？

安妮:基本上，首先也是最重要的，我会说是源代码控制工件。这是审计和安全的第一层。所以如果你想回去看看，你有一个带有版本控制神器的服务票。因此，您知道安装了什么，在哪个日期，在哪个服务器上。这对审计非常有帮助。

布莱恩:好的。

Annie:同样为了安全起见，由于证书是作为加密文件在 Jenkins 中本地管理的，因此非常安全，而且不是——

Brian:集中式安全–

安妮:一个集中的地方，这样就不会被多个团队或多人共享。通常，DBA 持有凭证，但是现在，没有人持有任何凭证。所以一旦它被创建，它就被存储起来。就是这样。效果非常好。

布莱恩:太棒了。谢谢你。现在我很好奇。我要问几个有趣的问题，但这些问题也有助于让观众了解我们的嘉宾是谁。其中一个问题是谁是你最喜欢的 DevOps 超级英雄，为什么？

安妮:我会从公司里挑一个人。对不起我太自私了。我想是丹尼尔·里奇。

布莱恩:丹尼尔·里奇。

安妮:是啊。是他把 DevOps 介绍给我的。因为当我有兴趣的时候，我就接近他。我们公司的每个人都说丹尼尔是个可靠的人。所以我接近了他。他花了几个小时跟我解释 DevOps CI/CD 流程。这个框架给我留下了深刻的印象。所以我会说他是我的英雄。

布莱恩:那么让我们深入探讨一下——丹尼尔还是丹尼？

安妮:丹尼尔·里奇。

布莱恩:丹尼尔·里奇。谢谢你，丹尼尔，你好，丹尼尔。丹尼尔在布罗德里奇是什么角色？

安妮:他是布罗德里奇的德沃普斯建筑师，在过去的五六年里，他一直是个奇迹。

布莱恩:太棒了。我还注意到好奇心的循环。有人有一些经验和专业知识。他们用那个来满足好奇心。所以是分享和训练。人们把丹尼尔推销给你，让你去找他。现在，你也在做同样的事情，在你的公司里传播消息。

安妮:是的，没错。

Brian:是的，这很棒，我很喜欢它强调了在一天结束时，虽然 DevOps 的改进可能有自上而下的组件，但在一天结束时，DevOps 实际上是关于共享、协作和社区的。我想你和我们分享的已经证明了这一点。

安妮:谢谢你。

Brian:所以，为了转移话题，我想请客人分享我们称之为“糟糕时刻”的内容。这不是 D-E-V-O-P-S，而是 D-E-V-O-O-O-P-S。这是一个危险的、不稳定的或幽默的事情发生的时刻，你从中吸取了教训。你能和我们分享一个糟糕的时刻吗？

安妮:是啊。当我最初开发框架时，我不知道如何在 Python 脚本中屏蔽密码，因为我不是开发人员。所以当我运行构建时，我看到了控制台输出上显示的密码。就像，“哎呀。”我就像——

布莱恩:现在你就像，“我怎么摆脱它？日志在哪里？”

安妮:然后我回到 CloudBees，如何包装密码。然后我找到了语法，回来后有了-

[Crosstalk]

布莱恩:嘘。不要告诉任何人。

安妮:是啊。所以那对我来说是一个尴尬的时刻，但那只是对我来说，所以我取消了建造。

布莱恩:很高兴知道这一点。我告诉你。我也遇到过类似的事情。我觉得不是在危急环境下，而是没有马上抓到。这意味着我 SSH 到服务器，梳理日志，试图找出这个暴露的密码可能泄露的地方。

所以谢谢你的分享。这就是为什么那些 DevOps 时刻很重要。在那篇文章中，你说你可以去 CloudBees，他们解释了。

安妮:是啊。

布莱恩:你还记得你是怎么掩饰的吗？

安妮:我看了一些盖帽，盖帽点，那些人真厉害。所以我就贴了一个问题，瞬间就有了答案。是的，在几分钟内我得到了一个答案，有语法，所以我可以这样包装。他们举了一些例子。

布莱恩:那么解释和复杂性会使它变得模糊。

安妮:我只是把它用在我的事情上，然后我回去学习。

Brian:还有一个关于在进入管道之前先在本地测试的教训。

安妮:没错。

布莱恩:太棒了。除了你已经提供的经验和知识之外，你有什么最后的想法想和我们分享吗？有什么最后的话要对听众说吗？

安妮:没有。我很高兴能在这里分享我对现有框架的经验。我很高兴来到这里。

布莱恩:太棒了。我要多戳戳你。现在你来到了 DevOps World/Jenkins World，这是你的第一次吗？

安妮:是啊，第一次。

布莱恩:好的。你期待从中得到什么？

安妮:我想了解一些我目前还不知道的事情，因为我的英语水平有限。所以我想知道如何利用现有的资源来即兴创作我的框架。所以我研究了这些话题，它们非常有趣。

布莱恩:太棒了，太好了。我非常确信，在更好地了解 CI/CD、DevOps 以及您可以做些什么来实现它，在企业中应用它，您将在这里学到更多。我很想听到你的声音，如果我在节目中再见到你的话。我很想听听你的经历以及你学到了什么。

安妮:太谢谢你了。

布莱恩:好吧。谢谢你安妮。