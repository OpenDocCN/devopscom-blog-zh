# 左移测试、持续集成和大型机

> 原文:[https://devo PS . com/shift-left-testing-continuous-integration-and-the-mainframe/](https://devops.com/shift-left-testing-continuous-integration-and-the-mainframe/)

“大型机”是科技领域最古老的术语之一。“左移”要新得多。

那么，你可能不认为大型机和左移测试有什么共同之处。但是你错了。即使在大型机应用程序的环境中，将测试转移到左边也能带来巨大的好处。

让我们解释一下。

## 什么是左移测试？

左移测试指的是在软件开发生命周期的早期执行更多测试的实践。

传统上，大多数测试发生在软件部署到生产环境之前。在这个阶段测试代码有助于确保它在生产中的行为符合预期，但是它也有缺点。

传统测试的最大缺点是，如果直到软件准备部署之前才发现问题，问题很难解决。在这种情况下，解决代码中的问题需要确定问题具体存在于代码中的什么地方，从应用程序中删除该代码并用更新的代码替换它——所有这一切都不会破坏依赖于原始代码的应用程序的其他部分。

左移测试通过鼓励软件交付团队更早地执行测试来帮助解决这个问题——典型地，在单个代码单元被编写之后立即开始。在基于持续集成/持续交付(CI/CD)的软件交付管道中，能够更早、更频繁地进行测试尤其重要，在这种情况下，目标是在几乎连续的基础上推出应用程序变更。

由于直到发布前才被发现的错误可能需要很长时间来修复，缺乏左移位测试会使组织面临由于软件质量问题导致的持续延迟而无法实现 CI/CD 主要目标的风险。此外，左移测试减少了您必须执行的整个端到端测试的数量。

## 你还是在右边测试吧

重要的是要注意，在管道中较早执行的测试并不能取代部署前的测试。它们是对它们的补充，减少了直到部署前才发现问题的可能性。在这个意义上，术语左移可能有点误导；这实际上并不是将所有的测试转移到交付周期的左边，而是更早地开始测试，同时继续在管道的右边进行测试。

## 大型机上的左移测试和持续集成

将测试转移到左边使得在基于 CI/CD 的几乎任何类型的应用交付管道中修复代码问题变得更加容易。但是它可以为努力使大型机应用程序跟上 CI/CD 的软件交付团队提供特别重要的好处。

有几个主要原因。一个是大型机应用程序通常是使用旧的编程语言编写的，这些语言不是为了帮助开发人员避免错误而设计的。这并不是说大型机语言特别容易出错；他们不是。但是，与 Python 等旨在强化良好编码习惯的语言相比，COBOL 等语言并不要求程序员在输入代码时遵守高度的纪律。因此，能够在用大型机语言编写的代码中更早地发现 bug 尤其重要。

另一个因素是大型机应用程序通常是遗留代码库的一部分。当您处理代码和依赖关系时，在某些情况下已经有几十年的历史了，尽管您尽了最大的努力，您还是面临着软件质量问题的更大风险。同样，尽早发现这些问题意味着可以在不中断整个 CI/CD 流程的情况下修复它们。

最后——也是最重要的——事实是，在某些情况下，软件质量工程师和大型机程序员在技能组合和对大型机代码的熟悉程度方面存在很大的差距。

今天，典型的 QA 工程师并不是伴随着 z/OS 成长起来的，并且可能在解决软件问题方面经验有限。鉴于 QA 团队通常负责运行部署前测试，这可能会在 QA 检测到大型机应用程序的问题时造成问题，而 QA 不知道如何进行故障排除，更不用说修复了。通过将测试转移到左边，更容易给开发人员更快的反馈，以便他们可以更快地修复错误。

## 如何将大型机应用程序测试转移到左边

如果您认为大型机没有从左移测试运动中获得任何好处，您可能还会认为没有多少工具可以帮助您对大型机进行左移测试。

幸运的是，这根本不是真的。对于单元测试，IBM 提供了 Z Unit，这是一个用于 z/OS 程序的单元测试工具。Z 单元包含在 [Z 开放单元测试](https://www.ibm.com/us-en/marketplace/z-open-unit-test)和 [IBM 开发人员用于 Z 系统的](https://www.ibm.com/us-en/marketplace/developer-for-z-systems)中。使用这些工具，Z 开发人员可以自动为批处理和 CICS 程序生成单元测试，作为他们日常工作的一部分。这些测试可以存储在任何标准的 SCM 中，并且可以独立于它们的环境执行。

您甚至可以使用 [Z 开发和测试环境](https://www.ibm.com/us-en/marketplace/z-systems-development-test-environment)在非大型机硬件上测试大型机应用程序。该平台在 x86 系统上创建虚拟 Z 环境，因此开发人员可以在任何标准的商用服务器或开发设备上编写、构建和测试他们的大型机应用程序。

## 结论

无论您的大型机应用程序是几十年前的，还是在过去几年中从头开始编写的，都没有什么可以阻止您利用左移位测试来帮助验证它们。这样做将使您的大型机应用程序更容易有效地实现 CI/CD，从而通过减少 bug 和延迟，让您的软件交付团队和您的最终用户都更加满意。

查看[Z 打开单元测试演示](https://www.youtube.com/watch?v=Gq0QAHOD2iM)。

— [克里斯·托齐](https://devops.com/author/chris-tozzi/)