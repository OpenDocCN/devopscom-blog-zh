# 服务网格:提高安全性、交付和可用性

> 原文：<https://devops.com/service-meshes-improving-security-delivery-and-availability/>

容器化的微服务是 [接管](https://www.devprojournal.com/technology-trends/why-is-the-microservices-market-growing/) 软件世界。这些服务为开发人员提供了一种快速创建和部署云原生应用的方式。然而，容器并不完美。协调和管理容器部署可能是一个严峻的挑战。

为了帮助缓解这一挑战，服务网格应运而生。在本文中，您将了解服务网格组件和架构选项。您还将了解服务网格如何改进您的容器部署。

## **什么是服务网格？**

服务网格是位于请求/响应层之上的专用通信层。它的工作方式类似于容器网络接口(CNI ),控制服务与网络的连接。服务网格位于 CNI 之上，增加了额外的功能，如服务发现或安全性。服务网格不是 CNI 或服务编排平台的替代品。

服务网格设计用于容器化的微服务。您可以将这项技术用于任何容器或容器编排工具。然而，最活跃的项目似乎倾向于为 Kubernetes 开发 [服务网格。](https://platform9.com/blog/kubernetes-service-mesh-a-comparison-of-istio-linkerd-and-consul/)

## **服务网状架构**

部署服务网格时，有三种架构可供选择。

**图书馆**

库架构采用了在应用程序代码中导入并从应用程序内部运行的库。使用库消除了调用远程服务的需要，使其更加安全。

由于所有工作都包含在运行库的微服务中，库使得资源分配更加容易。库架构非常适合用一种语言编写的内部应用程序。第三方应用程序很难或不可能添加库。

**节点代理**

节点代理架构使用一个节点代理或守护进程来服务特定节点上的所有容器。节点代理架构是语言无关的，因为它不从微服务内部运行。它可以用于内部和第三方应用程序。然而，节点代理必须与基础设施流程相协调，这使得该架构的部署更加复杂。

由于信息可以在一个节点上共享，节点代理比边柜需要更少的内存。这种架构采用工作资源共享，通过动态共享资源，使其更易于扩展。然而，共享的缺点是它可能被滥用，一个服务占用所有可用的内存。

**边车代理**

边车代理架构使用沿着集装箱运行的边车。边车处理所有进出它所连接的集装箱的交通。边车不需要与您的基础设施协调，因为一个代理被分配给每个集装箱。这种协调的缺乏使得 sidecars 比节点代理更容易设置。

侧柜只为一个舱服务，不受其他舱的影响。这种隔离使这种体系结构更适合零信任部署，因为每个容器都对自己的行为负责。边车可随时添加到容器中，使您能够轻松扩展流程。

## **服务网格的用例**

服务网格是一种 [新兴技术](https://thenewstack.io/top-three-service-mesh-developments-in-2019/) ，新的用例正在积极开发中。这里介绍的三个用例是目前最常见的。

**提高安全性**

容器是隔离的环境，通常被认为比传统应用更安全。然而，容器仍然包含漏洞，比如可能滥用根访问。

服务网格可以通过提供以下功能来帮助解决安全问题:

*   零信任安全——任何来自内部或外部的通信都需要验证。验证可防止受损容器干扰其他微服务或您的更广泛系统。它将容器的动作和通信仅限于该容器。
*   通信跟踪—使您能够收集通信信息并隔离错误或问题。如果容器以一种意外的方式或违反协议的方式进行通信，您可以识别它。识别后，您可以轻松地用未损坏的映像替换容器或解决问题。跟踪使您能够查明可能的攻击，包括攻击者来自哪里以及他们试图完成什么。

**改善交付**

通过使发布和修补服务变得更加容易，容器已经改善了应用程序和服务的交付。服务网格通过改进应用程序和性能监控功能来扩展这些功能。

服务网格还可以通过以下方式帮助改善服务交付:

*   A/B 测试—提供高级路由，使您能够在 A 和 B 版本之间划分流量。这种路由使得设置 A/B 测试更加简单。此外，跟踪功能使您能够收集和分析用户流量和交互。
*   快速版本控制——新版本可以在零停机时间和降低风险的情况下发布。在流量逐渐在版本之间转移之前，可以启动容器并验证其健康。如果出现问题，可以回滚更改，而不会产生系统范围的后果。更容易的更正使您能够以最小的风险放松交货要求。

**提高可用性**

根据您的主机配置和资源，容器可以提高可用性。服务网格可以通过改进负载平衡、流量管理和健康监控功能来扩展这些能力。

服务网格还可以通过实现以下功能来帮助提高可用性:

*   弹性测试——使您能够测试服务如何响应故障注入。服务网格使您能够测试服务的容错能力。加深对故障如何影响弹性的理解有助于您识别和纠正漏洞。更高的服务弹性带来更高的可用性。
*   部署和请求跟踪——使您能够模拟预期的流量，并查看服务如何响应。隐藏使您能够测试服务的流量和工作负载能力。有了这些信息，您可以确定是否需要扩展资源和连接。适当的扩展可确保满足您的流量需求，并防止流量瓶颈和可用性下降。

## **结论**

随着微服务成为标准，团队越来越关注提高容器性能和安全性。服务网格的发展是这种关注增加的结果。

希望这篇文章能帮助您理解什么是服务网格，以及这项技术如何帮助您改进容器部署。如果您有兴趣了解服务网格如何帮助您，请查看本教程，了解如何 [构建服务网格](https://medium.com/faun/building-your-very-own-service-mesh-4723895d061d) 。

— [吉拉德·大卫·马扬](https://devops.com/author/gilad-david-maayan/)