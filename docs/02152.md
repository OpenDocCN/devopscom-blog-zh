# 关注高级策略要求，以加快开发运维的网络流程

> 原文:[https://devo PS . com/accelerate-network-processes-for-devo PS-by-focusing-on-high-level-policy-requirements/](https://devops.com/accelerate-network-processes-for-devops-by-focusing-on-high-level-policy-requirements/)

网络运营一直是开发运维流程中缺失的部分。不难看出原因。网络管理落后于服务器和工作负载自动化。更新网络策略和配置通常需要大量的分析、测试和时间，破坏了 DevOps 敏捷性的目标。但是，一旦我们改变了网络设备的管理方式和更改的验证方式，就有了通过自动化将网络更新和策略整合到 [DevNetOps](https://devops.com/devops-and-networking-working-to-achieve-nirvana/) 流程中的新方法。

## **将重点转向策略，而不是配置**

DevOps 已经起步，这在一定程度上归功于虚拟网络和软件定义网络(SDN)能够在几分钟内自动放置工作负载、建立连接并交付第 4 层至第 7 层服务。但是几乎所有的网络策略更新，特别是那些在底层中处理的，都受到了限制，因为必须通过传统的管理平台或命令行界面来重新配置各个网络设备( [CLI](https://en.wikipedia.org/wiki/Command-line_interface) )。新的应用程序部署可能需要新的网络路径、对云资源的访问、在防火墙上打孔等。无法通过现有的网络管理平台自动执行这些与策略相关的任务，开发运维流程仅限于在覆盖网络中进行简单的更改。

![](../Images/2afbedb8a1031875343363946d1c8517.png)

Figure 1: The CLI management model and box-by-box management, in general, do not facilitate DevOps processes, which require higher level policy specifications and requirements. DevOps requires the automation of such policy analysis and verification.

通过 CLI 更新单个网络设备有什么问题？IP 网络的固有特性阻碍了网络管理。单个设备从没有完整的端到端网络策略和行为视图。它们通常被配置为知道如何在本地处理流量、何时丢弃流量以及何时将流量转发给最近的邻居。这不是策略需求形成的方式(见图 1)。

如果新的 DevOps 部署需要确保数据中心 1 中的机架可以通过特定的安全网关到达数据中心 2 中的机架，然后到达云托管的数据库，并适当地返回流量，那么我们需要比任何单个设备或 CLI 所能提供的更广泛的基于路径的视图。如果我们要自动化任何此类分析或验证，我们将需要一个解决方案，将我们预期的策略要求映射到跨许多设备的网络实施。

## **基于意图的网络符合政策和意图**

这就是基于意图的网络(IBN)可以帮忙的地方。IBN 可以帮助我们将应用策略要求与网络设计和配置联系起来。它可以让我们验证网络当前是否支持特定的策略要求，或者帮助进行面向路径的搜索，以快速确定需要更新哪些设备来提供特定的策略。诸如更新防火墙规则之类的更改最终仍可通过 CLI 对单个设备进行，但我们已经加快了分析速度，以确定该策略当前是否受支持，需要进行哪些更改，以及此类更改会如何对其他现有策略和要求产生负面影响。

例如，在部署新的工作负载之前，能够确定从我们的 Rack 1 服务器到远程数据库的连接是否可用于新的流量需求，这对于应用程序开发团队来说可能是一个巨大的优势。通常，这可能涉及对网络团队的请求，网络团队必须分析策略需求或安排测试场景。像这样的故障单请求需要花费的时间不仅仅是几分钟，即使网络团队可以直接处理。

## **申请团队自助服务**

想象一下，应用程序团队可以通过查询 IBN 系统来自助服务他们的请求，该系统可以立即验证策略的实现。也许应用程序团队可以使用一个简单的内部消息传递平台(如 Slack)来指定他们的策略需求，并立即得到答案，而无需网络团队的进一步分析。他们甚至不需要学习具有松散消息传递前端的底层 IBN 平台的 GUI 或功能。

IBN 解决方案使团队能够避免考虑单个设备规则，并首次打开了端到端自动化策略分析的大门。永远不要指望应用团队了解防火墙配置或能够自助查询这些功能，但他们可以从 IBN 平台可以提供的高级应用策略需求和端到端路径行为的角度进行思考(见图 2)。

![](../Images/9fa0b978c8ac3d222e16d4709bd28976.png)

Figure 2: A sample policy query is constructed in the top bar, as the IBN platform shows a number of available paths between data centers that map to the policy requirements.

## **自动化网络验证**

为了进一步加快开发运维流程所需的关键网络策略变更，想象一下需要对底层网络中的单个设备进行更新。现在，不仅可以通过 IBN 几乎立即识别这些更改，而且可以完全自动验证这些更改是否正确进行，并且不会对任何其他应用程序或策略要求产生负面影响。在网络运营工作流程中，这些分析和验证的 IT 任务通常是最费时费力的。但是现在大部分工作流程都可以自动化了，DevOps 可以大大受益。

验证流程将包含一长串已经到位并已实施的现有政策要求。在提议对网络配置进行更改后，可以快速分析所有这些策略，以确定新的更新是否会对之前的任何要求产生负面影响，从而防止回滚或潜在的安全性或合规性违规。

问题很自然地出现了，是什么真正促使网络运营从逐箱关注转向端到端、面向路径的策略关注？IBN 平台通常复制了网络工程师的许多分析智能，通过分析单个设备配置和状态信息来确定整体行为。这种智能大部分是基于软件中运行网络的数学模型，现在很少是基于有限场景下的实时流量分析。这种对 IBN 平台中数学模型的分析现在可以首次提供对策略需求的明确验证，甚至可以在配置错误导致服务丢失或停机之前很久就识别出它们。

加快网络分析和更新以支持开发运维流程的关键是将重点从逐个设备管理和 CLI 界面转移到符合应用策略要求的端到端网络行为。针对许多策略相关网络请求的应用团队自助服务和网络验证任务的自动化只是 IBN 现在和未来能够为开发运维团队提供的众多优势中的一部分。

— [Chiara Regale](https://devops.com/author/chiara-regale/)