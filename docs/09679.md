# 2022 年的罗杰斯停电:SREs 的外卖

> 原文:[https://devo PS . com/the-Rogers-outage-of-2022-take aways-for-sres/](https://devops.com/the-rogers-outage-of-2022-takeaways-for-sres/)

八年后，当人们列出 21 世纪 20 年代的顶级 IT 事件时，很有可能会包括 2022 年的罗杰斯停电[](https://www.cbc.ca/news/politics/crtc-demanding-answers-from-rogers-outage-1.6518203)。此次故障导致加拿大超过 1200 万用户无法使用互联网和蜂窝网络服务，无论是从受影响的帐户数量还是服务中断的程度来看，这都是记忆中最严重的中断之一。

对于[现场可靠性工程师](https://devops.com/?s=SREs)来说，从技术和危机管理的角度来看，可以从这次事件中学到很多东西。以下是我们的主要观点。

### 罗杰斯停电:发生了什么？

在开始 SREs 课程之前，让我们回顾一下在 Rogers 断电期间发生了什么，以及我们所知道的事故原因。

Rogers 是一家大型电信提供商，在加拿大为大约 1200 万客户提供服务。2022 年 7 月 8 日早些时候，它的基础设施发生了一次事故，导致其大多数或所有客户无法使用互联网和无线电话服务。停电是如此彻底，以至于用户 [甚至无法拨打 911 电话](https://www.theguardian.com/world/2022/jul/08/internet-down-canada-rogers-mobile-network-outage) 或从 ATM 机取款——这意味着故障不仅影响了普通服务，也影响了你可能认为对正常日常生活至关重要的资源。

大多数用户在大约 15 小时内恢复了连接。然而，一些客户 [报告说](https://www.ctvnews.ca/business/what-we-know-about-the-network-system-failure-that-led-to-the-rogers-outage-1.5982790) 在停电开始后的几天内持续中断。

### 罗杰斯失败的原因是什么？

起初，罗杰斯没有透露太多触发事件的技术细节。停机后的第二天，该公司首席执行官发布了一份 [声明](https://about.rogers.com/news-ideas/a-message-from-rogers-president-and-ceo/) ，称“我们核心网络的维护更新……导致我们的一些路由器出现故障。”但这并没有具体解释该公司试图应用哪种类型的维护更新，为什么更新没有按计划进行，或者哪种类型的路由器受到影响。

直到几周后，当罗杰斯提交了对加拿大广播电视和电信委员会问题的答复时，更多的[](https://www.theglobeandmail.com/business/article-how-a-coding-error-caused-rogers-outage-that-left-millions-without/?utm_medium=Referrer:+Social+Network+/+Media&utm_campaign=Shared+Web+Article+Links)技术细节才浮出水面。Rogers 向 CRTC 解释说，在一次更新过程中，公司运行的代码删除了一个路由过滤器。现在还不清楚坏代码是如何进入更新程序的。

### SREs 的经验教训

对于 SREs 来说，罗杰斯断电是最坏情况的一个例子。这是一个极具破坏性的事件，需要相对较长的时间来缓解，至少当您考虑到停机有多严重时是如此。这就是为什么 SREs 应该利用 Rogers 的经验来评估 SRE 团队可以做些什么来避免此类问题，并在问题发生时更有效地管理它们。

**测试您的更新**

从技术角度来看，Rogers 中断 SREs 的最大教训之一是，您应该在应用更新之前彻底测试它们。如果工程师们更仔细地测试他们的更新程序，他们可能会在实际删除之前发现删除路由过滤器的坏代码。

公平地说，罗杰斯不是第一家因糟糕的更新而经历重大停机的公司。举例来说，Atlassian 今年早些时候[](https://rootly.com/blog/what-sres-can-learn-from-the-atlassian-nightmare-outage-of-2022)也有类似的问题，当时一个错误的迁移过程导致了长时间的中断。

如果你是一个 SRE，你不希望你的公司成为下一个头条新闻，当一些简单的变化，如更新，引发大规模停机。在将您的更改投入生产之前，测试、测试、再测试。

**内置冗余**

似乎也有理由得出这样的结论:Rogers 没有以备用路由器的形式在其基础架构中建立冗余，当主路由器由于糟糕的更新而崩溃时，备用路由器可以接管工作。

这是对 SREs 的又一个提醒，告诉我们为什么避免孤注一掷或制造单点故障是如此重要。冗余可能成本更高，而且可能无法完全防止中断。但它可以使它们不那么严重，更容易恢复。不难想象，如果只有 20%或 30%的流量被自动重定向到备用路由器，罗杰斯事件就不会那么严重了。这至少足以维持关键服务的运转。

**制定外部危机沟通计划**

罗杰斯受到了 [不少批评](https://www.thestar.com/opinion/contributors/2022/07/11/rogers-communications-unwittingly-teaches-a-master-class-in-failing-to-communicate.html) 在停电期间没有与客户沟通好。该公司等待了数小时后才发布了关于故障的初步声明。它在早期对媒体的询问没有做出很好的回应，而且，如上所述，罗杰斯过了几个星期才最终公布了有关问题的技术细节(即使在那时，这些细节也只是因为政府对事件进行了调查才出现的)。

缺乏快速、透明的沟通可能不是故意的。我们不得不相信罗杰斯不想让顾客蒙在鼓里。相反，缓慢的沟通可能反映了在罗杰斯自己的网络无法运行的情况下，缺乏针对外部事故沟通的预先计划的策略。如果没有沟通计划，罗杰斯大概很难在重大危机中决定分享哪些信息，或者如何分享。

如果罗杰斯在网络瘫痪前就此类问题与公众和媒体进行沟通，它可能会更有效地分享信息——也不会面临来自客户和监管机构的强烈反对。

至少，内部沟通可能更加顺畅。该公司确实设法在大约 15 个小时内为大多数客户恢复了服务，如果其工程师在解决事件时缺乏相互沟通的手段，这种情况可能不会发生。

## 结论

对于 SREs 来说，2022 年的罗杰斯停电是一个教训，说明了在危机来袭前测试、设计冗余基础设施和准备透明通信的重要性。虽然在这些方面进行更仔细的规划可能无法完全防止事故发生，但它可能至少会降低其严重性，并减轻罗杰斯现在面临的来自愤怒的客户和监管机构的反弹。