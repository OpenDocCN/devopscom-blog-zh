# 关于构建部署质量，首席信息官需要知道什么

> 原文:[https://devo PS . com/what-CIO-need-to-know-about-building-deployment-quality what-CIO-need-know-about-building-deployment-quality-how-application-release-automation/](https://devops.com/what-cios-need-to-know-about-building-deployment-qualitywhat-cios-need-to-know-about-building-deployment-quality-how-application-release-automation/)

应用程序发布自动化(ARA)是以自动化、可重复和一致的方式打包和部署应用程序(或应用程序更新)的过程。

在当今的市场环境中，软件已经成为所有行业和垂直行业中许多企业的主要竞争优势。在一个应用程序、物联网和客户期望永远保持联系的世界里，几乎每个公司都在成为软件公司。现在，软件开发对产品的成功至关重要，它的交付过程需要微调和简化，以确保您尽快将高质量的软件交付到最终用户手中。

要了解 ARA 如何帮助您实现更高质量的软件版本(这有助于您的底线)，您必须首先了解如果您的企业仍然使用手动部署或其他过时的方法，您可能面临的挑战。如果这是你的情况，你并不孤单:我们去年进行的一项调查发现，超过 75%的部署仍然是手动完成的，尽管这种模式存在许多问题，非常脆弱，容易出错。这不仅造成了许多失败的部署，而且还浪费了数百个工时来解决这些故障。在任务关键型生产环境中，这无疑是痛苦的，但在我们投入生产之前，这将带来巨大的成本。即使在较低的环境中(如测试或预生产)，66%的受访者报告仅排除故障原因就非常耗时。当我们提倡在生产中部署代码时，风险就更大了。除此之外，如果再加上可能的罚款、违反 SLA 的成本、客户流失和业务损失，部署失败、发布延迟和工时损失的成本会成倍增加。毫无疑问，失败的部署会对您的底线造成重大影响，对于一些公司来说，失败的部署实际上已经让他们破产了。

一个失败的发行会对企业产生巨大影响的主要例子是 Knight Capital 的案例。骑士资本是一家金融公司。2012 年 8 月，当市场在周末下跌时，他们手动推出了他们软件的新版本。周一早上，当市场开盘时，他们的新软件开始运作。结果很糟糕。他们在市场上积累了(极其迅速和错误地)90 亿美元的[H1]头寸——表现为仅 45 分钟内 3.97 亿股股票的移动。两个小时后，当 Knight 仍在追逐他们发布过程中的罪魁祸首，并试图回滚到软件的前一个版本时，纽约证券交易所表示，“我们已经等够了，”切断了他们对市场的强硬路线，Knight 无法进行任何交易。

这种影响是灾难性的，也是迅速的。骑士资本承受了 4.4 亿美元的税前亏损。几周之内，Knight Capital 就以极低的价格被卖掉了——一次失败的发行实际上杀死了这家公司。虽然这肯定是最糟糕的情况，但它是一个很好的例子，说明一旦开始谈论生产环境，就必须了解必须遵循许多法规和最佳实践，否则可能会出现大问题。

**为什么手动部署问题重重？**

首先，手动部署容易出错，因为每个部署都必须由实际的人来完成。即使是最资深的开发人员或运营工程师也会犯错误，当您开始在数百(或数千)个部署中讨论复杂的堆栈和配置时，错误几乎是不可避免的。虽然没有一个系统可以完全消除潜在的问题，但是你可以想象在一个部署过程中，许多步骤都是自动化的——因此在不同的版本中是一致的——你出错的机会大大减少了。

对于手动部署，也很难对所有应用程序组件及其相应的基础架构或配置的整个部署流程实现真正的、细粒度的可见性和可审核性。一旦一个部署被发布，唯一真正知道更新是如何从测试提升到生产的人是执行发布的人。尽管它们可能在记录方面做得很好，但它们永远不会像跟踪多阶段部署过程中每个组件的自动化日志那样全面或可靠。

手动部署也不擅长协商所谓的“交付差距”本质上，交付差距是存在于软件团队三个不同部分之间的鸿沟。一方面是开发团队，他们有一堆他们喜欢使用的工具和实践。另一边是运营，运营有自己的一套工具和方法/需求。最后是基础设施，它跨越了开发和运营两个方面，并对双方都提出了要求。因此，你基本上有三个不同的参与者，使用不同的工具，有不同的实践和需求，他们之间的谈判是一个棘手和困难的过程。确保不同团队之间的基础架构或应用组件之间没有配置偏差，并确保部署流程的一致性已被证明对人类来说很难执行，特别是当每个流程包括数百个(如果不是更多的话)工件、配置文件、依赖关系和部署要求时。然而，对于自动化过程，一致性和可重复性是默认状态。

既然我们已经确定了手动部署实践的缺陷，那么让我们来谈谈应用程序发布自动化如何解决这些问题并支持更高质量的软件发布。

我们将从前面提到的“交付差距”开始。应用程序发布自动化是一个 DevOps 解决方案，它在开发团队和运营团队之间架起了一座桥梁。它通过创建一个包含持续集成、配置管理和部署实践的解决方案来做到这一点，该解决方案尊重基础架构以及运营需求和法规要求。它之所以能够实现这一点，是因为您可以将这些考虑因素构建到自动化流程中，该流程在默认情况下会被记录、记录和跟踪。软件部署变得常规且可预测，而不是每个部署都是唯一的“雪花”。一个人不能在精神上“扳动开关”，在不同的小组之间跳来跳去，以确保每个人都满意。相反，这是一个考虑到每个人的兴趣和需求的自动化过程，然后确保一切都符合基础架构和配置要求。

此外，ARA 是一种“模型驱动”的方法，允许您反复重用现有的模板、配置和流程，以使您的部署保持一致，并且只需要最少的初始流程设置开销。这意味着您可以通过按钮式部署将任何版本快速部署到任何环境中。这不仅提高了在整个过程中跨不同环境部署的速度，直到最终发布到生产环境，而且还允许手动部署根本无法实现的可重复性。这对于测试来说尤其重要。想象一下，如果你部署的每一个更新的框架都是一样的——这会让测试变得容易多少？如果测试都是连续自动运行的，会容易多少呢？这就是 ARA 所能提供的。

此外，凭借一致性，您的部署非常可预测。您知道运行时间将是多少，这允许您更准确和有效地计划您的开发过程。这意味着您可以以最大化产出的方式分配时间和资源，这使得您的团队成员可以将更多时间花在他们的核心能力和改进您的产品上，而不是必须管理部署流程或基础架构。

同样，ARA 的关键原则之一是包装。当您手动部署更新时，组成您的应用程序的各个部分在不同的时间被部署(“移动”)，这就产生了一个“嘈杂”的过程，具有许多难以管理的依赖性。有了 ARA，一切都被包装在一个整洁的“包”中。这有效地为您的版本以及所有依赖项和相关配置创建了一个“材料清单”，它允许您轻松地指示应用程序的哪些组件需要部署在哪里以及以什么顺序部署。

应用程序发布自动化还解决了这样一个问题，即对于公司来说如此重要的流程往往只依赖于一个人——您团队中的“明星学生”,他“掌握着项目的钥匙”,并且只有他拥有部落知识和专业技能来执行或调试部署。有了 ARA，项目就有了隐含的透明性，任何团队成员都可以访问系统和部署软件(当然，取决于正确的安全许可)。

最后，使用 ARA，您可以从开始到结束完全了解整个过程。如果出现问题，您可以更好地了解错误的来源，从而更快、更容易地进行恢复，造成的损失也小得多。

最终，成功的 ARA 策略消除了为应用程序部署构建和维护定制脚本的需要，同时减少了配置错误和停机时间。它允许资源的战略性分配，让用户从他们的开发人员和其他 It 专业人员那里获得最大的“性价比”。由于所有这些因素，应用程序发布自动化是提高部署质量和速度的非常有效的策略。

## 关于作者/安德斯·瓦尔格伦

安德斯·瓦尔格伦是电气云的首席技术官。Anders 拥有超过 15 年设计和构建商业软件的丰富经验。在加入 Electric Cloud 之前，Anders 曾在 Aceva、Archistra 和 Impresse 担任高管职务。Anders 还在 Macromedia (MACR)、Common Ground Software 和 Verity (VRTY)担任管理职务，在交付 Macromedia 的 Director 7 和各种 Shockwave 产品等获奖技术方面，他发挥了重要的技术领导作用。Anders 拥有麻省理工学院的理学学士学位。在 [LinkedIn](https://www.linkedin.com/pub/anders-wallgren/0/17/367) 或 [Twitter](https://twitter.com/anders_wallgren) 上与安德斯联系。