# 找到合适的平台，帮助开发者茁壮成长

> 原文：<https://devops.com/finding-the-right-platform-to-help-developers-thrive/>

***如果我们的开发人员拥有创建最佳应用所需的一切，他们和我们的客户都会受益***

Goji Investments 建立在房地产、商业贷款、可再生能源和其他替代投资民主化的原则上。这个想法是让金融服务机构在全球范围内为私人投资者提供传统上无法获得的投资机会。Goji 成功计划的一个关键组成部分是投资平台。我们不仅将该应用作为白标解决方案提供，它还可以通过[API](https://devops.com/?s=APIs)轻松集成到其他平台中。我们希望创建一个模块化平台，我们可以在需要时逐块更新，并在客户上线时轻松扩展。

## 高绩效开发团队

[Goji Investments](https://www.goji.investments/) 在最初几年取得成功的一个主要原因是我们的高绩效开发组织，它有助于构建和交付产生新业务所需的投资产品愿景。随着我们从简单地构建我们的应用程序转变为使它们更具可扩展性，我们一直专注于为运营和开发提供合适的工具。当然，还有一个好处——如果开发人员有很酷的工具可以使用，他们会更高兴。

我们努力做的事情之一是让我们的应用程序/平台部署流程像应用程序本身一样敏捷——无论是部署新技术和应用程序，还是基于团队的反馈，我们都会不断寻求改进，并在必要时进行更新。我们的想法是保持 DevOps 管道平稳高效地运行。

我们的关键运营策略之一是，如果我们让我们的开发人员在工作中快乐，他们将交付更高质量的应用程序，这将导致更快乐的最终用户。当然，开发人员喜欢通过创新的方式来提供出色的特性。编码创新的一个障碍是执行重复的低级任务，所以我们实际上已经尽我们所能地自动化，并释放开发资源用于更有价值的应用程序开发。

## 自动化部署是一个开始，但*仅仅是*一个开始

我们通过 GitHub 自动化部署过程。每个开发者都把他们自己的服务推送到 GitHub，在那里通过一个快速审查过程。审核后(如果通过)，它将被合并到母版中。任何主合并触发器都会构建流水线执行(使用 ThoughtWorks GoCD)，这种自动化包括几轮测试:单元测试和集成测试，然后是自动化验收测试。开发人员可以选择在需要时自己执行额外的测试。

任何新的母版都被提升到生产前，这反映了生产。当变更最终投入生产时，我们使用 HashiCorp Nomad 的蓝绿色部署功能——如果出现问题(这意味着它在官方测试中被遗漏)，Nomad 会处理任何回滚需求。

堆栈相当简单:应用程序是用 Java 编写的，运行在容器中的 DropWizard 框架上。Nomad 是我们的编排平台。在选择应用和基础设施技术时，我们的基本原则之一是能够自动化我们的部署流程。我们在尽可能实现自动化方面做得相当好，但是自动化监控更加困难。我们传统的 APM 工具可以很好地提醒我们一些问题，例如 EC2 崩溃或重新启动的资源可用性问题，但是如果我们想要实际解决问题，我们基本上只需要检查日志，并希望我们可以看到一些不寻常的东西。

尽管每个人都对将数据写入日志感到兴奋，但梳理这些日志来排查应用程序问题是浪费时间和宝贵的开发人员资源。毕竟，运营涵盖从税收和支付到客户通知的 20 种不同的微服务需要优化 DevOps 管道的每个元素。我们添加的最后一项是性能监控。

## 端到端分布式跟踪的价值

《侏罗纪公园》里有一句很棒的台词:“霸王龙不想被喂食。霸王龙想要捕猎。”嗯，开发人员不想分析日志文件；他们想编码。事实上，他们想创造下一个伟大的功能。为了让我们的开发团队摆脱困境，我们开始考虑一种不同的方法来获取和分析应用程序性能数据。

我们希望系统能够增加可观察性、监控性能、管理服务级别，并包括从最终用户请求到后端系统的所有可见性。哦，是的，我们还希望所有这些都自动发生，这样我们的开发人员就不必担心除了他们自己的特性之外的任何事情。安装、代理设置、发现、映射、警报配置和报告—尽可能不需要人工设置。

我们知道跟踪是至关重要的，以至于我们通过指定 100%的解决方案来避免遗漏任何问题，希望对应用程序的每个请求都有完整的跟踪。

## 应用程序性能问题疑难解答

您购买应用监控软件的真正原因是为了解决问题，因此优化我们发现瓶颈并消除瓶颈的能力是我们监控解决方案的关键组成部分。首先，像监控的其他方面一样，我们不想花时间配置警告和危险警报的阈值。我们需要通过事件分析进行自动异常检测。每一点都有助于让我们的开发团队专注于开发，而不是分析数据——尤其是在日志中。

当然，有时候，你也没办法；您必须查看日志数据，但我们也想在这方面变得更聪明。我们希望我们的应用程序监控工具能够自动集成日志分析工具，以便在需要时可以在适当的级别分析所有数据。

## 不要忘记测试

有时，测试会迷失在好的监控解决方案的价值中。虽然我们不一定要寻找测试工具，但我们知道监控解决方案是否也能在测试中有效运行(不仅仅是在测试中运行的能力；相反，我指的是在测试过程中增加价值的能力)，嗯，那就更好了。

事实证明，我们的应用程序非常复杂，这种复杂性会导致更长的测试周期——通常在这种情况下:

我们最近发布了一个分发红利的新功能。正如您所想象的，这是一个相当重要的特性，所以我们希望确保它按照预期运行。我们特别关心的是能够适当地扩展特性。我们设置了一个压力可伸缩性测试，运行了 20 多个小时(实质上是处理成千上万的支付)。

我们没有预料到的是，不得不在测试过程中停下来，让某人提交优化更新或实际修复瓶颈——测试进行了 10-12 个小时，然后不得不停止并重新开始——一遍又一遍。我们开始想我们可能永远也完成不了。

这是我们希望通过自动化监控方式解决的难题之一。通过将自动 APM 解决方案指向我们的测试环境，我们不仅不需要配置任何东西(甚至不需要设置特殊的启动命令)，而且我们几乎可以立即获得任何变化的反馈(积极的和消极的)。它还指出了代码中发生问题的确切位置，因此开发人员几乎可以立即更新他们的代码并重新开始测试。最后，我们可以选择任意两次运行，比较它们的执行和性能，以确定真正的问题。

发生了两件事:

*   我们能够以大约 5 倍的速度迭代不同的运行。
*   我们从我们的解决方案中获得了如此大的瓶颈和调试数据，以至于我们将测试的运行时间从 20 小时减少到了不到 1 小时。

## 给开发人员展示才华的工具

虽然所有员工都喜欢成功，但开发人员尤其喜欢他们能够战胜挑战并交付高性能代码的时候。我们喜欢给我们的开发团队最好的工具来帮助他们实现这种卓越。为他们选择工具的决策过程应该与考虑最终用户没有什么不同:

*   识别痛点。
*   找到解决方法。
*   执行解决方案。

对于我们的开发团队来说，这意味着将他们从我们可以自动化的低思想重复性任务中解放出来，并停止让他们花费时间在性能日志中筛选。

## 做出正确的选择？？

简而言之，我们用一种解决方案取代了传统的 APM 工具，这种解决方案提供了我们渴望的自动化，并且消除了为解决任何问题而进行日志深入分析的需要。它还支持各种集成的日志分析，这对我们很重要。

我们可以跟踪每一个电话，这对运营和客户支持团队非常重要，他们可以自动分析每一个生产过程，这为我们的开发人员提供了足够的信息来采取行动。

最终，我们加快了应用交付和更新流程，简化了测试和监控。我们的开发人员非常高兴我们给了他们需要的工具，然后要求他们使用这些工具开发出最好的应用程序。