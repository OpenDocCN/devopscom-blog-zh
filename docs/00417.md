# 将数据从一个 Docker 容器复制到另一个容器

> 原文:[https://devo PS . com/copy-data-one-docker-container-another/](https://devops.com/copying-data-one-docker-container-another/)

Docker 容器很容易被比作一个目录。Docker 容器包含应用程序运行所需的一切，包括其依赖项，并且可以随意启动、停止、移动和删除。当容器被激活时，它们使用 Linux 内核名称空间。除了网络和存储之外，每个容器都独立于服务器运行。每个容器都是从 Docker 映像创建的，并且可以运行多个容器，这取决于服务器的硬件容量。Docker 容器是 Docker 的运行组件。

**什么是 Docker 图像？**T3】

每个 Docker 容器都是从一个 Docker 映像 中创建的，可以通过手动执行命令**来构建，也可以通过 **Dockerfiles**** 自动构建。映像可以是基本的，既可以由操作系统基础组成，也可以是准备启动的预构建堆栈。它们是只读模板，由一系列层组成，因此任何新的操作或更新都会导致在前一层之上添加新层，而不是完全替换整个图像。这就是新容器的制造方法。

**将数据从一个 Docker 容器复制到另一个:**

将数据从一个容器复制到另一个容器是 Docker 容器的基本和最重要的特性。将数据复制到另一个容器意味着拥有一个备份，如果在实时场景中的任何情况下发生任何类型的灾难，都可以使用该备份。

**使用数据量容器:**

数据卷是容器可用的目录，但它位于其根文件系统之外。在容器之间共享数据允许卷绕过图像分层。数据的任何更改都是直接进行的，容器在 **/var/lib/docker** 目录下有专门的目录，卷默认单独存储在 **/var/lib/docker/volumes/** 中。docker run 的**–v**选项可用于在两个容器之间复制体积数据。

**如何将内容从一个容器复制到另一个容器——一个例子**

在本例中，我们假设 Docker 正在运行数据卷容器映像 **mymod/dvc: v1** 的两个实例。以下是用于启动容器的命令

****#码头运行–d–名称 dvc1 mymod/dvc:v1****

****#码头运行–d–名称 dvc2 mymod/dvc:v1****

现在，要将数据复制到主机，甚至从另一个容器挂载卷，请使用 **cp** 命令来复制数据

**[ [【邮件保护】](/cdn-cgi/l/email-protection)~]# docker run–RM–v/var/tmp:/host:rw\–volumes-from dv C1 CP–r/var/www/html/host/dv C1 _ files**

容器挂载可读写为 **/host** 的主机目录 **/var/tmp** ，挂载 **dvc1** 导出的所有卷，包括 **/var/www/html** ，并将 **/var/www/html** 下的文件层次复制到 **/host/dvc1_files** ，对应于上的 **/var/tmp/dvc1_files**

现在，为了将数据从 dvc1 主机复制到另一个数据卷容器，我们使用以下命令

**[ [【邮件保护】](/cdn-cgi/l/email-protection)~]# docker run–RM–v/var/tmp:/host:ro–volumes-from dv C2 \ CP–a–T/host/dv C1 _ files/var/www/html**

容器挂载主机目录 **/var/tmp** 只读为 **/host** ，挂载 **dvc2** 导出的卷，将**/host/dv C1 _ files**(**/var/tmp/dv C1 _ files**下的文件层次复制到 **/var/www/html** ，对应 **dvc2** 导出的卷。

另一种复制数据的方法是**添加**命令，一个 Dockerfile 命令。源和目的构成了**添加**命令成功运行的两个参数。它使用自己的文件系统将文件或数据从源容器复制到目标容器。

**结论:-**

Docker 肯定会公开更好的方法来发展容器服务，以支持更广泛的部署平台，社区肯定会围绕这些平台建立服务层。Docker 设定的路径是核心能力的开发、交叉服务管理和容器之间的消息传递。我们试图通过这篇文章证明，数据可以在另一个 Docker 容器中复制，因此可以在任何灾难和恢复情况下使用。Docker 提供了轻松区分容器的能力。它改进了调试、环境的快速共享和快速部署。Docker 能够将容器直接从 Dev 或 QA 放到 AWS 上。用户可以通过卷容器共享数据，将主机目录安装到容器，甚至可以将数据从容器导出到归档文件，因此非常灵活。