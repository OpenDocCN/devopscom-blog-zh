# DevOps 聊天:用 ForAllSecure 进行故意伤害测试

> 原文:[https://devo PS . com/devo PS-chat-mayhem-testing-with-for all secure/](https://devops.com/devops-chat-mayhem-testing-with-forallsecure/)

安全的软件依赖于人们在漏洞被利用之前找到漏洞并部署修补程序。这导致了一个致力于寻找新漏洞的安全研究人员和漏洞奖金的世界。

尽管安全研究人员兢兢业业，但仍有大量软件存在，等待着有人找到并利用下一个安全漏洞来获利或进行邪恶的使用。随着自动驾驶汽车的出现，是否有一种自动解决方案来发现和修复软件漏洞？

DARPA 网络大挑战赛冠军“Mayhem”参赛，它是由卡内基梅隆大学的一组研究人员创建的，他们从安全初创公司 AllSecure 剥离出来。他们有一个 BHAG(大胆大胆的大目标)。“我们的愿景是检查世界上的软件是否存在可利用的漏洞，以便在攻击者利用它们来入侵计算机之前修复它们。”Mayhem 已经从夺旗竞赛发展到观察和发现国防部软件中的漏洞，并且正在向公司系统发展。

在这一集的 DevOps 聊天中，我们与 All Secure 的联合创始人兼首席执行官、CMU 大学教授 David Brumley 讨论了 Mayhem 背后的技术，它如何在软件执行时观察软件，并注入更改以实现和观察新的和潜在的可利用行为。更多关于 Mayhem 的信息也可以在[www.forallsecure.com](https://gate.sc?url=http%3A%2F%2Fwww.forallsecure.com&token=b0f0a5-1-1562858008711 "http://www.forallsecure.com")获得。

像往常一样，下面是流媒体音频，然后是我们的谈话记录。

[https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/636314775&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true](https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/636314775&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true)

## 副本

米奇·阿什利:大家好，我是米奇·阿什利和 DevOps.com，您正在收听的是另一个 DevOps 聊天播客。今天，我邀请到了 ForAllSecure 的首席执行官 David Brumley。大卫也是 CMU 大学的教授。他目前正在休假。我们今天谈论的话题叫做故意伤害行为测试——它可以追溯到大卫在 CMU 的工作。大卫，欢迎来到 DevOps 聊天室。

大卫·布鲁姆利:我很高兴来到这里。

阿什莉:太好了，我们很高兴你能加入播客。你能从更全面地介绍你自己开始吗——你的背景，也许是一些研究，以及这些研究是如何让你形成 AllSecure 的？

是的，绝对是。当我大学毕业时，我是一名计算机安全官员。我的工作是追踪斯坦福网络上的入侵，并试图帮助人们修复它们。当时，我对我们总是在攻击者后面的想法感到非常沮丧，我不能首先找到漏洞或部署修复程序。

实际上，我回到了研究生院，获得了博士学位，并从 2003 年开始致力于研究如何在攻击者之前找到漏洞，同样重要的是，我们如何修复漏洞？因为这不仅仅是找到漏洞，而是我们能多快找到漏洞。

我一直致力于此，我是卡内基梅隆大学的终身教授，在过去的三年里，我一直致力于将其商业化。

阿什利:优秀。嗯，一个企业家和一个教授，很高兴看到你的研究让你把它推向市场。太令人兴奋了。告诉我们，什么是故意伤害？什么是故意伤害或行为测试？

是的，Mayhem 所做的，我们称之为行为测试。因此，行为测试就是在应用程序执行时观察它，并从执行中学习，然后尝试提出一个新的输入，使应用程序做一些不同的事情。你一次又一次，每秒钟做几百次，带着这样的想法，如果你可以学习一个程序的行为，你可以开始驱动它到新的行为，你会，一，为程序提出一个测试套件，这对 DevOps 部分和你如何快速得到东西很重要，第二，像漏洞和触发漏洞的利用这样的事情只是触发一个特定的行为。因此，您可以自动生成触发这些的输入。在某一点上，人们说我们正在利用这项技术自动生成漏洞。

**阿什利:**有意思。我很确定这不是一回事，但这听起来像是一个更深思熟虑和更有学问的方法，我们知道这是来自网飞的混沌猴子的混沌测试，等等。但是您实际上是在挑选特定的行为，构建应用程序的概要文件，然后寻找可以测试的新行为？

Brumley: 这就是我们正在做的，所以，真的有两种技术人们可能听说过。一个叫 fuzzing。所以，模糊化就是一次又一次地运行应用程序。它使用试探法来挑选这些输入，我们所做的事情之一是在应用程序运行时监控它，并通知模糊器如何提出新的输入，以获得不同的行为。

我们做第二件事是，我们真的从令人惊讶的形式验证中吸取了一页。所以，形式验证是试图证明一个程序是安全的。我们试图做的是使用同样的技术来证明一个程序在哪里是不安全的，我们的证明创建了一个触发不安全属性的输入。

因此，我们使用这两种技术——模糊化、符号执行和其他一些技术，以及一种组合方法来尝试提出可利用的行为。

**阿什利:**有意思。您是在生产环境中、测试环境中，还是在两者中都这样做？你如何处理这个问题？

**Brumley:** 对于一个产品，我们总是在测试中做。我们认为在测试中使用这些技术非常重要，这样您就可以在攻击者之前发现它们。我们在生产中做了一些模拟。我们参与的事情之一是，DARPA 有一个大型的自主网络大挑战。因此，我们在那里部署了它，但我们认为市场将处于测试环境中。

阿什利:嗯。这肯定是有意义的——在那里更有意义。多说一点关于模糊化和它是如何工作的。是软件产生了变异，还是你从你所学的东西中引入了变异？

**Brumley:** 我们引入了变体，所以我们的想法是，一个程序的漏洞只是一个输入。

阿什利:嗯。

你知道，测试用例只是输入。所以，你在一个输入上运行程序，然后观察它是如何执行的。就像，你看到它执行这个系统调用，那个系统调用。它覆盖了这些分支。你用它来学习新的行为或猜测新的输入。然后模糊器将使用启发式算法来挑选新的输入，认为它应该触发新的行为。

**Ashley:** 退一步说，你已经谈了一些关于 Mayhem 及其背后的技术。你走出 CMU 建立了这家公司，为了所有的安全。你是怎么开始的？您是否与特定的私营部门或政府部门合作？听起来政府方面也可能对此感兴趣。

是的，正如我所说，我们是从真正参与 DARPA 项目开始的。所以，他们时常会面临巨大的挑战。一个是自动驾驶汽车竞赛。这就像是一辆参加计算机安全竞赛的自动驾驶汽车。我们赢了，这给了我们第一笔 200 万美元的资金，就像是来自政府的种子基金。

**阿什利:**太棒了！哇，太棒了。

是的。因此，我们一直在努力将它引入政府，因此它现在几乎被用于每一个服务和集成电路中，以试图寻找武器平台和软件中的漏洞，政府可能会使用这些漏洞来试图在攻击者能够侵入之前修复它。

阿什利:嗯。

大约，哦，六个月前，我们去 NEA 筹集资金，帮助它从一个政府工具转变为企业部门的工具。

阿什利:嗯，那么你也开始和私营部门合作了？

是的，我们正在努力——开始与私营部门合作。这真的是两者之间的一个有趣的区别。

阿什莉:哦，有很大的不同。*【笑声】*是的。突出你所看到的不同之处。我对这两者都有一些经验。

**Brumley:** 嗯，我认为私营部门更难重视发现漏洞并快速修复，而在国防部，这真的很容易。那次任务没有成功，这是件大事。

阿什利:嗯。

所以，我认为这是一个不同之处。我认为走向市场的第二个区别是，在国防部，他们非常关心检查遗留系统，因为他们仍然必须维护它们。如果你仔细想想，许多交通工具、飞机、火车——诸如此类的东西。在企业中，他们只关心最近两三年开发的东西。所以，它们只是生命周期中不同部分的产品。

阿什莉:是啊，有意思。政府部门也有许多不同层次的参与方——承包商、分包商、主要供应商等等。所以，你要和作为政府团队一部分的许多公司打交道。

是的，与政府合作绝对是一件苦差事，直到你进入最佳状态，你才会意识到许多你认为是障碍的东西，实际上只是为了保护纳税人免受滥用而设立的法规。因此，这需要很长时间，大约需要九个月的时间才能在政府中真正从头开始。但是一旦你开始这种循环，它就会很快向前发展。

阿什利:是的，那也是我的经历。这是一项投资，但一旦你开始做，就很棒。

是的。

Ashley: 那么，请简单谈谈你在产品生命周期中的位置？你在市场上有产品吗？Mayhem 公开了吗？你是阿尔法还是贝塔？给我们一个概念。

是的。因此，在国防部内部，我们有从今年 7 月开始可以购买的 Mayhem 所以，非常接近。因此，我们已经安装了一些测试版，人们很高兴，我们将很快切换到全面可用。

阿什利:嗯。

**Brumley:** 在商业市场上，我们发展得稍微慢一点，因为我已经讨论过其中的一些差异。他们使用不同的应用程序堆栈，他们经常关注比旧软件更新的软件，他们经常使用不同的语言。

所以，我们正在寻找设计合作伙伴。想搞破坏的人，在国防部工作的，在像航空航天这样的地方工作的，看看是否对他们有用，弄清楚我们需要做什么使它真正适合。

阿什利:嗯。所以，你花了很多时间与客户和潜在客户在一起，真正了解商业部门正在寻找什么或可以从中受益。

我们正在了解他们在寻找什么。正如你所说，我们也在努力理解，当你走向市场时，在国防部，谁是买家，谁是用户，这很有意思，我们也在努力理解商业领域的情况。我对 DevSecOps 很感兴趣，几乎总是安全团队是买家，而开发团队是用户。

阿什利:嗯。是啊，没错。这是一个有趣的动态，你知道，DevSecOps 对话，我们通过 DevOps.com 的许多活动帮助促成了这一对话。

我很想听一听，你说你还没有在商业或私营部门上市，但你正在与一些公司合作？这是真的吗？

**布鲁姆雷:**那是。因此，我们与一家制造飞机的大型航空供应商合作。对此我不能说太多。我们已经能够真正帮助他们找到他们使用的一些软件中的一些缺陷，并为他们建立测试套件，以便当开发人员推出修复程序时，可以与财富 100 强公司和一些 IT 基础设施人员合作，对其进行更严格的测试。

阿什利:嗯。例如，我可以看到数据中心提供商是另一个真正受益的地方。

哦，当然可以。任何拥有像 web 服务器这样价值极高的东西的人，如果它遭到破坏，您的整个企业都将处于危险之中。

Ashley: 我很想听听你对如何将它融入 DevOps 或 DevSecOps 模式或周期的想法。这是怎么发生的？你把它建在哪里？

是的，所以，从我们现在在许多开发人员的研究中可以看到，这确实是一个原始阶段，人们希望在部署软件之前运行一次扫描。对我来说，这太疯狂了。我不知道有哪个攻击者会运行一个商业产品并进行扫描，然后说，“这是新的零日”或“哦，最好不要在那之后，扫描没问题。”

相反，他们所做的是，他们总是试图闯入那个软件。他们总是试图从失败中吸取教训，提出攻击并取得成功。所以，大混乱就是这样。所以，这个想法是，它更多的是异步测试。作为 DevOps 周期的一部分，你需要确保你没有使用旧版本的库。但是接下来，你要启动一个进程，在产品的生命周期内，尝试在后台破解它。

我认为这确实是一种概念上的转变，我们认为需要做的是停止将安全视为一次扫描，并实际上期望它能够工作，这是一种始终在后台进行的扫描。

**Ashley:** 我会像我们做测试一样改变，我们已经进入持续改进，持续测试对 DevSecOps 也是如此，它可能一直在产品和测试环境的多个版本上运行。

**Brumley:** 绝对，以及所有的从属。如果你看看谷歌，谷歌在谷歌 Chrome 上运行 fuzzing，这是我之前提到的技术之一。在过去的三年里，他们发现了 12000 个新的漏洞，每个都有一个测试用例，所以零误报。这使他们能够领先于攻击者，因为他们可以通过自动化的、始终在线的基础设施快速找到这些缺陷，我曾与试图参与漏洞奖金的人交谈过。当他们报告的时候，已经修好了。

阿什利:嗯。我的意思是，坏人不也在模糊他们自己吗，所以如果你不是，你就处于不利地位？

绝对是。我认识的每一个顶级黑客都广泛使用模糊化作为他们的技术之一。我是说，这是假设你做了一些基本的事情，比如，这个人忘记设置密码了吗？总是先检查一下，对吧？但是在那之后，在那基础水平之后，你要做模糊，特别是在高价值目标之后。

阿什利:谈一谈你认为接下来会发生什么。你在测试商业市场，你在联邦市场投入了很多。根据产品路线图，接下来会发生什么？

**Brumley:** 我们在产品路线图方面的下一个问题是，我们如何结束从发现漏洞到修复的生命周期。因此，一些应用程序网站公司，他们想做的是总是添加下一个语言支持，以便他们可以支持越来越多的语言。

阿什利:嗯。

对我们来说，我们真的在关注 C、C++、Java、Python——基础设施使用的核心语言。我们希望能够用这些语言进行深度分析，然后能够帮助自动提出修复建议，实际上，对于 DARPA，我们证明了计算机可以自动打补丁。因此，它可以自动修补二进制程序，它可以评估该修补程序是否会产生任何业务影响，如果没有，就将其字段化。所以，这才是我们真正要做的，我们要一种语言一种语言地去做，而不是试图一次涵盖所有的语言。

**阿什利:**有意思。就你首先关注的语言而言，你的首选是什么？

**Brumley:** 所以，我们一开始最上面的是 C 和 C++。这让人们有点惊讶，因为这是一种更古老的语言。我可以告诉你我们为什么选它。

阿什莉:好的。

**Brumley:** 我们选择它的原因是，无论你选择哪种语言，你都将调用 C 和 C++代码。在爪哇，你有 JNI 电话。在 Python 中，你知道，作为 TensorFlow 的一部分，如果你在做机器语言，当他们想要性能时，每个人都去 C/C++或编译语言。

因此，如果您想全面分析这些应用程序，即使是 Java 或 Python，您也必须能够分析这些组件。所以，我们在努力向上爬。

阿什利:是的，我是想说，听起来你正在深入研究脚本语言。

绝对是。第二个原因是，当你看到真正关键的基础设施时，它仍然主要是用 C 和 C++开发的。所以，你知道，我，像许多人一样，可能已经建立了一个 Flask 或 Python 网站，它做起来真的很快，它是在线的——你肯定不希望它被黑客攻击。但是当你开始谈论一辆汽车、一架飞机或一个发电厂时，这些也在 C/C++中。所以，仅仅从安全的角度来看，你必须覆盖这些。

**阿什利:**有意思。你是否预见到，展望未来—我不是要求你正式宣布任何事情，但是你是否看到你可能与补丁管理公司或漏洞扫描公司合作，作为他们的补充？这会成为取代他们的潜在因素吗？你如何看待未来的发展？

是的，我认为检测已知漏洞的人是对我们的补充。所以，我认为，实际上有两种类型的安全公司。有些人发现新的漏洞，有些人检查旧的漏洞。

例如，你有 Tenable，它是一个网络扫描器，可以寻找已知的漏洞。你有软件组件分析，它寻找已知的易受攻击的库版本和其他东西，对吗？从某种意义上来说，这些是模式匹配器。

我们不是那种公司。那是你会与之合作的人。我们正在做的是，我们正在寻找新的漏洞。因此，这更像是典型的 SaaS 或 DaaS 式的解决方案。

我们寻求合作的另一类人是补丁管理人员。因此，我们可以做的一件很酷的事情是，当我们发现一个漏洞时，我们也会自动构建一个测试套件，这只是过程的一部分。因此，当有补丁时，我们可以重放它，我们可以告诉你这样的事情，“嘿，有任何以前通过的测试用例停止工作了吗？性能下降了吗？”当然，还有修复漏洞的地方。

阿什利:我肯定能看到合作关系。如果你必须描绘一个成功的未来，无论是对你还是对所有人来说，那会是什么？

**布鲁姆利:** 我认为我们真的是被我们想要自动保护和检查世界软件的愿景所驱使。所以，我们想结束这个循环，让它自主。实际上，我们在这样做的时候，会做出非常谨慎的设计决定。

所以，我想很多人都在谈论，你知道，大型创业公司，价值数十亿美元的企业——这并不是我们的真正目标。我们的目标是，我们希望从我们检测到漏洞到有一个补丁经过测试并准备好投入使用的时间只需几秒钟。对我们来说，这就是成功。

阿什利:几十亿会在后面，对吗？*【笑声】*前提是你对核心问题充满热情。

布鲁姆利:我想是的。因为这个问题，我们在讨论 DevSecOps。就像 DevSecOps 一样，如果我们回到现实世界，每个系统管理员都会面临 DevSecOps 面临的问题。在硅谷，我们会想到 SREs 和 DevSecOps，但在这个庞大的国家，到处都是系统管理员，他们想知道，“如果我更新它，它会崩溃吗？我需要更新吗？”为这些人解决这些问题对我们来说很重要。

阿什利:你会在网上或一些会议上进行任何演示吗？有办法让人们看到这一点吗？

是的，所以我们会在黑帽公司展示，我们很乐意在那里展示。我们将有一个 T2 展位和一个 T4 展位。我们也有一些在线视频。如果你想看完全自主的，在它辉煌的系统中，肯定也有 DARPA 网络大挑战的视频。

**阿什利:**回到最初的挑战。

这是最初的设想。我的意思是，当我与人们谈论这项技术时，真正让他们眼前一亮的不是找到安全漏洞，而是没有足够的人来做这项工作。通过自主并专注于该价值主张，您实际上专注于难点，即我如何做没有足够高技能人员来做的事情。

阿什莉:好吧，我为你所做的一切喝彩。你知道，还有另一个扫描器，另一个反病毒的东西。很高兴看到人们真的在做一些创新，从不同的角度思考问题，并试图以更系统的方式解决问题，这是我看到的你正在做的事情之一。这不仅仅是，我们试图测试这些行为，而且也是在这个生态系统中，补丁是如何发生的，事情可以动态地，自动地发生。

绝对是。我的意思是，我们有许多客户希望我们支持 10 种不同的语言，但是世界上没有一种产品可以添加 10 种语言来支持并且非常擅长每一种语言。对我们来说，我们的主要价值主张是，对于我们所做的一切，我们能做到零误报吗？我们能在报告之前确保它是可操作的吗？

**阿什利:**牛逼！嗯，我们— *【笑声】*在这些播客中，时间总是过得飞快。在我们结束之前，你有什么想和我们分享的临别感想吗？

**Brumley:** 嗯，谢谢你邀请我，正如我所说，我们很乐意在黑帽 2019 上与你交谈。

阿什利:太好了，太好了。嗯，我也会去，所以我们会在那里见面。随着事情的发展，我们希望您能在未来的播客中听到更多关于您和整个安全的事情进展情况。

非常感谢。祝你愉快。

阿什利:好了，又一个 DevOps 聊天播客飞过来了，一如既往。我要感谢 ForAllSecure 的首席执行官 David Brumley 今天参加我们的会议。谢谢你，大卫。

谢谢你。

阿什利:我要感谢你，感谢你，我们的听众，当然，感谢你加入我们。我是 DevOps.com[的米奇·阿什利。您已经听到了另一个 DevOps 聊天。谢谢你今天加入我们。](http://DevOps.com)

*— [米切尔·阿什利](https://devops.com/author/mitchellashley/)*