# 在版本控制工具之间迁移代码的步骤

> 原文：<https://devops.com/steps-for-migrating-code-between-version-control-tools/>

如果你没有准备好，代码迁移可能会很棘手。按照以下步骤进行无忧迁移。

几乎所有源代码都包含某种格式的敏感信息，无论是与配置相关的信息(如数据库凭证)还是关于 web 应用程序如何运行的信息(如 web 模板)。

如果此类信息被泄露，攻击者可能会利用这些信息来发现逻辑缺陷，并升级为一系列攻击。这些攻击包括 SQL 注入、数据库接管、跨站点脚本、远程代码执行，有时还包括分布式拒绝服务。

为了实现进行无风险和系统化迁移的解决方案，我们需要为代码迁移过程规划三个阶段:预迁移、迁移和后迁移。

### **预迁移期间的主要考虑事项**

*   许可成本
*   管理费用
*   开发人员生产力
*   数据的安全性
*   团队培训
*   总拥有成本
*   了解所有与应用生命周期管理相关的工具
*   敏捷采用策略和 CI 实践
*   团队结构——分布式还是协同定位？
*   文件类型–您有大型二进制文件吗？
*   需要文件锁吗？
*   用户拥有获取和推送的适当权限
*   构建是成功的，并且所有的测试都通过了

### **迁移期间的主要考虑事项或挑战**

*   测试环境
*   容量规划
*   计算容量
*   对当前版本控制系统进行基准测试
*   网络连接
*   源服务器和目标服务器之间的访问
*   负载测试
*   访问控制
*   计划在没有人需要登记的周末迁移

### **迁移后的主要考虑事项** 

*   数据完整性验证
*   数据大小检查
*   自动化验收测试和报告
*   依赖关系完好无损，构建不会中断
*   文件和文件夹之间的链接没有断开
*   负载测试
*   备份和同步作业

## 从集中式版本控制转移到分布式版本控制

将代码从集中式版本控制系统(如 Apache Subversion (SVN ))迁移到分布式版本控制系统(如 GIT)时，需要采取以下步骤:

*   评估你计划使用的工具和方法
    *   构建和测试
    *   代码审查
    *   发布管理
*   为 GIT 选择分支策略
    *   长期特征分支
    *   短命特征分支
    *   错误修复分支
    *   发展处

参考:[https://guides.github.com/introduction/flow/index.html](https://guides.github.com/introduction/flow/index.html)

[https://nvie.com/posts/a-successful-git-branching-model/](https://nvie.com/posts/a-successful-git-branching-model/)

*   决定是否要迁移历史记录；如果是，那么确定如何实现这一点—您可能需要另一个第三方工具来解决您的任务。
    *   市场上有许多工具可以将所有分支的整个历史从一个集中的工具迁移到 GIT。
    *   几乎所有的版本控制系统都会收集文件在版本之间是如何变化的，包括重命名、合并和回滚。GIT 版本控制工具将版本存储为整个存储库的快照。

*   迁移后，将旧版本控制系统保留一段时间。
    *   在迁移期间和之后，开发人员有时需要访问旧版本控制系统中的历史记录，所以您不能在完成迁移后就关闭旧系统。
    *   GIT 中应该提交一些文本文件，解释 GIT 分支是如何/何时从旧系统中迁移的，以及所有分支都迁移了什么。

*   从源代码管理中移除二进制文件和可执行文件。
    *   您应该避免将大型二进制文件提交给存储库。一旦它们被提交到存储库中，它们将保留在存储库历史和每个即将到来的克隆中。
    *   迁移到 Git 让您有机会从代码库中删除这些二进制文件，转而使用包管理系统。

*   向您的团队传授 GIT 中使用的概念和实践的知识。
    *   开发人员必须理解 GIT 存储是如何变化的，提交是如何形成开发历史的，以及 Git 中的所有东西是如何工作的。
    *   确定培训材料。
*   执行到 GIT 的实际迁移。

### **建议:**

*   保留以下类型的文件:代码文件、版本化资产(如图形)和大型配置文件。
*   删除以下类型的文件:数据库转储、日志文件。
*   使用漏洞检查工具。

## **结论**

通过遵循上述关键步骤，您可以进行系统的、无风险的迁移。规划，然后行动，是成功的代码迁移过程的关键。

[你妈妈的东西](https://devops.com/author/amit-anan/)