# 开发人员、数据库和数据库管理员

> 原文:[https://devops.com/of-devops-databases-and-dbas/](https://devops.com/of-devops-databases-and-dbas/)

如果您在 DevOps 团队中寻找额外的效率，您可能会在数据库管理领域找到它们。DevOps 的出现并没有减少传统上与数据库管理员(DBA)相关的职责。相反，这些职责中的一些已经在团队中重新分配了——有时是明确的，但更多时候是隐含的。例如，站点可靠性工程师(SREs)甚至全栈工程师已经承担了许多曾经属于 DBA 的职责。在这些角色中，数据库管理员通常掌握着通过一致性、可重复性和运营效率来开启效率新维度的钥匙。

输入“DevOps DBA”这种角色的融合很有意义。与应用程序开发一样，合理的假设是，设计平台和编写数据库代码的人也应该在部署和操作平台方面发挥作用。数据库管理员管理数据基础架构的方方面面，从容量规划、安装、配置、数据库设计和迁移，到性能监控、安全和故障排除以及备份和数据恢复等操作职责。因此，数据库管理员维护现有工作负载的职责有时会与为下一代应用程序规划和调配工作负载的需求相冲突。协调这些责任可以加速整个软件开发生命周期。

在运营方面，数据库管理员负责监控峰值应用程序工作负载下的数据库行为，确保它们按照预期运行，并与运营部门合作解决瓶颈和停机问题。他们管理数据访问和平台的整体安全性。他们还执行支持应用程序的发布活动，并对该过程或日常操作中出现的任何错误进行故障排除。

考虑到所有这些，我们可以提出一个 DevOps DBA 清单:

*   建立关于数据服务的微服务计划。
*   设置集成环境，并为新项目提供数据库。
*   动态地从一个筒仓提取、转换和加载数据到另一个筒仓，采用 TTL 策略来减少数据或丰富一些数据。
*   持续监控和优化性能:争取低且一致的尾部延迟，以及应用程序和数据库的联合视图。
*   专家区:自动化横向扩展和自动化模式更改。
*   备份和恢复:备份到冷存储和恢复。
*   使用多种数据中心灾难恢复功能规划停机时间和高可用性。

## **devo PS 友好数据库的特征**

我们已经了解了应用于开发运维的一些 DBA 职责。现在我们将讨论数据库技术的一些技术方面，这些技术方面可以帮助或阻碍这种混合角色。为了跟上应用程序在生命周期阶段的迁移，有许多组织和团队文化的挑战需要解决。同样重要的是要记住，并非所有的数据库都是平等的——有些数据库比其他数据库更容易加入 DevOps 工具链。

要使数据库对开发操作系统友好，需要多种元素的组合。最终目标是通过降低风险来最小化对变化的恐惧。关系数据库并不特别符合现代软件开发实践，因为模式的改变可能很耗时。相比之下，NoSQL 数据库被证明对生命周期更友好，因为它们在应用程序开发期间没有强加严格的模式管理。然而，随着时间的推移，这种自由放任的数据建模方法可能会带来麻烦。理想的数据库在严格的模式实施和分散的数据模型更改之间取得了平衡。

DevOps 友好数据库的一个关键考虑因素是操作的简单性。传统的 SQL 数据库，如 Postgres 和 MySQL，很容易理解，也有很多支持，但是扩展起来很困难，成本也很高。NoSQL 数据库的兴起使得更大的数据集能够以比关系数据库更灵活和可伸缩的方式进行管理。但是，即使在 NoSQL 的数据库中，也有一些显著的差异。第一代 NoSQL 数据库——尤其是被广泛采用的 Apache Cassandra——可能会以自己的方式带来巨大的操作负担。

此外，现代云原生数据库有其局限性。它们对运营商来说可能是不透明的，并且已知会不可预测地放大和缩小。操作员通常缺乏对数据集分布的可见性。在许多情况下，云数据库的增长速度与数据库支持的工作负载不成比例。数据库实例会激增到开发运维团队不得不处理“节点蔓延”的地步你可以把这个问题看作是弹性伸缩的虚假承诺，其中增加流量的解决方案是，“只需增加更多的节点！”大量的小节点不一定比几个大节点好。(关于这方面的更多信息，我鼓励你观看这个关于[myth busting the advantages of small nodes](http://go.scylladb.com/wbn-big-nodes-vs-small-nodes-registration.html)的演讲。)无论如何，最大的总成本不一定是容量，尽管容量可能很大。事实证明，最大的成本往往是管理所有这些节点。

过度小心可能导致节点蔓延；过度配置是应对扩展挑战的自然反应。寻找一种能够高效、自主地使用资源的数据库架构，最好是能够根据不同的工作负载动态地自我调整的架构。自治数据库监控操作并调整内部处理器以达到平衡。自治数据库不仅大大减轻了管理负担，还意味着 DevOps 始终可以将数据库推到底层硬件资源的极限，从而确保可用性和 SLA 合规性。这再次减少了为特定应用程序定制数据库配置和拓扑的需要。

灵活的部署选项对于 DevOps 也很重要。谁知道 12 或 18 个月后你的足迹会是什么样子？数据库需要完全不知道它部署在什么拓扑结构上，是内部部署、云平台还是跨本地和云环境的混合配置。在一些部署中，可能需要数据库同时跨两个不同的商业云平台运行，例如 Azure 和 AWS。考虑这一点有几个原因:第一个也是最明显的是最大化可用性。地理上的中断比您想象的更常见。第二个优势是使用混合框架的业务的财务优势，因为它防止了基础架构即服务(IaaS)供应商锁定，同时还为内部费用提供了税收优惠。具有前瞻性思维的 DevOps 团队在设计当今的数据平台时会将这些潜在需求牢记在心。

## **结论**

应用程序开发和 IT 基础架构的趋势正在推动传统数据库管理员进入开发运维，而开发运维人员(包括 sre 和全栈工程师)通常承担传统上与数据库管理员相关的职责。通过采用强调操作简单性、易扩展性和部署灵活性的数据基础架构，IT 组织可以更轻松地协调这些角色，同时构建云友好型基础架构，将开发运维工具链扩展到数据库。

——[eyal gut child](https://devops.com/author/eyal-gutkind/)