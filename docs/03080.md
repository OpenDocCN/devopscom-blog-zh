# 日志管理:开发运维团队需要知道什么

> 原文：<https://devops.com/log-management-what-devops-teams-need-to-know/>

这十年最重要的转变之一是分布式系统中互联数据的兴起。这种爆炸式增长不仅引发了重新思考云和全球 IT 战略的需求，还扰乱了传统的开发、DevOps 和 ITOps 实践。这些变化促使技术专业人员需要更高速度的功能和产品开发，以及更具响应性的支持请求。这些新的需求促使团队评估新的工具和敏捷流程，以帮助支持竞争激烈的现代企业的需求。

无论您所在团队的变化速度如何，基础设施监控等基本功能对于生产应用的运行至关重要。在这种新的业务发展速度下，可观察性等概念对于减少用户中断的成功部署非常重要，不仅在生产中如此，在持续集成/持续交付(CI/CD)管道的早期阶段也是如此。作为“左移”的一部分，CI/CD 管道中的日志和事件管理使开发人员能够在应用程序发布到生产环境之前监控和观察应用程序的行为。虽然有些人可能会说这在开发环境中增加了额外的过程层、时间、努力和尽职调查，但它可以帮助您发展您组织的基本软件开发行为，同时减少从后期部署到生产的可预防问题。它可以创建更流畅、更无缝的用户体验，并减少在应用程序投入生产和大规模使用后救火或重新构建解决方案的需要。

## **设置测试和开发阶段**

快速发展的技术环境增加了对跨分布式系统和容器的日志管理和可观察性的需求。应用程序和服务创建方式的变化、跨全球日志即服务(LaaS)提供商组合部署应用程序的能力、容器的普及性和易变的生命周期，以及使用各种开发语言构建服务的能力，增加了跨连接系统收集、监控和跟踪数据点的需求，这些数据点提供了面向最终用户的重要价值。

传统上，许多人认为日志管理是一项单调乏味的任务，因为新服务器的每个实例都需要您在该服务器本地的日志中运行搜索命令。当每一个超过 20 台服务器的集群都在几分钟内建立起来，并且每个应用程序都有独立的日志格式时，这种方法是不可伸缩的。在这个场景中，您需要跨多个系统运行 20 个单独的搜索，比较位于不同时区的服务器的时间戳，等等。随着成本的降低以及容器和虚拟系统的普及，随着业务的发展，典型组织中运行的系统数量呈指数级增长。

除了增加虚拟系统和容器的使用，独立的 scrum 开发团队可以使用最适合他们所生产的服务的技术进行并行构建，同时还可以共享构建、准备和生产的环境。通过这些分布式服务，聚合日志系统可以快速确定调试其应用程序的错误、异常或性能瓶颈的根本原因。日志聚集系统可以减少“个性化”的元素，这种元素在开发人员使用不同技术和各种日志格式时经常发生，还可以通过过滤掉延迟团队找到问题根源的信息来减少干扰。当一个开发人员不得不理解另一个开发人员的非标准化但共享的工作量时，这可能会导致混乱或降低生产率。

成本的降低、协作的增加和容器服务的普及共同推动了虚拟环境和容器的增长，通常需要在测试和开发环境中创建更多日志，这可能会迫使组织进行转变，以实现跨基础架构的完全可观察性。

## **可观察性的三大支柱**

企业正朝着采用这些原则(可观察性的三大支柱)的方向转变，并使用三管齐下的监控方法，从几个有利位置获取数据，以描绘更准确、更直观的整体健康和稳定性视图:

1.  **外部监控:**这方面的一个例子是对您的内部和外部应用程序和网站进行健康检查，以查看您的用户的“数字体验”。
2.  **指标和分布式跟踪:**这使您能够跟踪跨系统/容器分布的应用程序之间的通信，以识别应用程序中的错误和异常，并快速解决延迟问题。
3.  **事件和日志:**数据有助于提供关于事件的上下文信息，当与来自前两个支柱的信息结合时，使您能够识别代码中的问题。

上述类型的信息对于 DevOps 提供有弹性的服务至关重要。将应用程序、系统和基础架构事件与[外部监控和指标收集](https://www.appoptics.com/custom-metrics-monitoring)一起记录到日志中正迅速成为标准。借助强大的日志解析功能(如可从 web 浏览器访问的 live-tail search)以及将日志洞察与附加的健康指标可视化配对的能力，只需很少的努力，日志数据的真正价值就显而易见了。

站点可靠性工程(SRE)是另一个发生重大变化的领域。ITOps 总是被要求对火做出反应，从一个火场跑到另一个火场。从 ITOps 到 DevOps 再到 SRE 的发展迫使不同类型的数据在 CI/CD 管道中很早就被使用，并使 SRE 团队能够在项目开始时而不是在后期阶段或发布时参与架构讨论。SRE 从一开始就更多地参与监控、理解用于开发应用服务和构建自动化、高可用性和断路器模式的开发和架构原则。

这种方法使团队变得积极主动，而不是被动反应。它让我们的团队(保持我们的业务成功运行，让我们的客户喜欢我们的工作)能够专注于可伸缩性、弹性和复原力。我们不是在生产中对系统进行故障排除，而是自动扩展和替换，以最大限度地减少中断，并在可能的情况下离线调查该事件。

## **最佳实践**

考虑到支持业务需求所需的应用程序开发速度不断加快、容器化应用程序和虚拟环境的普及以及可观察性新学科的出现(由于成本降低和可靠性提高)，日志和事件管理已成为所有参与构建、支持甚至使用任务关键型应用程序的人员的一个重要方面。它正在向一个定义好的区域移动，在这里应该划分日志，并且应该定义访问控制:

1.  **划分日志:**作为最佳实践至关重要，这样我们可以区分开发、试运行和生产环境，并根据实际分组隔离日志。使用日志聚合服务可以为您提供一致的体验和跨所有环境的一组通用功能。
2.  **访问控制:**另一个应该更广泛实施的最佳实践；例如，如果开发人员大约 95%的工作发生在到达生产环境之前，他们就不需要访问所有的生产日志。换句话说，即使技术专家正在努力“去孤岛化”日志管理，我们仍然希望孤岛化访问控制和管理可见性。这也有助于确保个人身份数据(PII)不会暴露给任何不应该暴露的人。

## **展望日志管理的未来**

随着形势的发展和最佳实践变得更加明确，我们应该期待振兴战略，提高对利用基本/免费监控的传统场景的期望。虽然可观察性的支柱在 ITOps 和 DevOps 社区中得到更广泛的利用，但我们将能够更有效地从面向最终用户的事件(例如，跨分布式系统跟踪的应用程序错误)直接转移到日志中，以找到导致问题的特定错误。我们将能够看到日志和其他定制指标之间更大的相关性，以及这些技术在生产环境之外更广泛的应用。

DevOps 团队需要一个直观的事件和日志管理系统，它与我们一样孤立。日志管理系统不再仅仅局限于一个内部存储系统或一个虚拟环境；它们需要适应当今和未来工作越来越多地被完成的现实。

基思·库奇勒