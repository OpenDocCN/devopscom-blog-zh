# 为开发运维的采用选择正确的指标

> 原文：<https://devops.com/choosing-the-right-metrics-for-devops-adoption/>

DevOps 的采用率近年来直线上升。它对传统开发平台的影响早已被[](https://cloud.google.com/devops/state-of-devops)充分证明，但在最近几年，它也开始影响低代码平台。在最近对 Salesforce DevOps 状态的 [调查中，Gearset 发现 69%的团队已经在使用源代码控制，另外 20%计划今年开始。此外，45%的公司已经实施了 CI/CD，这一数字今年将增长 33%。然而，对于高绩效的开发团队来说，要认识到 DevOps 的好处并努力进一步采用 DevOps，他们必须使用正确的 KPI。](https://gearset.com/resources/devops-report/)

虽然采用“大爆炸”方法来采用 DevOps 可能很有诱惑力，但是当团队一次迈出一步，每个阶段都建立在最后一个阶段上时，他们会看到更多的成功。

也就是说，要体验采用 DevOps 的全部投资回报，将旅程进行到底仍然至关重要。对于开始采用 DevOps 的团队来说，中途停止或者更糟的是，失去动力并完全停止过程并不罕见。DevOps 的采用是一个充满技术和文化变革的过程，其失败的最常见原因之一是以牺牲文化为代价强调技术。

解决这个问题的最好方法是鼓励团队采取产品思维，并将其应用到 DevOps 的采用中。简而言之，不要让你的团队承担“采用 CI”的任务，而是让他们解决一个特定的业务问题。例如，“当我们完成一个故事的工作时，它需要几个星期才能发布！”这听起来是显而易见的，但是将团队的注意力集中在业务影响上，而不是个人任务上，可以确保正在发生的工作和期望的业务结果之间有直接的关联。这是采用 DevOps 心态的关键，而不是采用纯粹的技术和敷衍的方法来采用 DevOps。

团队能够推动这种类型的变化并避免常见的失败原因的关键事情之一是在开发运维之旅的每个阶段使用正确的指标。

有许多公认的衡量开发运维成功的指标，包括:

*   部署时间
*   变更失败率
*   发布节奏
*   研制周期
*   恢复时间

这些指标有两个目的。它们是记录良好的基准性能指标，可以帮助团队关注他们最大的问题领域。这些可衡量的结果证明了 DevOps 的业务优势，如敏捷性、改进的协作、更高质量的系统和弹性，更不用说显著的时间和成本节约以及效率。

## 选择正确的指标

团队必须在正确的时间选择正确的指标，以确定他们的改进机会，并衡量 DevOps 采用的每个阶段的影响。正确的度量使团队能够解决他们最紧迫的挑战，并向他们的领导展示他们工作的价值。

下面是 DevOps 成熟度每个阶段的收益应该如何衡量:

| **开发成熟阶段** | **最相关的指标** |
| 选择您的发布工具 | 部署时间 |
| 采用版本控制 | 变更失败率恢复时间 |
| 自动化测试 | 变更失败率 |
| 自动化部署(CI/CD) | 发布节奏研制周期 |
| 将备份集成到开发运维工具和流程中 | 恢复时间 |

让我们详细介绍每个阶段和相应的 KPI。

### 选择您的发布工具

这与低代码平台更相关，但仍然广泛适用于更广泛的技术世界。即使在最成熟的开发过程中，也会有手工步骤。将变更纳入版本控制、审查变更、解决冲突、触发发布——每一个都是手工步骤，并且每一个手工步骤所涉及的工作都在很大程度上取决于您所使用的工具。

因此，为开发和发布过程的每个阶段找到合适的工具会产生巨大的影响。例如，正确的部署工具可以将部署时间缩短 90%。仅这一步就提高了效率，最终为公司节省了大量的时间和金钱。在极端的例子中，通过选择一些新的工具来修补他们的手工过程而节省了大量时间的团队很可能会止步于此。这就是为什么团队在采用更多的 DevOps 过程时需要考虑其他的度量标准。

### 采用版本控制

对于大多数团队来说，一个没有版本控制的世界是不可想象的，因为他们在十年或更久以前就已经围绕着它构建了他们的开发和发布过程。对于其他人来说，特别是在它还没有普及的低代码领域，它可能感觉像是一个不必要的负担。版本控制的引入是发布过程中的一个额外步骤，也是另一个复杂层次，需要学习新的工具和实践。但是版本控制是自动化 DevOps 工作流的基础。这个步骤允许更多的团队协作和协作的可见性，包括代码审查和详细的变更历史。版本控制也允许团队在早期处理合并冲突，而不是在发布过程中。

在采用版本控制之后，团队将会看到由于代码审查而导致的变更失败率的降低，并且他们的恢复时间将会更短，因为版本控制提供了回滚以及由他们的版本控制系统捕获的代码和配置的准备份。但是版本控制的真正好处在于它所开启的 DevOps 进程。

### 自动化测试

不言而喻，测试的目的是提高发布的质量。它以几种方式做到这一点:

*   单元测试(Unit testing)——孤立地使用单个方法和函数通常会产生更易维护的代码，这对开发人员的生产力甚至是处理合并冲突都有积极的好处。
*   静态代码分析(Static code analysis)——虽然这不是严格意义上的测试，但是自动验证代码符合一组最佳实践同样可以提高代码的可维护性。
*   **集成测试**——这种类型的测试确保类的组合在一起时能够交互并生成预期的结果。这带来了另一个层次的验证，即所做的更改可能是正确的。
*   端到端测试–UI 测试就是一个例子；以消费者的方式使用该系统，并验证结果的确定性和正确性。这也包括对关键工作流程的回归测试，有时甚至包括验收测试。

团队使用的测试方法越多，他们对自己的变更就越有信心，需要的人工验证和干预就越少。随着团队的 DevOps 过程的成熟，经常是人的因素成为最大的瓶颈，所以对部署变更的信心是非常有价值的。

当团队在他们的发布管道中引入更多的测试和测试自动化时，正确的度量标准是变更失败率——包含 bug 或错误的发布的比例。高质量代码的直接好处转化为长期的节约，因为花在查找和修复错误或返工代码上的时间更少了。

### 自动化部署(CI/CD)

如果选择正确的部署工具可以显著缩短部署时间，那么使用 CI/CD 工作流实现自动化部署可以节省手动运行这些部署通常需要的时间。然而，部署时间并不是衡量 CI/CD 实施成功与否的关键指标。这里需要注意的最重要的指标是发布节奏和交付时间，由于无痛的自动化部署，这两个指标得到了极大的改善。

通过自动化部署，团队可以增加他们的发布节奏；他们可能开始每周发布较小的包，而不是每月发布一次大批量的变更。最终，目标是有一个稳定的增量改进流按需发布，并且通常每天发布多次。加速的发布节奏会导致交付周期的缩短——从工作完成到最终发布到生产的这段时间。这对于开发人员和他们的最终用户来说是有益的，因为更频繁的发布创造了更多的机会在过程的早期对用户反馈采取行动。

### 将备份集成到开发运维工具和流程中

恢复时间是 DevOps 成功的一个关键指标，因为强大的 DevOps 流程将提高团队在事件发生后的恢复速度。为了获得更好的恢复能力和更快的恢复时间，团队应该将备份集成到他们的 DevOps 工具和流程中。

从备份中恢复与部署类似，这意味着恢复过程也可以利用 DevOps 的强大功能，因此它们就像一个熟悉的过程，而不是团队在最重要的时候努力执行的不寻常的事情。同样重要的是，在有风险的发布之前，尽可能容易地按需备份。

停机和数据丢失对任何企业来说都是巨大的成本，因此缩短恢复时间是完全成熟的 DevOps 流程的巨大优势。

## **了解成熟开发运维流程的优势**

当团队关注正确的度量标准时，他们理解每个 DevOps 过程各自的好处，并且他们被激励去不断完善他们的 DevOps 过程作为一个整体。消除部署和发布的痛苦固然很好，但是高绩效的 DevOps 团队有效地使部署成为更频繁发布和更早获得反馈的资产。因此，他们更有能力更快地为公司创造更多价值。