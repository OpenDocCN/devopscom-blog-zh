# 为什么应用依赖映射对于云迁移至关重要

> 原文：<https://devops.com/why-app-dependency-mapping-is-critical-for-cloud-migration/>

软件依赖是高效的、基于组件的编程的关键部分。同时，对于快节奏的敏捷开发团队来说，它们可能是一个障碍，因为它们会使部署、更新和迁移软件应用程序变得更加困难。许多应用程序有几十或几百个依赖项，每个依赖项都有自己的传递性依赖项，这使问题变得更糟。

依赖项是提供主组件所依赖的所需功能的组件。可以使用 npm 或 Maven 之类的包管理器，GitHub 之类的基于 Git 的代码库，以及像 [Docker Hub](https://hub.docker.com/) 之类的容器映像注册表，将它们合并到代码中。

应用程序依赖关系映射涉及发现和识别应用程序组件、它们的依赖关系和底层基础结构之间的依赖关系和交互。创建应用程序依赖关系图是了解复杂应用程序结构和理解在不同环境中部署它们的影响的重要部分。

## 为什么应用程序依赖性对于云迁移至关重要

[应用依赖映射](https://faddom.com/application-dependency-mapping/) 确保您已经确定了所有必须迁移到云的组件。您可能不需要将所有组件迁移到云中，但是您需要确保所有的[依赖关系](https://devops.com/?s=dependencies)都被识别并一起迁移。否则，您的应用程序可能会遇到性能问题，因为重要的依赖关系仍然存在。

例如，如果您将应用程序服务器移动到云中，但将应用程序的数据库保留在本地，您的应用程序将会经历严重的性能下降，还可能导致相关应用程序失败。一旦依赖性被破坏，所有相关的应用程序都会受到影响。因此，在将应用程序迁移到云时，您必须包括所有相关的依赖项。

## 应用程序依赖映射工具如何提供帮助

应用程序依赖关系映射可以帮助您避免糟糕的应用程序性能和服务中断。这是迁移过程的一个重要组成部分，但是如果没有自动化工具，这也是很困难的。应用程序依赖关系映射工具检查应用程序并提供以下帮助:

*   建模所有服务器间关系
*   识别入站和出站连接延迟
*   确定必要的 TCP 端口
*   检测正在运行的进程
*   一段时间内的应用性能监控

云供应商提供了为其环境开发的特定应用程序依赖映射工具。例如，亚马逊网络服务(AWS)、谷歌云和微软 Azure 提供专有工具来帮助管理这一过程。然而，这些工具依赖于每个提供商，这意味着您应该使用与您选择的目标云环境相匹配的供应商工具。

或者，您可以使用开源工具，这些工具提供类似的服务，但与供应商无关。如果您想要的评估不是针对单个云供应商环境的，请使用这些工具。

## 映射应用程序依赖关系，为云迁移做准备

一个应用程序由一系列相关的 API 和工具组成。层次结构从应用程序的接口开始，然后向下通过平台工具。依赖关系管理有助于识别相关版本的组合，并确保开发团队在发生变化时识别新的应用程序依赖关系。

### 版本控制应用程序组件

这个过程的第一步涉及应用程序组件的版本控制。如果您打算独立部署一个特定的软件组件，您需要为每个修订版分配一个版本号，然后跟踪这个版本的依赖链。

这种技术确保您知道与每个应用程序版本相关联的特定平台工具版本。如果需要回滚，您知道需要回滚哪些附加组件来确保版本兼容性。

### 更换平台组件

这种技术需要改变一些平台组件，比如中间件，这也需要同步每个应用程序的平台版本。您应该从应用程序依赖链的顶端开始。

每个应用程序都被设计为使用特定的操作系统和中间件特性，期望工具的“版本 Y 或更高版本”。因此，您必须根据工具的依赖关系验证每个工具的指定版本，并继续验证每个依赖关系，直到到达依赖关系链的底部。

但是，有些应用程序依赖关系不像其他应用程序那样明显。如果您希望在不同来源的虚拟机管理程序平台上的虚拟机(VM)中运行客户操作系统，您可能会遇到问题。

如果像 OpenStack 这样的云堆栈版本需要特定的脚本语言版本，您也可能会遇到问题。您可以通过针对标准中间件和操作系统组合测试每个依赖关系链来缓解这个问题，确保所有依赖关系都得到识别。

### 重建依赖关系树

一旦您准备好迁移到云，您需要补充应用程序的依赖关系树，并包括对云提供商的 API 和特性的所有引用。确保确定提供者如何通知工具和 API 的变更，并准备验证这些变更可能产生的新依赖。

对于多云或混合部署，您必须跨计划迁移到云平台边界之外的所有组件和应用程序比较云依赖关系树。请注意，当在提供者的平台之间进行伸缩或故障转移时，每个提供者有不同的依赖关系树可能会导致问题。您可以通过提前同步组件来避免这种情况。

每当您更改软件平台组件时，您还应该重建您的依赖关系树。一次基本的更新可能会撤销您所做的所有映射和工作，并且您很容易忽略对一个小型中间件组件的更改。您可以通过建立一个生命周期管理过程来减轻这一点，以确保当引入不兼容的元素时不会出现依赖问题。

## 结论

在本文中，我解释了应用程序依赖性映射的基础，并展示了应用程序依赖性工具如何使云迁移更加安全和简单:

*   **版本化应用程序组件**—了解您的应用程序期望所有相关组件的版本。
*   **改变平台组件**—确定切换出某些平台组件的影响。
*   **重建依赖关系树**—使用现有依赖关系树的映射在云环境中重建匹配的依赖关系树。

我希望这将帮助您评估依赖映射的使用，并使您的下一次迁移成功。