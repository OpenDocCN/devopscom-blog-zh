# 集装箱:你所有的基地都属于我们

> 原文:[https://devo PS . com/containers-all-your-base-are-bound-to-us/](https://devops.com/containers-all-your-base-are-belong-to-us/)

世界仍在变化。这并不奇怪，但是方向和速度已经被集装箱使用量的增长所改变。早在 2015 年，我们在 DevOps.com[展示了](https://devops.com/clusterhq-and-devops-com-survey-show-containers-poised-for-mass-adoption/)我们进行的一项调查，调查显示集装箱的使用正在逐步起飞。确实如此，带着复仇。不管是哪一类——试点项目、测试、生产——它似乎每年都有更大的渗透。

为什么不呢？容器有一系列好处——比虚拟机占用空间更小，比云实例更易移植，比任何替代方案都更灵活。弱点 IPTables 的使用(和滥用)以及持久存储的长期问题——正在迅速得到解决。

## 但这并不全是好事

很遗憾地说，一如既往，有一个美中不足之处。我们必须识别新架构中的弱点，以便为它们制定计划并克服它们。集装箱基础设施也不能幸免于这一过程。没有什么是完美的。

第一个问题是整体安全性。你的集装箱管理系统现在是世界的中心。一个单一的入侵点可能会导致数十到数千台受感染的服务器。它就像一块磁铁，永远不要打井。保护它，锁定它，遵循 [Container Journal](https://containerjournal.com/) 和 [Security Boulevard](https://securityboulevard.com/) 上关于如何尽可能保护您的系统的建议。

这是最简单的。我们有大量保护重要中央系统的经验。

更困难的问题都围绕着您的物理基础架构以及它与虚拟容器基础架构的交汇点。查看数据中心中的所有设备及其提供的服务，然后规划这些服务如何与您的容器集成。一旦您映射了它们，就将映射工作到您的 DevOps 项目中。负载平衡和存储配置是传统 DC 在容器环境中重复执行的两个领域，在哪里执行该处理应该是一个关于什么最适合应用程序的有意识选择，而不是基于什么最容易/最容易做出的决定。

这是一个(可以说)更大的存储问题。仅仅因为容器可以增加或减少其内部存储，并不意味着它就是放置数据的合适位置。考虑未来需要什么——有或没有该容器或容器集所代表的应用程序——并有意识地选择哪些是在实例消亡时可以消失的短暂数据，哪些是长期需要的数据。将这些选择纳入开发运维流程。访问远离容器的持久数据可能是一件痛苦的事情，所以通过您的 DevOps 流程将这些痛苦的部分自动化。

这两个问题在大多数(但不是全部)云环境中都很复杂。太多的云功能旨在锁定用户。几十年来，这一直是 IT 界的标准做法，但容器的问题在于它们天生就是可移植的。把它们建成这样。是的，锁定功能总是带来好处，但是移动性允许团队在每个转折点选择在哪里部署容器系统最好(这里故意含糊——一个高度敏捷/DevOps 的商店可能每天都有转折点，而一个团队只是在他们的 DevOps 环境中试验容器，可能只有在系统发生大的变化时才有)。如果某个首选云供应商发生变化，导致他们不再是首选，那么迁移到另一个平台所需的修改越少越好。因此，在有选择的情况下，将默认容器/容器管理构建到 DevOps 工具链中比构建特定于供应商的选项更可取。存储是一个很容易指着说“选择可能是不可用的。”分配磁盘在平台之间不太容易移植，但是如果这是少数必须改变的事情之一，移植仍然是一个选择。

简而言之，集装箱来了，而且来得很快。将它们构建到您的 DevOps 工具链中，作为可移植的解决方案，自动处理最严重的问题。有意识地选择基于基础设施的功能应该驻留在哪里，并基于这些选择来实现。

继续摇摆。如果从任何其他环境(除了有争议的云环境之外)迁移，容器将更快地启动*和*来停止。只要在问题袭击你之前解决它们，一切都会好的。

唐·麦克维蒂