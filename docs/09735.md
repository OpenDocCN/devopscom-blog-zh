# 通过支持 ML 的异常检测提高可观察性

> 原文：<https://devops.com/improving-observability-with-ml-enabled-anomaly-detection/>

如今，DevOps 和 SRE 团队有许多工具来访问和分析测井数据。然而，有两个挑战阻止这些团队及时解决问题:

*   他们没有配备他们需要的所有数据
*   检测和解决问题是被动和手动的

在这篇文章中，我将分析为什么这些挑战持续存在，并提出一种新的方法来帮助你克服这些挑战。

## 可观察性障碍

**挑战:你没有分析所有的日志数据**

开发运维团队和 SRE 团队需要了解他们的应用程序和服务的行为，以便在出现异常时发现它们，并保持它们正常运行。然而，传统测井平台的成本使得这些团队无法分析 100%的可观测性数据。

相反，他们采用了减少摄取量的机制。在某些情况下，这意味着截断或过滤掉数据集。在其他情况下，这意味着将数据移动到不应用分析的不太活跃的存储层/目标。此外，工程师必须提前预测哪些数据集是重要的，并且符合索引的标准。团队有能力实时分析这些数据集。其余的最终都被忽略了。

最终的影响是团队对他们的环境没有完整的了解，很难理解应用程序和服务是如何运行的。因此，他们无法在每个问题发生时都准确定位。

**挑战:传统平台创建被动和手动流程**

当使用传统的可观察性平台时，团队必须不断地定义逻辑来检测他们环境中的问题。通常，他们只能发现他们已经意识到并且有时间建立逻辑的问题。为了保持警报正确触发，您必须掌握不同的数据结构、不断变化的数据形状、新的模式和库，以及不断变化的基线。

然而，并不是每个团队都有能力检测他们以前没有发现的问题。当团队面临未知行为时，他们不得不进行事后调试，这本质上是一个被动的过程。此外，快速解决问题变得越来越困难，因为日志数据通常是非结构化的，并且难以搜索。团队必须手动搜索日志线，以查明活动和受影响的系统或组件。这种方法会给调查增加几个小时甚至几天的时间。

## 改善事件响应

**解决方案:支持机器学习的异常检测和解决**

为了捕捉每个问题并加快事件调查，团队可以在数据源应用机器学习来检测潜在威胁，并为团队提供保持应用程序和服务运行所需的信息。这种方法允许工程师分析 100%的日志数据，并以可消费和可操作的视图对其进行编译，以便他们能够发现行为变化并比传统方法更快地解决异常。

随着日志线的创建，它们可以被自动分析并转换成有洞察力的指标，从而通知应用程序和服务行为。在此基础上，联邦机器学习可用于在问题发生时自动检测并发出警报。它通过建立关键指标的基线，了解它们何时超出典型范围，并确定异常行为的可能性来实现这一点——所有这些都是通过机器学习来实现的。

不需要不断地构建和提炼逻辑，有效地消除了过度手工的工程实践。

当问题发生时，开发人员和 DevOps 工程师将会收到一份详细的报告，说明他们系统内活动的具体变化。在此报告中，他们将看到事件的确切时间窗口以及受影响的系统或元数据。该报告还包括导致异常的相关原始数据的精确捕获，以及涉及的系统、组件或服务。

最后，相关的全保真日志可以动态传输到中央观察平台(Splunk、Datadog 等)。)异常前、异常中、异常后。这为团队提供了及时解决问题所需的准确数据。

总之，这种[边缘可观察性](https://www.edgedelta.com/)允许系统管理员始终分析他们的所有日志，而不仅仅是在集中设置中匹配预定义查询的日志，从而在事件响应方面节省大量时间。