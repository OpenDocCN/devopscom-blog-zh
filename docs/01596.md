# 微服务:比你想象的容易

> 原文：<https://devops.com/microservices-easier-think/>

“微服务比你想象的更容易，比你听说的更有价值。”这是本·格雷斯伍德的话，他是 cloud POS 和全渠道零售供应商 [Vend](https://www.vendhq.com/) 的首席交付官。他的公司已经使用微服务来修整单片 PHP 应用程序，提高了性能，改变了公司处理更新的方式。

## 接近微服务

Vend 目前被 180 多个国家的 15，000 家零售商使用。它针对的是基于库存的零售商——比如家庭用品、时装、杂货等等。除了通常的 POS 和支付设施，Vend 还处理忠诚度计划、礼品卡和网上商店。该公司总部设在新西兰，在伦敦、墨尔本、旧金山和多伦多设有办事处。工程和开发工作在奥克兰完成。

它的全球客户群意味着没有维护窗口，因此实时更新是必不可少的。

Vend 的 HTML5 和 iOS 客户端包括缓存和本地数据库，以允许离线操作(数据随后会重新同步)，主要是为了让用户在没有互联网连接的情况下继续工作。主系统最初是一个单一的 PHP 应用程序。

Vend 高管已经讨论了大约一年时间来迁移到微服务的想法。但是，当该公司的架构副总裁通过编写一个只读微服务进行实验，将性能提高了几个数量级时，“这是我们的‘啊哈’时刻，”Gracewood 说。

后来，当 Vend 从 Rackspace 迁移到亚马逊网络服务时，它使用了一种路由微服务，将流量导向当时保存特定客户数据的任何云。这允许在不中断客户的情况下进行渐进式迁移。

这些初步的成功表明 Vend 应该更加认真地朝着这个方向前进。9 个月后，该公司生产了 12 种微服务。

Vend 现在以大约每月两个的速度添加它们，并且单体 PHP 系统已经被精简并被一群微服务所包围。基于 Nginix 的路由层允许将现有的 URL 重定向到适当的微服务。

该公司从一开始就遵循 DevOps 实践，但其最初的几项微服务是作为特例进行部署和管理的。现在，PHP monolith 和所有的微服务都在 DevOps 的帐篷里。

## 收养的注意事项

谈到采用微服务，“开始永远不嫌早，”Gracewood 说。“不一定非要全有或全无，”尽管你可能会从其他微服务资深人士那里听到这样的话——每个人都在某个阶段走过了自己的旅程。

Gracewood 的建议是构建您的第一个微服务，并在 DevOps 实践的发展中做您必须做的事情。然后不断迭代。

他说，不要陷入思维陷阱，认为微服务必须 100%完成才能部署。从开发最初所需的最低功能开始，然后随着时间的推移增加其复杂性。由于对微服务的更改会影响整个系统中相对较小的一部分，因此持续更新模型比单一应用程序更容易应用于微服务。

这一点也对组织产生了影响:微服务架构和 DevOps 支持 Gracewood 的理念，即信任工程和开发团队在正确的时间实现正确的事情。对于单片软件，一个错误或一个糟糕的决定会产生广泛的影响，因此需要相当多的监督。但是微服务的本质是将问题局限于局部，所以如果某个问题确实在测试过程中出现了，恢复到以前的版本会更容易。

Gracewood 指出，采用 DevOps 和微服务确实需要一定的教育。工程团队必须了解命令行、Docker 等等。他说，采取行动需要“大量的工具或大量的培训”。为此，Vend 开发了一些定制工具。

Gracewood 对考虑采用微服务的组织的最后一个建议是:“从一开始就记录一切并对一切应用指标”。你需要知道人们如何使用你的系统。特别是，确定使用最频繁的微服务将揭示提高性能的努力可能产生最佳回报的领域。