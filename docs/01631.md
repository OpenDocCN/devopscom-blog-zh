# 连续测试系统稳定性

> 原文:[https://devops.com/continuous-testing-system-stability/](https://devops.com/continuous-testing-system-stability/)

如果连续测试所依赖的底层系统不稳定，那么加速连续测试的努力就会白费。在[我之前的博客](https://devops.com/blogs/test-results-analysis-speed-devops/)

Continuous Test Results Analysis – at the Speed of DevOps, I discussed the importance and practices for speeding up continuous testing results analysis. However, unless the continuous test system that the test results are derived from is rock solid, the results will at best be unreliable and at worst – results may not be generated at all!

DevOps 的首要规则之一就是“坚持下去，不要停下来”。停止相当于按下工厂装配线上的红色按钮，实际上导致整条生产线关闭。然后，恐慌接踵而至，因为生产线停机的每一秒都会影响所有生产，导致成本增加，更不用说重启生产线也很重要。

尽管有产品测试失败的报告，许多技术被用来最小化停止测试的需要。然而，如果底层的连续测试系统本身不稳定，那么包括连续测试在内的整个 DevOps 系统将立即被中断，直到系统恢复。开发团队成员都在寻找结果，因此对于每个 CI/CT 周期中节省的每分钟结果分析时间来说，加快可用性和与结果分析相关的总工作量所节省的时间是巨大的。当在多个代码分支上汇总时，每个测试结果节省的几分钟时间可以节省一年以上的工时！

那么，如何才能确保连续测试系统本身是稳定的，即使在不可避免的偶然系统故障面前也能产生可靠的结果呢？毕竟，没有一台真正永远不会坏的机器。以下是清单格式的一些建议，已被证明在高性能 DevOps 部署中非常有用。

1.  **建立一个快速响应的多学科团队:**无论是虚拟化的、内部的还是运行在从云中的数据中心远程使用的云上的，任何互联的计算机和应用程序系统都有多种方式可能发生故障。以下对团队的建议列表将确保在系统出现故障时快速恢复。
    指派一名持续测试系统架构师，负责设计系统稳定性 SLA，设计高可靠性系统架构，并定义足够的团队工作流，适用于符合恢复时间 SLA 的灾难预防和恢复。
    虽然团队成员可能是全职或兼职的，但需要有明确负责的第一响应者和第二线上报团队成员，他们有明确的工作流程，可以全天候处理系统所依赖的每个硬件、软件、工具、网络和防火墙组件的故障事件。
    指派产品团队负责人来规划新产品和服务所需的变更。
    ·24/7 可用性系统设计的构建、扩展和维护成本高昂，因此财务和会计团队成员需要成为团队的一员，以保持与持续测试系统相关的清晰的当前成本数据。
    高级预算经理批准稳定所需的费用，不得延误。
2.  预见失败——准备，准备，准备！:不要等到出现故障才测试系统恢复程序！如果团队没有准备好在失败事件期间做出反应，记录的灾难预防和恢复计划或高可用性工具不会拯救连续测试环境。
    以与每次故障的预期概率相匹配的频率，对每个定义的故障场景进行故障模拟。
    ·对团队成员进行系统恢复最佳实践方面的交叉培训，以便在最需要的时候准备好技能——确保没有人拥有重要的独特恢复技能。
3.  **选择设计有高稳定性系统管理功能的测试工具:**寻找测试工具中设计的以下功能，以确保可以配置和管理持续测试环境，实现高可靠性。
    工具作为自治服务实施，通过 RESTful APIs 控制，可以单独调用和管理
    测试系统服务监控内置，包括每个测试系统服务的每个用例的运行时间、等待时间和使用指标。
    每项服务都内置了诊断功能。当故障发生时，故障日志包括有用的描述，包括原因信息。
4.  **设计系统的稳定性:**典型的连续测试系统有许多“移动部件”，它们中的许多必须协同工作，系统才能正常运行。众所周知，系统的可靠性是由其部件的可靠性和配置决定的。以下是一些提高整体系统可靠性的建议。
    选择功能强大的服务器和虚拟机(VM ),具备充足的处理器速度、快速 I/O、大容量快速内存和数据存储。这对于最小化由于这些资源可能过载而导致的系统故障的机会是很重要的。
    为每个系统组件部署多台服务器和虚拟机，并具有足够的冗余，这样就不会有一个组件故障会中断整个连续测试系统。
5.  **配置测试工作流程以避免假阴性:**如果失败的原因是潜在的连续测试系统故障而不是产品本身的故障，那么向用户报告产品测试失败是没有意义的。这样的“假阴性”是对时间的极大浪费。以下是一些减少假阴性检测报告几率的建议。
    指派一个应用程序持续实时验证所有系统组件和互连正在运行，并将这些结果报告给持续测试报告汇总工具。这些结果称为 CT 系统环境测试结果。
    使用连续测试结果分析工具中的 CT 系统环境测试结果，确定任何测试失败是否与环境失败一致。将每个结论标记为“非决定性的”,而不是“失败”,并在结论日志中包含环境失败的描述。
6.  **维护系统以确保长期稳定性:**每个系统在某个时候都需要维护。硬件组件磨损，软件组件变得过时。每次更换系统组件或升级到新版本时，都存在不稳定的风险。以下是一些建议，以降低在实施变更时给连续测试系统带来不稳定性的风险。
    创建一个镜像测试和生产环境的维护环境。
    定义一个测试套件，测试所有系统组件和拓扑。
    在部署前测试维护环境的变化。
    ·偶尔在每个生产环境中运行故障/恢复模拟。

以上是对持续测试系统稳定性的部分建议，已被证明对 DevOps 产生良好的结果。在思必驰，我们认为测试在 DevOps 有着光明的未来。你可以在[Spirent.com/solutions/devops](http://www.spirent.com/solutions/devops)了解更多我们的观点

你对这些建议有什么看法，你还有其他应该提到的建议吗？