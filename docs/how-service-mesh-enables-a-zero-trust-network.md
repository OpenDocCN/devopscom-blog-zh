# 服务网格如何实现零信任网络

> 原文：<https://devops.com/how-service-mesh-enables-a-zero-trust-network/>

***如何在微服务生态系统内实现高等级安全？服务网可能是答案***

企业应用程序通常会给人分配一个身份来确定安全许可。使用 OpenID Connect 和 SAML 等标准，我们可以在一套应用程序中委派授权范围，以精确地确定用户被允许做什么。但是应用程序本身呢？一些人认为微服务也应该遵循这种身份优先的方法。

对于大规模的应用生态系统来说，微服务可以说比整体更安全。正如 Kong 的 CTO Marco Palladino 所描述的那样，“一个单一的应用程序是一个等待发生的安全事件。”然而，微服务不应该相互信任。那么，我们如何在微服务生态系统中实现高级别的安全性呢？

答案可能在于服务网格。我最近会见了 Palladino，了解服务网格如何为现有和新兴的微服务模式实现银行级安全性。类似于企业如何给终端用户分配身份，零信任安全网络给微服务本身一个身份。

## 零信任网络不信任任何东西

随着越来越多的个人数据用于云操作，越来越多的个人身份信息(PII)容易受到攻击，并且成本很高。在 2019 年 Q1 奥运会上，金融业的违规成本为[62 亿美元](https://www.verteks.com/2019/08/study-personally-identifiable-information-is-compromised-in-97-of-breaches/)。2018 年，97%的违规暴露了 PII，这是网络犯罪分子的首要目标。

因此，组织感受到了保护其资产的压力。最珍贵的数据保存在金融服务和医疗保健领域，在这些领域，GDPR 和 HIPPA 严格遵守数据隐私规定。这种压力导致[美国银行禁止](https://www.bankingdive.com/news/banks-to-tighten-third-party-data-access-in-2020-experts-say/569947/)第三方应用程序访问。与此同时，欧洲银行在安抚 [PSD2 法规](https://ec.europa.eu/info/law/payment-services-psd-2-directive-eu-2015-2366_en)以开放[银行业](https://devops.com/why-open-banking-should-consider-devops/)时面临类似的安全困境。

为了保护用户数据，组织正在采用零信任安全模型。“零信任安全意味着我们不相信任何人，”帕拉迪诺说。“我们不信任自己的服务。我们不信任自己的团队成员。”

过于信任用户、服务和团队可能会导致灾难性的失败。他说，“最大的风险莫过于认为自己是安全的，而事实上，你并不安全。”

## 单片⮕微服务

在实践中，构建零信任应用网络与[微服务设计](https://devops.com/6-advantages-of-microservices/)的趋势并行。虽然这看起来可能违反直觉，但微服务系统可以说比整体架构更安全。

在一个单一的应用程序中，每一种资源——无论是发票、账单订单还是交易历史——总是只有一行代码之遥。因为一切都是相互联系的，所以您可以通过一次访问来公开一个资源。

微服务架构将应用程序分离为独立的服务，每个服务负责组成较小应用程序的特定资源，这些资源可以通过网络进行保护和供应。

对服务前景进行细分可以避免一个影响所有应用程序的级联缺陷。它还支持更多的控制。“通过从整体服务到微服务的解耦，我们可以应用细粒度的安全权限和规则来确定应用环境中的可能性，”帕拉迪诺说。

## 微服务⮕服务网格

实现这些权限是服务网格发挥作用的地方。应用程序团队通常会构建安全性，但是构建自己的网络安全性通常不是好的做法。微服务的安全性需要很高的专业知识，标准化各种微服务之间的连接很容易导致安全实现的碎片化。

Palladino 建议利用服务网格，而不是构建自己的安全基础设施。通过使用服务网格作为微服务的控制平面，平台架构师可以指定特定的规则和属性，以在每个服务的基础上生成身份。

服务网格还消除了开发人员的网络负担，使他们能够更多地关注核心逻辑。“应用团队成为连接的消费者，而不是连接的制造者，”Palladino 指出。

## 服务的身份

Palladino 说，就像企业为人类创建身份资料一样，我们必须将相同的模型扩展到服务，将每个服务与授权范围配对。“服务必须提供自己的身份，”他指出。基于此，他们可以在其基础架构中执行某些操作

当我们想到服务的身份时，地理位置和证书等属性会浮现在脑海中。这些和其他特征可以构成微服务的授权范围。利用服务网格，架构师可以将这些属性分配给每个工作负载和服务，以确定允许哪些操作，或者可以向哪些其他服务发出哪些请求。

例如，来自一个地区的服务可以被设计成不使用来自另一个地区的服务。帕拉迪诺说，这种基于属性的微服务控制是一种新颖的、急需的策略。“这太疯狂了，以前没有这样的地方；没有零信任就像把你所有的钱都放在一个敞开的金库里。”

## 服务身份的最佳实践

知道我们要为微服务实现基于身份的安全，哪里有一些最佳实践？帕拉迪诺建议:

*   **自动化一些属性**:服务网格可以在创建时自动分配身份属性，比如云区域或地理边界。
*   **提供管理属性的方法**:devo PS 工程师需要一个仪表板来创建、编辑或删除服务级别属性。
*   **治理**:架构师必须管理控制平面，并为访问该功能的合适方创建身份。
*   Palladino 指出:**安全加密和相互 TLS** :团队将需要一个系统来为整个组织中运行的成千上万的工作负载轮换和过期证书。
*   **标准化**:安全生产身份框架(Secure Production Identity Framework For every one)([sp iffe](https://github.com/spiffe/spiffe))，一个 CNCF 孵化项目，是一个很好的服务身份框架，使得它可以与其他云原生项目一起操作。
*   **好好利用 CI/CD** :自动部署产品时，属性创建可以与底层 CI/CD 流程挂钩。

一旦微服务有了身份，它们与之交互的服务就可以决定它们被授权执行什么操作。这将机器对机器的通信限制在允许的操作范围内。

## 一键零信任安全

许多团队已经过渡到微服务架构，以便[更频繁地部署](https://devops.com/maintaining-progressive-delivery-quality-with-feature-flags/)，更加分散、分离或提高整体可靠性。虽然这些创新在很大程度上是积极的，但帕拉迪诺警告说，如果没有适当的安全远见，就不要创新:“不考虑如何保护这些服务，就过渡到微服务战略是愚蠢的，”他说。

团队还将在各种环境(虚拟机、云或物理数据中心)中运行微服务。因此，考虑微服务到微服务的通信，我们如何在这样的环境之间路由流量？我们如何观察指标和日志？Palladino 认为，支持多地区、多区域、多云和混合模式的不可知服务网格是这些困境的答案。

如果使用正确，服务网格可以堵塞内部服务对服务通信的安全漏洞，从而使高价值资源(如[金融服务数据](https://devops.com/financial-services-rise-above-in-database-devops/))变得模糊不清。解决服务身份挑战的关键是一个可用的仪表板。正如帕拉迪诺所描述的，“一键零信任安全。”