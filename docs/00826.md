# 持续:持续交付的发展

> 原文:[https://devo PS . com/continuous-evolution-continuous-delivery/](https://devops.com/continuous-evolution-continuous-delivery/)

在[持续](https://twitter.com/continuouscast)的这一部分中，伊迪丝·哈博和保罗·比格讨论了持续交付的发展。这个播客是由 [Heavybit](http://Heavybit.com) 为你带来的，这是一个面向开发者创业的为期 9 个月的项目。

![Edith Harbaugh, CEO LaunchDarkly](../Images/959d7f6b353cdba9034e43827b064d75.png)

伊迪丝是“功能标志即服务”的持续交付工具 [LaunchDarkly](http://launchdarkly.com/) 的首席执行官和联合创始人。LaunchDarkly 使软件团队能够快速启动、测量和控制他们的功能。

![Paul Biggar, CEO CircleCI](../Images/9a99d84d981527b171383842e23d372f.png)保罗是  [ CircleCI ](https://circleci.com/)  的首席执行官和创始人，CircleCI 是一个持续集成和部署平台，它自动化开发工作流和 IT 运营，使开发人员能够更快地交付优质软件。

* * *

[soundcloud url=”https://api.soundcloud.com/tracks/224359194?secret_token=s-rlyTD” params=”color=ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=false” width=”100%” height=”166″ iframe=”true” /]

* * *

伊迪丝:保罗，持续交付是从哪里来的？

Paul :这是一个经历了相当长时间演变的事情，但我认为持续交付的主要催化剂是我们转向 SasS 的事实，SasS 现在已经存在。

伊迪丝:在连续分娩之前是什么样的？你刚出道的时候是什么样的？

保罗:我真正工作过的第一家公司是一家游戏公司，我认为他们中的很多人现在都差不多。你将软件放在磁盘上，通过商店运送给客户，在某些时候你必须有一个金主。我们是一家初创公司，所以它相当先进。

我们有一个每日构建服务器，我们实际上是在销售中间件，所以我们向这些公司运送软件，但这些公司会在一天结束时运送，他们会运送一个磁盘，该磁盘只发出一次，当时没有更新。

大概是在 2003 年，2004 年。没有任何方法可以自动更新客户的 Playstation 2，甚至不像现在的游戏有一点点连续交付，但在当时，你有机会出货，就是这样。

伊迪丝:是的，我刚刚残酷地回想起我的第一份暑期工作，那是安装 Windows 3.1。那时你实际上有一套 35 个磁盘，所以我作为暑期实习生的工作就是走到办公室的每一台计算机前，坐在那里。盘进，盘出，盘进，盘出，如果安装出错，我必须从头开始。

这是一个两个小时的过程，只是让每个人都达到 3.1，所以在那些日子里，没有一个修复包的变化。我认为每个人都会在这个版本上，直到他们有了另一个糟糕的暑期实习生。

保罗:所以如果你想象人们和他们的，人们安装，甚至是现代或相对较新版本的 Windows，你必须考虑服务包一或服务包二或你修补到什么级别，这基本上是做软件的老方法。

我记得第一次意识到有一种不同的方式来做这件事是在 Joel on Software 的博客中。他们可以做的主要事情之一是，有一个错误，他们可以修复它，在云中，它会被修复。

伊迪丝:

是的，我认为意识到这一点是很好的，当时之所以如此强调确保一个构建是正确的，是因为如果它是错误的，会有这样的心痛和痛苦。

Paul: 是的，如果是向客户承诺的，那么推迟新功能或类似功能的发布是有道理的，因为那时，别无选择。三个月、六个月或十二个月之后，他们才有机会继续前进。

> 坦率地说，我认为，在云中构建软件，并有可能在任何你喜欢的时间发布，实际上已经彻底改变了人们制作软件的方式。

伊迪丝:我完全同意。所以回到过去，所有的重点是极高的质量和极其稳定。

保罗:对，对。

伊迪丝:因为你基本上只有一次机会。你把这东西扔进了世界。

Paul :即使他们有季度发布周期或类似的东西，它仍然感觉像是一个机会。我在 Mozilla 工作，我在火狐 3.0 到火狐 4.0 的转换过程中。Firefox 4.0 花了 18 个月的时间才发布，有些东西在发布周期的第一周就准备好了，但却不得不推迟到所有这些不相关的发布。

我认为 JavaScript 引擎有问题，内存膨胀之类的事情一直在推它。在这个过程中，或者我在那里的时候，Firefox 改变了它的流程，它转向了他们所谓的发布系列模型，基本上，他们每六周发布一个新版本，不管发布了什么或没有发布什么。

他们会一直支持它，或者建立破坏，它根本就不工作，但基本上其他一切都会让它继续下去。自那以后，他们能够获得的节奏和速度是巨大的。

伊迪丝:是的，这是第一次进化。过去是让我们试着把所有东西都塞进去，然后你会陷入恶性循环，就好像让我们再多放一个东西进去，然后你就不得不增加所有的 QA 时间。

Edith :这就是为什么发布会花这么长时间的另一个原因，你有这么多的质量保证。

保罗:有意思。

伊迪丝:昨天我和一个曾在微软工作过的人聊了聊，他说，你知道，微软的质量必须坚如磐石，回到我的磁盘例子。

Paul :对，这些人将单元测试、自动化测试作为他们构建的一部分。

Edith :但除此之外，你还必须有人真正尝试，然后你必须走出去，在所有这些不同的系统上尝试。

保罗:在所有不同的系统上，对。

保罗:所以，让浏览器转向发布系列模式成为可能的一件事是，他们有阿尔法频道和金丝雀频道，或者不管他们叫它什么。在 Firefox 中，它是极光频道。

那是超级的，实际上那甚至不是超级测试版的东西，他们甚至有一个夜间频道。他们有 100 万人使用每晚，这告诉他们是否有东西坏了，以及它们实际上和在生产中如何。我想这是功能标志的第一次演变。

伊迪丝:是的，我的意思是让我们讨论一下这个问题。

保罗:对，我们可能需要，我们不是要在这个里面定义东西吗？

伊迪丝:是的，这是决定性的一集，保罗。

**Paul** :好的，让我们从什么是功能标志开始，因为我想我们已经讨论了六件我们还没有定义的事情，但是什么是功能标志呢？

Edith :一个特性标志基本上是隐藏代码的能力，但它仍然是公开的。所以过去，所有运输的东西都是可见的。所以一个特性标志基本上就是一个 if，它包装了一段代码，说它可能会发布，但是没有人能看到它，直到软件团队决定它是可见的。

**Paul** :好的，比如在浏览器中，你改变了一个偏好，这个偏好使用了新的版本，或者另一个例子，在脸书有一个功能，显示给北加州 1%的用户。是啊，这很自由。

伊迪丝:

> 关于特性标志的一个非常解放的事情是，如果某些东西不工作，你不需要重新部署。

回到过去的黑暗时代，你把所有这些磁盘都发布到世界上，功能标志是没有用的，因为你要把所有这些磁盘发送给人们，他们要安装这些磁盘。当人们在消费像 SaaS 这样的东西时，特征标志是有用的。

l:我认为特征标志是将有效的运输代码与实际打开该代码的行为分开的。

伊迪丝:是的，部署从铺开开始。

保罗:对。

伊迪丝:是的，它已经部署好了，可以使用，但是看不见。

保罗:好的，现在我们知道了它们是什么，那么我们实际上在谈论什么呢？

Edith :我们正在软件的进化中努力，所以我们站起来发布火车。你应该谈一谈持续集成是如何融入其中的。

**Paul** :持续集成，定义来说，基本上就是拥有一个自动化构建服务器，每天或以某种节奏运行，并测试你的软件是否工作。

我的公司 CircleCI 将持续集成作为一项服务，每当你推送 GitHub 时，我们会自动检查你的代码，我们会构建它，我们会在其上运行你的测试，我们还可以将它部署到你的客户，这被称为持续部署或持续交付，取决于你对世界的看法。

伊迪丝:你让这看起来很简单，但它确实是革命性的。我记得没有这个的日子。

保罗:当然，当然。我记得在我的第一份工作中，我们有一个每日构建服务器，所以我们每天都会发现代码是否真正编译过，即使我们可以在自己的机器上编译所有代码或其中的一些模块，在我们自己的机器上编译，代码中会有各种各样的构建工件和污垢，这意味着这些代码在准备交付给客户时实际上并不工作。

伊迪丝:是的，或者更糟，我记得以前当你破坏了建筑，那是非常可耻的。你不得不唱首歌或者做一些尴尬的事情，这种事情再也不会发生了。

保罗:对，对。我的联合创始人过去常常忘记给 Git 添加新文件，所以它总是无法工作，尽管它在他的机器上工作得很好，但在某个地方会有一个文件丢失。

伊迪丝:经典的借口，“哦，它在我的机器上有效。”

保罗:没错，是的。

伊迪丝:是的，我不知道我的第一份暑期工作。我的第一份暑期工作是用 Visual Basic 编程。

保罗:好的。

伊迪丝:我基本上是在做一个战争游戏。这是一个国防承包商，我试图证明基于空间的激光与基于飞机的激光，如果你有所有这些来自俄罗斯的导弹。好吧，这是很久以前的事了。

保罗:是的，是的。

伊迪丝:你能击落多少架？这个东西在本地运行得非常好，然后在夏天结束的时候，他们想把它从我的机器上移除。我只是想，“哦。”

保罗:好的，你需要把它放在飞机上或者太空中或者类似的地方？

伊迪丝:不，他们想把我的真实文件从我的机器上拿走。

保罗:对，是的，为了把它放在太空或飞机上？

伊迪丝:不，那只是个模拟。我 19 岁的时候并没有真正控制导弹。尽管那样会很酷。

保罗:在我工作的地方，我有一个绝对可怕的释放过程。那是 O2，它是英国和爱尔兰的一家非常大的电话公司，我想他们最近被某个人收购了，但是不管怎样。他们推出了名为 i-mode 的功能，i-mode 在日本非常流行，但在其他任何地方都没有成功。

伊迪丝:你是说它在日本确实很大吗？

保罗:从字面上看，它在日本很受欢迎。所以他们试图在爱尔兰推出这个项目。全世界的每个人都知道这将是一个失败，但这就是这个过程是如何运作的。发布过程是，他们将所有这些代码放在某个地方，这些代码将被部署并附加到服务器中，当他们这样做时，会有一个手册。我是手动团队的一员，手动验证手机，手动点击手机，并保证这东西确实有效。

没有自动化。当他们修复错误和重新配置时，整个发布过程不得不重复数十次。它是，它只是一个完整的集群。

保罗:

> 当我开始做有任何持续发布周期的软件时，这是一种解放，因为你实际上知道从你每天做的事情到它到达客户手中的路径。这里的每个人，每个开发人员都知道这条路径是什么，每个人都知道代码实际上是如何发布的。你不必让它一直处于你知道的状态，哦，也许有一天我会发货。

伊迪丝:是的，我的意思是，我想回到那些越来越长的发布会，甚至是预发布会的时候，人们会变得非常放松。

因为它就像，哦，我只是坐在角落里编码，在遥远的未来，它可能会出货。

保罗:好的，当你接近季度末的时候，每个人都在尽可能快地解决问题，也许有一些在本季度早期发货的东西没有清理干净或者没有完全准备好。

伊迪丝:你说的马上发货是什么意思？

Paul :我记得有时候你会将一些东西合并到 master 中，因为你需要对它进行测试，但它还没有完全准备好投入生产。它与测试版或类似的东西一起发布，但是为了让它真正地发布给数亿人，你需要移除你放置的任何黑客东西。

伊迪丝:

> 我认为驱动持续交付的事情之一就是测试驱动开发的兴起。

保罗:这很有意思。是的，我是说，我觉得这很明显。你最终会陷入这样一种境地，当你试图转向持续交付时，你说我害怕，上周我们谈到了这种害怕。

为了克服这种恐惧，你需要进行自动化测试，我猜在过去，有手工发布周期，你不能一天做 10、20 次手工发布周期。这不可能。

伊迪丝:你不能指望拥有一支车队，比如回到微软的例子，你不能指望每个开发人员都有两名质量保证工程师，你知道，你只要抛出代码，他们就会找到一切。

**Paul** :即使有两个 QA 开发人员，你每五分钟推一次代码也不可能有两个 QA 开发人员。

伊迪丝:是的，他们永远也赶不上。

保罗:没错，这样他们就永远不会发现真正导致错误的变化，等等。

伊迪丝:是的，我认为我们到目前为止所谈论的事情，SaaS 已经解开了持续交付，测试驱动的开发已经解开了它。你认为还有什么是真正的基础性的东西？

Paul :我想另一个原因是客户期望的变化。客户，事实上有些人在做连续交付，其他人也不得不这样做。一旦你开始经历一点点，你就会开始想为什么其他网站在周日晚上宕机六个小时，这没有任何意义。为什么我必须下载该软件的新版本，而不是点击更新版本，或者为什么我甚至必须考虑这个问题？

伊迪丝:是的。

保罗:我认为对于可安装软件市场或桌面软件市场来说，Chrome 是那种杀手级应用，每个人都意识到这已经完全改变了游戏规则。

伊迪丝:是的，这完全改变了游戏规则。

> 我认为即使现在要求人们下载一个插件似乎也太麻烦了。他们不想这么做。他们只是想让东西工作。

保罗:这几乎和一个转换漏斗联系在一起。如果你希望人们安装 31 个磁盘来升级到最新版本的 Windows，人们不会这样做。你不会达到你期望的转化率。你的应用有太多的替代品。

感谢您的收听，整个 Heavybit 播客可以在[这里](http://blog.heavybit.com/blog/to-be-continuous-ep-3)找到。