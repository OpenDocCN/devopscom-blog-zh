# 日志分析或日志堵塞

> 原文:[https://devops.com/log-analysis-or-log-clog/](https://devops.com/log-analysis-or-log-clog/)

日志分析有改造团队的能力。它集中了通信，提高了响应能力，将工作从被动变为主动，缩短了解决问题的时间，并允许日益复杂的环境无忧无虑地发展。但是，如果日志分析成为瓶颈，它会逆转所有这些优势。

作者注:这篇文章的可信度受到了质疑，因为我和文中提到的四个供应商中的两个有关系。我的公司 Fixate IO 与这些供应商有财务关系。然而立场和观点都是我自己的。

与所有新的 DevOps 工具一样，您会发现它有时会产生比它解决的问题更多的问题。主厨和傀儡通过不受管理的快速配置鼓励服务器蔓延。当脚本覆盖范围与人类不同时，Selenium 减少了功能上的疏忽。当日志分析受到限制或缺乏支持时，问题会覆盖整个环境。好消息是有了正确的工具，实现这些事情可以完全避免。

首先是问题。由于实施日志分析的组织对日志分析的高度依赖，如果平台出现任何问题，都可能阻碍整个交付流程。这样做的原因是，它与您的环境中的几乎每个组件都有很好的联系，或者说它应该如此；这就是原木如此珍贵的原因。而且它是粘性的，当你选择一个日志分析平台时，有很高的锁定量。通常锁定是不好的，但在 DevOps 分析是必须的，它需要一个一致的格式和“语言”。最后，它有两个潜在的瓶颈，吞吐量和存储限制。

我假设如果您已经实现了日志分析，那么您做得是正确的。这意味着你是经过深思熟虑的，在实施之前，你问了问题并记录了预期的结果，你事先设计或评估了你的日志，知道你将如何标记和查询它们，你传播了它，而不是仅仅为了操作而囤积它。如果你没有做这些事情，并且你已经有了一个运行的系统。你有更大的问题。

即使您有一个很好的日志分析平台实现，一些事情仍然可能出错。它们是:

1.)没有足够的吞吐量:无法在创建日志时获取它们是一个巨大的瓶颈。这也扼杀了响应时间的价值。如果不能以接近实时的方式存储日志，就无法对其进行分析，从而无法对有趣的见解做出足够快的反应。由于吞吐量是一项额外支出，这也可能导致公司限制它们传输的内容。避免了集成环境的好处，并对您存储的日志强加了选择偏见。只要你存储的东西是为回答实际问题而设计的，你就应该总是有动力去存储更多。

2.)现在存储限制。同样，如果您对日志的存储时间有所限制，那么您就失去了历史分析的价值。历史分析不仅对你下个季度的商业评论(QBR)有用。在那里，您将被询问重大停机的根本原因和影响。历史数据也可以让你知道你的交付管道的弱点在哪里，以便在你开发代码的时候增强它们。

3.)最后，他们可以把你的团队变成僵尸。如果您没有正确设计您的查询和您正在查询的日志。那么你的团队不仅会浪费时间去寻找答案。他们会沉迷于深度潜水，这很有趣，就像白天的 Reddit 和脸书一样。哦还有！他们将开始创建自己的报告，这样到年底时，您会有太多已保存的报告，您不知道哪些是好的，哪些是坏的，哪些要保存，哪些要删除。最终你会责怪平台。

如果您还没有日志平台，或者正在考虑改变，那么这个列表可以作为日志供应商的标准。一些供应商通过定价模式使问题变得更糟，这种定价模式鼓励深度潜水，并鼓励原木倾倒场。一些市场领导者和开源工具是罪魁祸首，当然还有开源工具。这两者也促使测井分析成为一种仅用于操作的工具。这完全违背了 DevOps。

但是有好消息。一种是，花一点功夫，不管供应商是谁，你都可以自己解决。不要指望供应商能让开发运维或分析为你带来成功。他们不能，也不会。在该死的里面放一点力！

但是更现代的平台，以及专门构建的平台，也已经看到了这些问题，并且经常围绕这些问题进行构建。像 Loggly、LogEntries、NewRelic Insights 和 Sumo Logic 这样的解决方案。

特别是， [LogEntries](https://logentries.com) ，一个我所熟悉的工具，已经花费了特别的努力首先从分析和洞察开始，以避开查询优先的心态。如果你需要查询，他们会提供一种基于正则表达式的语言，一种标准语言。不是一种你必须去专门的语言学校学习的语言。通过允许将日志外部化到长期 AWS 存储，它们还允许更高的存储限制。最后，他们有一个计划，甚至允许免费层用户获得更多吞吐量。通过 Dropbox 风格，[与朋友分享。](https://logentries.com/doc/referral-program/)展示他们对吞吐量重要性的理解。

如果您已经实现了一个旧的日志分析工具，那么它鼓励收集，而不是分析。你可能会发现它在其他方面会更好地为你服务，并可以考虑转向更现代的方法。

但是忘了工具吧。最大的问题是你。以及你无法超越现在。未来会让你焦头烂额。在那个时候，你可以离开，去一家有希望做正确事情的新公司，避免清理，或者你可以现在就开始整合更好的实践。它们包括:

1.  如果已经设置好，则为预分析或后分析
2.  在带宽和存储上投资，不要限制自己。并停止日志偏袒。
3.  开始共享报告。是的，这也会产生一系列问题，但它们都是可以解决的。
4.  在开始存储日志之前，想想你想从一组日志中得到什么。
5.  不要相信供应商会帮助你的过程或文化，只相信他们工具的执行。

选择正确的工具并以正确的方式实现它取决于您。你有能力构建一个伟大的日志系统，它不会成为瓶颈，不会给你的软件交付管道带来一些奇怪的退化疾病。