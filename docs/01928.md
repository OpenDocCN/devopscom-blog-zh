# 设计 API 驱动体验的挑战

> 原文:[https://devo PS . com/设计挑战 api 驱动体验/](https://devops.com/challenges-of-designing-api-driven-experiences/)

随着 SaaS 和移动应用开发——以及跨软件集成和通信——对各行各业的组织保持竞争力变得越来越重要，API 发挥着至关重要的作用。事实上，API 主导了今天的数字体验，平均每个月有 220 个新的 API 发布，比过去四年增加了 30%。

随着越来越多的组织转向 API 优先的开发策略，以进一步推动创新、合作伙伴关系和丰富的最终用户体验，API 需求和消费的激增会带来自身的挑战，如果不从一开始就正确执行的话。在不断增加的开发和发布 API 以保持竞争力的热潮中，我们看到了几个常见问题的出现——通常是在 API 推出之后——这些问题对集成、未来的合作机会和最终用户体验产生了负面影响。请继续阅读，了解这些常见的挑战，以及在您发布下一个 API 之前如何应对这些挑战。

## **基础设施成本**

API 设计面临的最大挑战之一是管理成本的能力，尤其是基础设施成本。从管理多个网关服务器和实例，到从头开始构建一个完整的 API 管理程序，我们看到当今组织在设计 API 时部署了许多常见的基础架构方法，这些方法导致了不必要且通常难以控制的费用。

避免基础设施成本螺旋上升的关键是利用单一网关来部署、管理、保护和交付跨不同数据中心的全球 API 流量。通过使用这种方法，组织可以减少管理和同步服务器所花费的工时；通过消除管理多个网关实例的需要来提高可靠性；治理 API，无需构建和维护单独的 API 管理平台；并消除区域网关复制。

通过在设计项目开始时考虑 API 网关，以确保以 API 为中心的操作(如身份验证、授权和节流)在边缘发生，组织可以主动控制成本并避免财务意外。

## **刻度**

对于开发人员来说，最糟糕的事情莫过于拥有一个非常成功的 API，却无法扩展以满足需求。

在过程的早期处理可伸缩性可以帮助定义 API 的早期采用、未来成功和生命周期。然而，组织通常忽略了以多种方式管理可扩展性的需求，包括规划 API 流量的激增和管理消费者可以发出的 API 请求量，这可能会导致用户体验受损。

开发人员应该在边缘结合负载测试、身份验证、节流、配额管理和 API 缓存来提高和预测流量，同时防止基础设施被请求淹没，以确保消费者的可用性和可靠性。早期内置负载测试可以帮助开发人员确定当请求激增时应用程序可以承受的流量。

配额管理有助于实施业务服务级别协议，并限制合作伙伴可以发出的 API 请求数量。谈到 API 缓存，一些好的起点包括:任何可通过 HTTP GET 访问的资源、静态数据、不可变响应、不经常改变或可预测的响应以及频繁请求的数据。

## **安全**

虽然 API 开发的商业价值显而易见，但现实是 API 可能会带来巨大的网络安全风险。首先，API 可以让我们一窥应用程序实现的后端，甚至它所连接的数据库，从而为黑客提供了新的攻击途径。作为多个应用程序之间的通信桥梁，不受保护的 API 还会增加组织的攻击面，并使其暴露于停机和恶意攻击，包括合法用户的无意滥用。

保护 API 的关键是采用多管齐下的方法在基础架构级别纳入安全性，包括利用 API 网关轻松验证、授权和控制合法 API 消费者的访问(并阻止合法用户)，以及针对恶意流量的端点保护。此外，速率限制——对 API 消费者每分钟或每秒钟可以发出的请求数量进行限制——可以防止对手过载 origin，以 DDoS 攻击的形式破坏 API 基础设施。

## **组织分权**

随着速度和敏捷性呈指数级增长，API 开发从微服务发展到纳米服务，单个团队成员拥有的组件感觉越来越小，很容易看到团队如何在组织上分裂。虽然自治对于使开发过程快速流动是重要的，但是分散化正在今天的许多组织中产生主要的治理和沟通问题。

这种治理的缺乏带来了与配置可见性、跨实施的更改和重复相关的挑战，可能会导致资源浪费、数据泄漏等。组织应该考虑使用单个网关，该网关可以在多个不同的实现中公开 API，而且还可以提供适当的隔离，以便在请求发生时不会影响其他 API 的性能，同时还可以提供单独的控制页面以及为每个 API 设置不同的授权和访问规则的能力。其思想是，API 以同样的分散方式进行管理，这是在集中式基础架构和治理策略下满足速度和敏捷性要求所必需的。

战略性 API 设计不是一项简单的任务，但是对于希望 API 长期成功的组织来说，它是绝对关键的。通过寻求经济高效的基础设施、利用工具来确保可扩展性、构建安全协议、实践和策略，以及采取措施在早期更集中地管理 API 设计流程，将确保 API 的长寿，推动强大的合作伙伴关系，并最终提供更好的用户体验。

![](../Images/c874a63721f45e7fe6c161964cd6c895.png)

*本文由 Akamai 产品营销总监 Anthony Larkin 合著。Anthony 负责 Akamai 高性能产品组合的上市战略。在 Akamai 的 11 年多时间里，他一直致力于帮助企业消除障碍，释放潜力，通过网络和移动应用程序更好地吸引用户。*

— [希德·法德卡](https://devops.com/author/sid-phadkar/)