# 面向 Salesforce 的开发运维:CI/CD 挑战

> 原文:[https://devops.com/what-is-devops-for-salesforce/](https://devops.com/what-is-devops-for-salesforce/)

DevOps 包含各种各样的技术和社会实践，用于改进 IT 系统的开发、交付和运营。 [Salesforce](https://www.salesforce.com) 已经不仅仅是一个 CRM 系统；它演变成了一个全功能的生态系统和一个低代码平台，使得开发比传统的基于代码的平台更简单、更容易接近。跨职能团队基于 Salesforce 创建自定义应用程序并与其他企业系统集成，而不需要 Java 等传统技术常见的严格方法。

现在，[sales force](https://devops.com/salesforce-pilots-series-of-devops-initiatives/)的 DevOps 已经出现，使团队能够更快地构建应用程序。随着团队在 Salesforce 平台上构建越来越多的自定义内容，复杂程度也在激增。开发运维已经成为团队控制这种复杂性的关键能力。

### 部署的主要挑战

大多数 Salesforce 团队面临的主要挑战是部署。Salesforce 上的部署不仅仅是移动文件的问题，它们需要对数以千计的 XML 文件进行复杂的管理，并仔细管理依赖关系。 许多 商业公司已经出现来帮助管理 Salesforce 开发生命周期，并且 Salesforce 开发体验(DX)计划已经为团队实现现有流程的自动化和采用新工作流提供了更多的可能性。

对更结构化和更严格的 Salesforce 开发方法的需求增加了团队向传统软件开发和 DevOps 团队学习并了解如何将模块化和持续集成等传统技术应用于 Salesforce 平台的需求。从更广泛的 DevOps 社区到 Salesforce 社区的技术和知识转移仍然是一个活跃的探索领域。

### 并行工作

二十世纪九十年代， 极限 编程(XP)社区对持续集成的采用激发了对自动化测试，尤其是单元测试的强烈兴趣。这允许团队创建彼此工作的精确副本并并行开发。并行工作允许更快的创新，因为工作不需要精确排序。

但是并行工作是有代价的；这些工作流最终需要整合成一个紧密的整体。遵循“瀑布”方法的软件项目可能会延迟集成，直到项目接近尾声。但是随着时间的推移，这些并行的工作流自然会出现分歧，这意味着集成可能需要几个月的时间，并且需要大量的返工。

### 连续交付:独特的实践

持续集成(CI)通过尽早和经常(至少每天)合并工作来避免这个问题。“如果有伤害，就更频繁地做”，这是 CI 世界的一句口头禅，这里的挑战是小批量地解决冲突，而不是让冲突累积。

CI 为软件创造了持续的失败风险，因为在系统的一部分工作的团队可能会对共享组件进行更改，这可能会导致其他团队的代码失败。[自动化测试](https://devops.com/?s=testing)允许在最少人工干预的情况下对功能进行数千次检查和再检查，从而提供了一层保护。创建自动化测试比执行手动测试需要更多的努力，但是重新运行每个测试的成本变得可以忽略不计。 因此， 自动化测试是高速团队的完美解决方案，他们需要快速和持续的方法来确保他们在构建新功能时不会退步。

[持续交付](https://devops.com/continuous-delivery-challenge-looms-large-in-2022/) (CD)是一种独特的实践，经常与 CI 相提并论。Jez Humble 和 Dave Farley 在 2010 年出版的同名书籍普及了连续交付。CD 的实践扩展了 CI 的思想，旨在定期地将代码小批量地部署到产品中；最好至少每天一次。CI 解决了并行开发的风险，而 CD 解决了延迟最终用户反馈的风险。

软件是为解决特定问题而构建的。但是开发者对解决方案的每一次尝试都是一个需要被测试和确认的假设。只有 真正经历过 那个问题的人，才能告诉开发者这些解决方案是否充分。 所以 开发者必须从最终用户那里快速获得反馈，才能对他们所构建的东西有信心。忽视这一实践的团队是在假设和乐观的基础上运作的；他们推迟交付的时间越长，这些假设的风险就越大。当团队没有实践连续交付时，糟糕的采用和用户体验是可以预期的。

### 增加压力

CI 为快速测试增加了压力，而 CD 则显著增加了压力。交付小批量的变更降低了每次变更的风险，并使它们更快、更容易回滚。但是 根据定义，我们 正在改变每天可能被成千上万人使用的生产系统。由 CI 引起的失败可能会浪费开发人员几个小时的时间，并延迟变更的交付。但是由 CD 引起的故障可以阻止成千上万的人做他们的工作，破坏生产数据，暴露安全漏洞，甚至更糟。

当开发人员将他们的工作集成到 CI 中时，目标是运行一组快速的测试，以确认没有重大问题发生。但是交付给生产的工作需要经过一系列全面的测试，以确保它满足所有的功能和结构要求。在瀑布式的项目中，预发布测试可能需要几十个测试人员工作几个月。在连续交付中，团队必须能够在系统的每个层次上执行测试，并且对没有失败发生有足够的信心。

全面的测试需要测试用户界面、测试跨多个系统的流程、使用 API 加载和确认数据、安全测试等等。[连续交付](https://devops.com/?s=continuous+delivery)已经将自动化测试的需求提升到了一个新的水平，并带来了全新的方法，比如金丝雀部署。金丝雀部署是一种右移测试的形式，其中一个特性最初被交付给最终用户的一个小子集，以在向每个人推广之前检查问题。

### 精悍

人们常说，在 DevOps 取得成功的主要驱动力是文化。首字母缩写 CALMS 用来概括 DevOps 的五个方面:文化、自动化、精益、衡量和共享。

文化 主要指创造一种不断学习和尝试的文化。上述实践不是公式化的，需要一种成长的心态和一种重视心理安全和信息流的文化。

自动化是 devo PS最常强调的方面(包括这里所写的)。 自动化 带来了惊人的 效率，而 是技术的核心奇迹，但是如果不解决开发运维的其他方面，自动化并不是万能的。

精益 指的是 20 世纪 30 年代由丰田开创，并在 20 世纪 80 年代末和 90 年代进一步发展和建立的制造实践。精益的本质是通过理解和优化价值流，用更少的资源做更多的事情，而价值流是 实际执行 的工作。

衡量 指采用数据驱动的方法进行优化的重要性。度量为团队提供了衡量过程改进是否有效的方法。

最后， 分享 指个人、团队、组织之间分享信息、做法、资源的重要性。