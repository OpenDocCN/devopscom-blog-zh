# 说应用程序语言

> 原文:[https://devops.com/speaking-the-language-of-applications/](https://devops.com/speaking-the-language-of-applications/)

我很早就去参加了一个会议，美国电话电报公司愉快的保安建议我在等待的时候去参观一下他们的创新博物馆。在电影声音技术和穿着旱冰鞋的总机接线员真人大小的照片中，有一个晶体管的原型。晶体管是 1947 年在贝尔实验室发明的，它改变了世界。史蒂夫·沃兹尼亚克在他 2014 年的文章中认为这是有史以来最伟大的创新。

但是几乎没有人再需要考虑晶体管了。晶体管必须变得透明和抽象，这样下一代才能在更高的层次上创造伟大的东西。晶体管作为一种使能因素对我们的生活产生了巨大影响，但如果人们不得不一直谈论晶体管，那就不可能了。

抽象技术是向更高层次发展的关键，使解决实际业务问题成为可能。

以客户为中心的企业的语言是应用程序。如今，如果我们想让业务执行得更快，我们需要让其应用程序的开发和发布执行得更快。但是有一件事阻碍了我们:基础设施。应用程序驻留在基础架构上–它们安装在服务器上，捆绑在容器中，在云实例上，在网络中，使用存储。

如果我们想说应用程序的语言，我们需要将它们从基础设施中抽象出来，并使基础设施透明。

抽象应用程序的概念是我们周围每一种新的应用程序开发和发布方法的基础。

*   容器就是从特定的基础设施中抽象出服务，并使其可移动。
*   无服务器将它发挥到了极致。
*   公共云使人们更容易不必担心拥有物理基础架构。

技术尖叫道，“想想应用程序，很快你就不用担心基础设施了！”

然而，当我们试图自动化应用程序和基础设施时，大多数人都以不健康的方式将它们混合在一起。这是不健康的，因为混合应用程序和基础设施阻止了自动化资产的重用，并且使得很难将基础设施的使用与业务上下文联系起来。

要理解如何混合应用程序和基础设施，需要回顾基础设施和应用程序自动化的发展。

## **基础设施的发展:手动部署及其自动化的开始**

一开始是手动的。我们有一台服务器。它在架子上。我们得到了应用程序工件，可能在 CD 或 u 盘上。我们在服务器上安装了应用程序。我们的应用程序已经可以使用了。当我们需要升级时，我们回到架子上，在我们的服务器上安装更新。很难让这个操作更快。

这是应用和基础设施自动化的起点。

![](../Images/d3f9c0f943a4270f740648b58a5101aa.png)

任何自动化工具或标准背后都有一个模型。这个模型反映了它的创造者最初是如何看待他们试图解决的问题的。它包括他们定义为一等公民的实体，他们想要对这些实体应用的操作，以及它们的属性。

“所有的模型都是错误的，有些是有用的，”乔治·e·p·博克斯在 1976 年说。对于自动化模型来说也是如此。当我们开始的时候，自动化模型通常是漂亮和干净的。但是随着我们试图解决的问题的转变，我们的模型需要成长和适应。直到某个时候它们不再有用，我们需要用下一代建模方法来代替它们。

## **配置管理模式**

Puppet 和 Chef 等配置管理工具最初是为了管理静态基础设施上的应用程序部署和配置而构建的。这种新的运营方法优化了手动更新服务器上的应用程序。更好的网络连接使得这种模式能够蓬勃发展，能够远程配置服务器上的应用程序。

但在十年内，我们见证了不可改变的基础设施的快速崛起。不可变基础设施是一种部署应用程序的方法，其中基础设施组件被替换而不是更新。这种方法有点脱离了配置管理模型。每次更新或更改时，都必须重新部署应用程序。这迫使向配置管理模型添加动态基础架构供应。将基础设施自动化和不可变的基础设施概念结合到配置管理模型中是一项艰巨的任务，因为该模型从未被设计为适应这样的事情。

![](../Images/a55e3292febcb08d98caeb0354370d18.png)

## **基础设施即代码模型**

纯基础设施即代码工具旨在动态配置基础设施。Terraform 是开源工具在这方面做得很好的一个例子。这种模式是在考虑基础设施的情况下创建的。

无论我们研究 Terraform、AWS、CloudFormation 还是 ARM 模板，我们都会看到基础设施是起点(定义网络连接、虚拟机实例和服务),而应用程序是隐含的附加物。它们是碰巧部署在基础设施上并且与基础设施紧密耦合的工件。我们可能会看到一个名为“应用 A”的组件，但它实际上代表“安装了应用 A 的特定基础架构”

这看起来很自然，因为这和以前的物理基础设施世界是一样的:我们拿一个盒子，在上面安装一些东西。我们关注基础设施，因为这是我们的起点。应用程序是我们放在基础设施上的工件，并且是我们在配置之后运行的脚本。据推测，应用程序离不开某些东西。

基础设施即代码工具以开放工具的方式发展——它们的基本模型被社区扩展，因为需要自动化应用部署，而不仅仅是基础设施。但是，扩展这种模型以反映应用程序在集群服务器之间移动的世界变得越来越困难，起点不再是基础设施，而是应用程序的需求。

![](../Images/894fb4e3180b720c069003c9c4afed7d.png)

## **混合基础设施和应用**

试图将基础架构供应和应用程序部署整合到一个模型中会产生问题，而该模型最初只是为其中一个模型而设计的。基础设施比应用程序更低级。应用程序驻留在基础架构上。相同的应用程序可以驻留在不同的基础架构配置上。如果你把它们混在一起，这种关键关系就完全变平了。

此外，从商业角度来看，使应用程序显式化是很重要的。这是我们的产品。我们的网站。我们的移动应用。应用程序需要成为关注和讨论的中心。这种建模将应用程序置于基础设施的阴影之下。

## **将应用程序建模为一等公民的四大理由**

我们今天使用的模式已经被打破了，是时候进化了。无论您的应用程序是驻留在容器中，还是驻留在云实例上，或者包含原生云服务还是它们的混合。应用程序应该是一等公民，而不是在我们开始的基础设施上安装的一些事后产物。

应用程序应该从基础架构中抽象出来的概念并没有消除基础架构供应和应用程序部署的所有挑战，但它为更好、更可扩展的自动化奠定了基础。

**1。** **实现应用重用**

将应用程序建模为一等公民是使应用程序在整个开发和发布管道中成为可重用元素的唯一方法。

如果说我在自动化之旅中学到了什么的话，那就是如果自动化没有得到频繁和持续的重用，你的钱就没有价值。

**2。** **通向多云的道路**

抽象应用程序也是在云提供商之间转移应用程序工作负载的最佳方法。如果一切从基础设施开始，我们搬家就需要从头开始。如果我们的应用程序被分别抽象和定义——当我们迁移时，这个定义保持不变，只有基础设施发生变化。

**3。** **打破筒仓之路**

Dev、Sec 和 Ops 都处理同一种语言(代码)的愿景是美好的。但是将每个人带到同一个代码池并不总是容易的。应用程序和基础设施不是一回事，尽管我们可以对两者都进行编码。将它们混合在一起会使构建和故障排除变得不必要的困难。当涉及到对代码的责任时，它迫使我们处理模糊的边界。将自动化建立在以不同利益相关者能够理解的方式组织世界的模型基础上，可以帮助克服这个障碍。

**4。** **将基础设施与业务需求联系起来**

基础设施即代码是一个巨大的突破，但更大的故事是让应用程序开发和发布更快。这并没有削弱基础设施的重要性；基础设施是一切的基础。但是如果我们想解决业务问题，我们需要使用业务语言，这就是应用程序的语言。我们的[自动化](https://devops.com/using-automation-to-control-cloud-costs/)应该以反映这一点的方式构建。

![](../Images/17705d075bac1cad68816455733bba3a.png)

— [玛雅·贝尔·勒纳](https://devops.com/author/maya-ber-lerner/)