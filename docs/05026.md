# 代码中特性标志的使用:标志太多？

> 原文:[https://devo PS . com/the-use-of-feature-flags-in-code-too-many-flags/](https://devops.com/the-use-of-feature-flags-in-code-too-many-flags/)

观察一个想法随着时间的推移而成长是一件有趣的事情。在代码中使用标志来做不同事情的想法和编程本身一样古老。老派的配置文件使用了它们，而且它们有效，所以它们被改编了。

事实是，给定一个可行的想法，人类不可避免地走得太远，控制软件行为的标志似乎已经达到了这一点。如果您使用一组标志进行 A/B 测试，使用另一组标志在运行时隔离开发中的代码，使用另一组标志为一些用户而不是其他用户打开功能，使用另一组标志隐藏基于用户的数据……您就陷入了不必要的代码分支中。如果您的组织不善于在不再需要标志后进行清理，那么您正在构建未来的开发人员不会感谢您的面条式代码。

应对这一日益增长的负担的最佳答案是专注。在您的环境中，[特性标志](https://devops.com/the-relationship-between-feature-flags-and-devops/) /toggles 的最佳用途是什么？他们当然会通过在夜间构建时将代码放在那里来加速交付过程，只是在标记翻转之前不会执行。这也有助于部署，因为它允许操作员通过更改配置而不是重新部署应用程序来打开准备就绪的功能。

对于 A/B 测试，在许多情况下，在负载均衡器上处理切换更有意义，这里它也是一个配置，但是单独的实例服务于相关的 UI。像所有关于旗帜的决定一样，这应该基于变化的数量。更改列表的内容可能更容易用标志来测试，但是大量的更改可能最好单独运行并关闭负载平衡器。

源的变化量也是如此。首次展示可能是处理大量变更的最佳选择，而功能标志可能只会增加复杂性。

和所有事情一样，用一个在你的环境中最有效的计划来解决问题。不可否认，打开一个新功能，然后在出现问题时关闭它的能力很有吸引力，只要明智地使用这个想法。自己收拾干净。没有一个广泛使用标记的商店会说“是的，我们没有清理它”，因为对标记的嵌套检查会降低代码的速度，随着时间的推移，甚至会使代码难以阅读，更不用说维护了。因此，从一开始就用“它是一个工具，当它不再服务于它的预期目的时(这个特性完全是活的或被放弃的)，我们就移除它。”

继续摇摆。你是商业的引擎，这就是你所做的。让它变得伟大并保持运转。

唐·麦克维蒂